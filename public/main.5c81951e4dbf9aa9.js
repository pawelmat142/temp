"use strict";var M6=Object.defineProperty,x6=Object.defineProperties,R6=Object.getOwnPropertyDescriptors,F2=Object.getOwnPropertySymbols,O6=Object.prototype.hasOwnProperty,k6=Object.prototype.propertyIsEnumerable,L2=(it,we,k)=>we in it?M6(it,we,{enumerable:!0,configurable:!0,writable:!0,value:k}):it[we]=k,B2=(it,we)=>{for(var k in we||(we={}))O6.call(we,k)&&L2(it,k,we[k]);if(F2)for(var k of F2(we))k6.call(we,k)&&L2(it,k,we[k]);return it},V2=(it,we)=>x6(it,R6(we));(self.webpackChunkhtml_translator=self.webpackChunkhtml_translator||[]).push([[179],{2011:(it,we,k)=>{k.d(we,{Dh:()=>ce,GT:()=>_e,cc:()=>Ne,hO:()=>Ke,on:()=>$,pX:()=>ue,xv:()=>ye});var u=k(5e3),V=k(127),R=k(5813);it=k.hmd(it);const ae=["ngOnDestroy"],ue=(Se,ze,Ze,Me={})=>new Proxy(Se,{get:(xe,Ee)=>Ze.runOutsideAngular(()=>{var Ye;if(Se[Ee])return(null===(Ye=null==Me?void 0:Me.spy)||void 0===Ye?void 0:Ye.get)&&Me.spy.get(Ee,Se[Ee]),Se[Ee];if(ae.indexOf(Ee)>-1)return()=>{};const ne=ze.toPromise().then(fe=>{const Ce=fe&&fe[Ee];return"function"==typeof Ce?Ce.bind(fe):Ce&&Ce.then?Ce.then(J=>Ze.run(()=>J)):Ze.run(()=>Ce)});return new Proxy(()=>{},{get:(fe,Ce)=>ne[Ce],apply:(fe,Ce,J)=>ne.then(re=>{var oe;const be=re&&re(...J);return(null===(oe=null==Me?void 0:Me.spy)||void 0===oe?void 0:oe.apply)&&Me.spy.apply(Ee,J,be),be})})})}),_e=(Se,ze)=>{ze.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(Me=>{Object.defineProperty(Se.prototype,Me,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,Me))})})};class pe{constructor(ze){return ze}}const ce=new u.OlP("angularfire2.app.options"),ye=new u.OlP("angularfire2.app.name");function $(Se,ze,Ze){const xe="object"==typeof Ze&&Ze||{};xe.name=xe.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const Ye=V.Z.apps.filter(ne=>ne&&ne.name===xe.name)[0]||ze.runOutsideAngular(()=>V.Z.initializeApp(Se,xe));try{JSON.stringify(Se)!==JSON.stringify(Ye.options)&&j("error",`${Ye.name} Firebase App already initialized with different options${it.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ne){}return new pe(Ye)}const j=(Se,...ze)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[Se](...ze)},ie={provide:pe,useFactory:$,deps:[ce,u.R0b,[new u.FiY,ye]]};let Ke=(()=>{class Se{constructor(Ze){V.Z.registerVersion("angularfire",R.q4.full,"core"),V.Z.registerVersion("angularfire",R.q4.full,"app-compat"),V.Z.registerVersion("angular",u.q4F.full,Ze.toString())}static initializeApp(Ze,Me){return{ngModule:Se,providers:[{provide:ce,useValue:Ze},{provide:ye,useValue:Me}]}}}return Se.\u0275fac=function(Ze){return new(Ze||Se)(u.LFG(u.Lbi))},Se.\u0275mod=u.oAB({type:Se}),Se.\u0275inj=u.cJS({providers:[ie]}),Se})();function Ne(Se,ze,Ze,Me,xe){const[,Ee,Ye]=globalThis.\u0275AngularfireInstanceCache.find(ne=>ne[0]===Se)||[];if(Ee)return function Le(Se,ze){try{return Se.toString()===ze.toString()}catch(Ze){return Se===ze}}(xe,Ye)||(me("error",`${ze} was already initialized on the ${Ze} Firebase App with different settings.${$e?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:xe,was:Ye})),Ee;{const ne=Me();return globalThis.\u0275AngularfireInstanceCache.push([Se,ne,xe]),ne}}const $e=!!it.hot,me=(Se,...ze)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[Se](...ze)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(it,we,k)=>{k.d(we,{q4:()=>gc,iC:()=>au,HU:()=>su,vb:()=>_l,JM:()=>qo});var u=k(5e3),V=k(5867),R=k(5861),ae=k(9681),ue=k(2090),_e=k(4859),pe=k(1877),ce=k(8766);const ye="@firebase/installations",$="0.5.9",ie=`w:${$}`,Ke="FIS_v2",ze=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ze(E){return E instanceof ue.ZR&&E.code.includes("request-failed")}function Me({projectId:E}){return`https://firebaseinstallations.googleapis.com/v1/projects/${E}/installations`}function xe(E){return{token:E.token,requestStatus:2,expiresIn:re(E.expiresIn),creationTime:Date.now()}}function Ee(E,C){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,R.Z)(function*(E,C){const B=(yield C.json()).error;return ze.create("request-failed",{requestName:E,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function ne({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function fe(E,{refreshToken:C}){const x=ne(E);return x.append("Authorization",function oe(E){return`${Ke} ${E}`}(C)),x}function Ce(E){return J.apply(this,arguments)}function J(){return(J=(0,R.Z)(function*(E){const C=yield E();return C.status>=500&&C.status<600?E():C})).apply(this,arguments)}function re(E){return Number(E.replace("s","000"))}function be(E,C){return he.apply(this,arguments)}function he(){return(he=(0,R.Z)(function*({appConfig:E,heartbeatServiceProvider:C},{fid:x}){const B=Me(E),Q=ne(E),le=C.getImmediate({optional:!0});if(le){const St=yield le.getHeartbeatsHeader();St&&Q.append("x-firebase-client",St)}const ot={method:"POST",headers:Q,body:JSON.stringify({fid:x,authVersion:Ke,appId:E.appId,sdkVersion:ie})},ct=yield Ce(()=>fetch(B,ot));if(ct.ok){const St=yield ct.json();return{fid:St.fid||x,registrationStatus:2,refreshToken:St.refreshToken,authToken:xe(St.authToken)}}throw yield Ee("Create Installation",ct)})).apply(this,arguments)}function Ve(E){return new Promise(C=>{setTimeout(C,E)})}const en=/^[cdef][\w-]{21}$/;function Je(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const x=function un(E){return function yt(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return en.test(x)?x:""}catch(E){return""}}function On(E){return`${E.appName}!${E.appId}`}const gn=new Map;function sn(E,C){const x=On(E);Tn(x,C),function Ui(E,C){const x=function Sn(){return!Ir&&"BroadcastChannel"in self&&(Ir=new BroadcastChannel("[Firebase] FID Change"),Ir.onmessage=E=>{Tn(E.data.key,E.data.fid)}),Ir}();x&&x.postMessage({key:E,fid:C}),function ji(){0===gn.size&&Ir&&(Ir.close(),Ir=null)}()}(x,C)}function Tn(E,C){const x=gn.get(E);if(x)for(const B of x)B(C)}let Ir=null;const Kn="firebase-installations-store";let Hi=null;function bt(){return Hi||(Hi=(0,ce.X3)("firebase-installations-database",1,{upgrade:(E,C)=>{0===C&&E.createObjectStore(Kn)}})),Hi}function Pr(E,C){return bn.apply(this,arguments)}function bn(){return(bn=(0,R.Z)(function*(E,C){const x=On(E),Q=(yield bt()).transaction(Kn,"readwrite"),le=Q.objectStore(Kn),Be=yield le.get(x);return yield le.put(C,x),yield Q.done,(!Be||Be.fid!==C.fid)&&sn(E,C.fid),C})).apply(this,arguments)}function nn(E){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,R.Z)(function*(E){const C=On(E),B=(yield bt()).transaction(Kn,"readwrite");yield B.objectStore(Kn).delete(C),yield B.done})).apply(this,arguments)}function ur(E,C){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,R.Z)(function*(E,C){const x=On(E),Q=(yield bt()).transaction(Kn,"readwrite"),le=Q.objectStore(Kn),Be=yield le.get(x),ot=C(Be);return void 0===ot?yield le.delete(x):yield le.put(ot,x),yield Q.done,ot&&(!Be||Be.fid!==ot.fid)&&sn(E,ot.fid),ot})).apply(this,arguments)}function Dn(E){return cr.apply(this,arguments)}function cr(){return(cr=(0,R.Z)(function*(E){let C;const x=yield ur(E.appConfig,B=>{const Q=Ms(B),le=Zt(E,Q);return C=le.registrationPromise,le.installationEntry});return""===x.fid?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}})).apply(this,arguments)}function Ms(E){return Gi(E||{fid:Je(),registrationStatus:0})}function Zt(E,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(ze.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},B=function mt(E,C){return lt.apply(this,arguments)}(E,x);return{installationEntry:x,registrationPromise:B}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:si(E)}:{installationEntry:C}}function lt(){return(lt=(0,R.Z)(function*(E,C){try{const x=yield be(E,C);return Pr(E.appConfig,x)}catch(x){throw Ze(x)&&409===x.customData.serverCode?yield nn(E.appConfig):yield Pr(E.appConfig,{fid:C.fid,registrationStatus:0}),x}})).apply(this,arguments)}function si(E){return oi.apply(this,arguments)}function oi(){return(oi=(0,R.Z)(function*(E){let C=yield $t(E.appConfig);for(;1===C.registrationStatus;)yield Ve(100),C=yield $t(E.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:B}=yield Dn(E);return B||x}return C})).apply(this,arguments)}function $t(E){return ur(E,C=>{if(!C)throw ze.create("installation-not-found");return Gi(C)})}function Gi(E){return function kn(E){return 1===E.registrationStatus&&E.registrationTime+1e4<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function cn(E,C){return U.apply(this,arguments)}function U(){return(U=(0,R.Z)(function*({appConfig:E,heartbeatServiceProvider:C},x){const B=q(E,x),Q=fe(E,x),le=C.getImmediate({optional:!0});if(le){const St=yield le.getHeartbeatsHeader();St&&Q.append("x-firebase-client",St)}const ot={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:ie,appId:E.appId}})},ct=yield Ce(()=>fetch(B,ot));if(ct.ok)return xe(yield ct.json());throw yield Ee("Generate Auth Token",ct)})).apply(this,arguments)}function q(E,{fid:C}){return`${Me(E)}/${C}/authTokens:generate`}function z(E){return Te.apply(this,arguments)}function Te(){return(Te=(0,R.Z)(function*(E,C=!1){let x;const B=yield ur(E.appConfig,le=>{if(!kt(le))throw ze.create("not-registered");const Be=le.authToken;if(!C&&on(Be))return le;if(1===Be.requestStatus)return x=G(E,C),le;{if(!navigator.onLine)throw ze.create("app-offline");const ot=Yn(le);return x=nt(E,ot),ot}});return x?yield x:B.authToken})).apply(this,arguments)}function G(E,C){return ee.apply(this,arguments)}function ee(){return(ee=(0,R.Z)(function*(E,C){let x=yield ke(E.appConfig);for(;1===x.authToken.requestStatus;)yield Ve(100),x=yield ke(E.appConfig);const B=x.authToken;return 0===B.requestStatus?z(E,C):B})).apply(this,arguments)}function ke(E){return ur(E,C=>{if(!kt(C))throw ze.create("not-registered");return function de(E){return 1===E.requestStatus&&E.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function nt(E,C){return vt.apply(this,arguments)}function vt(){return(vt=(0,R.Z)(function*(E,C){try{const x=yield cn(E,C),B=Object.assign(Object.assign({},C),{authToken:x});return yield Pr(E.appConfig,B),x}catch(x){if(!Ze(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const B=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Pr(E.appConfig,B)}else yield nn(E.appConfig);throw x}})).apply(this,arguments)}function kt(E){return void 0!==E&&2===E.registrationStatus}function on(E){return 2===E.requestStatus&&!function Ct(E){const C=Date.now();return C<E.creationTime||E.creationTime+E.expiresIn<C+36e5}(E)}function Yn(E){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:C})}function W(){return(W=(0,R.Z)(function*(E){const C=E,{installationEntry:x,registrationPromise:B}=yield Dn(C);return B?B.catch(console.error):z(C).catch(console.error),x.fid})).apply(this,arguments)}function Xe(){return(Xe=(0,R.Z)(function*(E,C=!1){const x=E;return yield pt(x),(yield z(x,C)).token})).apply(this,arguments)}function pt(E){return xt.apply(this,arguments)}function xt(){return(xt=(0,R.Z)(function*(E){const{registrationPromise:C}=yield Dn(E);C&&(yield C)})).apply(this,arguments)}function fa(E){return ze.create("missing-app-config-values",{valueName:E})}const Kr="installations",Lt=E=>{const C=E.getProvider("app").getImmediate(),x=function dr(E){if(!E||!E.options)throw fa("App Configuration");if(!E.name)throw fa("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!E.options[x])throw fa(x);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,ae._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},yn=E=>{const C=E.getProvider("app").getImmediate(),x=(0,ae._getProvider)(C,Kr).getImmediate();return{getId:()=>function K(E){return W.apply(this,arguments)}(x),getToken:Q=>function Ae(E){return Xe.apply(this,arguments)}(x,Q)}};(function Lr(){(0,ae._registerComponent)(new _e.wA(Kr,Lt,"PUBLIC")),(0,ae._registerComponent)(new _e.wA("installations-internal",yn,"PRIVATE"))})(),(0,ae.registerVersion)(ye,$),(0,ae.registerVersion)(ye,$,"esm2017");const ss="@firebase/remote-config",Pn=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class xo{constructor(C,x,B,Q){this.client=C,this.storage=x,this.storageCache=B,this.logger=Q}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-x,Q=B<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${Q}.`),Q}fetch(C){var x=this;return(0,R.Z)(function*(){const[B,Q]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Q&&x.isCachedDataFresh(C.cacheMaxAgeMillis,B))return Q;C.eTag=Q&&Q.eTag;const le=yield x.client.fetch(C),Be=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&Be.push(x.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(Be),le})()}}function il(E=navigator){return E.languages&&E.languages[0]||E.language}class Jn{constructor(C,x,B,Q,le,Be){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=B,this.projectId=Q,this.apiKey=le,this.appId=Be}fetch(C){var x=this;return(0,R.Z)(function*(){const[B,Q]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Be=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,ot={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},ct={sdk_version:x.sdkVersion,app_instance_id:B,app_instance_id_token:Q,app_id:x.appId,language_code:il()},St={method:"POST",headers:ot,body:JSON.stringify(ct)},Qt=fetch(Be,St),Et=new Promise((er,Qi)=>{C.signal.addEventListener(()=>{const po=new Error("The operation was aborted.");po.name="AbortError",Qi(po)})});let wr;try{yield Promise.race([Qt,Et]),wr=yield Qt}catch(er){let Qi="fetch-client-network";throw"AbortError"===er.name&&(Qi="fetch-timeout"),Pn.create(Qi,{originalErrorMessage:er.message})}let Nn=wr.status;const Wo=wr.headers.get("ETag")||void 0;let Mn,Cn;if(200===wr.status){let er;try{er=yield wr.json()}catch(Qi){throw Pn.create("fetch-client-parse",{originalErrorMessage:Qi.message})}Mn=er.entries,Cn=er.state}if("INSTANCE_STATE_UNSPECIFIED"===Cn?Nn=500:"NO_CHANGE"===Cn?Nn=304:("NO_TEMPLATE"===Cn||"EMPTY_CONFIG"===Cn)&&(Mn={}),304!==Nn&&200!==Nn)throw Pn.create("fetch-status",{httpStatus:Nn});return{status:Nn,eTag:Wo,config:Mn}})()}}class as{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,R.Z)(function*(){const B=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,B)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:B}){var Q=this;return(0,R.Z)(function*(){yield function Hu(E,C){return new Promise((x,B)=>{const Q=Math.max(C-Date.now(),0),le=setTimeout(x,Q);E.addEventListener(()=>{clearTimeout(le),B(Pn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const le=yield Q.client.fetch(C);return yield Q.storage.deleteThrottleMetadata(),le}catch(le){if(!function Rf(E){if(!(E instanceof ue.ZR&&E.customData))return!1;const C=Number(E.customData.httpStatus);return 429===C||500===C||503===C||504===C}(le))throw le;const Be={throttleEndTimeMillis:Date.now()+(0,ue.$s)(B),backoffCount:B+1};return yield Q.storage.setThrottleMetadata(Be),Q.attemptFetch(C,Be)}})()}}class kf{constructor(C,x,B,Q,le){this.app=C,this._client=x,this._storageCache=B,this._storage=Q,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function pa(E,C){const x=E.target.error||void 0;return Pn.create(C,{originalErrorMessage:x&&x.message})}const Ro="app_namespace_store";class $u{constructor(C,x,B,Q=function Ff(){return new Promise((E,C)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=B=>{C(pa(B,"storage-open"))},x.onsuccess=B=>{E(B.target.result)},x.onupgradeneeded=B=>{0===B.oldVersion&&B.target.result.createObjectStore(Ro,{keyPath:"compositeKey"})}}catch(x){C(Pn.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=C,this.appName=x,this.namespace=B,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,R.Z)(function*(){const B=yield x.openDbPromise;return new Promise((Q,le)=>{const ot=B.transaction([Ro],"readonly").objectStore(Ro),ct=x.createCompositeKey(C);try{const St=ot.get(ct);St.onerror=Qt=>{le(pa(Qt,"storage-get"))},St.onsuccess=Qt=>{const Et=Qt.target.result;Q(Et?Et.value:void 0)}}catch(St){le(Pn.create("storage-get",{originalErrorMessage:St&&St.message}))}})})()}set(C,x){var B=this;return(0,R.Z)(function*(){const Q=yield B.openDbPromise;return new Promise((le,Be)=>{const ct=Q.transaction([Ro],"readwrite").objectStore(Ro),St=B.createCompositeKey(C);try{const Qt=ct.put({compositeKey:St,value:x});Qt.onerror=Et=>{Be(pa(Et,"storage-set"))},Qt.onsuccess=()=>{le()}}catch(Qt){Be(Pn.create("storage-set",{originalErrorMessage:Qt&&Qt.message}))}})})()}delete(C){var x=this;return(0,R.Z)(function*(){const B=yield x.openDbPromise;return new Promise((Q,le)=>{const ot=B.transaction([Ro],"readwrite").objectStore(Ro),ct=x.createCompositeKey(C);try{const St=ot.delete(ct);St.onerror=Qt=>{le(pa(Qt,"storage-delete"))},St.onsuccess=()=>{Q()}}catch(St){le(Pn.create("storage-delete",{originalErrorMessage:St&&St.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class Oo{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,R.Z)(function*(){const x=C.storage.getLastFetchStatus(),B=C.storage.getLastSuccessfulFetchTimestampMillis(),Q=C.storage.getActiveConfig(),le=yield x;le&&(C.lastFetchStatus=le);const Be=yield B;Be&&(C.lastSuccessfulFetchTimestampMillis=Be);const ot=yield Q;ot&&(C.activeConfig=ot)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function ym(){return ga.apply(this,arguments)}function ga(){return(ga=(0,R.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch(E){return!1}})).apply(this,arguments)}!function Lf(){(0,ae._registerComponent)(new _e.wA("remote-config",function E(C,{instanceIdentifier:x}){const B=C.getProvider("app").getImmediate(),Q=C.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Pn.create("registration-window");if(!(0,ue.hl)())throw Pn.create("indexed-db-unavailable");const{projectId:le,apiKey:Be,appId:ot}=B.options;if(!le)throw Pn.create("registration-project-id");if(!Be)throw Pn.create("registration-api-key");if(!ot)throw Pn.create("registration-app-id");const ct=new $u(ot,B.name,x=x||"firebase"),St=new Oo(ct),Qt=new pe.Yd(ss);Qt.logLevel=pe.in.ERROR;const Et=new Jn(Q,ae.SDK_VERSION,x,le,Be,ot),wr=new as(Et,ct),Nn=new xo(wr,ct,St,Qt),Wo=new kf(B,Nn,St,ct,Qt);return function dn(E){const C=(0,ue.m9)(E);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Wo),Wo},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(ss,"0.3.8"),(0,ae.registerVersion)(ss,"0.3.8","esm2017")}();const Os="/firebase-messaging-sw.js",ui="/firebase-cloud-messaging-push-scope",ko="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",_a="google.c.a.c_id",Nd="google.c.a.c_l",Bf="google.c.a.ts",Qn="google.c.a.e";var us=(()=>{return(E=us||(us={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",us;var E})();function Ii(E){const C=new Uint8Array(E);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Wu(E){const x=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(x),Q=new Uint8Array(B.length);for(let le=0;le<B.length;++le)Q[le]=B.charCodeAt(le);return Q}const mr="fcm_token_details_db",Zu="fcm_token_object_Store";function zu(E){return ol.apply(this,arguments)}function ol(){return ol=(0,R.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(mr))return null;let C=null;return(yield(0,ce.X3)(mr,5,{upgrade:(B=(0,R.Z)(function*(Q,le,Be,ot){var ct;if(le<2||!Q.objectStoreNames.contains(Zu))return;const St=ot.objectStore(Zu),Qt=yield St.index("fcmSenderId").get(E);if(yield St.clear(),Qt)if(2===le){const Et=Qt;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;C={token:Et.fcmToken,createTime:null!==(ct=Et.createTime)&&void 0!==ct?ct:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:Ii(Et.vapidKey)}}}else if(3===le){const Et=Qt;C={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Ii(Et.auth),p256dh:Ii(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Ii(Et.vapidKey)}}}else if(4===le){const Et=Qt;C={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Ii(Et.auth),p256dh:Ii(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Ii(Et.vapidKey)}}}}),function(le,Be,ot,ct){return B.apply(this,arguments)})})).close(),yield(0,ce.Lj)(mr),yield(0,ce.Lj)("fcm_vapid_details_db"),yield(0,ce.Lj)("undefined"),al(C)?C:null;var B}),ol.apply(this,arguments)}function al(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:C}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const cs="firebase-messaging-store";let Gl=null;function mn(){return Gl||(Gl=(0,ce.X3)("firebase-messaging-database",1,{upgrade:(E,C)=>{0===C&&E.createObjectStore(cs)}})),Gl}function ya(E){return ks.apply(this,arguments)}function ks(){return(ks=(0,R.Z)(function*(E){const C=hr(E),B=yield(yield mn()).transaction(cs).objectStore(cs).get(C);if(B)return B;{const Q=yield zu(E.appConfig.senderId);if(Q)return yield hn(E,Q),Q}})).apply(this,arguments)}function hn(E,C){return ul.apply(this,arguments)}function ul(){return(ul=(0,R.Z)(function*(E,C){const x=hr(E),Q=(yield mn()).transaction(cs,"readwrite");return yield Q.objectStore(cs).put(C,x),yield Q.done,C})).apply(this,arguments)}function va(E){return eo.apply(this,arguments)}function eo(){return(eo=(0,R.Z)(function*(E){const C=hr(E),B=(yield mn()).transaction(cs,"readwrite");yield B.objectStore(cs).delete(C),yield B.done})).apply(this,arguments)}function hr({appConfig:E}){return E.appId}const Fn=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ds(E,C){return fr.apply(this,arguments)}function fr(){return(fr=(0,R.Z)(function*(E,C){const x=yield Fs(E),B=to(C),Q={method:"POST",headers:x,body:JSON.stringify(B)};let le;try{le=yield(yield fetch(Ps(E.appConfig),Q)).json()}catch(Be){throw Fn.create("token-subscribe-failed",{errorInfo:Be})}if(le.error)throw Fn.create("token-subscribe-failed",{errorInfo:le.error.message});if(!le.token)throw Fn.create("token-subscribe-no-token");return le.token})).apply(this,arguments)}function Po(E,C){return qi.apply(this,arguments)}function qi(){return(qi=(0,R.Z)(function*(E,C){const x=yield Fs(E),B=to(C.subscriptionOptions),Q={method:"PATCH",headers:x,body:JSON.stringify(B)};let le;try{le=yield(yield fetch(`${Ps(E.appConfig)}/${C.token}`,Q)).json()}catch(Be){throw Fn.create("token-update-failed",{errorInfo:Be})}if(le.error)throw Fn.create("token-update-failed",{errorInfo:le.error.message});if(!le.token)throw Fn.create("token-update-no-token");return le.token})).apply(this,arguments)}function $l(E,C){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,R.Z)(function*(E,C){const B={method:"DELETE",headers:yield Fs(E)};try{const le=yield(yield fetch(`${Ps(E.appConfig)}/${C}`,B)).json();if(le.error)throw Fn.create("token-unsubscribe-failed",{errorInfo:le.error.message})}catch(Q){throw Fn.create("token-unsubscribe-failed",{errorInfo:Q})}})).apply(this,arguments)}function Ps({projectId:E}){return`https://fcmregistrations.googleapis.com/v1/projects/${E}/registrations`}function Fs(E){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,R.Z)(function*({appConfig:E,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function to({p256dh:E,auth:C,endpoint:x,vapidKey:B}){const Q={web:{endpoint:x,auth:C,p256dh:E}};return B!==ko&&(Q.web.applicationPubKey=B),Q}const dl=6048e5;function Ku(E){return ba.apply(this,arguments)}function ba(){return(ba=(0,R.Z)(function*(E){const C=yield hl(E.swRegistration,E.vapidKey),x={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:C.endpoint,auth:Ii(C.getKey("auth")),p256dh:Ii(C.getKey("p256dh"))},B=yield ya(E.firebaseDependencies);if(B){if(Ju(B.subscriptionOptions,x))return Date.now()>=B.createTime+dl?Md(E,{token:B.token,createTime:Date.now(),subscriptionOptions:x}):B.token;try{yield $l(E.firebaseDependencies,B.token)}catch(Q){console.warn(Q)}return Oe(E.firebaseDependencies,x)}return Oe(E.firebaseDependencies,x)})).apply(this,arguments)}function Yu(E){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,R.Z)(function*(E){const C=yield ya(E.firebaseDependencies);C&&(yield $l(E.firebaseDependencies,C.token),yield va(E.firebaseDependencies));const x=yield E.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Md(E,C){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,R.Z)(function*(E,C){try{const x=yield Po(E.firebaseDependencies,C),B=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield hn(E.firebaseDependencies,B),x}catch(x){throw yield Yu(E),x}})).apply(this,arguments)}function Oe(E,C){return qt.apply(this,arguments)}function qt(){return(qt=(0,R.Z)(function*(E,C){const B={token:yield ds(E,C),createTime:Date.now(),subscriptionOptions:C};return yield hn(E,B),B.token})).apply(this,arguments)}function hl(E,C){return wn.apply(this,arguments)}function wn(){return(wn=(0,R.Z)(function*(E,C){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Wu(C)})})).apply(this,arguments)}function Ju(E,C){return C.vapidKey===E.vapidKey&&C.endpoint===E.endpoint&&C.auth===E.auth&&C.p256dh===E.p256dh}function hs(E){const C={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function Wi(E,C){if(!C.notification)return;E.notification={};const x=C.notification.title;x&&(E.notification.title=x);const B=C.notification.body;B&&(E.notification.body=B);const Q=C.notification.image;Q&&(E.notification.image=Q)}(C,E),function ql(E,C){!C.data||(E.data=C.data)}(C,E),function wa(E,C){if(!C.fcmOptions)return;E.fcmOptions={};const x=C.fcmOptions.link;x&&(E.fcmOptions.link=x);const B=C.fcmOptions.analytics_label;B&&(E.fcmOptions.analyticsLabel=B)}(C,E),C}function xd(E){return"object"==typeof E&&!!E&&_a in E}function Qu(E,C){const x=[];for(let B=0;B<E.length;B++)x.push(E.charAt(B)),B<C.length&&x.push(C.charAt(B));return x.join("")}function no(E){return Fn.create("missing-app-config-values",{valueName:E})}Qu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Qu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class pr{constructor(C,x,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function Xu(E){if(!E||!E.options)throw no("App Configuration Object");if(!E.name)throw no("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=E;for(const B of C)if(!x[B])throw no(B);return{appName:E.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:Q,installations:x,analyticsProvider:B}}_delete(){return Promise.resolve()}}function Zi(E){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,R.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(Os,{scope:ui}),E.swRegistration.update().catch(()=>{})}catch(C){throw Fn.create("failed-service-worker-registration",{browserErrorMessage:C.message})}})).apply(this,arguments)}function Bo(E,C){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,R.Z)(function*(E,C){if(!C&&!E.swRegistration&&(yield Zi(E)),C||!E.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Fn.create("invalid-sw-registration");E.swRegistration=C}})).apply(this,arguments)}function Rd(E,C){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,R.Z)(function*(E,C){C?E.vapidKey=C:E.vapidKey||(E.vapidKey=ko)})).apply(this,arguments)}function Ta(){return(Ta=(0,R.Z)(function*(E,C){if(!navigator)throw Fn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Fn.create("permission-blocked");return yield Rd(E,null==C?void 0:C.vapidKey),yield Bo(E,null==C?void 0:C.serviceWorkerRegistration),Ku(E)})).apply(this,arguments)}function Wl(E,C,x){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,R.Z)(function*(E,C,x){const B=tc(C);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:x[_a],message_name:x[Nd],message_time:x[Bf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function tc(E){switch(E){case us.NOTIFICATION_CLICKED:return"notification_open";case us.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Zl(){return(Zl=(0,R.Z)(function*(E,C){const x=C.data;if(!x.isFirebaseMessaging)return;E.onMessageHandler&&x.messageType===us.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(hs(x)):E.onMessageHandler.next(hs(x)));const B=x.data;xd(B)&&"1"===B[Qn]&&(yield Wl(E,x.messageType,B))})).apply(this,arguments)}const Da="@firebase/messaging",ro=E=>{const C=new pr(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function nc(E,C){return Zl.apply(this,arguments)}(C,x)),C},rc=E=>{const C=E.getProvider("messaging").getImmediate();return{getToken:B=>function ec(E,C){return Ta.apply(this,arguments)}(C,B)}};function fl(){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,R.Z)(function*(){try{yield(0,ue.eu)()}catch(E){return!1}return"undefined"!=typeof window&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Od(){(0,ae._registerComponent)(new _e.wA("messaging",ro,"PUBLIC")),(0,ae._registerComponent)(new _e.wA("messaging-internal",rc,"PRIVATE")),(0,ae.registerVersion)(Da,"0.9.13"),(0,ae.registerVersion)(Da,"0.9.13","esm2017")}();const ic="analytics",Vf="firebase_id",Ca="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ia="https://www.googletagmanager.com/gtag/js",ir=new pe.Yd("@firebase/analytics");function oc(E){return Promise.all(E.map(C=>C.catch(x=>x)))}function Uf(E,C){const x=document.createElement("script");x.src=`${Ia}?l=${E}&id=${C}`,x.async=!0,document.head.appendChild(x)}function jo(E,C,x,B,Q,le){return ac.apply(this,arguments)}function ac(){return(ac=(0,R.Z)(function*(E,C,x,B,Q,le){const Be=B[Q];try{if(Be)yield C[Be];else{const ct=(yield oc(x)).find(St=>St.measurementId===Q);ct&&(yield C[ct.appId])}}catch(ot){ir.error(ot)}E("config",Q,le)})).apply(this,arguments)}function Kl(E,C,x,B,Q){return so.apply(this,arguments)}function so(){return(so=(0,R.Z)(function*(E,C,x,B,Q){try{let le=[];if(Q&&Q.send_to){let Be=Q.send_to;Array.isArray(Be)||(Be=[Be]);const ot=yield oc(x);for(const ct of Be){const St=ot.find(Et=>Et.measurementId===ct),Qt=St&&C[St.appId];if(!Qt){le=[];break}le.push(Qt)}}0===le.length&&(le=Object.values(C)),yield Promise.all(le),E("event",B,Q||{})}catch(le){ir.error(le)}})).apply(this,arguments)}function Bs(){const E=window.document.getElementsByTagName("script");for(const C of Object.values(E))if(C.src&&C.src.includes(Ia))return C;return null}const dt=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),zi=new class ci{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Bn(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function Vn(E){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,R.Z)(function*(E){var C;const{appId:x,apiKey:B}=E,Q={method:"GET",headers:Bn(B)},le=Ca.replace("{app-id}",x),Be=yield fetch(le,Q);if(200!==Be.status&&304!==Be.status){let ot="";try{const ct=yield Be.json();(null===(C=ct.error)||void 0===C?void 0:C.message)&&(ot=ct.error.message)}catch(ct){}throw dt.create("config-fetch-failed",{httpStatus:Be.status,responseMessage:ot})}return Be.json()})).apply(this,arguments)}function wt(E){return Si.apply(this,arguments)}function Si(){return(Si=(0,R.Z)(function*(E,C=zi,x){const{appId:B,apiKey:Q,measurementId:le}=E.options;if(!B)throw dt.create("no-app-id");if(!Q){if(le)return{measurementId:le,appId:B};throw dt.create("no-api-key")}const Be=C.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ot=new Jl;return setTimeout((0,R.Z)(function*(){ot.abort()}),void 0!==x?x:6e4),Sa({appId:B,apiKey:Q,measurementId:le},Be,ot,C)})).apply(this,arguments)}function Sa(E,C,x){return yr.apply(this,arguments)}function yr(){return(yr=(0,R.Z)(function*(E,{throttleEndTimeMillis:C,backoffCount:x},B,Q=zi){const{appId:le,measurementId:Be}=E;try{yield Hf(B,C)}catch(ot){if(Be)return ir.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Be} provided in the "measurementId" field in the local Firebase config. [${ot.message}]`),{appId:le,measurementId:Be};throw ot}try{const ot=yield Vn(E);return Q.deleteThrottleMetadata(le),ot}catch(ot){if(!lc(ot)){if(Q.deleteThrottleMetadata(le),Be)return ir.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Be} provided in the "measurementId" field in the local Firebase config. [${ot.message}]`),{appId:le,measurementId:Be};throw ot}const ct=503===Number(ot.customData.httpStatus)?(0,ue.$s)(x,Q.intervalMillis,30):(0,ue.$s)(x,Q.intervalMillis),St={throttleEndTimeMillis:Date.now()+ct,backoffCount:x+1};return Q.setThrottleMetadata(le,St),ir.debug(`Calling attemptFetch again in ${ct} millis`),Sa(E,St,B,Q)}})).apply(this,arguments)}function Hf(E,C){return new Promise((x,B)=>{const Q=Math.max(C-Date.now(),0),le=setTimeout(x,Q);E.addEventListener(()=>{clearTimeout(le),B(dt.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function lc(E){if(!(E instanceof ue.ZR&&E.customData))return!1;const C=Number(E.customData.httpStatus);return 429===C||500===C||503===C||504===C}class Jl{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}function Fd(){return oo.apply(this,arguments)}function oo(){return(oo=(0,R.Z)(function*(){if(!(0,ue.hl)())return ir.warn(dt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(E){return ir.warn(dt.create("indexeddb-unavailable",{errorInfo:E}).message),!1}return!0})).apply(this,arguments)}function vr(){return(vr=(0,R.Z)(function*(E,C,x,B,Q,le,Be){var ot;const ct=wt(E);ct.then(Nn=>{x[Nn.measurementId]=Nn.appId,E.options.measurementId&&Nn.measurementId!==E.options.measurementId&&ir.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${Nn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Nn=>ir.error(Nn)),C.push(ct);const St=Fd().then(Nn=>{if(Nn)return B.getId()}),[Qt,Et]=yield Promise.all([ct,St]);Bs()||Uf(le,Qt.measurementId),Q("js",new Date);const wr=null!==(ot=null==Be?void 0:Be.config)&&void 0!==ot?ot:{};return wr.origin="firebase",wr.update=!0,null!=Et&&(wr[Vf]=Et),Q("config",Qt.measurementId,wr),Qt.measurementId})).apply(this,arguments)}class Aa{constructor(C){this.app=C}_delete(){return delete di[this.app.options.appId],Promise.resolve()}}let di={},lo=[];const pl={};let Na,Ai,Vs="dataLayer",Rn=!1;function gs(E,C,x){!function Ma(){const E=[];if((0,ue.ru)()&&E.push("This is a browser extension environment."),(0,ue.zI)()||E.push("Cookies are not available."),E.length>0){const C=E.map((B,Q)=>`(${Q+1}) ${B}`).join(" "),x=dt.create("invalid-analytics-context",{errorInfo:C});ir.warn(x.message)}}();const B=E.options.appId;if(!B)throw dt.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw dt.create("no-api-key");ir.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=di[B])throw dt.create("already-exists",{id:B});if(!Rn){!function ps(E){let C=[];Array.isArray(window[E])?C=window[E]:window[E]=C}(Vs);const{wrappedGtag:le,gtagCore:Be}=function jf(E,C,x,B,Q){let le=function(...Be){window[B].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(le=window[Q]),window[Q]=function Yl(E,C,x,B){function le(){return(le=(0,R.Z)(function*(Be,ot,ct){try{"event"===Be?yield Kl(E,C,x,ot,ct):"config"===Be?yield jo(E,C,x,B,ot,ct):E("set",ot)}catch(St){ir.error(St)}})).apply(this,arguments)}return function Q(Be,ot,ct){return le.apply(this,arguments)}}(le,E,C,x),{gtagCore:le,wrappedGtag:window[Q]}}(di,lo,pl,Vs,"gtag");Ai=le,Na=Be,Rn=!0}return di[B]=function ao(E,C,x,B,Q,le,Be){return vr.apply(this,arguments)}(E,lo,pl,C,Na,Vs,x),new Aa(E)}function Ho(){return(Ho=(0,R.Z)(function*(E,C,x,B,Q){if(Q&&Q.global)E("event",x,B);else{const le=yield C;E("event",x,Object.assign(Object.assign({},B),{send_to:le}))}})).apply(this,arguments)}function Ra(){return eu.apply(this,arguments)}function eu(){return(eu=(0,R.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch(E){return!1}})).apply(this,arguments)}const tu="@firebase/analytics";!function pc(){(0,ae._registerComponent)(new _e.wA(ic,(C,{options:x})=>gs(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ae._registerComponent)(new _e.wA("analytics-internal",function E(C){try{const x=C.getProvider(ic).getImmediate();return{logEvent:(B,Q,le)=>function fc(E,C,x,B){E=(0,ue.m9)(E),function cc(E,C,x,B,Q){return Ho.apply(this,arguments)}(Ai,di[E.app.options.appId],C,x,B).catch(Q=>ir.error(Q))}(x,B,Q,le)}}catch(x){throw dt.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ae.registerVersion)(tu,"0.7.9"),(0,ae.registerVersion)(tu,"0.7.9","esm2017")}();var qf=k(4408),bm=k(7565);const nu=new class jn extends bm.v{}(class $o extends qf.o{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(C,x,B):C.flush(this)}});var wm=k(4986),Yi=k(8505),Kt=k(9468),Hn=k(5363);const gc=new u.GfV("7.3.0"),Us="__angularfire_symbol__analyticsIsSupportedValue",co="__angularfire_symbol__analyticsIsSupported",hi="__angularfire_symbol__remoteConfigIsSupportedValue",ka="__angularfire_symbol__remoteConfigIsSupported",ru="__angularfire_symbol__messagingIsSupportedValue",mc="__angularfire_symbol__messagingIsSupported";function qo(E,C,x){if(C){if(1===C.length)return C[0];const le=C.filter(Be=>Be.app===x);if(1===le.length)return le[0]}return x.container.getProvider(E).getImmediate({optional:!0})}globalThis[co]||(globalThis[co]=Ra().then(E=>globalThis[Us]=E).catch(()=>globalThis[Us]=!1)),globalThis[mc]||(globalThis[mc]=fl().then(E=>globalThis[ru]=E).catch(()=>globalThis[ru]=!1)),globalThis[ka]||(globalThis[ka]=ym().then(E=>globalThis[hi]=E).catch(()=>globalThis[hi]=!1));const _l=(E,C)=>{const x=C?[C]:(0,V.C6)(),B=[];return x.forEach(Q=>{Q.container.getProvider(E).instances.forEach(Be=>{B.includes(Be)||B.push(Be)})}),B};function ho(){}class yl{constructor(C,x=nu){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,B){const Q=this.zone;return this.delegate.schedule(function(Be){Q.runGuarded(()=>{C.apply(this,[Be])})},x,B)}}class iu{constructor(C){this.zone=C,this.task=null}call(C,x){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ho,{},ho,ho)),x.pipe((0,Yi.b)({next:B,complete:B,error:B})).subscribe(C).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let su=(()=>{class E{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new yl(Zone.current)),this.insideAngular=x.run(()=>new yl(Zone.current,wm.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(x){return new(x||E)(u.LFG(u.R0b))},E.\u0275prov=u.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function Ji(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function au(E){return Ji(),function fo(E){return function(x){return(x=x.lift(new iu(E.ngZone))).pipe((0,Kt.R)(E.outsideAngular),(0,Hn.Q)(E.insideAngular))}}(Ji())(E)}},198:(it,we,k)=>{k.d(we,{$:()=>Ps,A:()=>j,B:()=>Ne,G:()=>yn,H:()=>an,J:()=>as,L:()=>on,M:()=>ga,N:()=>ma,P:()=>co,Q:()=>_a,R:()=>pc,T:()=>Nd,U:()=>ko,V:()=>us,W:()=>Ii,X:()=>zu,Y:()=>cl,Z:()=>ds,_:()=>Po,a:()=>Ln,a0:()=>Ku,a1:()=>Yu,a2:()=>Md,a3:()=>Oe,a4:()=>hl,a5:()=>Ju,a6:()=>Wi,a7:()=>ql,a8:()=>xd,a9:()=>Qu,aA:()=>po,aB:()=>Wo,aC:()=>E,aD:()=>vl,aE:()=>He,aI:()=>Bn,aL:()=>Qn,aa:()=>Zi,ab:()=>Bo,ac:()=>Rd,af:()=>Wl,ag:()=>tc,ah:()=>nc,ak:()=>cs,al:()=>zl,an:()=>Ia,ao:()=>ac,ap:()=>Gn,aq:()=>Ce,ar:()=>Ut,as:()=>pt,at:()=>Ze,au:()=>Ec,av:()=>uu,aw:()=>Me,ax:()=>ne,ay:()=>re,az:()=>Ct,b:()=>dt,c:()=>qo,d:()=>iu,e:()=>ho,f:()=>B,g:()=>St,h:()=>Be,i:()=>gs,j:()=>wr,k:()=>Sm,l:()=>nu,m:()=>Xf,o:()=>ce,r:()=>wm,s:()=>bm,u:()=>gc});var u=k(5861),V=k(2090),R=k(9681),ae=k(655),ue=k(1877),_e=k(4859);const ce={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},j={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ne=function ie(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Le=function Ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},$e=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Se=new ue.Yd("@firebase/auth");function ze(v,...g){Se.logLevel<=ue.in.ERROR&&Se.error(`Auth (${R.SDK_VERSION}): ${v}`,...g)}function Ze(v,...g){throw Ye(v,...g)}function Me(v,...g){return Ye(v,...g)}function xe(v,g,m){const T=Object.assign(Object.assign({},Le()),{[g]:m});return new V.LL("auth","Firebase",T).create(g,{appName:v.name})}function Ee(v,g,m){if(!(g instanceof m))throw m.name!==g.constructor.name&&Ze(v,"argument-error"),xe(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ye(v,...g){if("string"!=typeof v){const m=g[0],T=[...g.slice(1)];return T[0]&&(T[0].appName=v.name),v._errorFactory.create(m,...T)}return $e.create(v,...g)}function ne(v,g,...m){if(!v)throw Ye(g,...m)}function fe(v){const g="INTERNAL ASSERTION FAILED: "+v;throw ze(g),new Error(g)}function Ce(v,g){v||fe(g)}const J=new Map;function re(v){Ce(v instanceof Function,"Expected a class definition");let g=J.get(v);return g?(Ce(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,J.set(v,g),g)}function he(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Ve(){return"http:"===yt()||"https:"===yt()}function yt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Je{constructor(g,m){this.shortDelay=g,this.longDelay=m,Ce(m>g,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function en(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ve()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function un(v,g){Ce(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return g?`${m}${g.startsWith("/")?g.slice(1):g}`:m}class On{static initialize(g,m,T){this.fetchImpl=g,m&&(this.headersImpl=m),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void fe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void fe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void fe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const gn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},sn=new Je(3e4,6e4);function Gt(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function tn(v,g,m,T){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,u.Z)(function*(v,g,m,T,N={}){return Ui(v,N,(0,u.Z)(function*(){let O={},te={};T&&("GET"===g?te=T:O={body:JSON.stringify(T)});const Pe=(0,V.xO)(Object.assign({key:v.config.apiKey},te)).slice(1),at=yield v._getAdditionalHeaders();return at["Content-Type"]="application/json",v.languageCode&&(at["X-Firebase-Locale"]=v.languageCode),On.fetch()(ii(v,v.config.apiHost,m,Pe),Object.assign({method:g,headers:at,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Ui(v,g,m){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,u.Z)(function*(v,g,m){v._canInitEmulator=!1;const T=Object.assign(Object.assign({},gn),g);try{const N=new Ei(v),O=yield Promise.race([m(),N.promise]);N.clearNetworkTimeout();const te=yield O.json();if("needConfirmation"in te)throw Kn(v,"account-exists-with-different-credential",te);if(O.ok&&!("errorMessage"in te))return te;{const Pe=O.ok?te.errorMessage:te.error.message,[at,_t]=Pe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===at)throw Kn(v,"credential-already-in-use",te);if("EMAIL_EXISTS"===at)throw Kn(v,"email-already-in-use",te);const Bt=T[at]||at.toLowerCase().replace(/[_\s]+/g,"-");if(_t)throw xe(v,Bt,_t);Ze(v,Bt)}}catch(N){if(N instanceof V.ZR)throw N;Ze(v,"network-request-failed")}})).apply(this,arguments)}function Sn(v,g,m,T){return ji.apply(this,arguments)}function ji(){return(ji=(0,u.Z)(function*(v,g,m,T,N={}){const O=yield tn(v,g,m,T,N);return"mfaPendingCredential"in O&&Ze(v,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function ii(v,g,m,T){const N=`${g}${m}?${T}`;return v.config.emulator?un(v.config,N):`${v.config.apiScheme}://${N}`}class Ei{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((m,T)=>{this.timer=setTimeout(()=>T(Me(this.auth,"network-request-failed")),sn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kn(v,g,m){const T={appName:v.name};m.email&&(T.email=m.email),m.phoneNumber&&(T.phoneNumber=m.phoneNumber);const N=Me(v,g,T);return N.customData._tokenResponse=m,N}function bt(){return(bt=(0,u.Z)(function*(v,g){return tn(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Pr(v,g){return bn.apply(this,arguments)}function bn(){return(bn=(0,u.Z)(function*(v,g){return tn(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function nn(v,g){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,u.Z)(function*(v,g){return tn(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function ur(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function cr(){return(cr=(0,u.Z)(function*(v,g=!1){const m=(0,V.m9)(v),T=yield m.getIdToken(g),N=Zt(T);ne(N&&N.exp&&N.auth_time&&N.iat,m.auth,"internal-error");const O="object"==typeof N.firebase?N.firebase:void 0,te=null==O?void 0:O.sign_in_provider;return{claims:N,token:T,authTime:ur(Ms(N.auth_time)),issuedAtTime:ur(Ms(N.iat)),expirationTime:ur(Ms(N.exp)),signInProvider:te||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function Ms(v){return 1e3*Number(v)}function Zt(v){const[g,m,T]=v.split(".");if(void 0===g||void 0===m||void 0===T)return ze("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,V.tV)(m);return N?JSON.parse(N):(ze("Failed to decode base64 JWT payload"),null)}catch(N){return ze("Caught error parsing JWT payload as JSON",N),null}}function lt(v,g){return si.apply(this,arguments)}function si(){return(si=(0,u.Z)(function*(v,g,m=!1){if(m)return g;try{return yield g}catch(T){throw T instanceof V.ZR&&oi(T)&&v.auth.currentUser===v&&(yield v.auth.signOut()),T}})).apply(this,arguments)}function oi({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class $t{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var m;if(g){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const N=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,N)}}schedule(g=!1){var m=this;if(!this.isRunning)return;const T=this.getInterval(g);this.timerId=setTimeout((0,u.Z)(function*(){yield m.iteration()}),T)}iteration(){var g=this;return(0,u.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&g.schedule(!0))}g.schedule()})()}}class Gi{constructor(g,m){this.createdAt=g,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=ur(this.lastLoginAt),this.creationTime=ur(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function kn(v){return cn.apply(this,arguments)}function cn(){return(cn=(0,u.Z)(function*(v){var g;const m=v.auth,T=yield v.getIdToken(),N=yield lt(v,nn(m,{idToken:T}));ne(null==N?void 0:N.users.length,m,"internal-error");const O=N.users[0];v._notifyReloadListener(O);const te=(null===(g=O.providerUserInfo)||void 0===g?void 0:g.length)?Te(O.providerUserInfo):[],Pe=z(v.providerData,te),Bt=!!v.isAnonymous&&!(v.email&&O.passwordHash||(null==Pe?void 0:Pe.length)),xn={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:Pe,metadata:new Gi(O.createdAt,O.lastLoginAt),isAnonymous:Bt};Object.assign(v,xn)})).apply(this,arguments)}function q(){return(q=(0,u.Z)(function*(v){const g=(0,V.m9)(v);yield kn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function z(v,g){return[...v.filter(T=>!g.some(N=>N.providerId===T.providerId)),...g]}function Te(v){return v.map(g=>{var{providerId:m}=g,T=(0,ae._T)(g,["providerId"]);return{providerId:m,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}function ee(){return(ee=(0,u.Z)(function*(v,g){const m=yield Ui(v,{},(0,u.Z)(function*(){const T=(0,V.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:N,apiKey:O}=v.config,te=ii(v,N,"/v1/token",`key=${O}`),Pe=yield v._getAdditionalHeaders();return Pe["Content-Type"]="application/x-www-form-urlencoded",On.fetch()(te,{method:"POST",headers:Pe,body:T})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class ke{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ne(g.idToken,"internal-error"),ne(void 0!==g.idToken,"internal-error"),ne(void 0!==g.refreshToken,"internal-error");const m="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function mt(v){const g=Zt(v);return ne(g,"internal-error"),ne(void 0!==g.exp,"internal-error"),ne(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,m)}getToken(g,m=!1){var T=this;return(0,u.Z)(function*(){return ne(!T.accessToken||T.refreshToken,g,"user-token-expired"),m||!T.accessToken||T.isExpired?T.refreshToken?(yield T.refresh(g,T.refreshToken),T.accessToken):null:T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,m){var T=this;return(0,u.Z)(function*(){const{accessToken:N,refreshToken:O,expiresIn:te}=yield function G(v,g){return ee.apply(this,arguments)}(g,m);T.updateTokensAndExpiration(N,O,Number(te))})()}updateTokensAndExpiration(g,m,T){this.refreshToken=m||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(g,m){const{refreshToken:T,accessToken:N,expirationTime:O}=m,te=new ke;return T&&(ne("string"==typeof T,"internal-error",{appName:g}),te.refreshToken=T),N&&(ne("string"==typeof N,"internal-error",{appName:g}),te.accessToken=N),O&&(ne("number"==typeof O,"internal-error",{appName:g}),te.expirationTime=O),te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new ke,this.toJSON())}_performRefresh(){return fe("not implemented")}}function nt(v,g){ne("string"==typeof v||void 0===v,"internal-error",{appName:g})}class vt{constructor(g){var{uid:m,auth:T,stsTokenManager:N}=g,O=(0,ae._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $t(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=T,this.stsTokenManager=N,this.accessToken=N.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Gi(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(g){var m=this;return(0,u.Z)(function*(){const T=yield lt(m,m.stsTokenManager.getToken(m.auth,g));return ne(T,m.auth,"internal-error"),m.accessToken!==T&&(m.accessToken=T,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),T})()}getIdTokenResult(g){return function Dn(v){return cr.apply(this,arguments)}(this,g)}reload(){return function U(v){return q.apply(this,arguments)}(this)}_assign(g){this!==g&&(ne(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(m=>Object.assign({},m)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new vt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,m=!1){var T=this;return(0,u.Z)(function*(){let N=!1;g.idToken&&g.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(g),N=!0),m&&(yield kn(T)),yield T.auth._persistUserIfCurrent(T),N&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var g=this;return(0,u.Z)(function*(){const m=yield g.getIdToken();return yield lt(g,function Hi(v,g){return bt.apply(this,arguments)}(g.auth,{idToken:m})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,m){var T,N,O,te,Pe,at,_t,Bt;const xn=null!==(T=m.displayName)&&void 0!==T?T:void 0,ti=null!==(N=m.email)&&void 0!==N?N:void 0,Gs=null!==(O=m.phoneNumber)&&void 0!==O?O:void 0,Ko=null!==(te=m.photoURL)&&void 0!==te?te:void 0,Nm=null!==(Pe=m.tenantId)&&void 0!==Pe?Pe:void 0,Mm=null!==(at=m._redirectEventId)&&void 0!==at?at:void 0,sp=null!==(_t=m.createdAt)&&void 0!==_t?_t:void 0,xm=null!==(Bt=m.lastLoginAt)&&void 0!==Bt?Bt:void 0,{uid:op,emailVerified:Rm,isAnonymous:Om,providerData:Cc,stsTokenManager:Tl}=m;ne(op&&Tl,g,"internal-error");const km=ke.fromJSON(this.name,Tl);ne("string"==typeof op,g,"internal-error"),nt(xn,g.name),nt(ti,g.name),ne("boolean"==typeof Rm,g,"internal-error"),ne("boolean"==typeof Om,g,"internal-error"),nt(Gs,g.name),nt(Ko,g.name),nt(Nm,g.name),nt(Mm,g.name),nt(sp,g.name),nt(xm,g.name);const du=new vt({uid:op,auth:g,email:ti,emailVerified:Rm,displayName:xn,isAnonymous:Om,photoURL:Ko,phoneNumber:Gs,tenantId:Nm,stsTokenManager:km,createdAt:sp,lastLoginAt:xm});return Cc&&Array.isArray(Cc)&&(du.providerData=Cc.map(Pm=>Object.assign({},Pm))),Mm&&(du._redirectEventId=Mm),du}static _fromIdTokenResponse(g,m,T=!1){return(0,u.Z)(function*(){const N=new ke;N.updateFromServerResponse(m);const O=new vt({uid:m.localId,auth:g,stsTokenManager:N,isAnonymous:T});return yield kn(O),O})()}}const on=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(m,T){var N=this;return(0,u.Z)(function*(){N.storage[m]=T})()}_get(m){var T=this;return(0,u.Z)(function*(){const N=T.storage[m];return void 0===N?null:N})()}_remove(m){var T=this;return(0,u.Z)(function*(){delete T.storage[m]})()}_addListener(m,T){}_removeListener(m,T){}}return v.type="NONE",v})();function Ct(v,g,m){return`firebase:${v}:${g}:${m}`}class Yn{constructor(g,m,T){this.persistence=g,this.auth=m,this.userKey=T;const{config:N,name:O}=this.auth;this.fullUserKey=Ct(this.userKey,N.apiKey,O),this.fullPersistenceKey=Ct("persistence",N.apiKey,O),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,u.Z)(function*(){const m=yield g.persistence._get(g.fullUserKey);return m?vt._fromJSON(g.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var m=this;return(0,u.Z)(function*(){if(m.persistence===g)return;const T=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=g,T?m.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,m,T="authUser"){return(0,u.Z)(function*(){if(!m.length)return new Yn(re(on),g,T);const N=(yield Promise.all(m.map(function(){var _t=(0,u.Z)(function*(Bt){if(yield Bt._isAvailable())return Bt});return function(Bt){return _t.apply(this,arguments)}}()))).filter(_t=>_t);let O=N[0]||re(on);const te=Ct(T,g.config.apiKey,g.name);let Pe=null;for(const _t of m)try{const Bt=yield _t._get(te);if(Bt){const xn=vt._fromJSON(g,Bt);_t!==O&&(Pe=xn),O=_t;break}}catch(Bt){}const at=N.filter(_t=>_t._shouldAllowMigration);return O._shouldAllowMigration&&at.length?(O=at[0],Pe&&(yield O._set(te,Pe.toJSON())),yield Promise.all(m.map(function(){var _t=(0,u.Z)(function*(Bt){if(Bt!==O)try{yield Bt._remove(te)}catch(xn){}});return function(Bt){return _t.apply(this,arguments)}}())),new Yn(O,g,T)):new Yn(O,g,T)})()}}function de(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Xe(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(K(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(xt(g))return"Blackberry";if(zt(g))return"Webos";if(W(g))return"Safari";if((g.includes("chrome/")||Ae(g))&&!g.includes("edge/"))return"Chrome";if(pt(g))return"Android";{const T=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==T?void 0:T.length))return T[1]}return"Other"}function K(v=(0,V.z$)()){return/firefox\//i.test(v)}function W(v=(0,V.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Ae(v=(0,V.z$)()){return/crios\//i.test(v)}function Xe(v=(0,V.z$)()){return/iemobile/i.test(v)}function pt(v=(0,V.z$)()){return/android/i.test(v)}function xt(v=(0,V.z$)()){return/blackberry/i.test(v)}function zt(v=(0,V.z$)()){return/webos/i.test(v)}function Ut(v=(0,V.z$)()){return/iphone|ipad|ipod/i.test(v)}function Gn(v=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Ar(v=(0,V.z$)()){return Ut(v)||pt(v)||zt(v)||xt(v)||/windows phone/i.test(v)||Xe(v)}function dr(v,g=[]){let m;switch(v){case"Browser":m=de((0,V.z$)());break;case"Worker":m=`${de((0,V.z$)())}-${v}`;break;default:m=v}const T=g.length?g.join(","):"FirebaseCore-web";return`${m}/JsCore/${R.SDK_VERSION}/${T}`}class fa{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,m){const T=O=>new Promise((te,Pe)=>{try{te(g(O))}catch(at){Pe(at)}});T.onAbort=m,this.queue.push(T);const N=this.queue.length-1;return()=>{this.queue[N]=()=>Promise.resolve()}}runMiddleware(g){var m=this;return(0,u.Z)(function*(){if(m.auth.currentUser===g)return;const T=[];try{for(const N of m.queue)yield N(g),N.onAbort&&T.push(N.onAbort)}catch(N){T.reverse();for(const O of T)try{O()}catch(te){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:N.message})}})()}}class Kr{constructor(g,m,T){this.app=g,this.heartbeatServiceProvider=m,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lt(this),this.idTokenSubscription=new Lt(this),this.beforeStateQueue=new fa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$e,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(g,m){var T=this;return m&&(this._popupRedirectResolver=re(m)),this._initializationPromise=this.queue((0,u.Z)(function*(){var N,O;if(!T._deleted&&(T.persistenceManager=yield Yn.create(T,g),!T._deleted)){if(null===(N=T._popupRedirectResolver)||void 0===N?void 0:N._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch(te){}yield T.initializeCurrentUser(m),T.lastNotifiedUid=(null===(O=T.currentUser)||void 0===O?void 0:O.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,u.Z)(function*(){if(g._deleted)return;const m=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||m){if(g.currentUser&&m&&g.currentUser.uid===m.uid)return g._currentUser._assign(m),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(m,!0)}})()}initializeCurrentUser(g){var m=this;return(0,u.Z)(function*(){var T;const N=yield m.assertedPersistence.getCurrentUser();let O=N,te=!1;if(g&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Pe=null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId,at=null==O?void 0:O._redirectEventId,_t=yield m.tryRedirectSignIn(g);(!Pe||Pe===at)&&(null==_t?void 0:_t.user)&&(O=_t.user,te=!0)}if(!O)return m.directlySetCurrentUser(null);if(!O._redirectEventId){if(te)try{yield m.beforeStateQueue.runMiddleware(O)}catch(Pe){O=N,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Pe))}return O?m.reloadAndSetCurrentUserOrClear(O):m.directlySetCurrentUser(null)}return ne(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===O._redirectEventId?m.directlySetCurrentUser(O):m.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(g){var m=this;return(0,u.Z)(function*(){let T=null;try{T=yield m._popupRedirectResolver._completeRedirectFn(m,g,!0)}catch(N){yield m._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(g){var m=this;return(0,u.Z)(function*(){try{yield kn(g)}catch(T){if("auth/network-request-failed"!==T.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Ht(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,u.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var m=this;return(0,u.Z)(function*(){const T=g?(0,V.m9)(g):null;return T&&ne(T.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(T&&T._clone(m))})()}_updateCurrentUser(g,m=!1){var T=this;return(0,u.Z)(function*(){if(!T._deleted)return g&&ne(T.tenantId===g.tenantId,T,"tenant-id-mismatch"),m||(yield T.beforeStateQueue.runMiddleware(g)),T.queue((0,u.Z)(function*(){yield T.directlySetCurrentUser(g),T.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,u.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var m=this;return this.queue((0,u.Z)(function*(){yield m.assertedPersistence.setPersistence(re(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new V.LL("auth","Firebase",g())}onAuthStateChanged(g,m,T){return this.registerStateListener(this.authStateSubscription,g,m,T)}beforeAuthStateChanged(g,m){return this.beforeStateQueue.pushCallback(g,m)}onIdTokenChanged(g,m,T){return this.registerStateListener(this.idTokenSubscription,g,m,T)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,m){var T=this;return(0,u.Z)(function*(){const N=yield T.getOrInitRedirectPersistenceManager(m);return null===g?N.removeCurrentUser():N.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var m=this;return(0,u.Z)(function*(){if(!m.redirectPersistenceManager){const T=g&&re(g)||m._popupRedirectResolver;ne(T,m,"argument-error"),m.redirectPersistenceManager=yield Yn.create(m,[re(T._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(g){var m=this;return(0,u.Z)(function*(){var T,N;return m._isInitialized&&(yield m.queue((0,u.Z)(function*(){}))),(null===(T=m._currentUser)||void 0===T?void 0:T._redirectEventId)===g?m._currentUser:(null===(N=m.redirectUser)||void 0===N?void 0:N._redirectEventId)===g?m.redirectUser:null})()}_persistUserIfCurrent(g){var m=this;return(0,u.Z)(function*(){if(g===m.currentUser)return m.queue((0,u.Z)(function*(){return m.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(m=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,m,T,N){if(this._deleted)return()=>{};const O="function"==typeof m?m:m.next.bind(m),te=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(te,this,"internal-error"),te.then(()=>O(this.currentUser)),"function"==typeof m?g.addObserver(m,T,N):g.addObserver(m)}directlySetCurrentUser(g){var m=this;return(0,u.Z)(function*(){m.currentUser&&m.currentUser!==g&&(m._currentUser._stopProactiveRefresh(),g&&m.isProactiveRefreshEnabled&&g._startProactiveRefresh()),m.currentUser=g,g?yield m.assertedPersistence.setCurrentUser(g):yield m.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=dr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,u.Z)(function*(){var m;const T={"X-Client-Version":g.clientVersion};g.app.options.appId&&(T["X-Firebase-gmpid"]=g.app.options.appId);const N=yield null===(m=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return N&&(T["X-Firebase-Client"]=N),T})()}}function He(v){return(0,V.m9)(v)}class Lt{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,V.ne)(m=>this.observer=m)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function yn(v,g,m){const T=He(v);ne(T._canInitEmulator,T,"emulator-config-failed"),ne(/^https?:\/\//.test(g),T,"invalid-emulator-scheme");const N=!!(null==m?void 0:m.disableWarnings),O=Lr(g),{host:te,port:Pe}=function ss(v){const g=Lr(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!m)return{host:"",port:null};const T=m[2].split("@").pop()||"",N=/^(\[[^\]]+\])(:|$)/.exec(T);if(N){const O=N[1];return{host:O,port:$n(T.substr(O.length+1))}}{const[O,te]=T.split(":");return{host:O,port:$n(te)}}}(g);T.config.emulator={url:`${O}//${te}${null===Pe?"":`:${Pe}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:te,port:Pe,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:N})}),N||function os(){function v(){const g=document.createElement("p"),m=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function Lr(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function $n(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class an{constructor(g,m){this.providerId=g,this.signInMethod=m}toJSON(){return fe("not implemented")}_getIdTokenResponse(g){return fe("not implemented")}_linkToIdToken(g,m){return fe("not implemented")}_getReauthenticationResolver(g){return fe("not implemented")}}function Ys(v,g){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,u.Z)(function*(v,g){return tn(v,"POST","/v1/accounts:resetPassword",Gt(v,g))})).apply(this,arguments)}function Pt(v,g){return Js.apply(this,arguments)}function Js(){return(Js=(0,u.Z)(function*(v,g){return tn(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ao(v,g){return No.apply(this,arguments)}function No(){return(No=(0,u.Z)(function*(v,g){return tn(v,"POST","/v1/accounts:update",Gt(v,g))})).apply(this,arguments)}function vn(){return(vn=(0,u.Z)(function*(v,g){return Sn(v,"POST","/v1/accounts:signInWithPassword",Gt(v,g))})).apply(this,arguments)}function xs(v,g){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,u.Z)(function*(v,g){return tn(v,"POST","/v1/accounts:sendOobCode",Gt(v,g))})).apply(this,arguments)}function En(v,g){return dn.apply(this,arguments)}function dn(){return(dn=(0,u.Z)(function*(v,g){return xs(v,g)})).apply(this,arguments)}function Uu(v,g){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,u.Z)(function*(v,g){return xs(v,g)})).apply(this,arguments)}function Ci(v,g){return ai.apply(this,arguments)}function ai(){return(ai=(0,u.Z)(function*(v,g){return xs(v,g)})).apply(this,arguments)}function ju(v,g){return rl.apply(this,arguments)}function rl(){return(rl=(0,u.Z)(function*(v,g){return xs(v,g)})).apply(this,arguments)}function li(){return(li=(0,u.Z)(function*(v,g){return Sn(v,"POST","/v1/accounts:signInWithEmailLink",Gt(v,g))})).apply(this,arguments)}function xo(){return(xo=(0,u.Z)(function*(v,g){return Sn(v,"POST","/v1/accounts:signInWithEmailLink",Gt(v,g))})).apply(this,arguments)}class il extends an{constructor(g,m,T,N=null){super("password",T),this._email=g,this._password=m,this._tenantId=N}static _fromEmailAndPassword(g,m){return new il(g,m,"password")}static _fromEmailAndCode(g,m,T=null){return new il(g,m,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(g){var m=this;return(0,u.Z)(function*(){switch(m.signInMethod){case"password":return function Mo(v,g){return vn.apply(this,arguments)}(g,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Rs(v,g){return li.apply(this,arguments)}(g,{email:m._email,oobCode:m._password});default:Ze(g,"internal-error")}})()}_linkToIdToken(g,m){var T=this;return(0,u.Z)(function*(){switch(T.signInMethod){case"password":return Pt(g,{idToken:m,returnSecureToken:!0,email:T._email,password:T._password});case"emailLink":return function Sd(v,g){return xo.apply(this,arguments)}(g,{idToken:m,email:T._email,oobCode:T._password});default:Ze(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Jn(v,g){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,u.Z)(function*(v,g){return Sn(v,"POST","/v1/accounts:signInWithIdp",Gt(v,g))})).apply(this,arguments)}class as extends an{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const m=new as(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(m.idToken=g.idToken),g.accessToken&&(m.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(m.nonce=g.nonce),g.pendingToken&&(m.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(m.accessToken=g.oauthToken,m.secret=g.oauthTokenSecret):Ze("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:T,signInMethod:N}=m,O=(0,ae._T)(m,["providerId","signInMethod"]);if(!T||!N)return null;const te=new as(T,N);return te.idToken=O.idToken||void 0,te.accessToken=O.accessToken||void 0,te.secret=O.secret,te.nonce=O.nonce,te.pendingToken=O.pendingToken||null,te}_getIdTokenResponse(g){return Jn(g,this.buildRequest())}_linkToIdToken(g,m){const T=this.buildRequest();return T.idToken=m,Jn(g,T)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Jn(g,m)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),g.postBody=(0,V.xO)(m)}return g}}function Of(v,g){return sl.apply(this,arguments)}function sl(){return(sl=(0,u.Z)(function*(v,g){return tn(v,"POST","/v1/accounts:sendVerificationCode",Gt(v,g))})).apply(this,arguments)}function pa(){return(pa=(0,u.Z)(function*(v,g){return Sn(v,"POST","/v1/accounts:signInWithPhoneNumber",Gt(v,g))})).apply(this,arguments)}function Gu(){return(Gu=(0,u.Z)(function*(v,g){const m=yield Sn(v,"POST","/v1/accounts:signInWithPhoneNumber",Gt(v,g));if(m.temporaryProof)throw Kn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Pf={USER_NOT_FOUND:"user-not-found"};function $u(){return($u=(0,u.Z)(function*(v,g){return Sn(v,"POST","/v1/accounts:signInWithPhoneNumber",Gt(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Pf)})).apply(this,arguments)}class Oo extends an{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,m){return new Oo({verificationId:g,verificationCode:m})}static _fromTokenResponse(g,m){return new Oo({phoneNumber:g,temporaryProof:m})}_getIdTokenResponse(g){return function kf(v,g){return pa.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,m){return function Ro(v,g){return Gu.apply(this,arguments)}(g,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Ff(v,g){return $u.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:m,verificationId:T,verificationCode:N}=this.params;return g&&m?{temporaryProof:g,phoneNumber:m}:{sessionInfo:T,code:N}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:m,verificationCode:T,phoneNumber:N,temporaryProof:O}=g;return T||m||N||O?new Oo({verificationId:m,verificationCode:T,phoneNumber:N,temporaryProof:O}):null}}class ls{constructor(g){var m,T,N,O,te,Pe;const at=(0,V.zd)((0,V.pd)(g)),_t=null!==(m=at.apiKey)&&void 0!==m?m:null,Bt=null!==(T=at.oobCode)&&void 0!==T?T:null,xn=function Lf(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(N=at.mode)&&void 0!==N?N:null);ne(_t&&Bt&&xn,"argument-error"),this.apiKey=_t,this.operation=xn,this.code=Bt,this.continueUrl=null!==(O=at.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(te=at.languageCode)&&void 0!==te?te:null,this.tenantId=null!==(Pe=at.tenantId)&&void 0!==Pe?Pe:null}static parseLink(g){const m=function Ad(v){const g=(0,V.zd)((0,V.pd)(v)).link,m=g?(0,V.zd)((0,V.pd)(g)).deep_link_id:null,T=(0,V.zd)((0,V.pd)(v)).deep_link_id;return(T?(0,V.zd)((0,V.pd)(T)).link:null)||T||m||g||v}(g);try{return new ls(m)}catch(T){return null}}}let ga=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,T){return il._fromEmailAndPassword(m,T)}static credentialWithLink(m,T){const N=ls.parseLink(T);return ne(N,"argument-error"),il._fromEmailAndCode(m,N.code,N.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Os{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class ui extends Os{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ko extends ui{static credentialFromJSON(g){const m="string"==typeof g?JSON.parse(g):g;return ne("providerId"in m&&"signInMethod"in m,"argument-error"),as._fromParams(m)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ne(g.idToken||g.accessToken,"argument-error"),as._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ko.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ko.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:m,oauthAccessToken:T,oauthTokenSecret:N,pendingToken:O,nonce:te,providerId:Pe}=g;if(!T&&!N&&!m&&!O||!Pe)return null;try{return new ko(Pe)._credential({idToken:m,accessToken:T,nonce:te,pendingToken:O})}catch(at){return null}}}let ma=(()=>{class v extends ui{constructor(){super("facebook.com")}static credential(m){return as._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(T){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),_a=(()=>{class v extends ui{constructor(){super("google.com"),this.addScope("profile")}static credential(m,T){return as._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:T})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:T,oauthAccessToken:N}=m;if(!T&&!N)return null;try{return v.credential(T,N)}catch(O){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Nd=(()=>{class v extends ui{constructor(){super("github.com")}static credential(m){return as._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(T){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Qn extends an{constructor(g,m){super(g,g),this.pendingToken=m}_getIdTokenResponse(g){return Jn(g,this.buildRequest())}_linkToIdToken(g,m){const T=this.buildRequest();return T.idToken=m,Jn(g,T)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Jn(g,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:T,signInMethod:N,pendingToken:O}=m;return T&&N&&O&&T===N?new Qn(T,O):null}static _create(g,m){return new Qn(g,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class us extends Os{constructor(g){ne(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return us.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return us.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const m=Qn.fromJSON(g);return ne(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:m,providerId:T}=g;if(!m||!T)return null;try{return Qn._create(T,m)}catch(N){return null}}}let Ii=(()=>{class v extends ui{constructor(){super("twitter.com")}static credential(m,T){return as._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:T})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:T,oauthTokenSecret:N}=m;if(!T||!N)return null;try{return v.credential(T,N)}catch(O){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Wu(v,g){return mr.apply(this,arguments)}function mr(){return(mr=(0,u.Z)(function*(v,g){return Sn(v,"POST","/v1/accounts:signUp",Gt(v,g))})).apply(this,arguments)}class Nr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,m,T,N=!1){return(0,u.Z)(function*(){const O=yield vt._fromIdTokenResponse(g,T,N),te=Zu(T);return new Nr({user:O,providerId:te,_tokenResponse:T,operationType:m})})()}static _forOperation(g,m,T){return(0,u.Z)(function*(){yield g._updateTokensIfNecessary(T,!0);const N=Zu(T);return new Nr({user:g,providerId:N,_tokenResponse:T,operationType:m})})()}}function Zu(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function zu(v){return ol.apply(this,arguments)}function ol(){return(ol=(0,u.Z)(function*(v){var g;const m=He(v);if(yield m._initializationPromise,null===(g=m.currentUser)||void 0===g?void 0:g.isAnonymous)return new Nr({user:m.currentUser,providerId:null,operationType:"signIn"});const T=yield Wu(m,{returnSecureToken:!0}),N=yield Nr._fromIdTokenResponse(m,"signIn",T,!0);return yield m._updateCurrentUser(N.user),N})).apply(this,arguments)}class al extends V.ZR{constructor(g,m,T,N){var O;super(m.code,m.message),this.operationType=T,this.user=N,Object.setPrototypeOf(this,al.prototype),this.customData={appName:g.name,tenantId:null!==(O=g.tenantId)&&void 0!==O?O:void 0,_serverResponse:m.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(g,m,T,N){return new al(g,m,T,N)}}function ll(v,g,m,T){return("reauthenticate"===g?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?al._fromErrorAndOperation(v,O,g,T):O})}function Hl(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function cs(v,g){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,u.Z)(function*(v,g){const m=(0,V.m9)(v);yield ks(!0,m,g);const{providerUserInfo:T}=yield Pr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[g]}),N=Hl(T||[]);return m.providerData=m.providerData.filter(O=>N.has(O.providerId)),N.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function mn(v,g){return ya.apply(this,arguments)}function ya(){return(ya=(0,u.Z)(function*(v,g,m=!1){const T=yield lt(v,g._linkToIdToken(v.auth,yield v.getIdToken()),m);return Nr._forOperation(v,"link",T)})).apply(this,arguments)}function ks(v,g,m){return hn.apply(this,arguments)}function hn(){return(hn=(0,u.Z)(function*(v,g,m){yield kn(g);const N=!1===v?"provider-already-linked":"no-such-provider";ne(Hl(g.providerData).has(m)===v,g.auth,N)})).apply(this,arguments)}function ul(v,g){return va.apply(this,arguments)}function va(){return(va=(0,u.Z)(function*(v,g,m=!1){const{auth:T}=v,N="reauthenticate";try{const O=yield lt(v,ll(T,N,g,v),m);ne(O.idToken,T,"internal-error");const te=Zt(O.idToken);ne(te,T,"internal-error");const{sub:Pe}=te;return ne(v.uid===Pe,T,"user-mismatch"),Nr._forOperation(v,N,O)}catch(O){throw"auth/user-not-found"===(null==O?void 0:O.code)&&Ze(T,"user-mismatch"),O}})).apply(this,arguments)}function eo(v,g){return hr.apply(this,arguments)}function hr(){return(hr=(0,u.Z)(function*(v,g,m=!1){const T="signIn",N=yield ll(v,T,g),O=yield Nr._fromIdTokenResponse(v,T,N);return m||(yield v._updateCurrentUser(O.user)),O})).apply(this,arguments)}function cl(v,g){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,u.Z)(function*(v,g){return eo(He(v),g)})).apply(this,arguments)}function ds(v,g){return fr.apply(this,arguments)}function fr(){return(fr=(0,u.Z)(function*(v,g){const m=(0,V.m9)(v);return yield ks(!1,m,g.providerId),mn(m,g)})).apply(this,arguments)}function Po(v,g){return qi.apply(this,arguments)}function qi(){return(qi=(0,u.Z)(function*(v,g){return ul((0,V.m9)(v),g)})).apply(this,arguments)}function $l(v,g){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,u.Z)(function*(v,g){return Sn(v,"POST","/v1/accounts:signInWithCustomToken",Gt(v,g))})).apply(this,arguments)}function Ps(v,g){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,u.Z)(function*(v,g){const m=He(v),T=yield $l(m,{token:g,returnSecureToken:!0}),N=yield Nr._fromIdTokenResponse(m,"signIn",T);return yield m._updateCurrentUser(N.user),N})).apply(this,arguments)}class Tt{constructor(g,m){this.factorId=g,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(g,m){return"phoneInfo"in m?to._fromServerResponse(g,m):Ze(g,"internal-error")}}class to extends Tt{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,m){return new to(m)}}function dl(v,g,m){var T;ne((null===(T=m.url)||void 0===T?void 0:T.length)>0,v,"invalid-continue-uri"),ne(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=m.url,g.dynamicLinkDomain=m.dynamicLinkDomain,g.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ne(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=m.iOS.bundleId),m.android&&(ne(m.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=m.android.installApp,g.androidMinimumVersionCode=m.android.minimumVersion,g.androidPackageName=m.android.packageName)}function Ku(v,g,m){return ba.apply(this,arguments)}function ba(){return(ba=(0,u.Z)(function*(v,g,m){const T=(0,V.m9)(v),N={requestType:"PASSWORD_RESET",email:g};m&&dl(T,N,m),yield Uu(T,N)})).apply(this,arguments)}function Yu(v,g,m){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,u.Z)(function*(v,g,m){yield Ys((0,V.m9)(v),{oobCode:g,newPassword:m})})).apply(this,arguments)}function Md(v,g){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,u.Z)(function*(v,g){yield Ao((0,V.m9)(v),{oobCode:g})})).apply(this,arguments)}function Oe(v,g){return qt.apply(this,arguments)}function qt(){return(qt=(0,u.Z)(function*(v,g){const m=(0,V.m9)(v),T=yield Ys(m,{oobCode:g}),N=T.requestType;switch(ne(N,m,"internal-error"),N){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(T.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(T.mfaInfo,m,"internal-error");default:ne(T.email,m,"internal-error")}let O=null;return T.mfaInfo&&(O=Tt._fromServerResponse(He(m),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:O},operation:N}})).apply(this,arguments)}function hl(v,g){return wn.apply(this,arguments)}function wn(){return(wn=(0,u.Z)(function*(v,g){const{data:m}=yield Oe((0,V.m9)(v),g);return m.email})).apply(this,arguments)}function Ju(v,g,m){return hs.apply(this,arguments)}function hs(){return(hs=(0,u.Z)(function*(v,g,m){const T=He(v),N=yield Wu(T,{returnSecureToken:!0,email:g,password:m}),O=yield Nr._fromIdTokenResponse(T,"signIn",N);return yield T._updateCurrentUser(O.user),O})).apply(this,arguments)}function Wi(v,g,m){return cl((0,V.m9)(v),ga.credential(g,m))}function ql(v,g,m){return wa.apply(this,arguments)}function wa(){return(wa=(0,u.Z)(function*(v,g,m){const T=(0,V.m9)(v),N={requestType:"EMAIL_SIGNIN",email:g};ne(m.handleCodeInApp,T,"argument-error"),m&&dl(T,N,m),yield Ci(T,N)})).apply(this,arguments)}function xd(v,g){const m=ls.parseLink(g);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}function Qu(v,g,m){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,u.Z)(function*(v,g,m){const T=(0,V.m9)(v),N=ga.credentialWithLink(g,m||he());return ne(N._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),cl(T,N)})).apply(this,arguments)}function no(v,g){return pr.apply(this,arguments)}function pr(){return(pr=(0,u.Z)(function*(v,g){return tn(v,"POST","/v1/accounts:createAuthUri",Gt(v,g))})).apply(this,arguments)}function Zi(v,g){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,u.Z)(function*(v,g){const T={identifier:g,continueUri:Ve()?he():"http://localhost"},{signinMethods:N}=yield no((0,V.m9)(v),T);return N||[]})).apply(this,arguments)}function Bo(v,g){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,u.Z)(function*(v,g){const m=(0,V.m9)(v),N={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&dl(m.auth,N,g);const{email:O}=yield En(m.auth,N);O!==v.email&&(yield v.reload())})).apply(this,arguments)}function Rd(v,g,m){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,u.Z)(function*(v,g,m){const T=(0,V.m9)(v),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};m&&dl(T.auth,O,m);const{email:te}=yield ju(T.auth,O);te!==v.email&&(yield v.reload())})).apply(this,arguments)}function ec(v,g){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,u.Z)(function*(v,g){return tn(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Wl(v,g){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,u.Z)(function*(v,{displayName:g,photoURL:m}){if(void 0===g&&void 0===m)return;const T=(0,V.m9)(v),O={idToken:yield T.getIdToken(),displayName:g,photoUrl:m,returnSecureToken:!0},te=yield lt(T,ec(T.auth,O));T.displayName=te.displayName||null,T.photoURL=te.photoUrl||null;const Pe=T.providerData.find(({providerId:at})=>"password"===at);Pe&&(Pe.displayName=T.displayName,Pe.photoURL=T.photoURL),yield T._updateTokensIfNecessary(te)})).apply(this,arguments)}function tc(v,g){return Zl((0,V.m9)(v),g,null)}function nc(v,g){return Zl((0,V.m9)(v),null,g)}function Zl(v,g,m){return Da.apply(this,arguments)}function Da(){return(Da=(0,u.Z)(function*(v,g,m){const{auth:T}=v,O={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(O.email=g),m&&(O.password=m);const te=yield lt(v,Pt(T,O));yield v._updateTokensIfNecessary(te,!0)})).apply(this,arguments)}class ro{constructor(g,m,T={}){this.isNewUser=g,this.providerId=m,this.profile=T}}class rc extends ro{constructor(g,m,T,N){super(g,m,T),this.username=N}}class Od extends ro{constructor(g,m){super(g,"facebook.com",m)}}class fl extends rc{constructor(g,m){super(g,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Qr extends ro{constructor(g,m){super(g,"google.com",m)}}class kd extends rc{constructor(g,m,T){super(g,"twitter.com",m,T)}}function zl(v){const{user:g,_tokenResponse:m}=v;return g.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Ea(v){var g,m;if(!v)return null;const{providerId:T}=v,N=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},O=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!T&&(null==v?void 0:v.idToken)){const te=null===(m=null===(g=Zt(v.idToken))||void 0===g?void 0:g.firebase)||void 0===m?void 0:m.sign_in_provider;if(te)return new ro(O,"anonymous"!==te&&"custom"!==te?te:null)}if(!T)return null;switch(T){case"facebook.com":return new Od(O,N);case"github.com":return new fl(O,N);case"google.com":return new Qr(O,N);case"twitter.com":return new kd(O,N,v.screenName||null);case"custom":case"anonymous":return new ro(O,null);default:return new ro(O,T,N)}}(m)}class fs{constructor(g,m){this.type=g,this.credential=m}static _fromIdtoken(g){return new fs("enroll",g)}static _fromMfaPendingCredential(g){return new fs("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var m,T;if(null==g?void 0:g.multiFactorSession){if(null===(m=g.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return fs._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(T=g.multiFactorSession)||void 0===T?void 0:T.idToken)return fs._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Ca{constructor(g,m,T){this.session=g,this.hints=m,this.signInResolver=T}static _fromError(g,m){const T=He(g),N=m.customData._serverResponse,O=(N.mfaInfo||[]).map(Pe=>Tt._fromServerResponse(T,Pe));ne(N.mfaPendingCredential,T,"internal-error");const te=fs._fromMfaPendingCredential(N.mfaPendingCredential);return new Ca(te,O,function(){var Pe=(0,u.Z)(function*(at){const _t=yield at._process(T,te);delete N.mfaInfo,delete N.mfaPendingCredential;const Bt=Object.assign(Object.assign({},N),{idToken:_t.idToken,refreshToken:_t.refreshToken});switch(m.operationType){case"signIn":const xn=yield Nr._fromIdTokenResponse(T,m.operationType,Bt);return yield T._updateCurrentUser(xn.user),xn;case"reauthenticate":return ne(m.user,T,"internal-error"),Nr._forOperation(m.user,m.operationType,Bt);default:Ze(T,"internal-error")}});return function(at){return Pe.apply(this,arguments)}}())}resolveSignIn(g){var m=this;return(0,u.Z)(function*(){return m.signInResolver(g)})()}}function Ia(v,g){var m;const T=(0,V.m9)(v),N=g;return ne(g.customData.operationType,T,"argument-error"),ne(null===(m=N.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,T,"argument-error"),Ca._fromError(T,N)}function ir(v,g){return tn(v,"POST","/v2/accounts/mfaEnrollment:start",Gt(v,g))}class ps{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(T=>Tt._fromServerResponse(g.auth,T)))})}static _fromUser(g){return new ps(g)}getSession(){var g=this;return(0,u.Z)(function*(){return fs._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,m){var T=this;return(0,u.Z)(function*(){const N=g,O=yield T.getSession(),te=yield lt(T.user,N._process(T.user.auth,O,m));return yield T.user._updateTokensIfNecessary(te),T.user.reload()})()}unenroll(g){var m=this;return(0,u.Z)(function*(){const T="string"==typeof g?g:g.uid,N=yield m.user.getIdToken(),O=yield lt(m.user,function Uf(v,g){return tn(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Gt(v,g))}(m.user.auth,{idToken:N,mfaEnrollmentId:T}));m.enrolledFactors=m.enrolledFactors.filter(({uid:te})=>te!==T),yield m.user._updateTokensIfNecessary(O);try{yield m.user.reload()}catch(te){if("auth/user-token-expired"!==te.code)throw te}})()}}const jo=new WeakMap;function ac(v){const g=(0,V.m9)(v);return jo.has(g)||jo.set(g,ps._fromUser(g)),jo.get(g)}const Kl="__sak";class so{constructor(g,m){this.storageRetriever=g,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Kl,"1"),this.storage.removeItem(Kl),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,m){return this.storage.setItem(g,JSON.stringify(m)),Promise.resolve()}_get(g){const m=this.storage.getItem(g);return Promise.resolve(m?JSON.parse(m):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const dt=(()=>{class v extends so{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,T)=>this.onStorageEvent(m,T),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Yl(){const v=(0,V.z$)();return W(v)||Ut(v)}()&&function $i(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Ar(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const T of Object.keys(this.listeners)){const N=this.storage.getItem(T),O=this.localCache[T];N!==O&&m(T,O,N)}}onStorageEvent(m,T=!1){if(!m.key)return void this.forAllChangedKeys((Pe,at,_t)=>{this.notifyListeners(Pe,_t)});const N=m.key;if(T?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Pe=this.storage.getItem(N);if(m.newValue!==Pe)null!==m.newValue?this.storage.setItem(N,m.newValue):this.storage.removeItem(N);else if(this.localCache[N]===m.newValue&&!T)return}const O=()=>{const Pe=this.storage.getItem(N);!T&&this.localCache[N]===Pe||this.notifyListeners(N,Pe)},te=this.storage.getItem(N);!function jt(){return(0,V.w1)()&&10===document.documentMode}()||te===m.newValue||m.newValue===m.oldValue?O():setTimeout(O,10)}notifyListeners(m,T){this.localCache[m]=T;const N=this.listeners[m];if(N)for(const O of Array.from(N))O(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,T,N)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:T,newValue:N}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(T)}_removeListener(m,T){this.listeners[m]&&(this.listeners[m].delete(T),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,T){var N=()=>super._set,O=this;return(0,u.Z)(function*(){yield N().call(O,m,T),O.localCache[m]=JSON.stringify(T)})()}_get(m){var T=()=>super._get,N=this;return(0,u.Z)(function*(){const O=yield T().call(N,m);return N.localCache[m]=JSON.stringify(O),O})()}_remove(m){var T=()=>super._remove,N=this;return(0,u.Z)(function*(){yield T().call(N,m),delete N.localCache[m]})()}}return v.type="LOCAL",v})(),Ln=(()=>{class v extends so{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,T){}_removeListener(m,T){}}return v.type="SESSION",v})();let zi=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const T=this.receivers.find(O=>O.isListeningto(m));if(T)return T;const N=new v(m);return this.receivers.push(N),N}isListeningto(m){return this.eventTarget===m}handleEvent(m){var T=this;return(0,u.Z)(function*(){const N=m,{eventId:O,eventType:te,data:Pe}=N.data,at=T.handlersMap[te];if(!(null==at?void 0:at.size))return;N.ports[0].postMessage({status:"ack",eventId:O,eventType:te});const _t=Array.from(at).map(function(){var xn=(0,u.Z)(function*(ti){return ti(N.origin,Pe)});return function(ti){return xn.apply(this,arguments)}}()),Bt=yield function ci(v){return Promise.all(v.map(function(){var g=(0,u.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(T){return{fulfilled:!1,reason:T}}});return function(m){return g.apply(this,arguments)}}()))}(_t);N.ports[0].postMessage({status:"done",eventId:O,eventType:te,response:Bt})})()}_subscribe(m,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(T)}_unsubscribe(m,T){this.handlersMap[m]&&T&&this.handlersMap[m].delete(T),(!T||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Bn(v="",g=10){let m="";for(let T=0;T<g;T++)m+=Math.floor(10*Math.random());return v+m}class Vn{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,m,T=50){var N=this;return(0,u.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let te,Pe;return new Promise((at,_t)=>{const Bt=Bn("",20);O.port1.start();const xn=setTimeout(()=>{_t(new Error("unsupported_event"))},T);Pe={messageChannel:O,onMessage(ti){const Gs=ti;if(Gs.data.eventId===Bt)switch(Gs.data.status){case"ack":clearTimeout(xn),te=setTimeout(()=>{_t(new Error("timeout"))},3e3);break;case"done":clearTimeout(te),at(Gs.data.response);break;default:clearTimeout(xn),clearTimeout(te),_t(new Error("invalid_response"))}}},N.handlers.add(Pe),O.port1.addEventListener("message",Pe.onMessage),N.target.postMessage({eventType:g,eventId:Bt,data:m},[O.port2])}).finally(()=>{Pe&&N.removeMessageHandler(Pe)})})()}}function Rt(){return window}function Si(){return void 0!==Rt().WorkerGlobalScope&&"function"==typeof Rt().importScripts}function yr(){return(yr=(0,u.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const Jl="firebaseLocalStorageDb",oo="firebaseLocalStorage",ao="fbase_key";class vr{constructor(g){this.request=g}toPromise(){return new Promise((g,m)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Aa(v,g){return v.transaction([oo],g?"readwrite":"readonly").objectStore(oo)}function lo(){const v=indexedDB.open(Jl,1);return new Promise((g,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const T=v.result;try{T.createObjectStore(oo,{keyPath:ao})}catch(N){m(N)}}),v.addEventListener("success",(0,u.Z)(function*(){const T=v.result;T.objectStoreNames.contains(oo)?g(T):(T.close(),yield function di(){const v=indexedDB.deleteDatabase(Jl);return new vr(v).toPromise()}(),g(yield lo()))}))})}function pl(v,g,m){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,u.Z)(function*(v,g,m){const T=Aa(v,!0).put({[ao]:g,value:m});return new vr(T).toPromise()})).apply(this,arguments)}function Na(){return(Na=(0,u.Z)(function*(v,g){const m=Aa(v,!1).get(g),T=yield new vr(m).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function Ai(v,g){const m=Aa(v,!0).delete(g);return new vr(m).toPromise()}const gs=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,u.Z)(function*(){return m.db||(m.db=yield lo()),m.db})()}_withRetries(m){var T=this;return(0,u.Z)(function*(){let N=0;for(;;)try{const O=yield T._openDb();return yield m(O)}catch(O){if(N++>3)throw O;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,u.Z)(function*(){return Si()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,u.Z)(function*(){m.receiver=zi._getInstance(function lc(){return Si()?self:null}()),m.receiver._subscribe("keyChanged",function(){var T=(0,u.Z)(function*(N,O){return{keyProcessed:(yield m._poll()).includes(O.key)}});return function(N,O){return T.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var T=(0,u.Z)(function*(N,O){return["keyChanged"]});return function(N,O){return T.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,u.Z)(function*(){var T,N;if(m.activeServiceWorker=yield function Sa(){return yr.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Vn(m.activeServiceWorker);const O=yield m.sender._send("ping",{},800);!O||(null===(T=O[0])||void 0===T?void 0:T.fulfilled)&&(null===(N=O[0])||void 0===N?void 0:N.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var T=this;return(0,u.Z)(function*(){if(T.sender&&T.activeServiceWorker&&function Hf(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:m},T.serviceWorkerReceiverAvailable?800:50)}catch(N){}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const m=yield lo();return yield pl(m,Kl,"1"),yield Ai(m,Kl),!0}catch(m){}return!1})()}_withPendingWrite(m){var T=this;return(0,u.Z)(function*(){T.pendingWrites++;try{yield m()}finally{T.pendingWrites--}})()}_set(m,T){var N=this;return(0,u.Z)(function*(){return N._withPendingWrite((0,u.Z)(function*(){return yield N._withRetries(O=>pl(O,m,T)),N.localCache[m]=T,N.notifyServiceWorker(m)}))})()}_get(m){var T=this;return(0,u.Z)(function*(){const N=yield T._withRetries(O=>function gl(v,g){return Na.apply(this,arguments)}(O,m));return T.localCache[m]=N,N})()}_remove(m){var T=this;return(0,u.Z)(function*(){return T._withPendingWrite((0,u.Z)(function*(){return yield T._withRetries(N=>Ai(N,m)),delete T.localCache[m],T.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,u.Z)(function*(){const T=yield m._withRetries(te=>{const Pe=Aa(te,!1).getAll();return new vr(Pe).toPromise()});if(!T)return[];if(0!==m.pendingWrites)return[];const N=[],O=new Set;for(const{fbase_key:te,value:Pe}of T)O.add(te),JSON.stringify(m.localCache[te])!==JSON.stringify(Pe)&&(m.notifyListeners(te,Pe),N.push(te));for(const te of Object.keys(m.localCache))m.localCache[te]&&!O.has(te)&&(m.notifyListeners(te,null),N.push(te));return N})()}notifyListeners(m,T){this.localCache[m]=T;const N=this.listeners[m];if(N)for(const O of Array.from(N))O(T)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(T)}_removeListener(m,T){this.listeners[m]&&(this.listeners[m].delete(T),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function cc(v,g){return tn(v,"POST","/v2/accounts/mfaSignIn:start",Gt(v,g))}function Ni(){return(Ni=(0,u.Z)(function*(v){return(yield tn(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Go(v){return new Promise((g,m)=>{const T=document.createElement("script");T.setAttribute("src",v),T.onload=g,T.onerror=N=>{const O=Me("internal-error");O.customData=N,m(O)},T.type="text/javascript",T.charset="UTF-8",function Ql(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(T)})}function Xl(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Ki=1e12;class Gf{constructor(g){this.auth=g,this.counter=Ki,this._widgets=new Map}render(g,m){const T=this.counter;return this._widgets.set(T,new hc(g,this.auth.name,m||{})),this.counter++,T}reset(g){var m;const T=g||Ki;null===(m=this._widgets.get(T))||void 0===m||m.delete(),this._widgets.delete(T)}getResponse(g){var m;return(null===(m=this._widgets.get(g||Ki))||void 0===m?void 0:m.getResponse())||""}execute(g){var m=this;return(0,u.Z)(function*(){var T;return null===(T=m._widgets.get(g||Ki))||void 0===T||T.execute(),""})()}}class hc{constructor(g,m,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const N="string"==typeof g?document.getElementById(g):g;ne(N,"argument-error",{appName:m}),this.container=N,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ra(v){const g=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<v;T++)g.push(m.charAt(Math.floor(Math.random()*m.length)));return g.join("")}(50);const{callback:g,"expired-callback":m}=this.params;if(g)try{g(this.responseToken)}catch(T){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(T){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const eu=Xl("rcb"),$f=new Je(3e4,6e4);class Ld{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Rt().grecaptcha}load(g,m=""){return ne(function Bd(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),g,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Rt().grecaptcha):new Promise((T,N)=>{const O=Rt().setTimeout(()=>{N(Me(g,"network-request-failed"))},$f.get());Rt()[eu]=()=>{Rt().clearTimeout(O),delete Rt()[eu];const Pe=Rt().grecaptcha;if(!Pe)return void N(Me(g,"internal-error"));const at=Pe.render;Pe.render=(_t,Bt)=>{const xn=at(_t,Bt);return this.counter++,xn},this.hostLanguage=m,T(Pe)},Go(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:eu,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(O),N(Me(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!Rt().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class fc{load(g){return(0,u.Z)(function*(){return new Gf(g)})()}clearedOneInstance(){}}const tu="recaptcha",Vd={theme:"light",type:"image"};class pc{constructor(g,m=Object.assign({},Vd),T){this.parameters=m,this.type=tu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=He(T),this.isInvisible="invisible"===this.parameters.size,ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const N="string"==typeof g?document.getElementById(g):g;ne(N,this.auth,"argument-error"),this.container=N,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fc:new Ld,this.validateStartingState()}verify(){var g=this;return(0,u.Z)(function*(){g.assertNotDestroyed();const m=yield g.render(),T=g.getAssertedRecaptcha();return T.getResponse(m)||new Promise(O=>{const te=Pe=>{!Pe||(g.tokenChangeListeners.delete(te),O(Pe))};g.tokenChangeListeners.add(te),g.isInvisible&&T.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return m=>{if(this.tokenChangeListeners.forEach(T=>T(m)),"function"==typeof g)g(m);else if("string"==typeof g){const T=Rt()[g];"function"==typeof T&&T(m)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,u.Z)(function*(){if(yield g.init(),!g.widgetId){let m=g.container;if(!g.isInvisible){const T=document.createElement("div");m.appendChild(T),m=T}g.widgetId=g.getAssertedRecaptcha().render(m,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,u.Z)(function*(){ne(Ve()&&!Si(),g.auth,"internal-error"),yield function qf(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const m=yield function dc(v){return Ni.apply(this,arguments)}(g.auth);ne(m,g.auth,"internal-error"),g.parameters.sitekey=m})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class $o{constructor(g,m){this.verificationId=g,this.onConfirmation=m}confirm(g){const m=Oo._fromVerification(this.verificationId,g);return this.onConfirmation(m)}}function bm(v,g,m){return jn.apply(this,arguments)}function jn(){return(jn=(0,u.Z)(function*(v,g,m){const T=He(v),N=yield Kt(T,g,(0,V.m9)(m));return new $o(N,O=>cl(T,O))})).apply(this,arguments)}function nu(v,g,m){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,u.Z)(function*(v,g,m){const T=(0,V.m9)(v);yield ks(!1,T,"phone");const N=yield Kt(T.auth,g,(0,V.m9)(m));return new $o(N,O=>ds(T,O))})).apply(this,arguments)}function wm(v,g,m){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,u.Z)(function*(v,g,m){const T=(0,V.m9)(v),N=yield Kt(T.auth,g,(0,V.m9)(m));return new $o(N,O=>Po(T,O))})).apply(this,arguments)}function Kt(v,g,m){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,u.Z)(function*(v,g,m){var T;const N=yield m.verify();try{let O;if(ne("string"==typeof N,v,"argument-error"),ne(m.type===tu,v,"argument-error"),O="string"==typeof g?{phoneNumber:g}:g,"session"in O){const te=O.session;if("phoneNumber"in O)return ne("enroll"===te.type,v,"internal-error"),(yield ir(v,{idToken:te.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:N}})).phoneSessionInfo.sessionInfo;{ne("signin"===te.type,v,"internal-error");const Pe=(null===(T=O.multiFactorHint)||void 0===T?void 0:T.uid)||O.multiFactorUid;return ne(Pe,v,"missing-multi-factor-info"),(yield cc(v,{mfaPendingCredential:te.credential,mfaEnrollmentId:Pe,phoneSignInInfo:{recaptchaToken:N}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:te}=yield Of(v,{phoneNumber:O.phoneNumber,recaptchaToken:N});return te}}finally{m._reset()}})).apply(this,arguments)}function gc(v,g){return Us.apply(this,arguments)}function Us(){return(Us=(0,u.Z)(function*(v,g){yield mn((0,V.m9)(v),g)})).apply(this,arguments)}let co=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=He(m)}verifyPhoneNumber(m,T){return Kt(this.auth,m,(0,V.m9)(T))}static credential(m,T){return Oo._fromVerification(m,T)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:T,temporaryProof:N}=m;return T&&N?Oo._fromTokenResponse(T,N):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function hi(v,g){return g?re(g):(ne(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class ka extends an{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Jn(g,this._buildIdpRequest())}_linkToIdToken(g,m){return Jn(g,this._buildIdpRequest(m))}_getReauthenticationResolver(g){return Jn(g,this._buildIdpRequest())}_buildIdpRequest(g){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(m.idToken=g),m}}function ru(v){return eo(v.auth,new ka(v),v.bypassAuthState)}function mc(v){const{auth:g,user:m}=v;return ne(m,g,"internal-error"),ul(m,new ka(v),v.bypassAuthState)}function br(v){return ml.apply(this,arguments)}function ml(){return(ml=(0,u.Z)(function*(v){const{auth:g,user:m}=v;return ne(m,g,"internal-error"),mn(m,new ka(v),v.bypassAuthState)})).apply(this,arguments)}class Xr{constructor(g,m,T,N,O=!1){this.auth=g,this.resolver=T,this.user=N,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var g=this;return new Promise(function(){var m=(0,u.Z)(function*(T,N){g.pendingPromise={resolve:T,reject:N};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(O){g.reject(O)}});return function(T,N){return m.apply(this,arguments)}}())}onAuthEvent(g){var m=this;return(0,u.Z)(function*(){const{urlResponse:T,sessionId:N,postBody:O,tenantId:te,error:Pe,type:at}=g;if(Pe)return void m.reject(Pe);const _t={auth:m.auth,requestUri:T,sessionId:N,tenantId:te||void 0,postBody:O||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(at)(_t))}catch(Bt){m.reject(Bt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return ru;case"linkViaPopup":case"linkViaRedirect":return br;case"reauthViaPopup":case"reauthViaRedirect":return mc;default:Ze(this.auth,"internal-error")}}resolve(g){Ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _c=new Je(2e3,1e4);function qo(v,g,m){return _l.apply(this,arguments)}function _l(){return(_l=(0,u.Z)(function*(v,g,m){const T=He(v);Ee(v,g,Os);const N=hi(T,m);return new Ji(T,"signInViaPopup",g,N).executeNotNull()})).apply(this,arguments)}function ho(v,g,m){return yl.apply(this,arguments)}function yl(){return(yl=(0,u.Z)(function*(v,g,m){const T=(0,V.m9)(v);Ee(T.auth,g,Os);const N=hi(T.auth,m);return new Ji(T.auth,"reauthViaPopup",g,N,T).executeNotNull()})).apply(this,arguments)}function iu(v,g,m){return su.apply(this,arguments)}function su(){return(su=(0,u.Z)(function*(v,g,m){const T=(0,V.m9)(v);Ee(T.auth,g,Os);const N=hi(T.auth,m);return new Ji(T.auth,"linkViaPopup",g,N,T).executeNotNull()})).apply(this,arguments)}let Ji=(()=>{class v extends Xr{constructor(m,T,N,O,te){super(m,T,O,te),this.provider=N,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,u.Z)(function*(){const T=yield m.execute();return ne(T,m.auth,"internal-error"),T})()}onExecution(){var m=this;return(0,u.Z)(function*(){Ce(1===m.filter.length,"Popup operations only handle one event");const T=Bn();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],T),m.authWindow.associatedEvent=T,m.resolver._originValidation(m.auth).catch(N=>{m.reject(N)}),m.resolver._isIframeWebStorageSupported(m.auth,N=>{N||m.reject(Me(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var T,N;this.pollId=(null===(N=null===(T=this.authWindow)||void 0===T?void 0:T.window)||void 0===N?void 0:N.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Me(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,_c.get())};m()}}return v.currentPopupAction=null,v})();const fi=new Map;class An extends Xr{constructor(g,m,T=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,T),this.eventId=null}execute(){var g=()=>super.execute,m=this;return(0,u.Z)(function*(){let T=fi.get(m.auth._key());if(!T){try{const O=(yield function ou(v,g){return au.apply(this,arguments)}(m.resolver,m.auth))?yield g().call(m):null;T=()=>Promise.resolve(O)}catch(N){T=()=>Promise.reject(N)}fi.set(m.auth._key(),T)}return m.bypassAuthState||fi.set(m.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(g){var m=()=>super.onAuthEvent,T=this;return(0,u.Z)(function*(){if("signInViaRedirect"===g.type)return m().call(T,g);if("unknown"!==g.type){if(g.eventId){const N=yield T.auth._redirectUserForId(g.eventId);if(N)return T.user=N,m().call(T,g);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function au(){return(au=(0,u.Z)(function*(v,g){const m=x(g),T=C(v);if(!(yield T._isAvailable()))return!1;const N="true"===(yield T._get(m));return yield T._remove(m),N})).apply(this,arguments)}function fo(v,g){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,u.Z)(function*(v,g){return C(v)._set(x(g),"true")})).apply(this,arguments)}function vl(){fi.clear()}function E(v,g){fi.set(v._key(),g)}function C(v){return re(v._redirectPersistence)}function x(v){return Ct("pendingRedirect",v.config.apiKey,v.name)}function B(v,g,m){return function Q(v,g,m){return le.apply(this,arguments)}(v,g,m)}function le(){return(le=(0,u.Z)(function*(v,g,m){const T=He(v);Ee(v,g,Os);const N=hi(T,m);return yield fo(N,T),N._openRedirect(T,g,"signInViaRedirect")})).apply(this,arguments)}function Be(v,g,m){return function ot(v,g,m){return ct.apply(this,arguments)}(v,g,m)}function ct(){return(ct=(0,u.Z)(function*(v,g,m){const T=(0,V.m9)(v);Ee(T.auth,g,Os);const N=hi(T.auth,m);yield fo(N,T.auth);const O=yield Cn(T);return N._openRedirect(T.auth,g,"reauthViaRedirect",O)})).apply(this,arguments)}function St(v,g,m){return function Qt(v,g,m){return Et.apply(this,arguments)}(v,g,m)}function Et(){return(Et=(0,u.Z)(function*(v,g,m){const T=(0,V.m9)(v);Ee(T.auth,g,Os);const N=hi(T.auth,m);yield ks(!1,T,g.providerId),yield fo(N,T.auth);const O=yield Cn(T);return N._openRedirect(T.auth,g,"linkViaRedirect",O)})).apply(this,arguments)}function wr(v,g){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,u.Z)(function*(v,g){return yield He(v)._initializationPromise,Wo(v,g,!1)})).apply(this,arguments)}function Wo(v,g){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,u.Z)(function*(v,g,m=!1){const T=He(v),N=hi(T,g),te=yield new An(T,N,m).execute();return te&&!m&&(delete te.user._redirectEventId,yield T._persistUserIfCurrent(te.user),yield T._setRedirectUser(null,g)),te})).apply(this,arguments)}function Cn(v){return er.apply(this,arguments)}function er(){return(er=(0,u.Z)(function*(v){const g=Bn(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class po{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let m=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(g,T)&&(m=!0,this.sendToConsumer(g,T),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function lu(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mr(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=g,m=!0)),m}sendToConsumer(g,m){var T;if(g.error&&!Mr(g)){const N=(null===(T=g.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";m.onError(Me(this.auth,N))}else m.onAuthEvent(g)}isEventForConsumer(g,m){const T=null===m.eventId||!!g.eventId&&g.eventId===m.eventId;return m.filter.includes(g.type)&&T}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tr(g))}saveEventToCache(g){this.cachedEventUids.add(Tr(g)),this.lastProcessedEventTime=Date.now()}}function Tr(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function Mr({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===(null==g?void 0:g.code)}function uu(v){return vc.apply(this,arguments)}function vc(){return(vc=(0,u.Z)(function*(v,g={}){return tn(v,"GET","/v1/projects",g)})).apply(this,arguments)}const Wf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tm=/^https?/;function Fa(){return(Fa=(0,u.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield uu(v);for(const m of g)try{if(Zf(m))return}catch(T){}Ze(v,"unauthorized-domain")})).apply(this,arguments)}function Zf(v){const g=he(),{protocol:m,hostname:T}=new URL(g);if(v.startsWith("chrome-extension://")){const te=new URL(v);return""===te.hostname&&""===T?"chrome-extension:"===m&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===m&&te.hostname===T}if(!Tm.test(m))return!1;if(Wf.test(v))return T===v;const N=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+N+"|"+N+")$","i").test(T)}const wl=new Je(3e4,6e4);function pi(){const v=Rt().___jsl;if(null==v?void 0:v.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let bc=null;function Em(v){return bc=bc||function Dm(v){return new Promise((g,m)=>{var T,N,O;function te(){pi(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{pi(),m(Me(v,"network-request-failed"))},timeout:wl.get()})}if(null===(N=null===(T=Rt().gapi)||void 0===T?void 0:T.iframes)||void 0===N?void 0:N.Iframe)g(gapi.iframes.getContext());else{if(!(null===(O=Rt().gapi)||void 0===O?void 0:O.load)){const Pe=Xl("iframefcb");return Rt()[Pe]=()=>{gapi.load?te():m(Me(v,"network-request-failed"))},Go(`https://apis.google.com/js/api.js?onload=${Pe}`).catch(at=>m(at))}te()}}).catch(g=>{throw bc=null,g})}(v),bc}const Cm=new Je(5e3,15e3),Hs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},La=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Br(v){const g=v.config;ne(g.authDomain,v,"auth-domain-config-required");const m=g.emulator?un(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,T={apiKey:g.apiKey,appName:v.name,v:R.SDK_VERSION},N=La.get(v.config.apiHost);N&&(T.eid=N);const O=v._getFrameworks();return O.length&&(T.fw=O.join(",")),`${m}?${(0,V.xO)(T).slice(1)}`}function zf(){return zf=(0,u.Z)(function*(v){const g=yield Em(v),m=Rt().gapi;return ne(m,v,"internal-error"),g.open({where:document.body,url:Br(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hs,dontclear:!0},T=>new Promise(function(){var N=(0,u.Z)(function*(O,te){yield T.restyle({setHideOnLeave:!1});const Pe=Me(v,"network-request-failed"),at=Rt().setTimeout(()=>{te(Pe)},Cm.get());function _t(){Rt().clearTimeout(at),O(T)}T.ping(_t).then(_t,()=>{te(Pe)})});return function(O,te){return N.apply(this,arguments)}}()))}),zf.apply(this,arguments)}const ei={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Tc{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function Ec(v,g,m,T,N,O){ne(v.config.authDomain,v,"auth-domain-config-required"),ne(v.config.apiKey,v,"invalid-api-key");const te={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:T,v:R.SDK_VERSION,eventId:N};if(g instanceof Os){g.setDefaultLanguage(v.languageCode),te.providerId=g.providerId||"",(0,V.xb)(g.getCustomParameters())||(te.customParameters=JSON.stringify(g.getCustomParameters()));for(const[at,_t]of Object.entries(O||{}))te[at]=_t}if(g instanceof ui){const at=g.getScopes().filter(_t=>""!==_t);at.length>0&&(te.scopes=at.join(","))}v.tenantId&&(te.tid=v.tenantId);const Pe=te;for(const at of Object.keys(Pe))void 0===Pe[at]&&delete Pe[at];return`${function go({config:v}){return v.emulator?un(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,V.xO)(Pe).slice(1)}`}const zo="webStorageSupport",Sm=class Qf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ln,this._completeRedirectFn=Wo,this._overrideRedirectResult=E}_openPopup(g,m,T,N){var O=this;return(0,u.Z)(function*(){var te;Ce(null===(te=O.eventManagers[g._key()])||void 0===te?void 0:te.manager,"_initialize() not called before _openPopup()");const Pe=Ec(g,m,T,he(),N);return function Kf(v,g,m,T=500,N=600){const O=Math.max((window.screen.availHeight-N)/2,0).toString(),te=Math.max((window.screen.availWidth-T)/2,0).toString();let Pe="";const at=Object.assign(Object.assign({},ei),{width:T.toString(),height:N.toString(),top:O,left:te}),_t=(0,V.z$)().toLowerCase();m&&(Pe=Ae(_t)?"_blank":m),K(_t)&&(g=g||"http://localhost",at.scrollbars="yes");const Bt=Object.entries(at).reduce((ti,[Gs,Ko])=>`${ti}${Gs}=${Ko},`,"");if(function zr(v=(0,V.z$)()){var g;return Ut(v)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(_t)&&"_self"!==Pe)return function Yf(v,g){const m=document.createElement("a");m.href=v,m.target=g;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(T)}(g||"",Pe),new Tc(null);const xn=window.open(g||"",Pe,Bt);ne(xn,v,"popup-blocked");try{xn.focus()}catch(ti){}return new Tc(xn)}(g,Pe,Bn())})()}_openRedirect(g,m,T,N){var O=this;return(0,u.Z)(function*(){return yield O._originValidation(g),function wt(v){Rt().location.href=v}(Ec(g,m,T,he(),N)),new Promise(()=>{})})()}_initialize(g){const m=g._key();if(this.eventManagers[m]){const{manager:N,promise:O}=this.eventManagers[m];return N?Promise.resolve(N):(Ce(O,"If manager is not set, promise should be"),O)}const T=this.initAndGetManager(g);return this.eventManagers[m]={promise:T},T.catch(()=>{delete this.eventManagers[m]}),T}initAndGetManager(g){var m=this;return(0,u.Z)(function*(){const T=yield function Zo(v){return zf.apply(this,arguments)}(g),N=new po(g);return T.register("authEvent",O=>(ne(null==O?void 0:O.authEvent,g,"invalid-auth-event"),{status:N.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[g._key()]={manager:N},m.iframes[g._key()]=T,N})()}_isIframeWebStorageSupported(g,m){this.iframes[g._key()].send(zo,{type:zo},N=>{var O;const te=null===(O=null==N?void 0:N[0])||void 0===O?void 0:O[zo];void 0!==te&&m(!!te),Ze(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function bl(v){return Fa.apply(this,arguments)}(g)),this.originValidationPromises[m]}get _shouldInitProactively(){return Ar()||W()||Ut()}};class Gd extends class Am{constructor(g){this.factorId=g}_process(g,m,T){switch(m.type){case"enroll":return this._finalizeEnroll(g,m.credential,T);case"signin":return this._finalizeSignIn(g,m.credential);default:return fe("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Gd(g)}_finalizeEnroll(g,m,T){return function oc(v,g){return tn(v,"POST","/v2/accounts/mfaEnrollment:finalize",Gt(v,g))}(g,{idToken:m,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,m){return function Ho(v,g){return tn(v,"POST","/v2/accounts/mfaSignIn:finalize",Gt(v,g))}(g,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Xf=(()=>{class v{constructor(){}static assertion(m){return Gd._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var ep="@firebase/auth";class tp{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var m=this;return(0,u.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const m=this.auth.onIdTokenChanged(T=>{var N;g((null===(N=T)||void 0===N?void 0:N.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,m),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const m=this.internalListeners.get(g);!m||(this.internalListeners.delete(g),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function rp(v){(0,R._registerComponent)(new _e.wA("auth",(g,{options:m})=>{const T=g.getProvider("app").getImmediate(),N=g.getProvider("heartbeat"),{apiKey:O,authDomain:te}=T.options;return((Pe,at)=>{ne(O&&!O.includes(":"),"invalid-api-key",{appName:Pe.name}),ne(!(null==te?void 0:te.includes(":")),"argument-error",{appName:Pe.name});const _t={apiKey:O,authDomain:te,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dr(v)},Bt=new Kr(Pe,at,_t);return function be(v,g){const m=(null==g?void 0:g.persistence)||[],T=(Array.isArray(m)?m:[m]).map(re);(null==g?void 0:g.errorMap)&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(T,null==g?void 0:g.popupRedirectResolver)}(Bt,m),Bt})(T,N)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,m,T)=>{g.getProvider("auth-internal").initialize()})),(0,R._registerComponent)(new _e.wA("auth-internal",g=>{const m=He(g.getProvider("auth").getImmediate());return new tp(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,R.registerVersion)(ep,"0.20.1",function np(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,R.registerVersion)(ep,"0.20.1","esm2017")}("Browser")},2090:(it,we,k)=>{k.d(we,{$s:()=>$t,BH:()=>Ke,G6:()=>ne,L:()=>ce,LL:()=>he,Mn:()=>Ee,Sg:()=>Ne,UG:()=>me,US:()=>_e,ZB:()=>j,ZR:()=>be,b$:()=>Ze,d:()=>Me,eu:()=>Ce,hl:()=>fe,jU:()=>Se,m9:()=>cn,ne:()=>Hi,pd:()=>Ei,r3:()=>Gt,ru:()=>ze,tV:()=>ye,uI:()=>$e,vZ:()=>Ir,w1:()=>xe,xO:()=>ji,xb:()=>Tn,z$:()=>Le,zI:()=>J,zd:()=>ii});const ae=function(U){const q=[];let z=0;for(let Te=0;Te<U.length;Te++){let G=U.charCodeAt(Te);G<128?q[z++]=G:G<2048?(q[z++]=G>>6|192,q[z++]=63&G|128):55296==(64512&G)&&Te+1<U.length&&56320==(64512&U.charCodeAt(Te+1))?(G=65536+((1023&G)<<10)+(1023&U.charCodeAt(++Te)),q[z++]=G>>18|240,q[z++]=G>>12&63|128,q[z++]=G>>6&63|128,q[z++]=63&G|128):(q[z++]=G>>12|224,q[z++]=G>>6&63|128,q[z++]=63&G|128)}return q},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,q){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,Te=[];for(let G=0;G<U.length;G+=3){const ee=U[G],ke=G+1<U.length,nt=ke?U[G+1]:0,vt=G+2<U.length,kt=vt?U[G+2]:0;let Yn=(15&nt)<<2|kt>>6,de=63&kt;vt||(de=64,ke||(Yn=64)),Te.push(z[ee>>2],z[(3&ee)<<4|nt>>4],z[Yn],z[de])}return Te.join("")},encodeString(U,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(U):this.encodeByteArray(ae(U),q)},decodeString(U,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(U):function(U){const q=[];let z=0,Te=0;for(;z<U.length;){const G=U[z++];if(G<128)q[Te++]=String.fromCharCode(G);else if(G>191&&G<224){const ee=U[z++];q[Te++]=String.fromCharCode((31&G)<<6|63&ee)}else if(G>239&&G<365){const vt=((7&G)<<18|(63&U[z++])<<12|(63&U[z++])<<6|63&U[z++])-65536;q[Te++]=String.fromCharCode(55296+(vt>>10)),q[Te++]=String.fromCharCode(56320+(1023&vt))}else{const ee=U[z++],ke=U[z++];q[Te++]=String.fromCharCode((15&G)<<12|(63&ee)<<6|63&ke)}}return q.join("")}(this.decodeStringToByteArray(U,q))},decodeStringToByteArray(U,q){this.init_();const z=q?this.charToByteMapWebSafe_:this.charToByteMap_,Te=[];for(let G=0;G<U.length;){const ee=z[U.charAt(G++)],nt=G<U.length?z[U.charAt(G)]:0;++G;const kt=G<U.length?z[U.charAt(G)]:64;++G;const Ct=G<U.length?z[U.charAt(G)]:64;if(++G,null==ee||null==nt||null==kt||null==Ct)throw Error();Te.push(ee<<2|nt>>4),64!==kt&&(Te.push(nt<<4&240|kt>>2),64!==Ct&&Te.push(kt<<6&192|Ct))}return Te},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},ce=function(U){return function(U){const q=ae(U);return _e.encodeByteArray(q,!0)}(U).replace(/\./g,"")},ye=function(U){try{return _e.decodeString(U,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function j(U,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return q}for(const z in q)!q.hasOwnProperty(z)||!ie(z)||(U[z]=j(U[z],q[z]));return U}function ie(U){return"__proto__"!==U}class Ke{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,z)=>{this.resolve=q,this.reject=z})}wrapCallback(q){return(z,Te)=>{z?this.reject(z):this.resolve(Te),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(z):q(z,Te))}}}function Ne(U,q){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Te=q||"demo-project",G=U.iat||0,ee=U.sub||U.user_id;if(!ee)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ke=Object.assign({iss:`https://securetoken.google.com/${Te}`,aud:Te,iat:G,exp:G+3600,auth_time:G,sub:ee,user_id:ee,firebase:{sign_in_provider:"custom",identities:{}}},U);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(ke)),""].join(".")}function Le(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function $e(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function me(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function Se(){return"object"==typeof self&&self.self===self}function ze(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function Ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Me(){return Le().indexOf("Electron/")>=0}function xe(){const U=Le();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function Ee(){return Le().indexOf("MSAppHost/")>=0}function ne(){return!me()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fe(){return"object"==typeof indexedDB}function Ce(){return new Promise((U,q)=>{try{let z=!0;const Te="validate-browser-context-for-indexeddb-analytics-module",G=self.indexedDB.open(Te);G.onsuccess=()=>{G.result.close(),z||self.indexedDB.deleteDatabase(Te),U(!0)},G.onupgradeneeded=()=>{z=!1},G.onerror=()=>{var ee;q((null===(ee=G.error)||void 0===ee?void 0:ee.message)||"")}}catch(z){q(z)}})}function J(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class be extends Error{constructor(q,z,Te){super(z),this.code=q,this.customData=Te,this.name="FirebaseError",Object.setPrototypeOf(this,be.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,he.prototype.create)}}class he{constructor(q,z,Te){this.service=q,this.serviceName=z,this.errors=Te}create(q,...z){const Te=z[0]||{},G=`${this.service}/${q}`,ee=this.errors[q],ke=ee?function Ve(U,q){return U.replace(yt,(z,Te)=>{const G=q[Te];return null!=G?String(G):`<${Te}?>`})}(ee,Te):"Error";return new be(G,`${this.serviceName}: ${ke} (${G}).`,Te)}}const yt=/\{\$([^}]+)}/g;function Gt(U,q){return Object.prototype.hasOwnProperty.call(U,q)}function Tn(U){for(const q in U)if(Object.prototype.hasOwnProperty.call(U,q))return!1;return!0}function Ir(U,q){if(U===q)return!0;const z=Object.keys(U),Te=Object.keys(q);for(const G of z){if(!Te.includes(G))return!1;const ee=U[G],ke=q[G];if(Sn(ee)&&Sn(ke)){if(!Ir(ee,ke))return!1}else if(ee!==ke)return!1}for(const G of Te)if(!z.includes(G))return!1;return!0}function Sn(U){return null!==U&&"object"==typeof U}function ji(U){const q=[];for(const[z,Te]of Object.entries(U))Array.isArray(Te)?Te.forEach(G=>{q.push(encodeURIComponent(z)+"="+encodeURIComponent(G))}):q.push(encodeURIComponent(z)+"="+encodeURIComponent(Te));return q.length?"&"+q.join("&"):""}function ii(U){const q={};return U.replace(/^\?/,"").split("&").forEach(Te=>{if(Te){const[G,ee]=Te.split("=");q[decodeURIComponent(G)]=decodeURIComponent(ee)}}),q}function Ei(U){const q=U.indexOf("?");if(!q)return"";const z=U.indexOf("#",q);return U.substring(q,z>0?z:void 0)}function Hi(U,q){const z=new bt(U,q);return z.subscribe.bind(z)}class bt{constructor(q,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{q(this)}).catch(Te=>{this.error(Te)})}next(q){this.forEachObserver(z=>{z.next(q)})}error(q){this.forEachObserver(z=>{z.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,z,Te){let G;if(void 0===q&&void 0===z&&void 0===Te)throw new Error("Missing Observer.");G=function bn(U,q){if("object"!=typeof U||null===U)return!1;for(const z of q)if(z in U&&"function"==typeof U[z])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:z,complete:Te},void 0===G.next&&(G.next=nn),void 0===G.error&&(G.error=nn),void 0===G.complete&&(G.complete=nn);const ee=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?G.error(this.finalError):G.complete()}catch(ke){}}),this.observers.push(G),ee}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,q)}sendOne(q,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{z(this.observers[q])}catch(Te){"undefined"!=typeof console&&console.error&&console.error(Te)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nn(){}function $t(U,q=1e3,z=2){const Te=q*Math.pow(z,U),G=Math.round(.5*Te*(Math.random()-.5)*2);return Math.min(144e5,Te+G)}function cn(U){return U&&U._delegate?U._delegate:U}},8678:(it,we,k)=>{var u=k(5e3);let V=null;function R(){return V}const pe=new u.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function ye(){return(0,u.LFG)(j)}()},providedIn:"platform"}),n})();const $=new u.OlP("Location Initialized");let j=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return R().getBaseHref(this._doc)}onPopState(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ie()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ie()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pe))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Ke(){return new j((0,u.LFG)(pe))}()},providedIn:"platform"}),n})();function ie(){return!!window.history.pushState}function Ne(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Le(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function $e(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Se(n){const e=(0,u.LFG)(pe).location;return new Ze((0,u.LFG)(ce),e&&e.origin||"")}()},providedIn:"root"}),n})();const ze=new u.OlP("appBaseHref");let Ze=(()=>{class n extends me{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ne(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+$e(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const d=this.prepareExternalUrl(i+$e(a));this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,a){const d=this.prepareExternalUrl(i+$e(a));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ce),u.LFG(ze,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ne(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let d=this.prepareExternalUrl(i+$e(a));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,a){let d=this.prepareExternalUrl(i+$e(a));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ce),u.LFG(ze,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n{constructor(t,r){this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Le(ne(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+$e(r))}normalize(t){return n.stripTrailingSlash(function Ye(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ne(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$e(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$e(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=$e,n.joinWithSlash=Ne,n.stripTrailingSlash=Le,n.\u0275fac=function(t){return new(t||n)(u.LFG(me),u.LFG(ce))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Ee(){return new xe((0,u.LFG)(me),(0,u.LFG)(ce))}()},providedIn:"root"}),n})();function ne(n){return n.replace(/\/index.html$/,"")}function Js(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}class Mo{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let vn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,d)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Mo(i.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,d),xs(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{xs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function xs(n,e){n.context.$implicit=e.item}let En=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new dn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Uu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Uu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class dn{constructor(){this.$implicit=null,this.ngIf=null}}function Uu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}class Hu{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Rf{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const as=new Rf,Of=new Hu;let sl=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,u.QGY)(t))return as;if((0,u.F4k)(t))return Of;throw function Jn(n,e){return new u.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO,16))},n.\u0275pipe=u.Yjl({name:"async",type:n,pure:!1}),n})(),Qn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function Nr(n){return"server"===n}let al=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new ll((0,u.LFG)(pe),window)}),n})();class ll{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function cs(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const d=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(d)return d}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Hl(this.window.history)||Hl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Hl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class mn{}class ks extends class ya extends class _e{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ue(n){V||(V=n)}(new ks)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ul(){return hn=hn||document.querySelector("base"),hn?hn.getAttribute("href"):null}();return null==t?null:function eo(n){va=va||document.createElement("a"),va.setAttribute("href",n);const e=va.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){hn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Js(document.cookie,e)}}let va,hn=null;const hr=new u.OlP("TRANSITION_ID"),Fn=[{provide:u.ip1,useFactory:function cl(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const r=R(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[hr,pe,u.zs3],multi:!0}];class ds{static init(){(0,u.VLi)(new ds)}addToWindow(e){u.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const i=u.dqk.getAllAngularTestabilities();let a=i.length,d=!1;const f=function(_){d=d||_,a--,0==a&&r(d)};i.forEach(function(_){_.whenStable(f)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?R().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let fr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Po=new u.OlP("EventManagerPlugins");let qi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const d=i[a];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Po),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class $l{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=R().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Yr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Ps=(()=>{class n extends Yr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const d=this._doc.createElement("style");d.textContent=a,i.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Fs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Fs))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Fs(n){R().remove(n)}const Tt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},to=/%COMP%/g;function Ls(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ls(n,i,t):(i=i.replace(to,n),t.push(i))}return t}function Oe(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let hl=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new wn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case u.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Wi(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case u.ifc.ShadowDom:return new ql(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ls(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(qi),u.LFG(Ps),u.LFG(u.AFp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class wn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Tt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Tt[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Tt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,i&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Oe(r)):this.eventManager.addEventListener(e,t,Oe(r))}}class Wi extends wn{constructor(e,t,r,i){super(e),this.component=r;const a=Ls(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Fo(n){return"_ngcontent-%COMP%".replace(to,n)}(i+"-"+r.id),this.hostAttr=function Md(n){return"_nghost-%COMP%".replace(to,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ql extends wn{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Ls(i.id,i.styles,[]);for(let d=0;d<a.length;d++){const f=document.createElement("style");f.textContent=a[d],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let wa=(()=>{class n extends $l{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const xd=["alt","control","meta","shift"],Xu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},no={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},pr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Zi=(()=>{class n extends $l{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),d=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>R().onAndCancel(t,a.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let d="";if(xd.forEach(_=>{const w=r.indexOf(_);w>-1&&(r.splice(w,1),d+=_+".")}),d+=a,0!=r.length||0===a.length)return null;const f={};return f.domEventName=i,f.fullKey=d,f}static getEventFullKey(t){let r="",i=function Lo(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&no.hasOwnProperty(e)&&(e=no[e]))}return Xu[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),xd.forEach(a=>{a!=i&&pr[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const ec=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:"browser"},{provide:u.g9A,useValue:function Bo(){ks.makeCurrent(),ds.init()},multi:!0},{provide:pe,useFactory:function Rd(){return(0,u.RDi)(document),document},deps:[]}]),Ta=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function Jr(){return new u.qLn},deps:[]},{provide:Po,useClass:wa,multi:!0,deps:[pe,u.R0b,u.Lbi]},{provide:Po,useClass:Zi,multi:!0,deps:[pe]},{provide:hl,useClass:hl,deps:[qi,Ps,u.AFp]},{provide:u.FYo,useExisting:hl},{provide:Yr,useExisting:Ps},{provide:Ps,useClass:Ps,deps:[pe]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b]},{provide:qi,useClass:qi,deps:[Po,u.R0b]},{provide:mn,useClass:fr,deps:[]}];let Wl=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:hr,useExisting:u.AFp},Fn]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(n,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:Ta,imports:[Qn,u.hGG]}),n})();"undefined"!=typeof window&&window;var Bs=k(3269),qn=k(8996);function dt(...n){const e=(0,Bs.yG)(n);return(0,qn.D)(n,e)}var sr=k(8306),Ln=k(5577),ci=k(576);function zi(n,e){return(0,ci.m)(e)?(0,Ln.z)(n,e,1):(0,Ln.z)(n,1)}var Bn=k(4482),Vn=k(5403);function Rt(n,e){return(0,Bn.e)((t,r)=>{let i=0;t.subscribe((0,Vn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var wt=k(4004);class Si{}class Sa{}class yr{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),d=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(d):this.headers.set(a,[d])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof yr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new yr;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof yr?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let d=this.headers.get(t);if(!d)return;d=d.filter(f=>-1===a.indexOf(f)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Hf{encodeKey(e){return oo(e)}encodeValue(e){return oo(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Jl=/%(\d[a-f0-9])/gi,Fd={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function oo(n){return encodeURIComponent(n).replace(Jl,(e,t)=>{var r;return null!==(r=Fd[t])&&void 0!==r?r:e})}function ao(n){return`${n}`}class vr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Hf,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function lc(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[d,f]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],_=t.get(d)||[];_.push(f),t.set(d,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new vr({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(ao(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(ao(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class di{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function pl(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function Vs(n){return"undefined"!=typeof Blob&&n instanceof Blob}function gl(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Ai{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function lo(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new yr),this.context||(this.context=new di),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+d}}else this.params=new vr,this.urlWithParams=t}serializeBody(){return null===this.body?null:pl(this.body)||Vs(this.body)||gl(this.body)||function Na(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof vr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||gl(this.body)?null:Vs(this.body)?this.body.type||null:pl(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof vr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,a=e.responseType||this.responseType,d=void 0!==e.body?e.body:this.body,f=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,_=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let w=e.headers||this.headers,I=e.params||this.params;const A=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(w=Object.keys(e.setHeaders).reduce((P,L)=>P.set(L,e.setHeaders[L]),w)),e.setParams&&(I=Object.keys(e.setParams).reduce((P,L)=>P.set(L,e.setParams[L]),I)),new Ai(r,i,d,{params:I,headers:w,context:A,reportProgress:_,responseType:a,withCredentials:f})}}var Rn=(()=>((Rn=Rn||{})[Rn.Sent=0]="Sent",Rn[Rn.UploadProgress=1]="UploadProgress",Rn[Rn.ResponseHeader=2]="ResponseHeader",Rn[Rn.DownloadProgress=3]="DownloadProgress",Rn[Rn.Response=4]="Response",Rn[Rn.User=5]="User",Rn))();class uc{constructor(e,t=200,r="OK"){this.headers=e.headers||new yr,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Ma extends uc{constructor(e={}){super(e),this.type=Rn.ResponseHeader}clone(e={}){return new Ma({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class gs extends uc{constructor(e={}){super(e),this.type=Rn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new gs({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class cc extends uc{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Ho(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let dc=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof Ai)a=t;else{let _,w;_=i.headers instanceof yr?i.headers:new yr(i.headers),i.params&&(w=i.params instanceof vr?i.params:new vr({fromObject:i.params})),a=new Ai(t,r,void 0!==i.body?i.body:null,{headers:_,context:i.context,params:w,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const d=dt(a).pipe(zi(_=>this.handler.handle(_)));if(t instanceof Ai||"events"===i.observe)return d;const f=d.pipe(Rt(_=>_ instanceof gs));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe((0,wt.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return f.pipe((0,wt.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return f.pipe((0,wt.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return f.pipe((0,wt.U)(_=>_.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new vr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Ho(i,r))}post(t,r,i={}){return this.request("POST",t,Ho(i,r))}put(t,r,i={}){return this.request("PUT",t,Ho(i,r))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Si))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Ni{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Ql=new u.OlP("HTTP_INTERCEPTORS");let Go=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const $f=/^\)\]\}',?\n/;let Ld=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new sr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((L,Z)=>i.setRequestHeader(L,Z.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const L=t.detectContentTypeHeader();null!==L&&i.setRequestHeader("Content-Type",L)}if(t.responseType){const L=t.responseType.toLowerCase();i.responseType="json"!==L?L:"text"}const a=t.serializeBody();let d=null;const f=()=>{if(null!==d)return d;const L=i.statusText||"OK",Z=new yr(i.getAllResponseHeaders()),se=function Un(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return d=new Ma({headers:Z,status:i.status,statusText:L,url:se}),d},_=()=>{let{headers:L,status:Z,statusText:se,url:Ie}=f(),Ue=null;204!==Z&&(Ue=void 0===i.response?i.responseText:i.response),0===Z&&(Z=Ue?200:0);let We=Z>=200&&Z<300;if("json"===t.responseType&&"string"==typeof Ue){const Qe=Ue;Ue=Ue.replace($f,"");try{Ue=""!==Ue?JSON.parse(Ue):null}catch(je){Ue=Qe,We&&(We=!1,Ue={error:je,text:Ue})}}We?(r.next(new gs({body:Ue,headers:L,status:Z,statusText:se,url:Ie||void 0})),r.complete()):r.error(new cc({error:Ue,headers:L,status:Z,statusText:se,url:Ie||void 0}))},w=L=>{const{url:Z}=f(),se=new cc({error:L,status:i.status||0,statusText:i.statusText||"Unknown Error",url:Z||void 0});r.error(se)};let I=!1;const A=L=>{I||(r.next(f()),I=!0);let Z={type:Rn.DownloadProgress,loaded:L.loaded};L.lengthComputable&&(Z.total=L.total),"text"===t.responseType&&!!i.responseText&&(Z.partialText=i.responseText),r.next(Z)},P=L=>{let Z={type:Rn.UploadProgress,loaded:L.loaded};L.lengthComputable&&(Z.total=L.total),r.next(Z)};return i.addEventListener("load",_),i.addEventListener("error",w),i.addEventListener("timeout",w),i.addEventListener("abort",w),t.reportProgress&&(i.addEventListener("progress",A),null!==a&&i.upload&&i.upload.addEventListener("progress",P)),i.send(a),r.next({type:Rn.Sent}),()=>{i.removeEventListener("error",w),i.removeEventListener("abort",w),i.removeEventListener("load",_),i.removeEventListener("timeout",w),t.reportProgress&&(i.removeEventListener("progress",A),null!==a&&i.upload&&i.upload.removeEventListener("progress",P)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(mn))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Bd=new u.OlP("XSRF_COOKIE_NAME"),fc=new u.OlP("XSRF_HEADER_NAME");class tu{}let Vd=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Js(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pe),u.LFG(u.Lbi),u.LFG(Bd))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),pc=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(tu),u.LFG(fc))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),qf=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(Ql,[]);this.chain=r.reduceRight((i,a)=>new Ni(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Sa),u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),jn=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:pc,useClass:Go}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Bd,useValue:t.cookieName}:[],t.headerName?{provide:fc,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[pc,{provide:Ql,useExisting:pc,multi:!0},{provide:tu,useClass:Vd},{provide:Bd,useValue:"XSRF-TOKEN"},{provide:fc,useValue:"X-XSRF-TOKEN"}]}),n})(),nu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[dc,{provide:Si,useClass:qf},Ld,{provide:Sa,useExisting:Ld}],imports:[[jn.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();var Yi=k(515),Kt=k(7579),Hn=k(8421),gc=k(1144);const{isArray:Us}=Array;function hi(n){return(0,wt.U)(e=>function co(n,e){return Us(e)?n(...e):n(e)}(n,e))}const ka=["addListener","removeListener"],ru=["addEventListener","removeEventListener"],mc=["on","off"];function br(n,e,t,r){if((0,ci.m)(t)&&(r=t,t=void 0),r)return br(n,e,t).pipe(hi(r));const[i,a]=function qo(n){return(0,ci.m)(n.addEventListener)&&(0,ci.m)(n.removeEventListener)}(n)?ru.map(d=>f=>n[d](e,f,t)):function Xr(n){return(0,ci.m)(n.addListener)&&(0,ci.m)(n.removeListener)}(n)?ka.map(ml(n,e)):function _c(n){return(0,ci.m)(n.on)&&(0,ci.m)(n.off)}(n)?mc.map(ml(n,e)):[];if(!i&&(0,gc.z)(n))return(0,Ln.z)(d=>br(d,e,t))((0,Hn.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new sr.y(d=>{const f=(..._)=>d.next(1<_.length?_:_[0]);return i(f),()=>a(f)})}function ml(n,e){return t=>r=>n[t](e,r)}var _l=k(4986),ho=k(3532);const{isArray:su}=Array;function Ji(n){return 1===n.length&&su(n[0])?n[0]:n}class An extends Kt.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:ou}=Array,{getPrototypeOf:au,prototype:fo,keys:Pa}=Object;function vl(n){if(1===n.length){const e=n[0];if(ou(e))return{args:e,keys:null};if(function E(n){return n&&"object"==typeof n&&au(n)===fo}(e)){const t=Pa(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var C=k(4671);function x(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var B=k(9672);function Be(n,e,t){n?(0,B.f)(t,n,e):e()}var ot=k(5032);function Qt(...n){const e=(0,Bs.jO)(n),t=Ji(n);return t.length?new sr.y(r=>{let i=t.map(()=>[]),a=t.map(()=>!1);r.add(()=>{i=a=null});for(let d=0;!r.closed&&d<t.length;d++)(0,Hn.Xf)(t[d]).subscribe((0,Vn.x)(r,f=>{if(i[d].push(f),i.every(_=>_.length)){const _=i.map(w=>w.shift());r.next(e?e(..._):_),i.some((w,I)=>!w.length&&a[I])&&r.complete()}},()=>{a[d]=!0,!i[d].length&&r.complete()}));return()=>{i=a=null}}):Yi.E}new sr.y(ot.Z);var Et=k(8189);function Nn(...n){return function wr(){return(0,Et.J)(1)}()((0,qn.D)(n,(0,Bs.yG)(n)))}function Mn(n){return(0,Bn.e)((e,t)=>{(0,Hn.Xf)(n).subscribe((0,Vn.x)(t,()=>t.complete(),ot.Z)),!t.closed&&e.subscribe(t)})}var Cn=k(5698);function er(...n){const e=(0,Bs.yG)(n);return(0,Bn.e)((t,r)=>{(e?Nn(n,t,e):Nn(n,t)).subscribe(r)})}function po(n,e){return n===e}function Tr(n,e){return(0,Bn.e)((t,r)=>{let i=null,a=0,d=!1;const f=()=>d&&!i&&r.complete();t.subscribe((0,Vn.x)(r,_=>{null==i||i.unsubscribe();let w=0;const I=a++;(0,Hn.Xf)(n(_,I)).subscribe(i=(0,Vn.x)(r,A=>r.next(e?e(_,A,I,w++):A),()=>{i=null,f()}))},()=>{d=!0,f()}))})}var Mr=k(8505);function lu(...n){const e=(0,Bs.jO)(n);return(0,Bn.e)((t,r)=>{const i=n.length,a=new Array(i);let d=n.map(()=>!1),f=!1;for(let _=0;_<i;_++)(0,Hn.Xf)(n[_]).subscribe((0,Vn.x)(r,w=>{a[_]=w,!f&&!d[_]&&(d[_]=!0,(f=d.every(C.y))&&(d=null))},ot.Z));t.subscribe((0,Vn.x)(r,_=>{if(f){const w=[_,...a];r.next(e?e(...w):w)}}))})}let Zf=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),wl=(()=>{class n extends Zf{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const pi=new u.OlP("NgValueAccessor"),Em={provide:pi,useExisting:(0,u.Gpc)(()=>js),multi:!0},Im=new u.OlP("CompositionEventMode");let js=(()=>{class n extends Zf{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Cm(){const n=R()?R().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(Im,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[u._Bn([Em]),u.qOj]}),n})();function Hs(n){return null==n||0===n.length}function La(n){return null!=n&&"number"==typeof n.length}const Br=new u.OlP("NgValidators"),Zo=new u.OlP("NgAsyncValidators"),zf=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ei{static min(e){return function wc(n){return e=>{if(Hs(e.value)||Hs(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Ud(n){return e=>{if(Hs(e.value)||Hs(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function jd(n){return Hs(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Hd(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Tc(n){return Hs(n.value)||zf.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Kf(n){return e=>Hs(e.value)||!La(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Yf(n){return e=>La(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Jf(n){if(!n)return Dc;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Hs(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Gd(e)}static composeAsync(e){return ep(e)}}function Dc(n){return null}function Ec(n){return null!=n}function go(n){const e=(0,u.QGY)(n)?(0,qn.D)(n):n;return(0,u.CqO)(e),e}function zo(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Qf(n,e){return e.map(t=>t(n))}function Am(n){return n.map(e=>function Sm(n){return!n.validate}(e)?e:t=>e.validate(t))}function Gd(n){if(!n)return null;const e=n.filter(Ec);return 0==e.length?null:function(t){return zo(Qf(t,e))}}function Xf(n){return null!=n?Gd(Am(n)):null}function ep(n){if(!n)return null;const e=n.filter(Ec);return 0==e.length?null:function(t){return function Fa(...n){const e=(0,Bs.jO)(n),{args:t,keys:r}=vl(n),i=new sr.y(a=>{const{length:d}=t;if(!d)return void a.complete();const f=new Array(d);let _=d,w=d;for(let I=0;I<d;I++){let A=!1;(0,Hn.Xf)(t[I]).subscribe((0,Vn.x)(a,P=>{A||(A=!0,w--),f[I]=P},()=>_--,void 0,()=>{(!_||!A)&&(w||a.next(r?x(r,f):f),a.complete())}))}});return e?i.pipe(hi(e)):i}(Qf(t,e).map(go)).pipe((0,wt.U)(zo))}}function cu(n){return null!=n?ep(Am(n)):null}function tp(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function np(n){return n._rawValidators}function rp(n){return n._rawAsyncValidators}function ip(n){return n?Array.isArray(n)?n:[n]:[]}function v(n,e){return Array.isArray(n)?n.includes(e):n===e}function g(n,e){const t=ip(e);return ip(n).forEach(i=>{v(t,i)||t.push(i)}),t}function m(n,e){return ip(e).filter(t=>!v(n,t))}class T{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Xf(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=cu(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class N extends T{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class O extends T{get formDirective(){return null}get path(){return null}}class te{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let _t=(()=>{class n extends te{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(N,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[u.qOj]}),n})(),Bt=(()=>{class n extends te{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(O,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[u.qOj]}),n})();function tr(n,e){return[...e.path,n]}function Ic(n,e){Fm(n,e),e.valueAccessor.writeValue(n.value),function hD(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&_0(n,e)})}(n,e),function BM(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function fD(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&_0(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function m0(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ap(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),lp(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Sc(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Fm(n,e){const t=np(n);null!==e.validator?n.setValidators(tp(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=rp(n);null!==e.asyncValidator?n.setAsyncValidators(tp(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Sc(e._rawValidators,i),Sc(e._rawAsyncValidators,i)}function lp(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=np(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(d=>d!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=rp(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(d=>d!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return Sc(e._rawValidators,r),Sc(e._rawAsyncValidators,r),t}function _0(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Vr(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function Vm(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===js?t=a:function qd(n){return Object.getPrototypeOf(n.constructor)===wl}(a)?r=a:i=a}),i||r||t||null}function Um(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Ac="VALID",cp="INVALID",hu="PENDING",Wd="DISABLED";function Zd(n){return(hp(n)?n.validators:n)||null}function y0(n){return Array.isArray(n)?Xf(n):n||null}function Hm(n,e){return(hp(e)?e.asyncValidators:n)||null}function dp(n){return Array.isArray(n)?cu(n):n||null}function hp(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const v0=n=>n instanceof Ba,Nc=n=>n instanceof zd;function b0(n){return v0(n)?n.value:n.getRawValue()}function w0(n,e){const t=Nc(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new u.vHH(1e3,"");if(!r[e])throw new u.vHH(1001,"")}function T0(n,e){Nc(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new u.vHH(1002,"")})}class Gm{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=y0(this._rawValidators),this._composedAsyncValidatorFn=dp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ac}get invalid(){return this.status===cp}get pending(){return this.status==hu}get disabled(){return this.status===Wd}get enabled(){return this.status!==Wd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=y0(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=dp(e)}addValidators(e){this.setValidators(g(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(g(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(m(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(m(e,this._rawAsyncValidators))}hasValidator(e){return v(this._rawValidators,e)}hasAsyncValidator(e){return v(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=hu,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Wd,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ac,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ac||this.status===hu)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wd:Ac}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=hu,this._hasOwnPendingAsyncValidator=!0;const t=go(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function _D(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=Nc(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof vD)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?Wd:this.errors?cp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hu)?hu:this._anyControlsHaveStatus(cp)?cp:Ac}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){hp(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ba extends Gm{constructor(e=null,t,r){super(Zd(t),Hm(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hp(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Um(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Um(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class zd extends Gm{constructor(e,t,r){super(Zd(t),Hm(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){T0(this,e),Object.keys(e).forEach(r=>{w0(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=b0(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class vD extends Gm{constructor(e,t,r){super(Zd(t),Hm(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){T0(this,e),e.forEach((r,i)=>{w0(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>b0(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const D0={provide:N,useExisting:(0,u.Gpc)(()=>ms)},TD=(()=>Promise.resolve(null))();let ms=(()=>{class n extends N{constructor(t,r,i,a,d){super(),this._changeDetectorRef=d,this.control=new Ba,this._registered=!1,this.update=new u.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Vm(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Vr(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ic(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){TD.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;TD.then(()=>{var a;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(a=this._changeDetectorRef)||void 0===a||a.markForCheck()})}_getPath(t){return this._parent?tr(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(O,9),u.Y36(Br,10),u.Y36(Zo,10),u.Y36(pi,10),u.Y36(u.sBO,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([D0]),u.qOj,u.TTD]}),n})(),Jd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Zm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const S0=new u.OlP("NgModelWithFormControlWarning"),A0={provide:O,useExisting:(0,u.Gpc)(()=>Qd)};let Qd=(()=>{class n extends O{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(lp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Ic(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ap(t.control||null,t,!1),Um(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function up(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(ap(r||null,t),v0(i)&&(Ic(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function pD(n,e){Fm(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function $d(n,e){return lp(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Fm(this.form,this),this._oldForm&&lp(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Br,10),u.Y36(Zo,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([A0]),u.qOj,u.TTD]}),n})();const ED={provide:N,useExisting:(0,u.Gpc)(()=>mp)};let mp=(()=>{class n extends N{constructor(t,r,i,a,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new u.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Vm(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),Vr(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return tr(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(u.Y36(O,13),u.Y36(Br,10),u.Y36(Zo,10),u.Y36(pi,10),u.Y36(S0,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[u._Bn([ED]),u.qOj,u.TTD]}),n})();const M0={provide:pi,useExisting:(0,u.Gpc)(()=>Xd),multi:!0};function _p(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Xd=(()=>{class n extends wl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=_p(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function x0(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([M0]),u.qOj]}),n})(),R0=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(_p(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(Xd,9))},n.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const CD={provide:pi,useExisting:(0,u.Gpc)(()=>yp),multi:!0};function Xm(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let yp=(()=>{class n extends wl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(a=>this._getOptionId(a));r=(a,d)=>{a._setSelected(i.indexOf(d.toString())>-1)}}else r=(i,a)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],a=r.selectedOptions;if(void 0!==a){const d=a;for(let f=0;f<d.length;f++){const w=this._getOptionValue(d[f].value);i.push(w)}}else{const d=r.options;for(let f=0;f<d.length;f++){const _=d[f];if(_.selected){const w=this._getOptionValue(_.value);i.push(w)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function O0(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([CD]),u.qOj]}),n})(),e_=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Xm(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Xm(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(yp,9))},n.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),s_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Zm]]}),n})(),H0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[s_]}),n})(),G0=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:S0,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[s_]}),n})();Math,Math,Math;const tE=["*"],wb=["dialog"];function Ur(n){return"string"==typeof n}function jr(n){return null!=n}function vo(n){return(n||document.body).getBoundingClientRect()}const mu={animation:!0,transitionTimerDelayMs:5},Ob=()=>{},{transitionTimerDelayMs:kb}=mu,Gc=new Map,gi=(n,e,t,r)=>{let i=r.context||{};const a=Gc.get(e);if(a)switch(r.runningTransition){case"continue":return Yi.E;case"stop":n.run(()=>a.transition$.complete()),i=Object.assign(a.context,i),Gc.delete(e)}const d=t(e,r.animation,i)||Ob;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>d()),dt(void 0).pipe(function jc(n){return e=>new sr.y(t=>e.subscribe({next:d=>n.run(()=>t.next(d)),error:d=>n.run(()=>t.error(d)),complete:()=>n.run(()=>t.complete())}))}(n));const f=new Kt.x,_=new Kt.x,w=f.pipe(function Wo(...n){return e=>Nn(e,dt(...n))}(!0));Gc.set(e,{transition$:f,complete:()=>{_.next(),_.complete()},context:i});const I=function Hc(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const A=br(e,"transitionend").pipe(Mn(w),Rt(({target:L})=>L===e));(function yc(...n){return 1===(n=Ji(n)).length?(0,Hn.Xf)(n[0]):new sr.y(function fi(n){return e=>{let t=[];for(let r=0;t&&!e.closed&&r<n.length;r++)t.push((0,Hn.Xf)(n[r]).subscribe((0,Vn.x)(e,i=>{if(t){for(let a=0;a<t.length;a++)a!==r&&t[a].unsubscribe();t=null}e.next(i)})))}}(n))})(function iu(n=0,e,t=_l.P){let r=-1;return null!=e&&((0,ho.K)(e)?t=e:r=e),new sr.y(i=>{let a=function yl(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let d=0;return t.schedule(function(){i.closed||(i.next(d++),0<=r?this.schedule(void 0,r):i.complete())},a)})}(I+kb).pipe(Mn(w)),A,_).pipe(Mn(w)).subscribe(()=>{Gc.delete(e),n.run(()=>{d(),f.next(),f.complete()})})}),f.asObservable()};let ph=(()=>{class n{constructor(){this.animation=mu.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),k_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn]]}),n})(),Ub=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn]]}),n})(),jb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),$b=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn]]}),n})(),qb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();var gr=(()=>{return(n=gr||(gr={}))[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",gr;var n})();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const j_=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function H_(n){const e=Array.from(n.querySelectorAll(j_)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let Z_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn,H0]]}),n})(),Yp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();class Zc{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}let ww=(()=>{class n{constructor(t,r){this._el=t,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Cn.q)(1)).subscribe(()=>{gi(this._zone,this._el.nativeElement,(t,r)=>{r&&vo(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return gi(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,r){2&t&&(u.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),u.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})();class MC{close(e){}dismiss(e){}}class It{constructor(e,t,r,i){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new Kt.x,this._dismissed=new Kt.x,this._hidden=new Kt.x,e.instance.dismissEvent.subscribe(a=>{this.dismiss(a)}),this.result=new Promise((a,d)=>{this._resolve=a,this._reject=d}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Mn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Mn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function Bp(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(r=>{!1!==r&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():dt(void 0);e.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Qt(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Dh=(()=>{return(n=Dh||(Dh={}))[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",Dh;var n})();let xC=(()=>{class n{constructor(t,r,i){this._document=t,this._elRef=r,this._zone=i,this._closed$=new Kt.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new u.vpe,this.shown=new Kt.x,this.hidden=new Kt.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":Ur(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Cn.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,r={animation:this.animation,runningTransition:"stop"},d=Qt(gi(this._zone,t,()=>t.classList.remove("show"),r),gi(this._zone,this._dialogEl.nativeElement,()=>{},r));return d.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),d}_show(){const t={animation:this.animation,runningTransition:"continue"};Qt(gi(this._zone,this._elRef.nativeElement,(a,d)=>{d&&vo(a),a.classList.add("show")},t),gi(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{br(t,"keydown").pipe(Mn(this._closed$),Rt(i=>i.which===gr.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(Dh.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;br(this._dialogEl.nativeElement,"mousedown").pipe(Mn(this._closed$),(0,Mr.b)(()=>r=!1),Tr(()=>br(t,"mouseup").pipe(Mn(this._closed$),(0,Cn.q)(1))),Rt(({target:i})=>t===i)).subscribe(()=>{r=!0}),br(t,"click").pipe(Mn(this._closed$)).subscribe(({target:i})=>{t===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(Dh.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const r=t.querySelector("[ngbAutofocus]"),i=H_(t)[0];(r||i||t).focus()}}_restoreFocus(){const t=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&t.contains(r)?r:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&gi(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(pe),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,r){if(1&t&&u.Gf(wb,7),2&t){let i;u.iGM(i=u.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,r){2&t&&(u.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),u.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),u.ekj("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:tE,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,r){1&t&&(u.F$t(),u.TgZ(0,"div",0,1)(2,"div",2),u.Hsn(3),u.qZA()()),2&t&&u.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),RC=(()=>{class n{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,i=r.style,{overflow:a,paddingRight:d}=i;if(t>0){const f=parseFloat(window.getComputedStyle(r).paddingRight);i.paddingRight=`${f+t}px`}return i.overflow="hidden",()=>{t>0&&(i.paddingRight=d),i.overflow=a}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Jp=(()=>{class n{constructor(t,r,i,a,d,f){this._applicationRef=t,this._injector=r,this._document=i,this._scrollBar=a,this._rendererFactory=d,this._ngZone=f,this._activeWindowCmptHasChanged=new Kt.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new u.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const _=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const i=br(e,"focusin").pipe(Mn(t),(0,wt.U)(a=>a.target));br(e,"keydown").pipe(Mn(t),Rt(a=>a.which===gr.Tab),lu(i)).subscribe(([a,d])=>{const[f,_]=H_(e);(d===f||d===e)&&a.shiftKey&&(_.focus(),a.preventDefault()),d===_&&!a.shiftKey&&(f.focus(),a.preventDefault())}),r&&br(e,"click").pipe(Mn(t),lu(i),(0,wt.U)(a=>a[1])).subscribe(a=>a.focus())})})(0,_.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(_.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,r,i,a){const d=a.container instanceof HTMLElement?a.container:jr(a.container)?this._document.querySelector(a.container):this._document.body,f=this._rendererFactory.createRenderer(null,null);if(!d)throw new Error(`The specified modal container "${a.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const _=new MC,w=this._getContentRef(t,a.injector||r,i,_,a);let I=!1!==a.backdrop?this._attachBackdrop(t,d):void 0,A=this._attachWindowComponent(t,d,w),P=new It(A,w,I,a.beforeDismiss);return this._registerModalRef(P),this._registerWindowCmpt(A),P.hidden.pipe((0,Cn.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(f.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),_.close=L=>{P.close(L)},_.dismiss=L=>{P.dismiss(L)},this._applyWindowOptions(A.instance,a),1===this._modalRefs.length&&f.addClass(this._document.body,"modal-open"),I&&I.instance&&(this._applyBackdropOptions(I.instance,a),I.changeDetectorRef.detectChanges()),A.changeDetectorRef.detectChanges(),P}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(r=>r.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,r){let a=t.resolveComponentFactory(ww).create(this._injector);return this._applicationRef.attachView(a.hostView),r.appendChild(a.location.nativeElement),a}_attachWindowComponent(t,r,i){let d=t.resolveComponentFactory(xC).create(this._injector,i.nodes);return this._applicationRef.attachView(d.hostView),r.appendChild(d.location.nativeElement),d}_applyWindowOptions(t,r){this._windowAttributes.forEach(i=>{jr(r[i])&&(t[i]=r[i])})}_applyBackdropOptions(t,r){this._backdropAttributes.forEach(i=>{jr(r[i])&&(t[i]=r[i])})}_getContentRef(t,r,i,a,d){return i?i instanceof u.Rgc?this._createFromTemplateRef(i,a):Ur(i)?this._createFromString(i):this._createFromComponent(t,r,i,a,d):new Zc([])}_createFromTemplateRef(t,r){const a=t.createEmbeddedView({$implicit:r,close(d){r.close(d)},dismiss(d){r.dismiss(d)}});return this._applicationRef.attachView(a),new Zc([a.rootNodes],a)}_createFromString(t){const r=this._document.createTextNode(`${t}`);return new Zc([[r]])}_createFromComponent(t,r,i,a,d){const f=t.resolveComponentFactory(i),_=u.zs3.create({providers:[{provide:MC,useValue:a}],parent:r}),w=f.create(_),I=w.location.nativeElement;return d.scrollable&&I.classList.add("component-host-scrollable"),this._applicationRef.attachView(w.hostView),new Zc([[I]],w.hostView,w)}_setAriaHidden(t){const r=t.parentElement;r&&t!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==t&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,r)=>{t?r.setAttribute("aria-hidden",t):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const r=()=>{const i=this._modalRefs.indexOf(t);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(r,r)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const r=this._windowCmpts.indexOf(t);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.z2F),u.LFG(u.zs3),u.LFG(pe),u.LFG(RC),u.LFG(u.FYo),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),OC=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ph))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Qp=(()=>{class n{constructor(t,r,i,a){this._moduleCFR=t,this._injector=r,this._modalStack=i,this._config=a}open(t,r={}){const i=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._moduleCFR,this._injector,t,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u._Vd),u.LFG(u.zs3),u.LFG(Jp),u.LFG(OC))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Eh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Qp]}),n})(),zc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn]]}),n})(),Nw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn]]}),n})(),UC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn]]}),n})(),Ih=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn]]}),n})(),ny=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn]]}),n})(),Rw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn]]}),n})(),Ow=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn]]}),n})(),Pw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();new u.OlP("live announcer delay",{providedIn:"root",factory:function Lw(){return 100}});let Bw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Qn]]}),n})(),ry=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const XC=[k_,Ub,jb,$b,qb,Z_,Yp,Eh,zc,ry,Nw,UC,Ih,ny,Rw,Ow,Pw,Bw];let eI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[XC,k_,Ub,jb,$b,qb,Z_,Yp,Eh,zc,ry,Nw,UC,Ih,ny,Rw,Ow,Pw,Bw]}),n})();function Kc(n,e){const t=(0,ci.m)(n)?n:()=>n,r=i=>i.error(t());return new sr.y(e?i=>e.schedule(r,0,i):r)}const Ah=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function rg(n){return new sr.y(e=>{(0,Hn.Xf)(n()).subscribe(e)})}var Uw=k(727);function jw(){return(0,Bn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Vn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class sy extends sr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Bn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Uw.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Vn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Uw.w0.EMPTY)}return e}refCount(){return jw()(this)}}function tI(n,e,t,r,i){return(a,d)=>{let f=t,_=e,w=0;a.subscribe((0,Vn.x)(d,I=>{const A=w++;_=f?n(_,I,A):(f=!0,I),r&&d.next(_)},i&&(()=>{f&&d.next(_),d.complete()})))}}function Yc(n,e){return(0,Bn.e)(tI(n,e,arguments.length>=2,!0))}function Ka(n){return(0,Bn.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Vn.x)(t,void 0,void 0,d=>{a=(0,Hn.Xf)(n(d,Ka(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function ig(n){return n<=0?()=>Yi.E:(0,Bn.e)((e,t)=>{let r=[];e.subscribe((0,Vn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Hw(n=Gw){return(0,Bn.e)((e,t)=>{let r=!1;e.subscribe((0,Vn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Gw(){return new Ah}function nI(n){return(0,Bn.e)((e,t)=>{let r=!1;e.subscribe((0,Vn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ra(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Rt((i,a)=>n(i,a,r)):C.y,(0,Cn.q)(1),t?nI(e):Hw(()=>new Ah))}class ts{constructor(e,t){this.id=e,this.url=t}}class vu extends ts{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Nh extends ts{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class sI extends ts{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $w extends ts{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class oI extends ts{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aI extends ts{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lI extends ts{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class uI extends ts{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qw extends ts{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oy{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class sg{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class og{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mh{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cI{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ww{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ay{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Xt="primary";class dI{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function xl(n){return new dI(n)}const Zw="ngNavigationCancelingError";function zw(n){const e=Error("NavigationCancelingError: "+n);return e[Zw]=!0,e}function fI(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const d=r[a],f=n[a];if(d.startsWith(":"))i[d.substring(1)]=f;else if(d!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function wo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!bu(n[i],e[i]))return!1;return!0}function bu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function pI(n){return Array.prototype.concat.apply([],n)}function ly(n){return n.length>0?n[n.length-1]:null}function mi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function To(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,qn.D)(Promise.resolve(n)):dt(n)}const Kw={exact:function cy(n,e,t){if(!Rl(n.segments,e.segments)||!lg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!cy(n.children[r],e.children[r],t))return!1;return!0},subset:Qw},ag={exact:function Yw(n,e){return wo(n,e)},subset:function Jw(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>bu(n[t],e[t]))},ignored:()=>!0};function uy(n,e,t){return Kw[t.paths](n.root,e.root,t.matrixParams)&&ag[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Qw(n,e,t){return Xw(n,e,e.segments,t)}function Xw(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Rl(i,t)||e.hasChildren()||!lg(i,t,r))}if(n.segments.length===t.length){if(!Rl(n.segments,t)||!lg(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Qw(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Rl(n.segments,i)&&lg(n.segments,i,r)&&n.children[Xt])&&Xw(n.children[Xt],e,a,r)}}function lg(n,e,t){return e.every((r,i)=>ag[t](n[i].parameters,r.parameters))}class wu{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xl(this.queryParams)),this._queryParamMap}toString(){return t1.serialize(this)}}class rn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,mi(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Oh(this)}}class xh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=xl(this.parameters)),this._parameterMap}toString(){return n1(this)}}function Rl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class dy{}class hy{parse(e){const t=new dg(e);return new wu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${kh(e.root,!0)}`,r=function ia(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ug(t)}=${ug(i)}`).join("&"):`${ug(t)}=${ug(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function gI(n){return encodeURI(n)}(e.fragment)}`:""}`}}const t1=new hy;function Oh(n){return n.segments.map(e=>n1(e)).join("/")}function kh(n,e){if(!n.hasChildren())return Oh(n);if(e){const t=n.children[Xt]?kh(n.children[Xt],!1):"",r=[];return mi(n.children,(i,a)=>{a!==Xt&&r.push(`${a}:${kh(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function e1(n,e){let t=[];return mi(n.children,(r,i)=>{i===Xt&&(t=t.concat(e(r,i)))}),mi(n.children,(r,i)=>{i!==Xt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Xt?[kh(n.children[Xt],!1)]:[`${i}:${kh(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Xt]?`${Oh(n)}/${t[0]}`:`${Oh(n)}/(${t.join("//")})`}}function fy(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ug(n){return fy(n).replace(/%3B/gi,";")}function py(n){return fy(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cg(n){return decodeURIComponent(n)}function Qc(n){return cg(n.replace(/\+/g,"%20"))}function n1(n){return`${py(n.path)}${function gy(n){return Object.keys(n).map(e=>`;${py(e)}=${py(n[e])}`).join("")}(n.parameters)}`}const mI=/^[^\/()?;=#]+/;function Xc(n){const e=n.match(mI);return e?e[0]:""}const Ph=/^[^=?&#]+/,yI=/^[^&#]+/;class dg{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new rn([],{}):new rn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Xt]=new rn(e,t)),r}parseSegment(){const e=Xc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new xh(cg(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Xc(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Xc(this.remaining);i&&(r=i,this.capture(r))}e[cg(t)]=cg(r)}parseQueryParam(e){const t=function _I(n){const e=n.match(Ph);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function vI(n){const e=n.match(yI);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const i=Qc(t),a=Qc(r);if(e.hasOwnProperty(i)){let d=e[i];Array.isArray(d)||(d=[d],e[i]=d),d.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Xc(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Xt);const d=this.parseChildren();t[a]=1===Object.keys(d).length?d[Xt]:new rn([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Fh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=my(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=my(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=_y(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return _y(e,this._root).map(t=>t.value)}}function my(n,e){if(n===e.value)return e;for(const t of e.children){const r=my(n,t);if(r)return r}return null}function _y(n,e){if(n===e.value)return[e];for(const t of e.children){const r=_y(n,t);if(r.length)return r.unshift(e),r}return[]}class sa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Tu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class hg extends Fh{constructor(e,t){super(e),this.snapshot=t,Lh(this,e)}toString(){return this.snapshot.toString()}}function yy(n,e){const t=function bI(n,e){const d=new td([],{},{},"",{},Xt,e,null,n.root,-1,{});return new by("",new sa(d,[]))}(n,e),r=new An([new xh("",{})]),i=new An({}),a=new An({}),d=new An({}),f=new An(""),_=new ed(r,i,d,f,a,Xt,e,t.root);return _.snapshot=t.root,new hg(new sa(_,[]),t)}class ed{constructor(e,t,r,i,a,d,f,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=d,this.component=f,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,wt.U)(e=>xl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,wt.U)(e=>xl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function wI(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function vy(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class td{constructor(e,t,r,i,a,d,f,_,w,I,A){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=d,this.component=f,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=I,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=xl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class by extends Fh{constructor(e,t){super(t),this.url=e,Lh(this,t)}toString(){return fg(this._root)}}function Lh(n,e){e.value._routerState=n,e.children.forEach(t=>Lh(n,t))}function fg(n){const e=n.children.length>0?` { ${n.children.map(fg).join(", ")} } `:"";return`${n.value}${e}`}function wy(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,wo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),wo(e.params,t.params)||n.params.next(t.params),function Jc(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!wo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),wo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ty(n,e){const t=wo(n.params,e.params)&&function Rh(n,e){return Rl(n,e)&&n.every((t,r)=>wo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ty(n.parent,e.parent))}function Bh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function r1(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Bh(n,r,i);return Bh(n,r)})}(n,e,t);return new sa(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const d=a.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(f=>Bh(n,f)),d}}const r=function Dy(n){return new ed(new An(n.url),new An(n.params),new An(n.queryParams),new An(n.fragment),new An(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Bh(n,a));return new sa(r,i)}}function Vh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function nd(n){return"object"==typeof n&&null!=n&&n.outlets}function pg(n,e,t,r,i){let a={};if(r&&mi(r,(f,_)=>{a[_]=Array.isArray(f)?f.map(w=>`${w}`):`${f}`}),n===e)return new wu(t,a,i);const d=s1(n,e,t);return new wu(d,a,i)}function s1(n,e,t){const r={};return mi(n.children,(i,a)=>{r[a]=i===e?t:s1(i,e,t)}),new rn(n.segments,r)}class Ey{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Vh(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(nd);if(i&&i!==ly(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Cy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Du(n,e,t){if(n||(n=new rn([],{})),0===n.segments.length&&n.hasChildren())return gg(n,e,t);const r=function DI(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const d=n.segments[i],f=t[r];if(nd(f))break;const _=`${f}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!mg(_,w,d))return a;r+=2}else{if(!mg(_,{},d))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new rn(n.segments.slice(0,r.pathIndex),{});return a.children[Xt]=new rn(n.segments.slice(r.pathIndex),n.children),gg(a,0,i)}return r.match&&0===i.length?new rn(n.segments,{}):r.match&&!n.hasChildren()?u1(n,e,t):r.match?gg(n,0,i):u1(n,e,t)}function gg(n,e,t){if(0===t.length)return new rn(n.segments,{});{const r=function Ri(n){return nd(n[0])?n[0].outlets:{[Xt]:n}}(t),i={};return mi(r,(a,d)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[d]=Du(n.children[d],e,a))}),mi(n.children,(a,d)=>{void 0===r[d]&&(i[d]=a)}),new rn(n.segments,i)}}function u1(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(nd(a)){const _=Uh(a.outlets);return new rn(r,_)}if(0===i&&Vh(t[0])){r.push(new xh(n.segments[e].path,c1(t[0]))),i++;continue}const d=nd(a)?a.outlets[Xt]:`${a}`,f=i<t.length-1?t[i+1]:null;d&&f&&Vh(f)?(r.push(new xh(d,c1(f))),i+=2):(r.push(new xh(d,{})),i++)}return new rn(r,{})}function Uh(n){const e={};return mi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=u1(new rn([],{}),0,t))}),e}function c1(n){const e={};return mi(n,(t,r)=>e[r]=`${t}`),e}function mg(n,e,t){return n==t.path&&wo(e,t.parameters)}class d1{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),wy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Tu(t);e.children.forEach(a=>{const d=a.value.outlet;this.deactivateRoutes(a,i[d],r),delete i[d]}),mi(i,(a,d)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const d=r.getContext(i.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Tu(e);for(const d of Object.keys(a))this.deactivateRouteAndItsChildren(a[d],i);if(r&&r.outlet){const d=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Tu(e);for(const d of Object.keys(a))this.deactivateRouteAndItsChildren(a[d],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Tu(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Ww(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Mh(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(wy(i),i===a)if(i.component){const d=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const d=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),d.children.onOutletReAttached(f.contexts),d.attachRef=f.componentRef,d.route=f.route.value,d.outlet&&d.outlet.attach(f.componentRef,f.route.value),wy(f.route.value),this.activateChildRoutes(e,null,d.children)}else{const f=function CI(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=f?f.module.componentFactoryResolver:null;d.attachRef=null,d.route=i,d.resolver=_,d.outlet&&d.outlet.activateWith(i,_),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class Iy{constructor(e,t){this.routes=e,this.module=t}}function oa(n){return"function"==typeof n}function Ol(n){return n instanceof wu}const jh=Symbol("INITIAL_VALUE");function rd(){return Tr(n=>function Q(...n){const e=(0,Bs.yG)(n),t=(0,Bs.jO)(n),{args:r,keys:i}=vl(n);if(0===r.length)return(0,qn.D)([],e);const a=new sr.y(function le(n,e,t=C.y){return r=>{Be(e,()=>{const{length:i}=n,a=new Array(i);let d=i,f=i;for(let _=0;_<i;_++)Be(e,()=>{const w=(0,qn.D)(n[_],e);let I=!1;w.subscribe((0,Vn.x)(r,A=>{a[_]=A,I||(I=!0,f--),f||r.next(t(a.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,i?d=>x(i,d):C.y));return t?a.pipe(hi(t)):a}(n.map(e=>e.pipe((0,Cn.q)(1),er(jh)))).pipe(Yc((e,t)=>{let r=!1;return t.reduce((i,a,d)=>i!==jh?i:(a===jh&&(r=!0),r||!1!==a&&d!==t.length-1&&!Ol(a)?i:a),e)},jh),Rt(e=>e!==jh),(0,wt.U)(e=>Ol(e)?e:!0===e),(0,Cn.q)(1)))}class yg{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new id,this.attachRef=null}}class id{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new yg,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Ay=(()=>{class n{constructor(t,r,i,a,d){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=a||Xt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,_=new Ny(t,f,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(id),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.Y36(u.sBO))},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Ny{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ed?this.route:e===id?this.childContexts:this.parent.get(e,t)}}let vg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},directives:[Ay],encapsulation:2}),n})();function II(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];SI(r,AI(e,r))}}function SI(n,e){n.children&&II(n.children,e)}function AI(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function bg(n){const e=n.children&&n.children.map(bg),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Xt&&(t.component=vg),t}function bs(n){return n.outlet||Xt}function p1(n,e){const t=n.filter(r=>bs(r)===e);return t.push(...n.filter(r=>bs(r)!==e)),t}const My={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Hh(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},My):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||fI)(t,n,e);if(!a)return Object.assign({},My);const d={};mi(a.posParams,(_,w)=>{d[w]=_.path});const f=a.consumed.length>0?Object.assign(Object.assign({},d),a.consumed[a.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:f,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function wg(n,e,t,r,i="corrected"){if(t.length>0&&function MI(n,e,t){return t.some(r=>Gh(n,e,r)&&bs(r)!==Xt)}(n,t,r)){const d=new rn(e,function g1(n,e,t,r){const i={};i[Xt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&bs(a)!==Xt){const d=new rn([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,i[bs(a)]=d}return i}(n,e,r,new rn(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function m1(n,e,t){return t.some(r=>Gh(n,e,r))}(n,t,r)){const d=new rn(n.segments,function NI(n,e,t,r,i,a){const d={};for(const f of r)if(Gh(n,t,f)&&!i[bs(f)]){const _=new rn([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,d[bs(f)]=_}return Object.assign(Object.assign({},i),d)}(n,e,t,r,n.children,i));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const a=new rn(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Gh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function xy(n,e,t,r){return!!(bs(n)===r||r!==Xt&&Gh(e,t,n))&&("**"===n.path||Hh(e,n,t).matched)}function Ry(n,e,t){return 0===e.length&&!n.children[t]}class Tg{constructor(e){this.segmentGroup=e||null}}class _1{constructor(e){this.urlTree=e}}function Dg(n){return Kc(new Tg(n))}function Oy(n){return Kc(new _1(n))}class bR{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(u.h0i)}apply(){const e=wg(this.urlTree.root,[],[],this.config).segmentGroup,t=new rn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Xt).pipe((0,wt.U)(a=>this.createUrlTree(y1(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ka(a=>{if(a instanceof _1)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Tg?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Xt).pipe((0,wt.U)(i=>this.createUrlTree(y1(i),e.queryParams,e.fragment))).pipe(Ka(i=>{throw i instanceof Tg?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new rn([],{[Xt]:e}):e;return new wu(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,wt.U)(a=>new rn([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,qn.D)(i).pipe(zi(a=>{const d=r.children[a],f=p1(t,a);return this.expandSegmentGroup(e,f,d,a).pipe((0,wt.U)(_=>({segment:_,outlet:a})))}),Yc((a,d)=>(a[d.outlet]=d.segment,a),{}),function rI(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Rt((i,a)=>n(i,a,r)):C.y,ig(1),t?nI(e):Hw(()=>new Ah))}())}expandSegment(e,t,r,i,a,d){return(0,qn.D)(r).pipe(zi(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,d).pipe(Ka(w=>{if(w instanceof Tg)return dt(null);throw w}))),ra(f=>!!f),Ka((f,_)=>{if(f instanceof Ah||"EmptyError"===f.name)return Ry(t,i,a)?dt(new rn([],{})):Dg(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,d,f){return xy(i,t,a,d)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,d):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,d):Dg(t):Dg(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,d){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Oy(a):this.lineralizeSegments(r,a).pipe((0,Ln.z)(d=>{const f=new rn(d,{});return this.expandSegment(e,f,t,d,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,d){const{matched:f,consumedSegments:_,remainingSegments:w,positionalParamSegments:I}=Hh(t,i,a);if(!f)return Dg(t);const A=this.applyRedirectCommands(_,i.redirectTo,I);return i.redirectTo.startsWith("/")?Oy(A):this.lineralizeSegments(i,A).pipe((0,Ln.z)(P=>this.expandSegment(e,t,r,P.concat(w),d,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?dt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,wt.U)(A=>(r._loadedConfig=A,new rn(i,{})))):dt(new rn(i,{}));const{matched:d,consumedSegments:f,remainingSegments:_}=Hh(t,r,i);return d?this.getChildConfig(e,r,i).pipe((0,Ln.z)(I=>{const A=I.module,P=I.routes,{segmentGroup:L,slicedSegments:Z}=wg(t,f,_,P),se=new rn(L.segments,L.children);if(0===Z.length&&se.hasChildren())return this.expandChildren(A,P,se).pipe((0,wt.U)(Qe=>new rn(f,Qe)));if(0===P.length&&0===Z.length)return dt(new rn(f,{}));const Ie=bs(r)===a;return this.expandSegment(A,se,P,Z,Ie?Xt:a,!0).pipe((0,wt.U)(We=>new rn(f.concat(We.segments),We.children)))})):Dg(t)}getChildConfig(e,t,r){return t.children?dt(new Iy(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?dt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Ln.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,wt.U)(a=>(t._loadedConfig=a,a))):function yR(n){return Kc(zw(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):dt(new Iy([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?dt(i.map(d=>{const f=e.get(d);let _;if(function _g(n){return n&&oa(n.canLoad)}(f))_=f.canLoad(t,r);else{if(!oa(f))throw new Error("Invalid CanLoad guard");_=f(t,r)}return To(_)})).pipe(rd(),(0,Mr.b)(d=>{if(!Ol(d))return;const f=zw(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw f.url=d,f}),(0,wt.U)(d=>!0===d)):dt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return dt(r);if(i.numberOfChildren>1||!i.children[Xt])return Kc(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Xt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new wu(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return mi(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let d={};return mi(t.children,(f,_)=>{d[_]=this.createSegmentGroup(e,f,r,i)}),new rn(a,d)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function y1(n){const e={};for(const r of Object.keys(n.children)){const a=y1(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function wR(n){if(1===n.numberOfChildren&&n.children[Xt]){const e=n.children[Xt];return new rn(n.segments.concat(e.segments),e.children)}return n}(new rn(n.segments,e))}class xI{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Eu{constructor(e,t){this.component=e,this.route=t}}function DR(n,e,t){const r=n._root;return od(r,e?e._root:null,t,[r.value])}function sd(n,e,t){const r=function b1(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function od(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Tu(e);return n.children.forEach(d=>{(function ER(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,d=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(d&&a.routeConfig===d.routeConfig){const _=function ky(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Rl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Rl(n.url,e.url)||!wo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ty(n,e)||!wo(n.queryParams,e.queryParams);default:return!Ty(n,e)}}(d,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new xI(r)):(a.data=d.data,a._resolvedData=d._resolvedData),od(n,e,a.component?f?f.children:null:t,r,i),_&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new Eu(f.outlet.component,d))}else d&&ad(e,f,i),i.canActivateChecks.push(new xI(r)),od(n,null,a.component?f?f.children:null:t,r,i)})(d,a[d.value.outlet],t,r.concat([d.value]),i),delete a[d.value.outlet]}),mi(a,(d,f)=>ad(d,t.getContext(f),i)),i}function ad(n,e,t){const r=Tu(n),i=n.value;mi(r,(a,d)=>{ad(a,i.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new Eu(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class SR{}function FI(n){return new sr.y(e=>e.error(n))}class BI{constructor(e,t,r,i,a,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=d}recognize(){const e=wg(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Xt);if(null===t)return null;const r=new td([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Xt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new sa(r,t),a=new by(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=wI(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const d=t.children[a],f=p1(e,a),_=this.processSegmentGroup(f,d,a);if(null===_)return null;r.push(..._)}const i=Eg(r);return function VI(n){n.sort((e,t)=>e.value.outlet===Xt?-1:t.value.outlet===Xt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const d=this.processSegmentAgainstRoute(a,t,r,i);if(null!==d)return d}return Ry(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!xy(e,t,r,i))return null;let a,d=[],f=[];if("**"===e.path){const L=r.length>0?ly(r).parameters:{};a=new td(r,L,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Cg(e),bs(e),e.component,e,Zs(t),T1(t)+r.length,D1(e))}else{const L=Hh(t,e,r);if(!L.matched)return null;d=L.consumedSegments,f=L.remainingSegments,a=new td(d,L.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Cg(e),bs(e),e.component,e,Zs(t),T1(t)+d.length,D1(e))}const _=function AR(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:w,slicedSegments:I}=wg(t,d,f,_.filter(L=>void 0===L.redirectTo),this.relativeLinkResolution);if(0===I.length&&w.hasChildren()){const L=this.processChildren(_,w);return null===L?null:[new sa(a,L)]}if(0===_.length&&0===I.length)return[new sa(a,[])];const A=bs(e)===i,P=this.processSegment(_,w,I,A?Xt:i);return null===P?null:[new sa(a,P)]}}function UI(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Eg(n){const e=[],t=new Set;for(const r of n){if(!UI(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Eg(r.children);e.push(new sa(r.value,i))}return e.filter(r=>!t.has(r))}function Zs(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function T1(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Cg(n){return n.data||{}}function D1(n){return n.resolve||{}}function I1(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Ly(n){return Tr(e=>{const t=n(e);return t?(0,qn.D)(t).pipe((0,wt.U)(()=>e)):dt(e)})}class By extends class GI{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Ya=new u.OlP("ROUTES");class Vy{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,wt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=a.create(e);return new Iy(pI(d.injector.get(Ya,void 0,u.XFs.Self|u.XFs.Optional)).map(bg),d)}),Ka(a=>{throw t._loader$=void 0,a}));return t._loader$=new sy(i,()=>new Kt.x).pipe(jw()),t._loader$}loadModuleFactory(e){return To(e()).pipe((0,Ln.z)(t=>t instanceof u.YKP?dt(t):(0,qn.D)(this.compiler.compileModuleAsync(t))))}}class $I{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function MR(n){throw n}function qI(n,e,t){return e.parse("/")}function N1(n,e){return dt(null)}const WI={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},M1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Zn=(()=>{class n{constructor(t,r,i,a,d,f,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Kt.x,this.errorHandler=MR,this.malformedUriErrorHandler=qI,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:N1,afterPreactivation:N1},this.urlHandlingStrategy=new $I,this.routeReuseStrategy=new By,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(u.h0i),this.console=d.get(u.c2e);const A=d.get(u.R0b);this.isNgZoneEnabled=A instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function gR(){return new wu(new rn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Vy(d,f,P=>this.triggerEvent(new oy(P)),P=>this.triggerEvent(new sg(P))),this.routerState=yy(this.currentUrlTree,this.rootComponentType),this.transitions=new An({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Rt(i=>0!==i.id),(0,wt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Tr(i=>{let a=!1,d=!1;return dt(i).pipe((0,Mr.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Tr(f=>{const _=this.browserUrlTree.toString(),w=!this.navigated||f.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return zI(f.source)&&(this.browserUrlTree=f.extractedUrl),dt(f).pipe(Tr(A=>{const P=this.transitions.getValue();return r.next(new vu(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),P!==this.transitions.getValue()?Yi.E:Promise.resolve(A)}),function TR(n,e,t,r){return Tr(i=>function vR(n,e,t,r,i){return new bR(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,wt.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Mr.b)(A=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:A.urlAfterRedirects})}),function jI(n,e,t,r,i){return(0,Ln.z)(a=>function LI(n,e,t,r,i="emptyOnly",a="legacy"){try{const d=new BI(n,e,t,r,i,a).recognize();return null===d?FI(new SR):dt(d)}catch(d){return FI(d)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,wt.U)(d=>Object.assign(Object.assign({},a),{targetSnapshot:d}))))}(this.rootComponentType,this.config,A=>this.serializeUrl(A),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Mr.b)(A=>{if("eager"===this.urlUpdateStrategy){if(!A.extras.skipLocationChange){const L=this.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);this.setBrowserUrl(L,A)}this.browserUrlTree=A.urlAfterRedirects}const P=new oI(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);r.next(P)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:L,source:Z,restoredState:se,extras:Ie}=f,Ue=new vu(P,this.serializeUrl(L),Z,se);r.next(Ue);const We=yy(L,this.rootComponentType).snapshot;return dt(Object.assign(Object.assign({},f),{targetSnapshot:We,urlAfterRedirects:L,extras:Object.assign(Object.assign({},Ie),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,f.resolve(null),Yi.E}),Ly(f=>{const{targetSnapshot:_,id:w,extractedUrl:I,rawUrl:A,extras:{skipLocationChange:P,replaceUrl:L}}=f;return this.hooks.beforePreactivation(_,{navigationId:w,appliedUrlTree:I,rawUrlTree:A,skipLocationChange:!!P,replaceUrl:!!L})}),(0,Mr.b)(f=>{const _=new aI(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(_)}),(0,wt.U)(f=>Object.assign(Object.assign({},f),{guards:DR(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function RI(n,e){return(0,Ln.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:d}}=t;return 0===d.length&&0===a.length?dt(Object.assign(Object.assign({},t),{guardsResult:!0})):function w1(n,e,t,r){return(0,qn.D)(n).pipe((0,Ln.z)(i=>function IR(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?dt(a.map(f=>{const _=sd(f,e,i);let w;if(function f1(n){return n&&oa(n.canDeactivate)}(_))w=To(_.canDeactivate(n,e,t,r));else{if(!oa(_))throw new Error("Invalid CanDeactivate guard");w=To(_(n,e,t,r))}return w.pipe(ra())})).pipe(rd()):dt(!0)}(i.component,i.route,t,e,r)),ra(i=>!0!==i,!0))}(d,r,i,n).pipe((0,Ln.z)(f=>f&&function h1(n){return"boolean"==typeof n}(f)?function CR(n,e,t,r){return(0,qn.D)(e).pipe(zi(i=>Nn(function kI(n,e){return null!==n&&e&&e(new og(n)),dt(!0)}(i.route.parent,r),function OI(n,e){return null!==n&&e&&e(new cI(n)),dt(!0)}(i.route,r),function PI(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(d=>function v1(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>rg(()=>dt(d.guards.map(_=>{const w=sd(_,d.node,t);let I;if(function mR(n){return n&&oa(n.canActivateChild)}(w))I=To(w.canActivateChild(r,n));else{if(!oa(w))throw new Error("Invalid CanActivateChild guard");I=To(w(r,n))}return I.pipe(ra())})).pipe(rd())));return dt(a).pipe(rd())}(n,i.path,t),function Py(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return dt(!0);const i=r.map(a=>rg(()=>{const d=sd(a,e,t);let f;if(function Sy(n){return n&&oa(n.canActivate)}(d))f=To(d.canActivate(e,n));else{if(!oa(d))throw new Error("Invalid CanActivate guard");f=To(d(e,n))}return f.pipe(ra())}));return dt(i).pipe(rd())}(n,i.route,t))),ra(i=>!0!==i,!0))}(r,a,n,e):dt(f)),(0,wt.U)(f=>Object.assign(Object.assign({},t),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,Mr.b)(f=>{if(Ol(f.guardsResult)){const w=zw(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw w.url=f.guardsResult,w}const _=new lI(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(_)}),Rt(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),Ly(f=>{if(f.guards.canActivateChecks.length)return dt(f).pipe((0,Mr.b)(_=>{const w=new uI(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),Tr(_=>{let w=!1;return dt(_).pipe(function Fy(n,e){return(0,Ln.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return dt(t);let a=0;return(0,qn.D)(i).pipe(zi(d=>function E1(n,e,t,r){return function C1(n,e,t,r){const i=I1(n);if(0===i.length)return dt({});const a={};return(0,qn.D)(i).pipe((0,Ln.z)(d=>function S1(n,e,t,r){const i=sd(n,e,r);return To(i.resolve?i.resolve(e,t):i(e,t))}(n[d],e,t,r).pipe((0,Mr.b)(f=>{a[d]=f}))),ig(1),(0,Ln.z)(()=>I1(a).length===i.length?dt(a):Yi.E))}(n._resolve,n,e,r).pipe((0,wt.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),wI(n,t).resolve),null)))}(d.route,r,n,e)),(0,Mr.b)(()=>a++),ig(1),(0,Ln.z)(d=>a===i.length?dt(t):Yi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Mr.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,Mr.b)(_=>{const w=new qw(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}))}),Ly(f=>{const{targetSnapshot:_,id:w,extractedUrl:I,rawUrl:A,extras:{skipLocationChange:P,replaceUrl:L}}=f;return this.hooks.afterPreactivation(_,{navigationId:w,appliedUrlTree:I,rawUrlTree:A,skipLocationChange:!!P,replaceUrl:!!L})}),(0,wt.U)(f=>{const _=function TI(n,e,t){const r=Bh(n,e._root,t?t._root:void 0);return new hg(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:_})}),(0,Mr.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,wt.U)(r=>(new d1(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,Mr.b)({next(){a=!0},complete(){a=!0}}),function iI(n){return(0,Bn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var f;a||d||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),Ka(f=>{if(d=!0,function hI(n){return n&&n[Zw]}(f)){const _=Ol(f.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const w=new sI(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(w),_?setTimeout(()=>{const I=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),A={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||zI(i.source)};this.scheduleNavigation(I,"imperative",null,A,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new $w(i.id,this.serializeUrl(i.extractedUrl),f);r.next(_);try{i.resolve(this.errorHandler(f))}catch(w){i.reject(w)}}return Yi.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},d=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(d){const _=Object.assign({},d);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const f=this.parseUrl(t.url);this.scheduleNavigation(f,r,d,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){II(t),this.config=t.map(bg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:d,queryParamsHandling:f,preserveFragment:_}=r,w=i||this.routerState.root,I=_?this.currentUrlTree.fragment:d;let A=null;switch(f){case"merge":A=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=a||null}return null!==A&&(A=this.removeEmptyProps(A)),function i1(n,e,t,r,i){if(0===t.length)return pg(e.root,e.root,e.root,r,i);const a=function o1(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Ey(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,d)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return mi(a.outlets,(_,w)=>{f[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===d?(a.split("/").forEach((f,_)=>{0==_&&"."===f||(0==_&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new Ey(t,e,r)}(t);if(a.toRoot())return pg(e.root,e.root,new rn([],{}),r,i);const d=function a1(n,e,t){if(n.isAbsolute)return new Cy(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new Cy(a,a===e.root,0)}const r=Vh(n.commands[0])?0:1;return function l1(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Cy(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),f=d.processChildren?gg(d.segmentGroup,d.index,a.commands):Du(d.segmentGroup,d.index,a.commands);return pg(e.root,d.segmentGroup,f,r,i)}(w,this.currentUrlTree,t,A,null!=I?I:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ol(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function ZI(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},WI):!1===r?Object.assign({},M1):r,Ol(t))return uy(this.currentUrlTree,t,i);const a=this.parseUrl(t);return uy(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Nh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,d){var f,_;if(this.disposed)return Promise.resolve(!1);let w,I,A;d?(w=d.resolve,I=d.reject,A=d.promise):A=new Promise((Z,se)=>{w=Z,I=se});const P=++this.navigationId;let L;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),L=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):L=0,this.setTransition({id:P,targetPageId:L,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:w,reject:I,promise:A,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),A.catch(Z=>Promise.reject(Z))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===d?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new sI(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function zI(n){return"imperative"!==n}let Cu=(()=>{class n{constructor(t,r,i,a,d){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=d,this.commands=null,this.onChanges=new Kt.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:ld(this.skipLocationChange),replaceUrl:ld(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ld(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Zn),u.Y36(ed),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&u.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})();function ld(n){return""===n||!!n}class Sg{}class jy{preload(e,t){return dt(null)}}let R1=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new Vy(i,r,_=>t.triggerEvent(new oy(_)),_=>t.triggerEvent(new sg(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(Rt(t=>t instanceof Nh),zi(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(u.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const d=a._loadedConfig;i.push(this.processRoutes(d.module,d.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,qn.D)(i).pipe((0,Et.J)(),(0,wt.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?dt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Ln.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Zn),u.LFG(u.Sil),u.LFG(u.zs3),u.LFG(Sg))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Ag=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof vu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Nh&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ay&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new ay(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Iu=new u.OlP("ROUTER_CONFIGURATION"),O1=new u.OlP("ROUTER_FORROOT_GUARD"),xR=[xe,{provide:dy,useClass:hy},{provide:Zn,useFactory:function OR(n,e,t,r,i,a,d={},f,_){const w=new Zn(null,n,e,t,r,i,pI(a));return f&&(w.urlHandlingStrategy=f),_&&(w.routeReuseStrategy=_),function kR(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,w),d.enableTracing&&w.events.subscribe(I=>{var A,P;null===(A=console.group)||void 0===A||A.call(console,`Router Event: ${I.constructor.name}`),console.log(I.toString()),console.log(I),null===(P=console.groupEnd)||void 0===P||P.call(console)}),w},deps:[dy,id,xe,u.zs3,u.Sil,Ya,Iu,[class A1{},new u.FiY],[class HI{},new u.FiY]]},id,{provide:ed,useFactory:function PR(n){return n.routerState.root},deps:[Zn]},R1,jy,class Uy{preload(e,t){return t().pipe(Ka(()=>dt(null)))}},{provide:Iu,useValue:{enableTracing:!1}}];function RR(){return new u.PXZ("Router",Zn)}let Hy=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[xR,eS(t),{provide:O1,useFactory:XI,deps:[[Zn,new u.FiY,new u.tp0]]},{provide:Iu,useValue:r||{}},{provide:me,useFactory:QI,deps:[ce,[new u.tBr(ze),new u.FiY],Iu]},{provide:Ag,useFactory:JI,deps:[Zn,al,Iu]},{provide:Sg,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:jy},{provide:u.PXZ,multi:!0,useFactory:RR},[k1,{provide:u.ip1,multi:!0,useFactory:tS,deps:[k1]},{provide:P1,useFactory:Ng,deps:[k1]},{provide:u.tb,multi:!0,useExisting:P1}]]}}static forChild(t){return{ngModule:n,providers:[eS(t)]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(O1,8),u.LFG(Zn,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function JI(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ag(n,e,t)}function QI(n,e,t={}){return t.useHash?new Me(n,e):new Ze(n,e)}function XI(n){return"guarded"}function eS(n){return[{provide:u.deG,multi:!0,useValue:n},{provide:Ya,multi:!0,useValue:n}]}let k1=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Kt.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),a=this.injector.get(Zn),d=this.injector.get(Iu);return"disabled"===d.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?dt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Iu),i=this.injector.get(R1),a=this.injector.get(Ag),d=this.injector.get(Zn),f=this.injector.get(u.z2F);t===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),i.setUpPreloading(),a.init(),d.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function tS(n){return n.appInitializer.bind(n)}function Ng(n){return n.bootstrapListener.bind(n)}const P1=new u.OlP("Router Initializer");let Su=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-go-to-desktop"]],decls:4,vars:0,template:function(t,r){1&t&&(u.TgZ(0,"p"),u._uU(1,"Go to desktop "),u._UZ(2,"br"),u._uU(3,"please"),u.qZA())},styles:["[_nghost-%COMP%]{width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;font-size:30px;color:#fff}"]}),n})();var Y=k(5861),Mg=k(198),Ot=k(2090),ws=k(9681),aa=k(1877),Au=k(4859),xg=k(6451),Gy=k(5363),FR=k(6063);class LR extends Kt.x{constructor(e=1/0,t=1/0,r=FR.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:d}=this;t||(r.push(e),!i&&r.push(a.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let d=0;d<a.length&&!e.closed;d+=r?1:2)e.next(a[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const d=t.now();let f=0;for(let _=1;_<r.length&&r[_]<=d;_+=2)f=_;f&&r.splice(0,f+1)}}}var BR=k(3099);function $y(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,BR.B)({connector:()=>new LR(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function F1(n,e){return(0,ci.m)(e)?Tr(()=>n,e):Tr(()=>n)}var qy=k(9468),_i=k(5813),Do=k(2011);k(5867);const sS=new Map,$R={activated:!1,tokenObservers:[]},qR={initialized:!1,enabled:!1};function Hr(n){return sS.get(n)||$R}function la(n,e){sS.set(n,e)}function zy(){return qR}class h{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Y.Z)(function*(){t.stop();try{t.pending=new Ot.BH,yield function p(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ot.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const b=new Ot.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function S(n){if(!Hr(n).activated)throw b.create("use-before-activation",{appName:n.name})}function X(n,e){return De.apply(this,arguments)}function De(){return(De=(0,Y.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const A=yield i.getHeartbeatsHeader();A&&(r["X-Firebase-Client"]=A)}const a={method:"POST",body:JSON.stringify(e),headers:r};let d,f;try{d=yield fetch(n,a)}catch(A){throw b.create("fetch-network-error",{originalErrorMessage:A.message})}if(200!==d.status)throw b.create("fetch-status-error",{httpStatus:d.status});try{f=yield d.json()}catch(A){throw b.create("fetch-parse-error",{originalErrorMessage:A.message})}const _=f.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw b.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const w=1e3*Number(_[1]),I=Date.now();return{token:f.token,expireTimeMillis:I+w,issuedAtTimeMillis:I}})).apply(this,arguments)}function ht(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Wt="firebase-app-check-store";let yi=null;function kl(){return yi||(yi=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(b.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Wt,{keyPath:"compositeKey"})}}catch(t){e(b.create("storage-open",{originalErrorMessage:t.message}))}}),yi)}function qh(){return(qh=(0,Y.Z)(function*(n,e){const r=(yield kl()).transaction(Wt,"readwrite"),a=r.objectStore(Wt).put({compositeKey:n,value:e});return new Promise((d,f)=>{a.onsuccess=_=>{d()},r.onerror=_=>{var w;f(b.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const Xy=new aa.Yd("@firebase/app-check");function ZR(n,e){return(0,Ot.hl)()?function Yy(n,e){return function Og(n,e){return qh.apply(this,arguments)}(function Pg(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Xy.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function zR(){return zy().enabled}function KR(){return lS.apply(this,arguments)}function lS(){return(lS=(0,Y.Z)(function*(){const n=zy();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const cB={error:"UNKNOWN_ERROR"};function dB(n){return Ot.US.encodeString(JSON.stringify(n),!1)}function j1(n){return uS.apply(this,arguments)}function uS(){return(uS=(0,Y.Z)(function*(n,e=!1){const t=n.app;S(t);const r=Hr(t);let a,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&H1(_)&&(i=_)}if(!e&&i&&H1(i))return{token:i.token};let f,d=!1;if(zR()){r.exchangeTokenPromise||(r.exchangeTokenPromise=X(ht(t,yield KR()),n.heartbeatServiceProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0);const _=yield r.exchangeTokenPromise;return yield ZR(t,_),la(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),d=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Xy.warn(_.message):Xy.error(_),a=_}return i?(f={token:i.token},la(t,Object.assign(Object.assign({},r),{token:i})),yield ZR(t,i)):f=fB(a),d&&JR(t,f),f})).apply(this,arguments)}function dS(n,e){const t=Hr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),la(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function YR(n){const{app:e}=n,t=Hr(e);let r=t.tokenRefresher;r||(r=function hB(n){const{app:e}=n;return new h((0,Y.Z)(function*(){let r;if(r=Hr(e).token?yield j1(n,!0):yield j1(n),r.error)throw r.error}),()=>!0,()=>{const t=Hr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),la(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function JR(n,e){const t=Hr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function H1(n){return n.expireTimeMillis-Date.now()>0}function fB(n){return{token:dB(cB),error:n}}class pB{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Hr(this.app);for(const t of e)dS(this.app,t.next);return Promise.resolve()}}const sO="app-check-internal";!function AB(){(0,ws._registerComponent)(new Au.wA("app-check",n=>function gB(n,e){return new pB(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(sO).initialize()})),(0,ws._registerComponent)(new Au.wA(sO,n=>function mB(n){return{getToken:e=>j1(n,e),addTokenListener:e=>function cS(n,e,t,r){const{app:i}=n,a=Hr(i),d={next:t,error:r,type:e};if(la(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,d]})),a.token&&H1(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),YR(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>YR(n))}(n,"INTERNAL",e),removeTokenListener:e=>dS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ws.registerVersion)("@firebase/app-check","0.5.8")}();class gS{constructor(){return(0,_i.vb)("app-check")}}"undefined"!=typeof window&&window,k(127);const aO=new u.OlP("angularfire2.auth.use-emulator"),lO=new u.OlP("angularfire2.auth.settings"),uO=new u.OlP("angularfire2.auth.tenant-id"),cO=new u.OlP("angularfire2.auth.langugage-code"),dO=new u.OlP("angularfire2.auth.use-device-language"),hO=new u.OlP("angularfire.auth.persistence"),fO=(n,e,t,r,i,a,d,f)=>(0,Do.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),d)for(const[w,I]of Object.entries(d))_.settings[w]=I;return f&&_.setPersistence(f),_},[t,r,i,a,d,f]);let _S=(()=>{class n{constructor(t,r,i,a,d,f,_,w,I,A,P,L){const Z=new Kt.x,se=dt(void 0).pipe((0,Gy.Q)(d.outsideAngular),Tr(()=>a.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,5881)))),(0,wt.U)(()=>(0,Do.on)(t,a,r)),(0,wt.U)(Ie=>fO(Ie,a,f,w,I,A,_,P)),$y({bufferSize:1,refCount:!1}));if(Nr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=dt(null);else{se.pipe(ra()).subscribe();const Ue=se.pipe(Tr(je=>je.getRedirectResult().then(rt=>rt,()=>null)),_i.iC,$y({bufferSize:1,refCount:!1})),We=se.pipe(Tr(je=>new sr.y(rt=>({unsubscribe:a.runOutsideAngular(()=>je.onAuthStateChanged(ut=>rt.next(ut),ut=>rt.error(ut),()=>rt.complete()))})))),Qe=se.pipe(Tr(je=>new sr.y(rt=>({unsubscribe:a.runOutsideAngular(()=>je.onIdTokenChanged(ut=>rt.next(ut),ut=>rt.error(ut),()=>rt.complete()))}))));this.authState=Ue.pipe(F1(We),(0,qy.R)(d.outsideAngular),(0,Gy.Q)(d.insideAngular)),this.user=Ue.pipe(F1(Qe),(0,qy.R)(d.outsideAngular),(0,Gy.Q)(d.insideAngular)),this.idToken=this.user.pipe(Tr(je=>je?(0,qn.D)(je.getIdToken()):dt(null))),this.idTokenResult=this.user.pipe(Tr(je=>je?(0,qn.D)(je.getIdTokenResult()):dt(null))),this.credential=(0,xg.T)(Ue,Z,this.authState.pipe(Rt(je=>!je))).pipe((0,wt.U)(je=>(null==je?void 0:je.user)?je:null),(0,qy.R)(d.outsideAngular),(0,Gy.Q)(d.insideAngular))}return(0,Do.pX)(this,se,a,{spy:{apply:(Ie,Ue,We)=>{(Ie.startsWith("signIn")||Ie.startsWith("createUser"))&&We.then(Qe=>Z.next(Qe))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Do.Dh),u.LFG(Do.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(_i.HU),u.LFG(aO,8),u.LFG(lO,8),u.LFG(uO,8),u.LFG(cO,8),u.LFG(dO,8),u.LFG(hO,8),u.LFG(gS,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Zh=(()=>{class n{constructor(t,r){this.fireauth=t,this.router=r,this.user=null,this.getUserState().subscribe(i=>{i?(this.user=i,localStorage.setItem("uid",this.user.uid),setTimeout(()=>this.router.navigate.projects,200)):(this.user=null,localStorage.removeItem("uid"),this.router.navigate(["login"]))})}getUserState(){return this.fireauth.authState}get logged(){return null!==this.user}get uid(){return this.user.uid}login(t,r){var i=this;return(0,Y.Z)(function*(){try{return(yield i.fireauth.signInWithEmailAndPassword(t,r)).user&&setTimeout(()=>i.router.navigate(["projects"]),1e3),!0}catch(a){return a}})()}register(t,r){var i=this;return(0,Y.Z)(function*(){try{return yield i.fireauth.createUserWithEmailAndPassword(t,r),i.router.navigate(["login"]),!0}catch(a){return a}})()}logout(){var t=this;return(0,Y.Z)(function*(){try{return yield t.fireauth.signOut(),!0}catch(r){return console.log(r),!1}})()}deleteAccount(){var t=this;return(0,Y.Z)(function*(){try{yield t.user.delete()}catch(r){yield t.fireauth.signOut()}})()}googleLogin(){var t=this;return(0,Y.Z)(function*(){var r;try{let i=yield t.fireauth.signInWithPopup(new Mg.Q);return t.user=i.user,localStorage.setItem("uid",null===(r=t.user)||void 0===r?void 0:r.uid),t.router.navigate(["main"]),!0}catch(i){return console.log(i),!1}})()}githubLogin(){var t=this;return(0,Y.Z)(function*(){var r;try{let i=yield t.fireauth.signInWithPopup(new Mg.T);return console.log("result"),console.log(i),t.router.navigate(["main"]),localStorage.setItem("token",JSON.stringify(null===(r=i.user)||void 0===r?void 0:r.uid)),!0}catch(i){return console.log(i),!1}})()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(_S),u.LFG(Zn))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function kB(n,e){if(1&n&&(u.TgZ(0,"p",10),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Oqu(t.errorMsg)}}function PB(n,e){if(1&n&&(u.TgZ(0,"p",11),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Oqu(t.message)}}const FB=function(){return["/register"]};let LB=(()=>{class n{constructor(t,r){this.auth=t,this.router=r,this.toRegisterForm=new u.vpe,this.loginForm=new zd({email:new Ba("",[ei.required,ei.email]),password:new Ba("",[ei.required,ei.minLength(3),ei.maxLength(60)])}),this.submitted=!1,this.errorMsg="",this.message=""}get f(){return this.loginForm.controls}ngOnInit(){}onSubmit(){var t=this;return(0,Y.Z)(function*(){console.log("onSubmit");try{if(t.loginForm.invalid)throw new Error("form invalid");if(!0!==(yield t.auth.login(t.loginForm.value.email,t.loginForm.value.password)))throw new Error("authentication failed");t.loginForm.value.email="",t.loginForm.value.password="",t.message="Login successful"}catch(r){t.errorMsg="Login failed",setTimeout(()=>t.errorMsg="",1e4)}})()}googleLogin(){var t=this;return(0,Y.Z)(function*(){try{let r=yield t.auth.googleLogin();if(console.log(r),!0!==r)throw new Error("Login failed");t.message="Login successful"}catch(r){console.log("error"),console.log(r),t.errorMsg="Login failed"}})()}githubLogin(){var t=this;return(0,Y.Z)(function*(){try{if(!0!==(yield t.auth.githubLogin()))throw new Error("Login failed");t.message="Login successful"}catch(r){console.log("error"),console.log(r),t.errorMsg="Login failed"}})()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Zh),u.Y36(Zn))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-login-form"]],outputs:{toRegisterForm:"toRegisterForm"},decls:24,vars:6,consts:[[1,"htt","one","htt-mycontainer",3,"formGroup","ngSubmit","keyup.escape"],["type","email","formControlName","email",1,"htt-myinput"],["type","text","formControlName","password",1,"htt-myinput"],[1,"htt-mybtn","full"],[3,"disabled"],["type","button",3,"routerLink"],["type","button",1,"htt-card",3,"click"],["src","../../../assets/img/icon-google.png","alt","icon google",1,"htt"],["class","htt-message red",4,"ngIf"],["class","htt-message",4,"ngIf"],[1,"htt-message","red"],[1,"htt-message"]],template:function(t,r){1&t&&(u.TgZ(0,"form",0),u.NdJ("ngSubmit",function(){return r.onSubmit()})("keyup.escape",function(){return r.loginForm.reset()}),u.TgZ(1,"h1"),u._uU(2,"Login form"),u.qZA(),u.TgZ(3,"div")(4,"label"),u._uU(5,"Email"),u.qZA(),u._UZ(6,"input",1),u.qZA(),u.TgZ(7,"div")(8,"label"),u._uU(9,"Password"),u.qZA(),u._UZ(10,"input",2),u.qZA(),u.TgZ(11,"div",3)(12,"button",4),u._uU(13,"Login"),u.qZA()(),u.TgZ(14,"div",3)(15,"button",5),u._uU(16,"Register"),u.qZA()(),u.TgZ(17,"div",3)(18,"button",6),u.NdJ("click",function(){return r.googleLogin()}),u._UZ(19,"img",7),u.TgZ(20,"p"),u._uU(21,"Login with Google"),u.qZA()()(),u.YNc(22,kB,2,1,"p",8),u.YNc(23,PB,2,1,"p",9),u.qZA()),2&t&&(u.Q6J("formGroup",r.loginForm),u.xp6(12),u.Q6J("disabled",r.loginForm.invalid),u.xp6(3),u.Q6J("routerLink",u.DdM(5,FB)),u.xp6(7),u.Q6J("ngIf",r.errorMsg),u.xp6(1),u.Q6J("ngIf",r.message))},directives:[Jd,Bt,Qd,js,_t,mp,Cu,En],styles:[""]}),n})(),pO=(()=>{class n{constructor(){this.class="manual-show"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-manual"]],hostVars:2,hostBindings:function(t,r){2&t&&u.Tol(r.class)},decls:60,vars:0,consts:[[1,"htt-manual-container"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"ul")(2,"li"),u._uU(3,"The first step is the AUTO IDENTIFY button. This function identifies all texts in the HTML template that may need to be translated."),u.qZA(),u.TgZ(4,"li"),u._uU(5,"The identified HTML view elements will now have blue borders"),u.qZA(),u.TgZ(6,"li"),u._uU(7,"Once you've identified the elements and the blue borders appear, save the template. To do this, press the blue SAVE TEMPLATE button in the lower bar, left side"),u.qZA(),u.TgZ(8,"li"),u._uU(9,"Move the mouse and click on an element to select it. Information about its identifier will appear on the left side. The selected item will be highlighted in orange."),u.qZA(),u.TgZ(10,"li"),u._uU(11,"To start adding translations, select the language you are translating into. To do this, press the blue button to: in the bottom bar, in the LANGUAGES section and select the language. The selected language should appear next to the button"),u.qZA(),u.TgZ(12,"li"),u._uU(13,"After selecting an element, its original content should appear in the window in the section on the left. The translation of this content should be entered in the empty window below."),u.qZA(),u.TgZ(14,"li"),u._uU(15,"If the element has been translated sooner, the translation window will contain this translation. They can be freely changed."),u.qZA(),u.TgZ(16,"li"),u._uU(17,"Some elements are divided into several texts if they are separated, for example, by a newline symbol. In this case, there will be several original text and translation windows. The appropriate proportions between the text fragments should be kept."),u.qZA(),u.TgZ(18,"li"),u._uU(19,"To enter the translation of an element into the system, complete all translation windows, if there are several of them, and press the green ADD TRANSLATION button or the ENTER key on the keyboard."),u.qZA(),u.TgZ(20,"li"),u._uU(21,"After successfully entering the translation, an appropriate message will appear and you can select further items."),u.qZA(),u.TgZ(22,"li"),u._uU(23,"Items with translation entered will have orange borders."),u.qZA(),u.TgZ(24,"li"),u._uU(25,"ATTENTION! In the case of nested smaller elements with Identifier in larger elements with Identifier, there is a problem with selecting the smaller element. There is a way to do this:"),u.qZA(),u.TgZ(26,"li"),u._uU(27,"By clicking on the smaller element, you will probably select the larger one. Then move the cursor over the smaller element and click again to deselect the larger element. If you do not move the mouse too much and press the mouse again, the smaller element should be selected finally."),u.qZA(),u.TgZ(28,"li"),u._uU(29,"If you believe that an item does not require translation (e.g. email address, telephone number, or texts that should not be translated), remove its Identifier. To do this, select it and press the orange button 'remove' in the section on the left"),u.qZA(),u.TgZ(30,"li"),u._uU(31,"Every time you identify or remove an Identifier, be sure to save the template. Failure to save can cause errors."),u.qZA(),u.TgZ(32,"li"),u._uU(33,"If you want to select an item other than the one currently selected, press the orange uselect button in the section on the left or the ESC key on the keyboard."),u.qZA(),u.TgZ(34,"li"),u._uU(35,"After you have translated all visible items, you need to enter translations of the images ALTs, some metadata, and items that are not visible in the view for some reason."),u.qZA(),u.TgZ(36,"li"),u._uU(37,"To enter translations of the images ALTs, press the blue button 'add img translations' on the bottom bar."),u.qZA(),u.TgZ(38,"li"),u._uU(39,"A list with the identified image elements will be displayed. For each of them, you must enter a translation or remove the Identifier. Ultimately, the list should be empty. Then go back to the template view."),u.qZA(),u.TgZ(40,"li"),u._uU(41,"Don't forget to save the template now after removing Identifiers"),u.qZA(),u.TgZ(42,"li"),u._uU(43,'To enter metadata translations, press the blue button on the bottom bar "add header translations" and proceed as for image translations until the list is empty.'),u.qZA(),u.TgZ(44,"li"),u._uU(45,"All elements that have been identified but have not been translated so far will appear on the list after pressing the green 'untranslated' button on the bottom bar. Do the same as with metadata and images until the list is empty."),u.qZA(),u.TgZ(46,"li"),u._uU(47,"SAVE TEMPLATE AGAIN!"),u.qZA(),u.TgZ(48,"li"),u._uU(49,"Once you have entered all the translations for a given language and removed all unnecessary Identifiers, press the green TRANSLATE TEMPLATE button on the bottom bar. You should see a translated template."),u.qZA(),u.TgZ(50,"li"),u._uU(51,"You can go back to the original version of the template by pressing the same button, which is now called BACK TO ORIGIN"),u.qZA(),u.TgZ(52,"li"),u._uU(53,"You can disable and enable the borders view of identified / translated elements at any time. To do this, press the blue 'borders' button in the lower right corner."),u.qZA(),u.TgZ(54,"li"),u._uU(55,"In fact, you can translate the template at any time, even if not all translations are entered, for example to see the progress of your work. A suitable message will be displayed."),u.qZA(),u.TgZ(56,"li"),u._uU(57,"The final step is the GENERATE TEMPLATE button. Your browser should download the translated template file. Generating an incompletely translated template is not recommended."),u.qZA(),u.TgZ(58,"li"),u._uU(59,"Please report any errors in the operation of the application to this address: html.template.translation.tool@gmail.com"),u.qZA()()())},styles:["[_nghost-%COMP%]{position:fixed;top:0;right:0;width:45vw;height:100%;background-color:var(--dark)}.manual-show[_nghost-%COMP%]{animation:show-manual .15s cubic-bezier(.4,0,1,1) forwards}.manual-hide[_nghost-%COMP%]{animation:hide-manual .15s cubic-bezier(.4,0,1,1) forwards}@keyframes show-manual{0%{transform:translate(100%)}to{transform:translate(0)}}@keyframes hide-manual{0%{transform:translate(0)}to{transform:translate(100%)}}.htt-manual-container[_ngcontent-%COMP%]{padding:10vh 0;height:100vh;background:#bebebe;border-left:2px solid #000;font-size:1.2em;overflow:auto}.htt-manual-container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{list-style:disc}.htt-manual-container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{margin-top:15px;list-style:disc}"]}),n})(),ua=(()=>{class n{constructor(){this.langs=[{name:"german",origin:"Deutsch",code:"de"},{name:"english",origin:"English",code:"en"},{name:"spanish",origin:"espa\xf1ol",code:"es"},{name:"nederlands",origin:"nederlands",code:"nl"},{name:"polish",origin:"Polski",code:"pl"},{name:"russian",origin:"p\u0443\u0441\u0441\u043a\u0438\u0439",code:"ru"}],this.initial={name:"",origin:"",code:"nn"},this.originObs=new An(this.initial),this.translateToObs=new An(this.initial),this.originObs.subscribe(t=>this._origin=t),this.translateToObs.subscribe(t=>this._translateTo=t)}get list(){return this.langs.map(t=>t.name)}get origin(){return this._origin.name}get originFull(){return this._origin}getOriginObs(){return this.originObs.asObservable()}setOriginLanguage(t){let r=this.langs.find(i=>i.name===t);if(!r)throw new Error("lang code not found!");this.originObs.next(r)}get translateTo(){return this._translateTo.name}get translateToFull(){return this._translateTo}getTranslateToObs(){return this.translateToObs.asObservable()}getByName(t){return this.langs.find(r=>r.name===t)}set translateTo(t){if(!this.list.includes(t))throw new Error("no such language");{const r=this.langs.find(i=>i.name===t);this._translateTo=r,this.translateToObs.next(r)}}reset(){this._translateTo=this.initial,this.translateToObs.next(this.initial)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gO="firebasestorage.googleapis.com",mO="storageBucket";class Dr extends Ot.ZR{constructor(e,t){super(yS(e),`Firebase Storage: ${t} (${yS(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Dr.prototype)}_codeEquals(e){return yS(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function yS(n){return"storage/"+n}function vS(){return new Dr("unknown","An unknown error occurred, please check the error payload for server response.")}function bS(n){return new Dr("invalid-argument",n)}function vO(){return new Dr("app-deleted","The Firebase app was deleted.")}function ev(n,e){return new Dr("invalid-format","String does not match format '"+n+"': "+e)}function tv(n){throw new Dr("internal-error","Internal error: "+n)}class Ts{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ts.makeFromUrl(e,t)}catch(i){return new Ts(e,"")}if(""===r.path)return r;throw function ZB(n){return new Dr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(je){je.path_=decodeURIComponent(je.path)}const A=t.replace(/[.]/g,"\\."),Qe=[{regex:f,indices:{bucket:1,path:3},postModify:function a(je){"/"===je.path.charAt(je.path.length-1)&&(je.path_=je.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${A}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===gO?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let je=0;je<Qe.length;je++){const rt=Qe[je],ut=rt.regex.exec(e);if(ut){let Jt=ut[rt.indices.path];Jt||(Jt=""),r=new Ts(ut[rt.indices.bucket],Jt),rt.postModify(r);break}}if(null==r)throw function WB(n){return new Dr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class QB{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function $1(n){return"string"==typeof n||n instanceof String}function bO(n){return wS()&&n instanceof Blob}function wS(){return"undefined"!=typeof Blob}function TS(n,e,t,r){if(r<e)throw bS(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw bS(`Invalid value for '${n}'. Expected ${t} or less.`)}function Nu(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}var ud=(()=>{return(n=ud||(ud={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",ud;var n})();class iV{constructor(e,t,r,i,a,d,f,_,w,I,A){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=d,this.callback_=f,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=I,this.connectionFactory_=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,L)=>{this.resolve_=P,this.reject_=L,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,d=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(f,f.getResponse());!function tV(n){return void 0!==n}(_)?a():a(_)}catch(_){d(_)}else if(null!==f){const _=vS();_.serverResponse=f.getErrorText(),d(this.errorCallback_?this.errorCallback_(f,_):_)}else d(i.canceled?this.appDelete_?vO():function _O(){return new Dr("canceled","User canceled the upload/download.")}():function qB(){return new Dr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new q1(!1,null,!0)):this.backoffId_=function XB(n,e,t){let r=1,i=null,a=null,d=!1,f=0;function _(){return 2===f}let w=!1;function I(...Ie){w||(w=!0,e.apply(null,Ie))}function A(Ie){i=setTimeout(()=>{i=null,n(L,_())},Ie)}function P(){a&&clearTimeout(a)}function L(Ie,...Ue){if(w)return void P();if(Ie)return P(),void I.call(null,Ie,...Ue);if(_()||d)return P(),void I.call(null,Ie,...Ue);let Qe;r<64&&(r*=2),1===f?(f=2,Qe=0):Qe=1e3*(r+Math.random()),A(Qe)}let Z=!1;function se(Ie){Z||(Z=!0,P(),!w&&(null!==i?(Ie||(f=2),clearTimeout(i),A(0)):Ie||(f=1)))}return A(0),a=setTimeout(()=>{d=!0,se(!0)},t),se}((r,i)=>{if(i)return void r(!1,new q1(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const d=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(d),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(d),this.pendingConnection_=null;const f=a.getErrorCode()===ud.NO_ERROR,_=a.getStatus();if(!f||this.isRetryStatusCode_(_)){const I=a.getErrorCode()===ud.ABORT;return void r(!1,new q1(!1,null,I))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new q1(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function eV(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class q1{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function dV(...n){const e=function cV(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(wS())return new Blob(n);throw new Dr("unsupported-environment","This browser doesn't seem to support creating Blobs")}class DS{constructor(e,t){this.data=e,this.contentType=t||null}}function DO(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function EO(n,e){switch(n){case"base64":{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw ev(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case"base64url":{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw ev(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function fV(n){return atob(n)}(e)}catch(i){throw ev(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class CO{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw ev("data_url","Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function _V(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Mu{constructor(e,t){let r=0,i="";bO(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(bO(this.data_)){const i=function hV(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Mu(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Mu(r,!0)}}static getBlob(...e){if(wS()){const t=e.map(r=>r instanceof Mu?r.data_:r);return new Mu(dV.apply(null,t))}{const t=e.map(d=>$1(d)?function TO(n,e){switch(n){case"raw":return new DS(DO(e));case"base64":case"base64url":return new DS(EO(n,e));case"data_url":return new DS(function gV(n){const e=new CO(n);return e.base64?EO("base64",e.rest):function pV(n){let e;try{e=decodeURIComponent(n)}catch(t){throw ev("data_url","Malformed data URL.")}return DO(e)}(e.rest)}(e),function mV(n){return new CO(n).contentType}(e))}throw vS()}("raw",d).data:d.data_);let r=0;t.forEach(d=>{r+=d.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(d=>{for(let f=0;f<d.length;f++)i[a++]=d[f]}),new Mu(i,!0)}}uploadData(){return this.data_}}function IO(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function bV(n,e){return e}class Ds{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||bV}}let W1=null;function SO(n,e,t){const r=function ES(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function rV(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}(e);return null===r?null:function DV(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const d=t[a];r[d.local]=d.xform(r,e[d.server])}return function TV(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Ts(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}class Pl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Z1(n,e){return function t(r,i){const a=SO(n,i,e);return function Fl(n){if(!n)throw vS()}(null!==a),a}}function Fg(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function GB(){return new Dr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function HB(){return new Dr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function jB(n){return new Dr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function $B(n){return new Dr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function rv(n){const e=Fg(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function UB(n){return new Dr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function OO(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},_=function f(){let Qe="";for(let je=0;je<2;je++)Qe+=Math.random().toString().slice(2);return Qe}();d["Content-Type"]="multipart/related; boundary="+_;const w=function RO(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function OV(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}(e,r,i),I=function CS(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}(w,t),L=Mu.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+I+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===L)throw function yO(){return new Dr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}();const Z={name:w.fullPath},se=Nu(a,n.host,n._protocol),Ue=n.maxUploadRetryTime,We=new Pl(se,"POST",Z1(n,t),Ue);return We.urlParams=Z,We.headers=d,We.body=L.uploadData(),We.errorHandler=Fg(e),We}class FO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ud.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ud.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ud.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw tv("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tv("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tv("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw tv("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tv("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class BV extends FO{initXhr(){this.xhr_.responseType="text"}}function Qa(){return new BV}class jV extends FO{initXhr(){this.xhr_.responseType="blob"}}function HV(){return new jV}class zh{constructor(e,t){this._service=e,this._location=t instanceof Ts?t:Ts.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new zh(e,t)}get root(){const e=new Ts(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return IO(this._location.path)}get storage(){return this._service}get parent(){const e=function yV(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ts(this._location.bucket,e);return new zh(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function JB(n){return new Dr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function LO(n,e,t){n._throwIfRoot("uploadBytes");const r=OO(n.storage,n._location,function nv(){if(W1)return W1;const n=[];n.push(new Ds("bucket")),n.push(new Ds("generation")),n.push(new Ds("metageneration")),n.push(new Ds("name","fullPath",!0));const t=new Ds("name");t.xform=function e(a,d){return function wV(n){return!$1(n)||n.length<2?n:IO(n)}(d)},n.push(t);const i=new Ds("size");return i.xform=function r(a,d){return void 0!==d?Number(d):d},n.push(i),n.push(new Ds("timeCreated")),n.push(new Ds("updated")),n.push(new Ds("md5Hash",null,!0)),n.push(new Ds("cacheControl",null,!0)),n.push(new Ds("contentDisposition",null,!0)),n.push(new Ds("contentEncoding",null,!0)),n.push(new Ds("contentLanguage",null,!0)),n.push(new Ds("contentType",null,!0)),n.push(new Ds("metadata","customMetadata",!0)),W1=n,W1}(),new Mu(e,!0),t);return n.storage.makeRequestWithTokens(r,Qa).then(i=>({metadata:i,ref:n}))}function jO(n,e){if(n instanceof NS){const t=n;if(null==t._bucket)throw function zB(){return new Dr("no-default-bucket","No default bucket found. Did you set the '"+mO+"' property when initializing the app?")}();const r=new zh(t,t._bucket);return null!=e?jO(r,e):r}return void 0!==e?function UO(n,e){const t=function vV(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ts(n._location.bucket,t);return new zh(n.storage,r)}(n,e):n}function HO(n,e){const t=null==e?void 0:e[mO];return null==t?null:Ts.makeFromBucketSpec(t,n)}class NS{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=gO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ts.makeFromBucketSpec(i,this._host):HO(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ts.makeFromBucketSpec(this._url,e):HO(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){TS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){TS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Y.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Y.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new zh(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new QB(vO());{const a=function uV(n,e,t,r,i,a){const d=function wO(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),f=n.url+d,_=Object.assign({},n.headers);return function aV(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function sV(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function oV(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,a),function lV(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new iV(f,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,Y.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const GO="@firebase/storage",qO="storage";function MS(n,e){return function tU(n,e){if(e&&function XV(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof NS)return function eU(n,e){return new zh(n,e)}(n,e);throw bS("To use ref(service, url), the first argument must be a Storage instance.")}return jO(n,e)}(n=(0,Ot.m9)(n),e)}function xS(n=(0,ws.getApp)(),e){return n=(0,Ot.m9)(n),(0,ws._getProvider)(n,qO).getImmediate({identifier:e})}function sU(n,e){return function qV(n,e){n._throwIfRoot("getBlob");const t=function xO(n,e,t){const i=Nu(e.fullServerUrl(),n.host,n._protocol)+"?alt=media",f=new Pl(i,"GET",(_,w)=>w,n.maxOperationRetryTime);return f.errorHandler=rv(e),void 0!==t&&(f.headers.Range=`bytes=0-${t}`,f.successCodes=[200,206]),f}(n.storage,n._location,e);return n.storage.makeRequestWithTokens(t,HV).then(r=>void 0!==e?r.slice(0,e):r)}(n=(0,Ot.m9)(n),e)}function oU(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new NS(t,r,i,e,ws.SDK_VERSION)}function RS(){return(0,Bn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Vn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}!function aU(){(0,ws._registerComponent)(new Au.wA(qO,oU,"PUBLIC").setMultipleInstances(!0)),(0,ws.registerVersion)(GO,"0.9.6",""),(0,ws.registerVersion)(GO,"0.9.6","esm2017")}(),k(5881);var ft,lU=k(3942),uU="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},xu={},OS=OS||{},Vt=uU||self;function K1(){}function kS(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function iv(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var PS="closure_uid_"+(1e9*Math.random()>>>0),dU=0;function hU(n,e,t){return n.call.apply(n.bind,arguments)}function fU(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Oi(n,e,t){return(Oi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?hU:fU).apply(null,arguments)}function Y1(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ki(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var d=Array(arguments.length-2),f=2;f<arguments.length;f++)d[f-2]=arguments[f];return e.prototype[i].apply(r,d)}}function cd(){this.s=this.s,this.o=this.o}var gU={};cd.prototype.s=!1,cd.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function cU(n){return Object.prototype.hasOwnProperty.call(n,PS)&&n[PS]||(n[PS]=++dU)}(this);delete gU[n]}},cd.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const WO=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},ZO=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function zO(n){return Array.prototype.concat.apply([],arguments)}function FS(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function J1(n){return/^[\s\xa0]*$/.test(n)}var Cs,KO=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Es(n,e){return-1!=n.indexOf(e)}function LS(n,e){return n<e?-1:n>e?1:0}e:{var YO=Vt.navigator;if(YO){var JO=YO.userAgent;if(JO){Cs=JO;break e}}Cs=""}function BS(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function QO(n){const e={};for(const t in n)e[t]=n[t];return e}var XO="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ek(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<XO.length;a++)t=XO[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function VS(n){return VS[" "](n),n}VS[" "]=K1;var Q1,n,yU=Es(Cs,"Opera"),Bg=Es(Cs,"Trident")||Es(Cs,"MSIE"),tk=Es(Cs,"Edge"),US=tk||Bg,nk=Es(Cs,"Gecko")&&!(Es(Cs.toLowerCase(),"webkit")&&!Es(Cs,"Edge"))&&!(Es(Cs,"Trident")||Es(Cs,"MSIE"))&&!Es(Cs,"Edge"),vU=Es(Cs.toLowerCase(),"webkit")&&!Es(Cs,"Edge");function rk(){var n=Vt.document;return n?n.documentMode:void 0}e:{var jS="",HS=(n=Cs,nk?/rv:([^\);]+)(\)|;)/.exec(n):tk?/Edge\/([\d\.]+)/.exec(n):Bg?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):vU?/WebKit\/(\S+)/.exec(n):yU?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(HS&&(jS=HS?HS[1]:""),Bg){var GS=rk();if(null!=GS&&GS>parseFloat(jS)){Q1=String(GS);break e}}Q1=jS}var bU={};var TU=Vt.document&&Bg&&(rk()||parseInt(Q1,10))||void 0,DU=function(){if(!Vt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Vt.addEventListener("test",K1,e),Vt.removeEventListener("test",K1,e)}catch(t){}return n}();function ns(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function sv(n,e){if(ns.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(nk){e:{try{VS(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:EU[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&sv.Z.h.call(this)}}ns.prototype.h=function(){this.defaultPrevented=!0},ki(sv,ns);var EU={2:"touch",3:"pen",4:"mouse"};sv.prototype.h=function(){sv.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ov="closure_listenable_"+(1e6*Math.random()|0),CU=0;function IU(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++CU,this.ca=this.fa=!1}function X1(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function eT(n){this.src=n,this.g={},this.h=0}function qS(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=WO(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(X1(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function WS(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}eT.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var d=WS(n,e,r,i);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new IU(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var ZS="closure_lm_"+(1e6*Math.random()|0),zS={};function sk(n,e,t,r,i){if(r&&r.once)return ak(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)sk(n,e[a],t,r,i);return null}return t=QS(t),n&&n[ov]?n.N(e,t,iv(r)?!!r.capture:!!r,i):ok(n,e,t,!1,r,i)}function ok(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var d=iv(i)?!!i.capture:!!i,f=YS(n);if(f||(n[ZS]=f=new eT(n)),(t=f.add(e,t,r,d,a)).proxy)return t;if(r=function SU(){var e=AU;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)DU||(i=d),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(uk(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ak(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)ak(n,e[a],t,r,i);return null}return t=QS(t),n&&n[ov]?n.O(e,t,iv(r)?!!r.capture:!!r,i):ok(n,e,t,!0,r,i)}function lk(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)lk(n,e[a],t,r,i);else r=iv(r)?!!r.capture:!!r,t=QS(t),n&&n[ov]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=WS(a=n.g[e],t,r,i))&&(X1(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=YS(n))&&(e=n.g[e.toString()],n=-1,e&&(n=WS(e,t,r,i)),(t=-1<n?e[n]:null)&&KS(t))}function KS(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[ov])qS(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(uk(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=YS(e))?(qS(t,n),0==t.h&&(t.src=null,e[ZS]=null)):X1(n)}}}function uk(n){return n in zS?zS[n]:zS[n]="on"+n}function AU(n,e){if(n.ca)n=!0;else{e=new sv(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&KS(n),n=t.call(r,e)}return n}function YS(n){return(n=n[ZS])instanceof eT?n:null}var JS="__closure_events_fn_"+(1e9*Math.random()>>>0);function QS(n){return"function"==typeof n?n:(n[JS]||(n[JS]=function(e){return n.handleEvent(e)}),n[JS])}function vi(){cd.call(this),this.i=new eT(this),this.P=this,this.I=null}function Pi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ns(e,n);else if(e instanceof ns)e.target=e.target||n;else{var i=e;ek(e=new ns(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var d=e.g=t[a];i=tT(d,r,!0,e)&&i}if(i=tT(d=e.g=n,r,!0,e)&&i,i=tT(d,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=tT(d=e.g=t[a],r,!1,e)&&i}function tT(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var d=e[a];if(d&&!d.ca&&d.capture==t){var f=d.listener,_=d.ia||d.src;d.fa&&qS(n.i,d),i=!1!==f.call(_,r)&&i}}return i&&!r.defaultPrevented}ki(vi,cd),vi.prototype[ov]=!0,vi.prototype.removeEventListener=function(n,e,t,r){lk(this,n,e,t,r)},vi.prototype.M=function(){if(vi.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)X1(t[r]);delete n.g[e],n.h--}}this.I=null},vi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},vi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var XS=Vt.JSON.stringify;function NU(){var n=dk;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var tA,ck=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new xU,n=>n.reset());class xU{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function RU(n){Vt.setTimeout(()=>{throw n},0)}function eA(n,e){tA||function OU(){var n=Vt.Promise.resolve(void 0);tA=function(){n.then(kU)}}(),nA||(tA(),nA=!0),dk.add(n,e)}var nA=!1,dk=new class MU{constructor(){this.h=this.g=null}add(e,t){const r=ck.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function kU(){for(var n;n=NU();){try{n.h.call(n.g)}catch(t){RU(t)}var e=ck;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}nA=!1}function nT(n,e){vi.call(this),this.h=n||1,this.g=e||Vt,this.j=Oi(this.kb,this),this.l=Date.now()}function rA(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function iA(n,e,t){if("function"==typeof n)t&&(n=Oi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Oi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Vt.setTimeout(n,e||0)}function hk(n){n.g=iA(()=>{n.g=null,n.i&&(n.i=!1,hk(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ki(nT,vi),(ft=nT.prototype).da=!1,ft.S=null,ft.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Pi(this,"tick"),this.da&&(rA(this),this.start()))}},ft.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ft.M=function(){nT.Z.M.call(this),rA(this),delete this.g};class PU extends cd{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:hk(this)}M(){super.M(),this.g&&(Vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function av(n){cd.call(this),this.h=n,this.g={}}ki(av,cd);var fk=[];function pk(n,e,t,r){Array.isArray(t)||(t&&(fk[0]=t.toString()),t=fk);for(var i=0;i<t.length;i++){var a=sk(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function gk(n){BS(n.g,function(e,t){this.g.hasOwnProperty(t)&&KS(e)},n),n.g={}}function rT(){this.g=!0}function Vg(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function VU(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var d=1;d<i.length;d++)i[d]=""}}}return XS(t)}catch(f){return e}}(n,t)+(r?" "+r:"")})}av.prototype.M=function(){av.Z.M.call(this),gk(this)},av.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},rT.prototype.Aa=function(){this.g=!1},rT.prototype.info=function(){};var Kh={},mk=null;function iT(){return mk=mk||new vi}function _k(n){ns.call(this,Kh.Ma,n)}function lv(n){const e=iT();Pi(e,new _k(e,n))}function yk(n,e){ns.call(this,Kh.STAT_EVENT,n),this.stat=e}function Is(n){const e=iT();Pi(e,new yk(e,n))}function vk(n,e){ns.call(this,Kh.Na,n),this.size=e}function uv(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Vt.setTimeout(function(){n()},e)}Kh.Ma="serverreachability",ki(_k,ns),Kh.STAT_EVENT="statevent",ki(yk,ns),Kh.Na="timingevent",ki(vk,ns);var sT={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},bk={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function sA(){}function Tk(){}sA.prototype.h=null;var lA,cv={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function oA(){ns.call(this,"d")}function aA(){ns.call(this,"c")}function oT(){}function dv(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new av(this),this.P=UU,this.W=new nT(n=US?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Dk}function Dk(){this.i=null,this.g="",this.h=!1}ki(oA,ns),ki(aA,ns),ki(oT,sA),oT.prototype.g=function(){return new XMLHttpRequest},oT.prototype.i=function(){return{}},lA=new oT;var UU=45e3,uA={},aT={};function cA(n,e,t){n.K=1,n.v=hT(Ru(e)),n.s=t,n.U=!0,Ek(n,null)}function Ek(n,e){n.F=Date.now(),hv(n),n.A=Ru(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Ok(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Dk,n.g=nP(n.l,t?e:null,!n.s),0<n.O&&(n.L=new PU(Oi(n.Ia,n,n.g),n.O)),pk(n.V,n.g,"readystatechange",n.gb),e=n.H?QO(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),lv(1),function FU(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var d="",f=a.split("&"),_=0;_<f.length;_++){var w=f[_].split("=");if(1<w.length){var I=w[0];w=w[1];var A=I.split("_");d=2<=A.length&&"type"==A[1]?d+(I+"=")+w+"&":d+(I+"=redacted&")}}else d=null;else d=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Ck(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Ik(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=jU(n,t),i==aT){4==e&&(n.o=4,Is(14),r=!1),Vg(n.j,n.m,null,"[Incomplete Response]");break}if(i==uA){n.o=4,Is(15),Vg(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Vg(n.j,n.m,i,null),dA(n,i)}Ck(n)&&i!=aT&&i!=uA&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Is(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),TA(e),e.L=!0,Is(11))):(Vg(n.j,n.m,t,"[Invalid Chunked Response]"),Yh(n),fv(n))}function jU(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?aT:(t=Number(e.substring(t,r)),isNaN(t)?uA:(r+=1)+t>e.length?aT:(e=e.substr(r,t),n.C=r+t,e))}function hv(n){n.Y=Date.now()+n.P,Sk(n,n.P)}function Sk(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=uv(Oi(n.eb,n),e)}function lT(n){n.B&&(Vt.clearTimeout(n.B),n.B=null)}function fv(n){0==n.l.G||n.I||Qk(n.l,n)}function Yh(n){lT(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,rA(n.W),gk(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function dA(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||pA(t.i,n)))if(t.I=n.N,!n.J&&pA(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(w){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=uv(Oi(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;yT(t),mT(t)}wA(t),Is(18)}if(1>=Fk(t.i)&&t.ka){try{t.ka()}catch(w){}t.ka=void 0}}else Xh(t,11)}else if((n.J||t.g==n)&&yT(t),!J1(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const I=w[3];null!=I&&(t.ma=I,t.h.info("VER="+t.ma));const A=w[4];null!=A&&(t.za=A,t.h.info("SVER="+t.za));const P=w[5];null!=P&&"number"==typeof P&&0<P&&(t.K=r=1.5*P,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const L=n.g;if(L){const Z=L.g?L.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var a=r.i;!a.g&&(Es(Z,"spdy")||Es(Z,"quic")||Es(Z,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(gA(a,a.h),a.h=null))}if(r.D){const se=L.g?L.g.getResponseHeader("X-HTTP-Session-Id"):null;se&&(r.sa=se,ar(r.F,r.D,se))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=tP(r,r.H?r.la:null,r.W),d.J){Lk(r.i,d);var f=d,_=r.K;_&&f.setTimeout(_),f.B&&(lT(f),hv(f)),r.g=d}else Yk(r);0<t.l.length&&_T(t)}else"stop"!=w[0]&&"close"!=w[0]||Xh(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Xh(t,7):vA(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}lv(4)}catch(w){}}function hA(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(kS(n)||"string"==typeof n)ZO(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(kS(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function HU(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(kS(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function Ug(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Ug)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function fA(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Jh(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Jh(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Jh(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ft=dv.prototype).setTimeout=function(n){this.P=n},ft.gb=function(n){n=n.target;const e=this.L;e&&3==Ou(n)?e.l():this.Ia(n)},ft.Ia=function(n){try{if(n==this.g)e:{const I=Ou(this.g);var e=this.g.Da();const A=this.g.ba();if(!(3>I)&&(3!=I||US||this.g&&(this.h.h||this.g.ga()||qk(this.g)))){this.I||4!=I||7==e||lv(8==e||0>=A?3:2),lT(this);var t=this.g.ba();this.N=t;t:if(Ck(this)){var r=qk(this.g);n="";var i=r.length,a=4==Ou(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Yh(this),fv(this);var d="";break t}this.h.i=new Vt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function LU(n,e,t,r,i,a,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+d})}(this.j,this.u,this.A,this.m,this.X,I,t),this.i){if(this.$&&!this.J){t:{if(this.g){var f,_=this.g;if((f=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J1(f)){var w=f;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Is(12),Yh(this),fv(this);break e}Vg(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,dA(this,t)}this.U?(Ik(this,I,d),US&&this.i&&3==I&&(pk(this.V,this.W,"tick",this.fb),this.W.start())):(Vg(this.j,this.m,d,null),dA(this,d)),4==I&&Yh(this),this.i&&!this.I&&(4==I?Qk(this.l,this):(this.i=!1,hv(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Is(12)):(this.o=0,Is(13)),Yh(this),fv(this)}}}catch(I){}},ft.fb=function(){if(this.g){var n=Ou(this.g),e=this.g.ga();this.C<e.length&&(lT(this),Ik(this,n,e),this.i&&4!=n&&hv(this))}},ft.cancel=function(){this.I=!0,Yh(this)},ft.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function BU(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(lv(3),Is(17)),Yh(this),this.o=2,fv(this)):Sk(this,this.Y-n)},(ft=Ug.prototype).R=function(){fA(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ft.T=function(){return fA(this),this.g.concat()},ft.get=function(n,e){return Jh(this.h,n)?this.h[n]:e},ft.set=function(n,e){Jh(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ft.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var Ak=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Qh(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Qh){this.g=void 0!==e?e:n.g,uT(this,n.j),this.s=n.s,cT(this,n.i),dT(this,n.m),this.l=n.l,e=n.h;var t=new mv;t.i=e.i,e.g&&(t.g=new Ug(e.g),t.h=e.h),Nk(this,t),this.o=n.o}else n&&(t=String(n).match(Ak))?(this.g=!!e,uT(this,t[1]||"",!0),this.s=pv(t[2]||""),cT(this,t[3]||"",!0),dT(this,t[4]),this.l=pv(t[5]||"",!0),Nk(this,t[6]||"",!0),this.o=pv(t[7]||"")):(this.g=!!e,this.h=new mv(null,this.g))}function Ru(n){return new Qh(n)}function uT(n,e,t){n.j=t?pv(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function cT(n,e,t){n.i=t?pv(e,!0):e}function dT(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Nk(n,e,t){e instanceof mv?(n.h=e,function JU(n,e){e&&!n.j&&(dd(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(xk(this,r),Ok(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=gv(e,KU)),n.h=new mv(e,n.g))}function ar(n,e,t){n.h.set(e,t)}function hT(n){return ar(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function pv(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function gv(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,WU),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function WU(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Qh.prototype.toString=function(){var n=[],e=this.j;e&&n.push(gv(e,Mk,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(gv(e,Mk,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(gv(t,"/"==t.charAt(0)?zU:ZU,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",gv(t,YU)),n.join("")};var Mk=/[#\/\?@]/g,ZU=/[#\?:]/g,zU=/[#\?]/g,KU=/[#\?@]/g,YU=/#/g;function mv(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function dd(n){n.g||(n.g=new Ug,n.h=0,n.i&&function GU(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function xk(n,e){dd(n),e=jg(n,e),Jh(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Jh((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&fA(n)))}function Rk(n,e){return dd(n),e=jg(n,e),Jh(n.g.h,e)}function Ok(n,e,t){xk(n,e),0<t.length&&(n.i=null,n.g.set(jg(n,e),FS(t)),n.h+=t.length)}function jg(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function kk(n){this.l=n||XU,n=Vt.PerformanceNavigationTiming?0<(n=Vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Vt.g&&Vt.g.Ea&&Vt.g.Ea()&&Vt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ft=mv.prototype).add=function(n,e){dd(this),this.i=null,n=jg(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ft.forEach=function(n,e){dd(this),this.g.forEach(function(t,r){ZO(t,function(i){n.call(e,i,r,this)},this)},this)},ft.T=function(){dd(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},ft.R=function(n){dd(this);var e=[];if("string"==typeof n)Rk(this,n)&&(e=zO(e,this.g.get(jg(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=zO(e,n[t])}return e},ft.set=function(n,e){return dd(this),this.i=null,Rk(this,n=jg(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ft.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ft.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var d=i;""!==r[a]&&(d+="="+encodeURIComponent(String(r[a]))),n.push(d)}}return this.i=n.join("&")};var XU=10;function Pk(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Fk(n){return n.h?1:n.g?n.g.size:0}function pA(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function gA(n,e){n.g?n.g.add(e):n.h=e}function Lk(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Bk(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return FS(n.i)}function mA(){}function ej(){this.g=new mA}function tj(n,e,t){const r=t||"";try{hA(n,function(i,a){let d=i;iv(i)&&(d=XS(i)),e.push(r+a+"="+encodeURIComponent(d))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function fT(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function _v(n){this.l=n.$b||null,this.j=n.ib||!1}function pT(n,e){vi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=_A,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}kk.prototype.cancel=function(){if(this.i=Bk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},mA.prototype.stringify=function(n){return Vt.JSON.stringify(n,void 0)},mA.prototype.parse=function(n){return Vt.JSON.parse(n,void 0)},ki(_v,sA),_v.prototype.g=function(){return new pT(this.l,this.j)},_v.prototype.i=function(n){return function(){return n}}({}),ki(pT,vi);var _A=0;function Vk(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function yv(n){n.readyState=4,n.l=null,n.j=null,n.A=null,vv(n)}function vv(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ft=pT.prototype).open=function(n,e){if(this.readyState!=_A)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,vv(this)},ft.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Vt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ft.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,yv(this)),this.readyState=_A},ft.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,vv(this)),this.g&&(this.readyState=3,vv(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Vt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Vk(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ft.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?yv(this):vv(this),3==this.readyState&&Vk(this)}},ft.Ua=function(n){this.g&&(this.response=this.responseText=n,yv(this))},ft.Ta=function(n){this.g&&(this.response=n,yv(this))},ft.ha=function(){this.g&&yv(this)},ft.setRequestHeader=function(n,e){this.v.append(n,e)},ft.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ft.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(pT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var rj=Vt.JSON.parse;function Gr(n){vi.call(this),this.headers=new Ug,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Uk,this.K=this.L=!1}ki(Gr,vi);var Uk="",ij=/^https?$/i,sj=["POST","PUT"];function aj(n){return"content-type"==n.toLowerCase()}function jk(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Hk(n),gT(n)}function Hk(n){n.D||(n.D=!0,Pi(n,"complete"),Pi(n,"error"))}function Gk(n){if(n.h&&void 0!==OS&&(!n.C[1]||4!=Ou(n)||2!=n.ba()))if(n.v&&4==Ou(n))iA(n.Fa,0,n);else if(Pi(n,"readystatechange"),4==Ou(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(Ak)[1]||null;if(!i&&Vt.self&&Vt.self.location){var a=Vt.self.location.protocol;i=a.substr(0,a.length-1)}r=!ij.test(i?i.toLowerCase():"")}t=r}if(t)Pi(n,"complete"),Pi(n,"success");else{n.m=6;try{var d=2<Ou(n)?n.g.statusText:""}catch(_){d=""}n.j=d+" ["+n.ba()+"]",Hk(n)}}finally{gT(n)}}}function gT(n,e){if(n.g){$k(n);const t=n.g,r=n.C[0]?K1:null;n.g=null,n.C=null,e||Pi(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function $k(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Vt.clearTimeout(n.A),n.A=null)}function Ou(n){return n.g?n.g.readyState:0}function qk(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Uk:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function yA(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function lj(n){let e="";return BS(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ar(n,e,t))}function bv(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Wk(n){this.za=0,this.l=[],this.h=new rT,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=bv("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=bv("baseRetryDelayMs",5e3,n),this.$a=bv("retryDelaySeedMs",1e4,n),this.Ya=bv("forwardChannelMaxRetries",2,n),this.ra=bv("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new kk(n&&n.concurrentRequestLimit),this.Ca=new ej,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function vA(n){if(Zk(n),3==n.G){var e=n.V++,t=Ru(n.F);ar(t,"SID",n.J),ar(t,"RID",e),ar(t,"TYPE","terminate"),wv(n,t),(e=new dv(n,n.h,e,void 0)).K=2,e.v=hT(Ru(t)),t=!1,Vt.navigator&&Vt.navigator.sendBeacon&&(t=Vt.navigator.sendBeacon(e.v.toString(),"")),!t&&Vt.Image&&((new Image).src=e.v,t=!0),t||(e.g=nP(e.l,null),e.g.ea(e.v)),e.F=Date.now(),hv(e)}eP(n)}function mT(n){n.g&&(TA(n),n.g.cancel(),n.g=null)}function Zk(n){mT(n),n.u&&(Vt.clearTimeout(n.u),n.u=null),yT(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Vt.clearTimeout(n.m),n.m=null)}function bA(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&_T(n)}function _T(n){Pk(n.i)||n.m||(n.m=!0,eA(n.Ha,n),n.C=0)}function zk(n,e){var t;t=e?e.m:n.V++;const r=Ru(n.F);ar(r,"SID",n.J),ar(r,"RID",t),ar(r,"AID",n.U),wv(n,r),n.o&&n.s&&yA(r,n.o,n.s),t=new dv(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Kk(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),gA(n.i,t),cA(t,r,e)}function wv(n,e){n.j&&hA({},function(t,r){ar(e,r,t)})}function Kk(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Oi(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const d=["count="+t];-1==a?0<t?(a=i[0].h,d.push("ofs="+a)):a=0:d.push("ofs="+a);let f=!0;for(let _=0;_<t;_++){let w=i[_].h;const I=i[_].g;if(w-=a,0>w)a=Math.max(0,i[_].h-100),f=!1;else try{tj(I,d,"req"+w+"_")}catch(A){r&&r(I)}}if(f){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Yk(n){n.g||n.u||(n.Y=1,eA(n.Ga,n),n.A=0)}function wA(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=uv(Oi(n.Ga,n),Xk(n,n.A)),n.A++,0))}function TA(n){null!=n.B&&(Vt.clearTimeout(n.B),n.B=null)}function Jk(n){n.g=new dv(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ru(n.oa);ar(e,"RID","rpc"),ar(e,"SID",n.J),ar(e,"CI",n.N?"0":"1"),ar(e,"AID",n.U),wv(n,e),ar(e,"TYPE","xmlhttp"),n.o&&n.s&&yA(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=hT(Ru(e)),t.s=null,t.U=!0,Ek(t,n)}function yT(n){null!=n.v&&(Vt.clearTimeout(n.v),n.v=null)}function Qk(n,e){var t=null;if(n.g==e){yT(n),TA(n),n.g=null;var r=2}else{if(!pA(n.i,e))return;t=e.D,Lk(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Pi(r=iT(),new vk(r,t,e,i)),_T(n)}else Yk(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function uj(n,e){return!(Fk(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=uv(Oi(n.Ha,n,e),Xk(n,n.C)),n.C++,0)))}(n,e)||2==r&&wA(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Xh(n,5);break;case 4:Xh(n,10);break;case 3:Xh(n,6);break;default:Xh(n,2)}}function Xk(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Xh(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Oi(n.jb,n);t||(t=new Qh("//www.google.com/images/cleardot.gif"),Vt.location&&"http"==Vt.location.protocol||uT(t,"https"),hT(t)),function nj(n,e){const t=new rT;if(Vt.Image){const r=new Image;r.onload=Y1(fT,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Y1(fT,t,r,"TestLoadImage: error",!1,e),r.onabort=Y1(fT,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Y1(fT,t,r,"TestLoadImage: timeout",!1,e),Vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Is(2);n.G=0,n.j&&n.j.va(e),eP(n),Zk(n)}function eP(n){n.G=0,n.I=-1,n.j&&((0!=Bk(n.i).length||0!=n.l.length)&&(n.i.i.length=0,FS(n.l),n.l.length=0),n.j.ua())}function tP(n,e,t){let r=function $U(n){return n instanceof Qh?Ru(n):new Qh(n,void 0)}(t);if(""!=r.i)e&&cT(r,e+"."+r.i),dT(r,r.m);else{const i=Vt.location;r=function qU(n,e,t,r){var i=new Qh(null,void 0);return n&&uT(i,n),e&&cT(i,e),t&&dT(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&BS(n.aa,function(i,a){ar(r,a,i)}),t=n.sa,(e=n.D)&&t&&ar(r,e,t),ar(r,"VER",n.ma),wv(n,r),r}function nP(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Gr(t&&n.Ba&&!n.qa?new _v({ib:!0}):n.qa)).L=n.H,e}function rP(){}function vT(){if(Bg&&!(10<=Number(TU)))throw Error("Environmental error: no available transport.")}function Eo(n,e){vi.call(this),this.g=new Wk(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!J1(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!J1(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Hg(this)}function iP(n){oA.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function sP(){aA.call(this),this.status=1}function Hg(n){this.g=n}(ft=Gr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():lA.g(),this.C=function wk(n){return n.h||(n.h=n.i())}(this.u?this.u:lA),this.g.onreadystatechange=Oi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void jk(this,a)}n=t||"";const i=new Ug(this.headers);r&&hA(r,function(a,d){i.set(d,a)}),r=function mU(n){e:{var e=aj;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Vt.FormData&&n instanceof Vt.FormData,!(0<=WO(sj,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,d){this.g.setRequestHeader(d,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{$k(this),0<this.B&&((this.K=function oj(n){return Bg&&function wU(){return function _U(n){var e=bU;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=KO(String(Q1)).split("."),t=KO("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var i=e[d]||"",a=t[d]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=LS(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||LS(0==i[2].length,0==a[2].length)||LS(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Oi(this.pa,this)):this.A=iA(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){jk(this,a)}},ft.pa=function(){void 0!==OS&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pi(this,"timeout"),this.abort(8))},ft.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Pi(this,"complete"),Pi(this,"abort"),gT(this))},ft.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gT(this,!0)),Gr.Z.M.call(this)},ft.Fa=function(){this.s||(this.F||this.v||this.l?Gk(this):this.cb())},ft.cb=function(){Gk(this)},ft.ba=function(){try{return 2<Ou(this)?this.g.status:-1}catch(n){return-1}},ft.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ft.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),rj(e)}},ft.Da=function(){return this.m},ft.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ft=Wk.prototype).ma=8,ft.G=1,ft.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},ft.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new dv(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=QO(a),ek(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Kk(this,i,e),ar(t=Ru(this.F),"RID",n),ar(t,"CVER",22),this.D&&ar(t,"X-HTTP-Session-Id",this.D),wv(this,t),this.o&&a&&yA(t,this.o,a),gA(this.i,i),this.Ra&&ar(t,"TYPE","init"),this.ja?(ar(t,"$req",e),ar(t,"SID","null"),i.$=!0,cA(i,t,null)):cA(i,t,e),this.G=2}}else 3==this.G&&(n?zk(this,n):0==this.l.length||Pk(this.i)||zk(this))},ft.Ga=function(){if(this.u=null,Jk(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=uv(Oi(this.bb,this),n)}},ft.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Is(10),mT(this),Jk(this))},ft.ab=function(){null!=this.v&&(this.v=null,mT(this),wA(this),Is(19))},ft.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Is(2)):(this.h.info("Failed to ping google.com"),Is(1))},(ft=rP.prototype).xa=function(){},ft.wa=function(){},ft.va=function(){},ft.ua=function(){},ft.Oa=function(){},vT.prototype.g=function(n,e){return new Eo(n,e)},ki(Eo,vi),Eo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),eA(Oi(n.hb,n,e))),Is(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=tP(n,null,n.W),_T(n)},Eo.prototype.close=function(){vA(this.g)},Eo.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,bA(this.g,e)}else this.v?((e={}).__data__=XS(n),bA(this.g,e)):bA(this.g,n)},Eo.prototype.M=function(){this.g.j=null,delete this.j,vA(this.g),delete this.g,Eo.Z.M.call(this)},ki(iP,oA),ki(sP,aA),ki(Hg,rP),Hg.prototype.xa=function(){Pi(this.g,"a")},Hg.prototype.wa=function(n){Pi(this.g,new iP(n))},Hg.prototype.va=function(n){Pi(this.g,new sP(n))},Hg.prototype.ua=function(){Pi(this.g,"b")},vT.prototype.createWebChannel=vT.prototype.g,Eo.prototype.send=Eo.prototype.u,Eo.prototype.open=Eo.prototype.m,Eo.prototype.close=Eo.prototype.close,sT.NO_ERROR=0,sT.TIMEOUT=8,sT.HTTP_ERROR=6,bk.COMPLETE="complete",Tk.EventType=cv,cv.OPEN="a",cv.CLOSE="b",cv.ERROR="c",cv.MESSAGE="d",vi.prototype.listen=vi.prototype.N,Gr.prototype.listenOnce=Gr.prototype.O,Gr.prototype.getLastError=Gr.prototype.La,Gr.prototype.getLastErrorCode=Gr.prototype.Da,Gr.prototype.getStatus=Gr.prototype.ba,Gr.prototype.getResponseJson=Gr.prototype.Qa,Gr.prototype.getResponseText=Gr.prototype.ga,Gr.prototype.send=Gr.prototype.ea;var cj=xu.createWebChannelTransport=function(){return new vT},dj=xu.getStatEventTarget=function(){return iT()},DA=xu.ErrorCode=sT,hj=xu.EventType=bk,fj=xu.Event=Kh,oP=xu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},pj=xu.FetchXmlHttpFactory=_v,bT=xu.WebChannel=Tk,gj=xu.XhrIo=Gr;const aP="@firebase/firestore";class Fi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fi.UNAUTHENTICATED=new Fi(null),Fi.GOOGLE_CREDENTIALS=new Fi("google-credentials-uid"),Fi.FIRST_PARTY=new Fi("first-party-uid"),Fi.MOCK_USER=new Fi("mock-user");let Gg="9.8.0";const hd=new aa.Yd("@firebase/firestore");function EA(){return hd.logLevel}function qe(n,...e){if(hd.logLevel<=aa.in.DEBUG){const t=e.map(CA);hd.debug(`Firestore (${Gg}): ${n}`,...t)}}function $r(n,...e){if(hd.logLevel<=aa.in.ERROR){const t=e.map(CA);hd.error(`Firestore (${Gg}): ${n}`,...t)}}function Tv(n,...e){if(hd.logLevel<=aa.in.WARN){const t=e.map(CA);hd.warn(`Firestore (${Gg}): ${n}`,...t)}}function CA(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function gt(n="Unexpected state"){const e=`FIRESTORE (${Gg}) INTERNAL ASSERTION FAILED: `+n;throw $r(e),new Error(e)}function Ft(n,e){n||gt()}function st(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends Ot.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class bi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class lP{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Fi.UNAUTHENTICATED))}shutdown(){}}class vj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class bj{constructor(e){this.t=e,this.currentUser=Fi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let d=new bi;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new bi,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const w=d;e.enqueueRetryable((0,Y.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new bi)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ft("string"==typeof r.accessToken),new lP(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ft(null===e||"string"==typeof e),new Fi(e)}}class wj{constructor(e,t,r){this.type="FirstParty",this.user=Fi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Tj{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new wj(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Fi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Dj{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const d=a.token!==this.p;return this.p=a.token,qe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ft("string"==typeof t.token),this.p=t.token,new uP(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Co{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Ej(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Co.A=-1;class cP{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Ej(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Yt(n,e){return n<e?-1:n>e?1:0}function $g(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function dP(n){return n+"\0"}class Rr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Fe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rr.fromMillis(Date.now())}static fromDate(e){return Rr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Rr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Yt(this.nanoseconds,e.nanoseconds):Yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Nt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Nt(e)}static min(){return new Nt(new Rr(0,0))}static max(){return new Nt(new Rr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function hP(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ef(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Dv{constructor(e,t,r){void 0===t?t=0:t>e.length&&gt(),void 0===r?r=e.length-t:r>e.length-t&&gt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Dv.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Dv?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),d=t.get(i);if(a<d)return-1;if(a>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class fn extends Dv{construct(e,t,r){return new fn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Fe(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new fn(t)}static emptyPath(){return new fn([])}}const Cj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ni extends Dv{construct(e,t,r){return new ni(e,t,r)}static isValidIdentifier(e){return Cj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ni.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ni(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Fe(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Fe(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Fe(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===f?(d=!d,i++):"."!==f||d?(r+=f,i++):(a(),i++)}if(a(),d)throw new Fe(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ni(t)}static emptyPath(){return new ni([])}}class qg{constructor(e){this.fields=e,e.sort(ni.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $g(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ri{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ri(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new ri(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ri.EMPTY_BYTE_STRING=new ri("");const Sj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fd(n){if(Ft(!!n),"string"==typeof n){let e=0;const t=Sj.exec(n);if(Ft(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Er(n.seconds),nanos:Er(n.nanos)}}function Er(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function tf(n){return"string"==typeof n?ri.fromBase64String(n):ri.fromUint8Array(n)}function IA(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function pP(n){const e=n.mapValue.fields.__previous_value__;return IA(e)?pP(e):e}function Ev(n){const e=fd(n.mapValue.fields.__local_write_time__.timestampValue);return new Rr(e.seconds,e.nanos)}class Aj{constructor(e,t,r,i,a,d,f,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.useFetchStreams=_}}class ku{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ku("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ku&&e.projectId===this.projectId&&e.database===this.database}}function Cv(n){return null==n}function Iv(n){return 0===n&&1/n==-1/0}function gP(n){return"number"==typeof n&&Number.isInteger(n)&&!Iv(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class tt{constructor(e){this.path=e}static fromPath(e){return new tt(fn.fromString(e))}static fromName(e){return new tt(fn.fromString(e).popFirst(5))}static empty(){return new tt(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===fn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new fn(e.slice()))}}const pd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},wT={nullValue:"NULL_VALUE"};function nf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?IA(n)?4:vP(n)?9007199254740991:10:gt()}function Ll(n,e){if(n===e)return!0;const t=nf(n);if(t!==nf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ev(n).isEqual(Ev(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=fd(r.timestampValue),d=fd(i.timestampValue);return a.seconds===d.seconds&&a.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,tf(n.bytesValue).isEqual(tf(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Er(r.geoPointValue.latitude)===Er(i.geoPointValue.latitude)&&Er(r.geoPointValue.longitude)===Er(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Er(r.integerValue)===Er(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Er(r.doubleValue),d=Er(i.doubleValue);return a===d?Iv(a)===Iv(d):isNaN(a)&&isNaN(d)}return!1}(n,e);case 9:return $g(n.arrayValue.values||[],e.arrayValue.values||[],Ll);case 10:return function(r,i){const a=r.mapValue.fields||{},d=i.mapValue.fields||{};if(hP(a)!==hP(d))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===d[f]||!Ll(a[f],d[f])))return!1;return!0}(n,e);default:return gt()}var i}function Sv(n,e){return void 0!==(n.values||[]).find(t=>Ll(t,e))}function gd(n,e){if(n===e)return 0;const t=nf(n),r=nf(e);if(t!==r)return Yt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Yt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const d=Er(i.integerValue||i.doubleValue),f=Er(a.integerValue||a.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,e);case 3:return mP(n.timestampValue,e.timestampValue);case 4:return mP(Ev(n),Ev(e));case 5:return Yt(n.stringValue,e.stringValue);case 6:return function(i,a){const d=tf(i),f=tf(a);return d.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const d=i.split("/"),f=a.split("/");for(let _=0;_<d.length&&_<f.length;_++){const w=Yt(d[_],f[_]);if(0!==w)return w}return Yt(d.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const d=Yt(Er(i.latitude),Er(a.latitude));return 0!==d?d:Yt(Er(i.longitude),Er(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const d=i.values||[],f=a.values||[];for(let _=0;_<d.length&&_<f.length;++_){const w=gd(d[_],f[_]);if(w)return w}return Yt(d.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===pd.mapValue&&a===pd.mapValue)return 0;if(i===pd.mapValue)return 1;if(a===pd.mapValue)return-1;const d=i.fields||{},f=Object.keys(d),_=a.fields||{},w=Object.keys(_);f.sort(),w.sort();for(let I=0;I<f.length&&I<w.length;++I){const A=Yt(f[I],w[I]);if(0!==A)return A;const P=gd(d[f[I]],_[w[I]]);if(0!==P)return P}return Yt(f.length,w.length)}(n.mapValue,e.mapValue);default:throw gt()}}function mP(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Yt(n,e);const t=fd(n),r=fd(e),i=Yt(t.seconds,r.seconds);return 0!==i?i:Yt(t.nanos,r.nanos)}function Wg(n){return SA(n)}function SA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=fd(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?tf(n.bytesValue).toBase64():"referenceValue"in n?tt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const d of r.values||[])a?a=!1:i+=",",i+=SA(d);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",d=!0;for(const f of i)d?d=!1:a+=",",a+=`${f}:${SA(r.fields[f])}`;return a+"}"}(n.mapValue):gt();var e}function rf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function AA(n){return!!n&&"integerValue"in n}function Av(n){return!!n&&"arrayValue"in n}function _P(n){return!!n&&"nullValue"in n}function yP(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function TT(n){return!!n&&"mapValue"in n}function Nv(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ef(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Nv(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Nv(n.arrayValue.values[t]);return e}return Object.assign({},n)}function vP(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Nj(n){return"nullValue"in n?wT:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?rf(ku.empty(),tt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:gt()}function Mj(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?rf(ku.empty(),tt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?pd:gt()}function bP(n,e){const t=gd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function wP(n,e){const t=gd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class rs{constructor(e){this.value=e}static empty(){return new rs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!TT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nv(t)}setAll(e){let t=ni.emptyPath(),r={},i=[];e.forEach((d,f)=>{if(!t.isImmediateParentOf(f)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=f.popLast()}d?r[f.lastSegment()]=Nv(d):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());TT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ll(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];TT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ef(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new rs(Nv(this.value))}}function TP(n){const e=[];return ef(n.fields,(t,r)=>{const i=new ni([t]);if(TT(r)){const a=TP(r.mapValue).fields;if(0===a.length)e.push(i);else for(const d of a)e.push(i.child(d))}else e.push(i)}),new qg(e)}class nr{constructor(e,t,r,i,a,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=d}static newInvalidDocument(e){return new nr(e,0,Nt.min(),Nt.min(),rs.empty(),0)}static newFoundDocument(e,t,r){return new nr(e,1,t,Nt.min(),r,0)}static newNoDocument(e,t){return new nr(e,2,t,Nt.min(),rs.empty(),0)}static newUnknownDocument(e,t){return new nr(e,3,t,Nt.min(),rs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof nr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class DT{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function NA(n){return n.fields.find(e=>2===e.kind)}function sf(n){return n.fields.filter(e=>2!==e.kind)}DT.UNKNOWN_ID=-1;class ET{constructor(e,t){this.fieldPath=e,this.kind=t}}class Mv{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Mv(0,Xa.min())}}function DP(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Nt.fromTimestamp(1e9===r?new Rr(t+1,0):new Rr(t,r));return new Xa(i,tt.empty(),e)}function xj(n){return new Xa(n.readTime,n.key,-1)}class Xa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Xa(Nt.min(),tt.empty(),-1)}static max(){return new Xa(Nt.max(),tt.empty(),-1)}}function EP(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=tt.comparator(n.documentKey,e.documentKey),0!==t?t:Yt(n.largestBatchId,e.largestBatchId))}class Or{constructor(e,t){this.comparator=e,this.root=t||Li.EMPTY}insert(e,t){return new Or(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Li.BLACK,null,null))}remove(e){return new Or(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Li.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new CT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new CT(this.root,e,this.comparator,!1)}getReverseIterator(){return new CT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new CT(this.root,e,this.comparator,!0)}}class CT{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Li{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:Li.RED,this.left=null!=i?i:Li.EMPTY,this.right=null!=a?a:Li.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Li(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Li.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Li.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Li.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Li.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gt();const e=this.left.check();if(e!==this.right.check())throw gt();return e+(this.isRed()?0:1)}}Li.EMPTY=null,Li.RED=!0,Li.BLACK=!1,Li.EMPTY=new class{constructor(){this.size=0}get key(){throw gt()}get value(){throw gt()}get color(){throw gt()}get left(){throw gt()}get right(){throw gt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Li(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zn{constructor(e){this.comparator=e,this.data=new Or(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new CP(this.data.getIterator())}getIteratorFrom(e){return new CP(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof zn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new zn(this.comparator);return t.data=e,t}}class CP{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zg(n){return n.hasNext()?n.getNext():void 0}class Rj{constructor(e,t=null,r=[],i=[],a=null,d=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=d,this.endAt=f,this.P=null}}function IP(n,e=null,t=[],r=[],i=null,a=null,d=null){return new Rj(n,e,t,r,i,a,d)}function af(n){const e=st(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Wg(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Cv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Wg(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Wg(r)).join(",")),e.P=t}return e.P}function xv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!jj(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Ll(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xP(n.startAt,e.startAt)&&xP(n.endAt,e.endAt)}function IT(n){return tt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ST(n,e){return n.filters.filter(t=>t instanceof Bi&&t.field.isEqual(e))}function SP(n,e,t){let r=wT,i=!0;for(const a of ST(n,e)){let d=wT,f=!0;switch(a.op){case"<":case"<=":d=Nj(a.value);break;case"==":case"in":case">=":d=a.value;break;case">":d=a.value,f=!1;break;case"!=":case"not-in":d=wT}bP({value:r,inclusive:i},{value:d,inclusive:f})<0&&(r=d,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const d=t.position[a];bP({value:r,inclusive:i},{value:d,inclusive:t.inclusive})<0&&(r=d,i=t.inclusive);break}return{value:r,inclusive:i}}function AP(n,e,t){let r=pd,i=!0;for(const a of ST(n,e)){let d=pd,f=!0;switch(a.op){case">=":case">":d=Mj(a.value),f=!1;break;case"==":case"in":case"<=":d=a.value;break;case"<":d=a.value,f=!1;break;case"!=":case"not-in":d=pd}wP({value:r,inclusive:i},{value:d,inclusive:f})>0&&(r=d,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const d=t.position[a];wP({value:r,inclusive:i},{value:d,inclusive:t.inclusive})>0&&(r=d,i=t.inclusive);break}return{value:r,inclusive:i}}class Bi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new kj(e,t,r):"array-contains"===t?new Lj(e,r):"in"===t?new Bj(e,r):"not-in"===t?new Vj(e,r):"array-contains-any"===t?new Uj(e,r):new Bi(e,t,r)}static V(e,t,r){return"in"===t?new Pj(e,r):new Fj(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(gd(t,this.value)):null!==t&&nf(this.value)===nf(t)&&this.v(gd(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class kj extends Bi{constructor(e,t,r){super(e,t,r),this.key=tt.fromName(r.referenceValue)}matches(e){const t=tt.comparator(e.key,this.key);return this.v(t)}}class Pj extends Bi{constructor(e,t){super(e,"in",t),this.keys=NP(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Fj extends Bi{constructor(e,t){super(e,"not-in",t),this.keys=NP(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function NP(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>tt.fromName(r.referenceValue))}class Lj extends Bi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Av(t)&&Sv(t.arrayValue,this.value)}}class Bj extends Bi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Sv(this.value.arrayValue,t)}}class Vj extends Bi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Sv(this.value.arrayValue,t)}}class Uj extends Bi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Av(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Sv(this.value.arrayValue,r))}}class md{constructor(e,t){this.position=e,this.inclusive=t}}class zg{constructor(e,t="asc"){this.field=e,this.dir=t}}function jj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function MP(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],d=n.position[i];if(r=a.field.isKeyField()?tt.comparator(tt.fromName(d.referenceValue),t.key):gd(d,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function xP(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ll(n.position[t],e.position[t]))return!1;return!0}class Pu{constructor(e,t=null,r=[],i=[],a=null,d="F",f=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=d,this.startAt=f,this.endAt=_,this.D=null,this.C=null}}function RP(n,e,t,r,i,a,d,f){return new Pu(n,e,t,r,i,a,d,f)}function Kg(n){return new Pu(n)}function MA(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function xA(n){for(const e of n.filters)if(e.S())return e.field;return null}function RA(n){return null!==n.collectionGroup}function Yg(n){const e=st(n);if(null===e.D){e.D=[];const t=xA(e),r=MA(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new zg(t)),e.D.push(new zg(ni.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new zg(ni.keyField(),a))}}}return e.D}function ca(n){const e=st(n);if(!e.C)if("F"===e.limitType)e.C=IP(e.path,e.collectionGroup,Yg(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Yg(e))t.push(new zg(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new md(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new md(e.startAt.position,e.startAt.inclusive):null;e.C=IP(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function OP(n,e,t){return new Pu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Rv(n,e){return xv(ca(n),ca(e))&&n.limitType===e.limitType}function kP(n){return`${af(ca(n))}|lt:${n.limitType}`}function OA(n){return`Query(target=${function Oj(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Wg(r.value)}`;var r}).join(", ")}]`),Cv(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Wg(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Wg(t)).join(",")),`Target(${e})`}(ca(n))}; limitType=${n.limitType})`}function kA(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):tt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,d){const f=MP(i,a,d);return i.inclusive?f<=0:f<0}(t.startAt,Yg(t),r)||t.endAt&&!function(i,a,d){const f=MP(i,a,d);return i.inclusive?f>=0:f>0}(t.endAt,Yg(t),r)));var t,r}function PP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function FP(n){return(e,t)=>{let r=!1;for(const i of Yg(n)){const a=Gj(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function Gj(n,e,t){const r=n.field.isKeyField()?tt.comparator(e.key,t.key):function(i,a,d){const f=a.data.field(i),_=d.data.field(i);return null!==f&&null!==_?gd(f,_):gt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return gt()}}function LP(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Iv(e)?"-0":e}}function BP(n){return{integerValue:""+n}}function VP(n,e){return gP(e)?BP(e):LP(n,e)}class AT{constructor(){this._=void 0}}function $j(n,e,t){return n instanceof Jg?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof lf?jP(n,e):n instanceof uf?HP(n,e):function(r,i){const a=UP(r,i),d=GP(a)+GP(r.k);return AA(a)&&AA(r.k)?BP(d):LP(r.M,d)}(n,e)}function qj(n,e,t){return n instanceof lf?jP(n,e):n instanceof uf?HP(n,e):t}function UP(n,e){return n instanceof Qg?AA(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Jg extends AT{}class lf extends AT{constructor(e){super(),this.elements=e}}function jP(n,e){const t=$P(e);for(const r of n.elements)t.some(i=>Ll(i,r))||t.push(r);return{arrayValue:{values:t}}}class uf extends AT{constructor(e){super(),this.elements=e}}function HP(n,e){let t=$P(e);for(const r of n.elements)t=t.filter(i=>!Ll(i,r));return{arrayValue:{values:t}}}class Qg extends AT{constructor(e,t){super(),this.M=e,this.k=t}}function GP(n){return Er(n.integerValue||n.doubleValue)}function $P(n){return Av(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ov{constructor(e,t){this.field=e,this.transform=t}}class Zj{constructor(e,t){this.version=e,this.transformResults=t}}class qr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new qr}static exists(e){return new qr(void 0,e)}static updateTime(e){return new qr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function NT(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class MT{}function zj(n,e,t){n instanceof kv?function(r,i,a){const d=r.value.clone(),f=zP(r.fieldTransforms,i,a.transformResults);d.setAll(f),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):n instanceof cf?function(r,i,a){if(!NT(r.precondition,i))return void i.convertToUnknownDocument(a.version);const d=zP(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(ZP(r)),f.setAll(d),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function PA(n,e,t){var i;n instanceof kv?function(r,i,a){if(!NT(r.precondition,i))return;const d=r.value.clone(),f=KP(r.fieldTransforms,a,i);d.setAll(f),i.convertToFoundDocument(WP(i),d).setHasLocalMutations()}(n,e,t):n instanceof cf?function(r,i,a){if(!NT(r.precondition,i))return;const d=KP(r.fieldTransforms,a,i),f=i.data;f.setAll(ZP(r)),f.setAll(d),i.convertToFoundDocument(WP(i),f).setHasLocalMutations()}(n,e,t):NT(n.precondition,i=e)&&i.convertToNoDocument(Nt.min())}function Kj(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=UP(r.transform,i||null);null!=a&&(null==t&&(t=rs.empty()),t.set(r.field,a))}return t||null}function qP(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&$g(t,r,(i,a)=>function Wj(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof lf&&r instanceof lf||t instanceof uf&&r instanceof uf?$g(t.elements,r.elements,Ll):t instanceof Qg&&r instanceof Qg?Ll(t.k,r.k):t instanceof Jg&&r instanceof Jg);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function WP(n){return n.isFoundDocument()?n.version:Nt.min()}class kv extends MT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class cf extends MT{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function ZP(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function zP(n,e,t){const r=new Map;Ft(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],d=a.transform,f=e.data.field(a.field);r.set(a.field,qj(d,f,t[i]))}return r}function KP(n,e,t){const r=new Map;for(const i of n){const a=i.transform,d=t.data.field(i.field);r.set(i.field,$j(a,d,e))}return r}class Pv extends MT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class FA extends MT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Yj{constructor(e){this.count=e}}var Wr,pn;function YP(n){switch(n){default:return gt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function JP(n){if(void 0===n)return $r("GRPC error has no .code"),ge.UNKNOWN;switch(n){case Wr.OK:return ge.OK;case Wr.CANCELLED:return ge.CANCELLED;case Wr.UNKNOWN:return ge.UNKNOWN;case Wr.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Wr.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Wr.INTERNAL:return ge.INTERNAL;case Wr.UNAVAILABLE:return ge.UNAVAILABLE;case Wr.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Wr.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Wr.NOT_FOUND:return ge.NOT_FOUND;case Wr.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Wr.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Wr.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Wr.ABORTED:return ge.ABORTED;case Wr.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Wr.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Wr.DATA_LOSS:return ge.DATA_LOSS;default:return gt()}}(pn=Wr||(Wr={}))[pn.OK=0]="OK",pn[pn.CANCELLED=1]="CANCELLED",pn[pn.UNKNOWN=2]="UNKNOWN",pn[pn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pn[pn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pn[pn.NOT_FOUND=5]="NOT_FOUND",pn[pn.ALREADY_EXISTS=6]="ALREADY_EXISTS",pn[pn.PERMISSION_DENIED=7]="PERMISSION_DENIED",pn[pn.UNAUTHENTICATED=16]="UNAUTHENTICATED",pn[pn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pn[pn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pn[pn.ABORTED=10]="ABORTED",pn[pn.OUT_OF_RANGE=11]="OUT_OF_RANGE",pn[pn.UNIMPLEMENTED=12]="UNIMPLEMENTED",pn[pn.INTERNAL=13]="INTERNAL",pn[pn.UNAVAILABLE=14]="UNAVAILABLE",pn[pn.DATA_LOSS=15]="DATA_LOSS";class _d{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ef(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return fP(this.inner)}size(){return this.innerSize}}const Jj=new Or(tt.comparator);function da(){return Jj}const Qj=new Or(tt.comparator);function LA(...n){let e=Qj;for(const t of n)e=e.insert(t.key,t);return e}function Fv(){return new _d(n=>n.toString(),(n,e)=>n.isEqual(e))}const Xj=new Or(tt.comparator),eH=new zn(tt.comparator);function In(...n){let e=eH;for(const t of n)e=e.add(t);return e}const tH=new zn(Yt);function xT(){return tH}class Lv{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Bv.createSynthesizedTargetChangeForCurrentChange(e,t)),new Lv(Nt.min(),r,xT(),da(),In())}}class Bv{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Bv(ri.EMPTY_BYTE_STRING,t,In(),In(),In())}}class RT{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class QP{constructor(e,t){this.targetId=e,this.$=t}}class XP{constructor(e,t,r=ri.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class eF{constructor(){this.B=0,this.L=nF(),this.U=ri.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=In(),t=In(),r=In();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:gt()}}),new Bv(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=nF()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class nH{constructor(e){this.nt=e,this.st=new Map,this.it=da(),this.rt=tF(),this.ot=new zn(Yt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:gt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const a=i.target;if(IT(a))if(0===r){const d=new tt(a.path);this.ct(t,d,nr.newNoDocument(d,Nt.min()))}else Ft(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,d)=>{const f=this.wt(d);if(f){if(a.current&&IT(f.target)){const _=new tt(f.target.path);null!==this.it.get(_)||this.It(d,_)||this.ct(d,_,nr.newNoDocument(_,e))}a.j&&(t.set(d,a.H()),a.J())}});let r=In();this.rt.forEach((a,d)=>{let f=!0;d.forEachWhile(_=>{const w=this.wt(_);return!w||2===w.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.it.forEach((a,d)=>d.setReadTime(e));const i=new Lv(e,t,this.ot,this.it,r);return this.it=da(),this.rt=tF(),this.ot=new zn(Yt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new eF,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new zn(Yt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||qe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new eF),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function tF(){return new Or(tt.comparator)}function nF(){return new Or(tt.comparator)}const rH={asc:"ASCENDING",desc:"DESCENDING"},iH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class sH{constructor(e,t){this.databaseId=e,this.N=t}}function Vv(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rF(n,e){return n.N?e.toBase64():e.toUint8Array()}function oH(n,e){return Vv(n,e.toTimestamp())}function wi(n){return Ft(!!n),Nt.fromTimestamp(function(e){const t=fd(e);return new Rr(t.seconds,t.nanos)}(n))}function BA(n,e){return(t=n,new fn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function iF(n){const e=fn.fromString(n);return Ft(fF(e)),e}function Uv(n,e){return BA(n.databaseId,e.path)}function Bl(n,e){const t=iF(e);if(t.get(1)!==n.databaseId.projectId)throw new Fe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Fe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new tt(oF(t))}function VA(n,e){return BA(n.databaseId,e)}function sF(n){const e=iF(n);return 4===e.length?fn.emptyPath():oF(e)}function jv(n){return new fn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function oF(n){return Ft(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function aF(n,e,t){return{name:Uv(n,e),fields:t.value.mapValue.fields}}function lF(n,e,t){const r=Bl(n,e.name),i=wi(e.updateTime),a=new rs({mapValue:{fields:e.fields}}),d=nr.newFoundDocument(r,i,a);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Hv(n,e){let t;if(e instanceof kv)t={update:aF(n,e.key,e.value)};else if(e instanceof Pv)t={delete:Uv(n,e.key)};else if(e instanceof cf)t={update:aF(n,e.key,e.data),updateMask:gH(e.fieldMask)};else{if(!(e instanceof FA))return gt();t={verify:Uv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const d=a.transform;if(d instanceof Jg)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof lf)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof uf)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Qg)return{fieldPath:a.field.canonicalString(),increment:d.k};throw gt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:oH(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:gt()),t;var i}function UA(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?qr.updateTime(wi(i.updateTime)):void 0!==i.exists?qr.exists(i.exists):qr.none():qr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,d){let f=null;"setToServerValue"in d?(Ft("REQUEST_TIME"===d.setToServerValue),f=new Jg):"appendMissingElements"in d?f=new lf(d.appendMissingElements.values||[]):"removeAllFromArray"in d?f=new uf(d.removeAllFromArray.values||[]):"increment"in d?f=new Qg(a,d.increment):gt();const _=ni.fromServerFormat(d.fieldPath);return new Ov(_,f)}(n,i)):[];var i;if(e.update){const i=Bl(n,e.update.name),a=new rs({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new qg((e.updateMask.fieldPaths||[]).map(w=>ni.fromServerFormat(w)));return new cf(i,a,d,t,r)}return new kv(i,a,t,r)}if(e.delete){const i=Bl(n,e.delete);return new Pv(i,t)}if(e.verify){const i=Bl(n,e.verify);return new FA(i,t)}return gt()}function uF(n,e){return{documents:[VA(n,e.path)]}}function cF(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=VA(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=VA(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const w=_.map(I=>function(A){if("=="===A.op){if(yP(A.value))return{unaryFilter:{field:Xg(A.field),op:"IS_NAN"}};if(_P(A.value))return{unaryFilter:{field:Xg(A.field),op:"IS_NULL"}}}else if("!="===A.op){if(yP(A.value))return{unaryFilter:{field:Xg(A.field),op:"IS_NOT_NAN"}};if(_P(A.value))return{unaryFilter:{field:Xg(A.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xg(A.field),op:hH(A.op),value:A.value}}}(I));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:Xg((I=w).field),direction:dH(I.dir)};var I})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const d=(w=e.limit,n.N||Cv(w)?w:{value:w});var w,f,_;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function dF(n){let e=sF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ft(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let a=[];t.where&&(a=hF(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(I=>{return new zg(em((A=I).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let f=null;t.limit&&(f=function(I){let A;return A="object"==typeof I?I.value:I,Cv(A)?null:A}(t.limit));let _=null;var I;t.startAt&&(_=new md((I=t.startAt).values||[],!!I.before));let w=null;return t.endAt&&(w=function(I){return new md(I.values||[],!I.before)}(t.endAt)),RP(e,i,d,a,f,"F",_,w)}function hF(n){return n?void 0!==n.unaryFilter?[pH(n)]:void 0!==n.fieldFilter?[fH(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>hF(e)).reduce((e,t)=>e.concat(t)):gt():[]}function dH(n){return rH[n]}function hH(n){return iH[n]}function Xg(n){return{fieldPath:n.canonicalString()}}function em(n){return ni.fromServerFormat(n.fieldPath)}function fH(n){return Bi.create(em(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gt()}}(n.fieldFilter.op),n.fieldFilter.value)}function pH(n){switch(n.unaryFilter.op){case"IS_NAN":const e=em(n.unaryFilter.field);return Bi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=em(n.unaryFilter.field);return Bi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=em(n.unaryFilter.field);return Bi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=em(n.unaryFilter.field);return Bi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return gt()}}function gH(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function fF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ss(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=pF(e)),e=mH(n.get(t),e);return pF(e)}function mH(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function pF(n){return n+"\x01\x01"}function Vl(n){const e=n.length;if(Ft(e>=2),2===e)return Ft("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),fn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const d=n.indexOf("\x01",a);switch((d<0||d>t)&&gt(),n.charAt(d+1)){case"\x01":const f=n.substring(a,d);let _;0===i.length?_=f:(i+=f,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,d),i+="\0";break;case"\x11":i+=n.substring(a,d+1);break;default:gt()}a=d+2}return new fn(r)}const gF=["userId","batchId"];function OT(n,e){return[n,Ss(e)]}function mF(n,e,t){return[n,Ss(e),t]}const _H={},yH=["prefixPath","collectionGroup","readTime","documentId"],vH=["prefixPath","collectionGroup","documentId"],bH=["collectionGroup","readTime","prefixPath","documentId"],wH=["canonicalId","targetId"],TH=["targetId","path"],DH=["path","targetId"],EH=["collectionId","parent"],CH=["indexId","uid"],IH=["uid","sequenceNumber"],SH=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],AH=["indexId","uid","orderedDocumentKey"],NH=["userId","collectionPath","documentId"],MH=["userId","collectionPath","largestBatchId"],xH=["userId","collectionGroup","largestBatchId"],_F=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],RH=[..._F,"documentOverlays"],yF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],OH=[...yF,"indexConfiguration","indexState","indexEntries"],vF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ve((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ve?t:ve.resolve(t)}catch(t){return ve.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ve.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ve.reject(t)}static resolve(e){return new ve((t,r)=>{t(e)})}static reject(e){return new ve((t,r)=>{r(e)})}static waitFor(e){return new ve((t,r)=>{let i=0,a=0,d=!1;e.forEach(f=>{++i,f.next(()=>{++a,d&&a===i&&t()},_=>r(_))}),d=!0,a===i&&t()})}static or(e){let t=ve.resolve(!1);for(const r of e)t=t.next(i=>i?ve.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class kT{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new bi,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Gv(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=jA(r.target.error);this.At.reject(new Gv(e,i))}}static open(e,t,r,i){try{return new kT(t,e.transaction(i,r))}catch(a){throw new Gv(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(qe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new PH(t)}}class el{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===el.Vt((0,Ot.z$)())&&$r("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return qe("SimpleDb","Removing database:",e),hf(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Ot.hl)())return!1;if(el.St())return!0;const e=(0,Ot.z$)(),t=el.Vt(e),r=0<t&&t<10,i=el.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,Y.Z)(function*(){return t.db||(qe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=d=>{r(d.target.result)},a.onblocked=()=>{i(new Gv(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=d=>{const f=d.target.error;i("VersionError"===f.name?new Fe(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Fe(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Gv(e,f))},a.onupgradeneeded=d=>{qe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Pt.kt(d.target.result,a.transaction,d.oldVersion,t.version).next(()=>{qe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Y.Z)(function*(){const d="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.Nt(e);const _=kT.open(a.db,e,d?"readonly":"readwrite",r),w=i(_).next(I=>(_.bt(),I)).catch(I=>(_.abort(I),ve.reject(I))).toPromise();return w.catch(()=>{}),yield _.Rt,w}catch(_){const w="FirebaseError"!==_.name&&f<3;if(qe("SimpleDb","Transaction failed with error:",_.message,"Retrying:",w),a.close(),!w)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class kH{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return hf(this.Ft.delete())}}class Gv extends Fe{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function df(n){return"IndexedDbTransactionError"===n.name}class PH{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(qe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(qe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),hf(r)}add(e){return qe("SimpleDb","ADD",this.store.name,e,e),hf(this.store.add(e))}get(e){return hf(this.store.get(e)).next(t=>(void 0===t&&(t=null),qe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return qe("SimpleDb","DELETE",this.store.name,e),hf(this.store.delete(e))}count(){return qe("SimpleDb","COUNT",this.store.name),hf(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Kt(i,(d,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ve((a,d)=>{i.onerror=f=>{d(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ve((i,a)=>{r.onerror=d=>{a(d.target.error)},r.onsuccess=d=>{i(d.target.result)}})}Qt(e,t){qe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(a,d,f)=>f.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new ve((r,i)=>{t.onerror=a=>{const d=jA(a.target.error);i(d)},t.onsuccess=a=>{const d=a.target.result;d?e(d.primaryKey,d.value).next(f=>{f?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new ve((i,a)=>{e.onerror=d=>{a(d.target.error)},e.onsuccess=d=>{const f=d.target.result;if(!f)return void i();const _=new kH(f),w=t(f.primaryKey,f.value,_);if(w instanceof ve){const I=w.catch(A=>(_.done(),ve.reject(A)));r.push(I)}_.isDone?i():null===_.Lt?f.continue():f.continue(_.Lt)}}).next(()=>ve.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function hf(n){return new ve((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=jA(r.target.error);t(i)}})}let wF=!1;function jA(n){const e=el.Vt((0,Ot.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wF||(wF=!0,setTimeout(()=>{throw r},0)),r}}return n}class TF extends bF{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Ti(n,e){const t=st(n);return el.xt(t.Ht,e)}class HA{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&zj(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&PA(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&PA(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Nt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),In())}isEqual(e){return this.batchId===e.batchId&&$g(this.mutations,e.mutations,(t,r)=>qP(t,r))&&$g(this.baseMutations,e.baseMutations,(t,r)=>qP(t,r))}}class GA{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ft(e.mutations.length===r.length);let i=Xj;const a=e.mutations;for(let d=0;d<a.length;d++)i=i.insert(a[d].key,r[d].version);return new GA(e,t,r,i)}}class $A{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class yd{constructor(e,t,r,i,a=Nt.min(),d=Nt.min(),f=ri.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f}withSequenceNumber(e){return new yd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new yd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new yd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class DF{constructor(e){this.Jt=e}}function EF(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:PT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Uv(i=n.Jt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Vv(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ff(e.version)};else{if(!e.isUnknownDocument())return gt();r.unknownDocument={path:t.path.toArray(),version:ff(e.version)}}var i,a;return r}function PT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ff(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function pf(n){const e=new Rr(n.seconds,n.nanoseconds);return Nt.fromTimestamp(e)}function tm(n,e){const t=(e.baseMutations||[]).map(a=>UA(n.Jt,a));for(let a=0;a<e.mutations.length-1;++a){const d=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(d.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>UA(n.Jt,a)),i=Rr.fromMillis(e.localWriteTimeMs);return new HA(e.batchId,i,t,r)}function $v(n){const e=pf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?pf(n.lastLimboFreeSnapshotVersion):Nt.min();let r;var i;return void 0!==n.query.documents?(Ft(1===(i=n.query).documents.length),r=ca(Kg(sF(i.documents[0])))):r=ca(dF(n.query)),new yd(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ri.fromBase64String(n.resumeToken))}function CF(n,e){const t=ff(e.snapshotVersion),r=ff(e.lastLimboFreeSnapshotVersion);let i;i=IT(e.target)?uF(n.Jt,e.target):cF(n.Jt,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:af(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function qA(n){const e=dF({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?OP(e,e.limit,"L"):e}function WA(n,e){return new $A(e.largestBatchId,UA(n.Jt,e.overlayMutation))}function IF(n,e){const t=e.path.lastSegment();return[n,Ss(e.path.popLast()),t]}class LH{getBundleMetadata(e,t){return SF(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:pf(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return SF(e).put({bundleId:(r=t).id,createTime:ff(wi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return AF(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:qA(i.bundledQuery),readTime:pf(i.readTime)};var i})}saveNamedQuery(e,t){return AF(e).put({name:(r=t).name,readTime:ff(wi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function SF(n){return Ti(n,"bundles")}function AF(n){return Ti(n,"namedQueries")}class ZA{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new ZA(e,t.uid||"")}getOverlay(e,t){return qv(e).get(IF(this.userId,t)).next(r=>r?WA(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((a,d)=>{const f=new $A(t,d);i.push(this.Xt(e,f))}),ve.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(d=>i.add(Ss(d.getCollectionPath())));const a=[];return i.forEach(d=>{const f=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);a.push(qv(e).Qt("collectionPathOverlayIndex",f))}),ve.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Fv(),a=Ss(t),d=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return qv(e).qt("collectionPathOverlayIndex",d).next(f=>{for(const _ of f){const w=WA(this.M,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Fv();let d;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qv(e).Wt({index:"collectionGroupOverlayIndex",range:f},(_,w,I)=>{const A=WA(this.M,w);a.size()<i||A.largestBatchId===d?(a.set(A.getKey(),A),d=A.largestBatchId):I.done()}).next(()=>a)}Xt(e,t){return qv(e).put(function(r,i,a){const[d,f,_]=IF(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Hv(r.Jt,a.mutation)}}(this.M,this.userId,t))}}function qv(n){return Ti(n,"documentOverlays")}class gf{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Er(e.integerValue));else if("doubleValue"in e){const r=Er(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Iv(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(tf(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?vP(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):gt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),tt.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function BH(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function NF(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=BH(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}gf.fe=new gf;class VH{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=NF(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=NF(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class UH{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class jH{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Wv{constructor(){this.De=new VH,this.Ce=new UH(this.De),this.xe=new jH(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class mf{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new mf(this.indexId,this.documentKey,this.arrayValue,r)}}function _f(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=MF(n.arrayValue,e.arrayValue),0!==t?t:(t=MF(n.directionalValue,e.directionalValue),0!==t?t:tt.comparator(n.documentKey,e.documentKey)))}function MF(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class HH{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=NA(e);if(void 0!==t&&!this.Be(t))return!1;const r=sf(e);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const d=r[i];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[a++],d))return!1;++i}for(;i<r.length;++i){const d=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class GH{constructor(){this.qe=new zA}addToCollectionParentIndex(e,t){return this.qe.add(t),ve.resolve()}getCollectionParents(e,t){return ve.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ve.resolve()}deleteFieldIndex(e,t){return ve.resolve()}getDocumentsMatchingTarget(e,t){return ve.resolve(null)}getIndexType(e,t){return ve.resolve(0)}getFieldIndexes(e,t){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}getMinOffset(e,t){return ve.resolve(Xa.min())}updateCollectionGroup(e,t,r){return ve.resolve()}updateIndexEntries(e,t){return ve.resolve()}}class zA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new zn(fn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new zn(fn.comparator)).toArray()}}const FT=new Uint8Array(0);class $H{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new zA,this.Ge=new _d(r=>af(r),(r,i)=>xv(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const a={collectionId:r,parent:Ss(i)};return xF(e).put(a)}return ve.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[dP(t),""],!1,!0);return xF(e).qt(i).next(a=>{for(const d of a){if(d.collectionId!==t)break;r.push(Vl(d.parent))}return r})}addFieldIndex(e,t){const r=LT(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=LT(e),i=BT(e),a=Zv(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Zv(e);let i=!0;const a=new Map;return ve.forEach(this.Qe(t),d=>this.je(e,d).next(f=>{i&&(i=!!f),a.set(d,f)})).next(()=>{if(i){let d=In();const f=[];return ve.forEach(a,(_,w)=>{var I;qe("IndexedDbIndexManager",`Using index ${I=_,`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(Qe=>`${Qe.fieldPath}:${Qe.kind}`).join(",")}`} to execute ${af(t)}`);const A=function(Qe,je){const rt=NA(je);if(void 0===rt)return null;for(const ut of ST(Qe,rt.fieldPath))switch(ut.op){case"array-contains-any":return ut.value.arrayValue.values||[];case"array-contains":return[ut.value]}return null}(w,_),P=function(Qe,je){const rt=new Map;for(const ut of sf(je))for(const Mt of ST(Qe,ut.fieldPath))switch(Mt.op){case"==":case"in":rt.set(ut.fieldPath.canonicalString(),Mt.value);break;case"not-in":case"!=":return rt.set(ut.fieldPath.canonicalString(),Mt.value),Array.from(rt.values())}return null}(w,_),L=function(Qe,je){const rt=[];let ut=!0;for(const Mt of sf(je)){const Jt=0===Mt.kind?SP(Qe,Mt.fieldPath,Qe.startAt):AP(Qe,Mt.fieldPath,Qe.startAt);rt.push(Jt.value),ut&&(ut=Jt.inclusive)}return new md(rt,ut)}(w,_),Z=function(Qe,je){const rt=[];let ut=!0;for(const Mt of sf(je)){const Jt=0===Mt.kind?AP(Qe,Mt.fieldPath,Qe.endAt):SP(Qe,Mt.fieldPath,Qe.endAt);rt.push(Jt.value),ut&&(ut=Jt.inclusive)}return new md(rt,ut)}(w,_),se=this.We(_,w,L),Ie=this.We(_,w,Z),Ue=this.ze(_,w,P),We=this.He(_.indexId,A,se,L.inclusive,Ie,Z.inclusive,Ue);return ve.forEach(We,Qe=>r.Gt(Qe,t.limit).next(je=>{je.forEach(rt=>{const ut=tt.fromSegments(rt.documentKey);d.has(ut)||(d=d.add(ut),f.push(ut))})}))}).next(()=>f)}return ve.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,i,a,d,f){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),w=_/(null!=t?t.length:1),I=[];for(let A=0;A<_;++A){const P=t?this.Je(t[A/w]):FT,L=this.Ye(e,P,r[A%w],i),Z=this.Xe(e,P,a[A%w],d),se=f.map(Ie=>this.Ye(e,P,Ie,!0));I.push(...this.createRange(L,Z,se))}return I}Ye(e,t,r,i){const a=new mf(e,tt.empty(),t,r);return i?a:a.ke()}Xe(e,t,r,i){const a=new mf(e,tt.empty(),t,r);return i?a.ke():a}je(e,t){const r=new HH(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let d=null;for(const f of a)r.$e(f)&&(!d||f.fields.length>d.fields.length)&&(d=f);return d})}getIndexType(e,t){let r=2;return ve.forEach(this.Qe(t),i=>this.je(e,i).next(a=>{a?0!==r&&a.fields.length<function(d){let f=new zn(ni.comparator),_=!1;for(const w of d.filters){const I=w;I.field.isKeyField()||("array-contains"===I.op||"array-contains-any"===I.op?_=!0:f=f.add(I.field))}for(const w of d.orderBy)w.field.isKeyField()||(f=f.add(w.field));return f.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new Wv;for(const i of sf(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const d=r.Ne(i.kind);gf.fe.Zt(a,d)}return r.Se()}Je(e){const t=new Wv;return gf.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Wv;return gf.fe.Zt(rf(this.databaseId,t),r.Ne(function(i){const a=sf(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let i=[];i.push(new Wv);let a=0;for(const d of sf(e)){const f=r[a++];for(const _ of i)if(this.en(t,d.fieldPath)&&Av(f))i=this.nn(i,d,f);else{const w=_.Ne(d.kind);gf.fe.Zt(f,w)}}return this.sn(i)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],a=[];for(const d of r.arrayValue.values||[])for(const f of i){const _=new Wv;_.seed(f.Se()),gf.fe.Zt(d,_.Ne(t.kind)),a.push(_)}return a}en(e,t){return!!e.filters.find(r=>r instanceof Bi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=LT(e),i=BT(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const d=[];return ve.forEach(a,f=>i.get([f.indexId,this.uid]).next(_=>{d.push(function(w,I){const A=I?new Mv(I.sequenceNumber,new Xa(pf(I.readTime),new tt(Vl(I.documentKey)),I.largestBatchId)):Mv.empty(),P=w.fields.map(([L,Z])=>new ET(ni.fromServerFormat(L),Z));return new DT(w.indexId,w.collectionGroup,P,A)}(f,_))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Yt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=LT(e),a=BT(e);return this.rn(e).next(d=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>ve.forEach(f,_=>{return a.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:ff((P=r).readTime),documentKey:Ss(P.documentKey.path),largestBatchId:P.largestBatchId});var P})))}updateIndexEntries(e,t){const r=new Map;return ve.forEach(t,(i,a)=>{const d=r.get(i.collectionGroup);return(d?ve.resolve(d):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),ve.forEach(f,_=>this.on(e,i,_).next(w=>{const I=this.un(a,_);return w.isEqual(I)?ve.resolve():this.an(e,a,_,w,I)}))))})}cn(e,t,r,i){return Zv(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return Zv(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=Zv(e);let a=new zn(_f);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,f)=>{a=a.add(new mf(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}un(e,t){let r=new zn(_f);const i=this.Ze(t,e);if(null==i)return r;const a=NA(t);if(null!=a){const d=e.data.field(a.fieldPath);if(Av(d))for(const f of d.arrayValue.values||[])r=r.add(new mf(t.indexId,e.key,this.Je(f),i))}else r=r.add(new mf(t.indexId,e.key,FT,i));return r}an(e,t,r,i,a){qe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(f,_,w,I,A){const P=f.getIterator(),L=_.getIterator();let Z=Zg(P),se=Zg(L);for(;Z||se;){let Ie=!1,Ue=!1;if(Z&&se){const We=w(Z,se);We<0?Ue=!0:We>0&&(Ie=!0)}else null!=Z?Ue=!0:Ie=!0;Ie?(I(se),se=Zg(L)):Ue?(A(Z),Z=Zg(P)):(Z=Zg(P),se=Zg(L))}}(i,a,_f,f=>{d.push(this.cn(e,t,r,f))},f=>{d.push(this.hn(e,t,r,f))}),ve.waitFor(d)}rn(e){let t=1;return BT(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,f)=>_f(d,f)).filter((d,f,_)=>!f||0!==_f(d,_[f-1]));const i=[];i.push(e);for(const d of r){const f=_f(d,e),_=_f(d,t);if(0===f)i[0]=e.ke();else if(f>0&&_<0)i.push(d),i.push(d.ke());else if(_>0)break}i.push(t);const a=[];for(let d=0;d<i.length;d+=2)a.push(IDBKeyRange.bound([i[d].indexId,this.uid,i[d].arrayValue,i[d].directionalValue,FT,[]],[i[d+1].indexId,this.uid,i[d+1].arrayValue,i[d+1].directionalValue,FT,[]]));return a}getMinOffset(e,t){let r;return ve.forEach(this.Qe(t),i=>this.je(e,i).next(a=>{a?(!r||EP(a.indexState.offset,r)<0)&&(r=a.indexState.offset):r=Xa.min()})).next(()=>r)}}function xF(n){return Ti(n,"collectionParents")}function Zv(n){return Ti(n,"indexEntries")}function LT(n){return Ti(n,"indexConfiguration")}function BT(n){return Ti(n,"indexState")}const RF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ks{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ks(e,Ks.DEFAULT_COLLECTION_PERCENTILE,Ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function OF(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],d=IDBKeyRange.only(t.batchId);let f=0;const _=r.Wt({range:d},(I,A,P)=>(f++,P.delete()));a.push(_.next(()=>{Ft(1===f)}));const w=[];for(const I of t.mutations){const A=mF(e,I.key.path,t.batchId);a.push(i.delete(A)),w.push(I.key)}return ve.waitFor(a).next(()=>w)}function VT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw gt();e=n.noDocument}return JSON.stringify(e).length}Ks.DEFAULT_COLLECTION_PERCENTILE=10,Ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ks.DEFAULT=new Ks(41943040,Ks.DEFAULT_COLLECTION_PERCENTILE,Ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ks.DISABLED=new Ks(-1,0,0);class KA{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){Ft(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new KA(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vd(e).Wt({index:"userMutationsIndex",range:r},(i,a,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=nm(e),d=vd(e);return d.add({}).next(f=>{Ft("number"==typeof f);const _=new HA(f,t,r,i),w=function(P,L,Z){const se=Z.baseMutations.map(Ue=>Hv(P.Jt,Ue)),Ie=Z.mutations.map(Ue=>Hv(P.Jt,Ue));return{userId:L,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:se,mutations:Ie}}(this.M,this.userId,_),I=[];let A=new zn((P,L)=>Yt(P.canonicalString(),L.canonicalString()));for(const P of i){const L=mF(this.userId,P.key.path,f);A=A.add(P.key.path.popLast()),I.push(d.put(w)),I.push(a.put(L,_H))}return A.forEach(P=>{I.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.ln[f]=_.keys()}),ve.waitFor(I).next(()=>_)})}lookupMutationBatch(e,t){return vd(e).get(t).next(r=>r?(Ft(r.userId===this.userId),tm(this.M,r)):null)}fn(e,t){return this.ln[t]?ve.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return vd(e).Wt({index:"userMutationsIndex",range:i},(d,f,_)=>{f.userId===this.userId&&(Ft(f.batchId>=r),a=tm(this.M,f)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return vd(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,a,d)=>{r=a.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vd(e).qt("userMutationsIndex",t).next(r=>r.map(i=>tm(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=OT(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return nm(e).Wt({range:i},(d,f,_)=>{const[w,I,A]=d,P=Vl(I);if(w===this.userId&&t.path.isEqual(P))return vd(e).get(A).next(L=>{if(!L)throw gt();Ft(L.userId===this.userId),a.push(tm(this.M,L))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new zn(Yt);const i=[];return t.forEach(a=>{const d=OT(this.userId,a.path),f=IDBKeyRange.lowerBound(d),_=nm(e).Wt({range:f},(w,I,A)=>{const[P,L,Z]=w,se=Vl(L);P===this.userId&&a.path.isEqual(se)?r=r.add(Z):A.done()});i.push(_)}),ve.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=OT(this.userId,r),d=IDBKeyRange.lowerBound(a);let f=new zn(Yt);return nm(e).Wt({range:d},(_,w,I)=>{const[A,P,L]=_,Z=Vl(P);A===this.userId&&r.isPrefixOf(Z)?Z.length===i&&(f=f.add(L)):I.done()}).next(()=>this.dn(e,f))}dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(vd(e).get(a).next(d=>{if(null===d)throw gt();Ft(d.userId===this.userId),r.push(tm(this.M,d))}))}),ve.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return OF(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),ve.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ve.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return nm(e).Wt({range:r},(a,d,f)=>{if(a[0]===this.userId){const _=Vl(a[1]);i.push(_)}else f.done()}).next(()=>{Ft(0===i.length)})})}containsKey(e,t){return kF(e,this.userId,t)}wn(e){return PF(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function kF(n,e,t){const r=OT(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let d=!1;return nm(n).Wt({range:a,jt:!0},(f,_,w)=>{const[I,A,P]=f;I===e&&A===i&&(d=!0),w.done()}).next(()=>d)}function vd(n){return Ti(n,"mutations")}function nm(n){return Ti(n,"documentMutations")}function PF(n){return Ti(n,"mutationQueues")}class yf{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new yf(0)}static yn(){return new yf(-1)}}class qH{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new yf(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Nt.fromTimestamp(new Rr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>rm(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Ft(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return rm(e).Wt((d,f)=>{const _=$v(f);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>ve.waitFor(a)).next(()=>i)}forEachTarget(e,t){return rm(e).Wt((r,i)=>{const a=$v(i);t(a)})}pn(e){return FF(e).get("targetGlobalKey").next(t=>(Ft(null!==t),t))}In(e,t){return FF(e).put("targetGlobalKey",t)}Tn(e,t){return rm(e).put(CF(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=af(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return rm(e).Wt({range:i,index:"queryTargetsIndex"},(d,f,_)=>{const w=$v(f);xv(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=bd(e);return t.forEach(d=>{const f=Ss(d.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,d))}),ve.waitFor(i)}removeMatchingKeys(e,t,r){const i=bd(e);return ve.forEach(t,a=>{const d=Ss(a.path);return ve.waitFor([i.delete([r,d]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=bd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=bd(e);let a=In();return i.Wt({range:r,jt:!0},(d,f,_)=>{const w=Vl(d[1]),I=new tt(w);a=a.add(I)}).next(()=>a)}containsKey(e,t){const r=Ss(t.path),i=IDBKeyRange.bound([r],[dP(r)],!1,!0);let a=0;return bd(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([d,f],_,w)=>{0!==d&&(a++,w.done())}).next(()=>a>0)}Et(e,t){return rm(e).get(t).next(r=>r?$v(r):null)}}function rm(n){return Ti(n,"targets")}function FF(n){return Ti(n,"targetGlobal")}function bd(n){return Ti(n,"targetDocuments")}function vf(n){return YA.apply(this,arguments)}function YA(){return YA=(0,Y.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==vF)throw n;qe("LocalStore","Unexpectedly lost primary lease")}),YA.apply(this,arguments)}function LF([n,e],[t,r]){const i=Yt(n,t);return 0===i?Yt(e,r):i}class WH{constructor(e){this.An=e,this.buffer=new zn(LF),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();LF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ZH{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;qe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Y.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){df(i)?qe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield vf(i)}yield t.Sn(e)}))}}class zH{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ve.resolve(Co.A);const r=new WH(t);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(RF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),RF):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,a,d,f,_,w;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),i=this.params.maximumSequenceNumbersToCollect):i=A,d=Date.now(),this.nthSequenceNumber(e,i))).next(A=>(r=A,f=Date.now(),this.removeTargets(e,r,t))).next(A=>(a=A,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(w=Date.now(),EA()<=aa.in.DEBUG&&qe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-I}ms\n\tDetermined least recently used ${i} in `+(f-d)+`ms\n\tRemoved ${a} targets in `+(_-f)+`ms\n\tRemoved ${A} documents in `+(w-_)+`ms\nTotal Duration: ${w-I}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:A})))}}class KH{constructor(e,t){this.db=e,this.garbageCollector=new zH(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return UT(e,r)}removeReference(e,t,r){return UT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return UT(e,t)}On(e,t){return function(r,i){let a=!1;return PF(r).zt(d=>kF(r,d,i).next(f=>(f&&(a=!0),ve.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Mn(e,(d,f)=>{if(f<=t){const _=this.On(e,d).next(w=>{if(!w)return a++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Nt.min()),bd(e).delete([0,Ss(d.path)])))});i.push(_)}}).next(()=>ve.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return UT(e,t)}Mn(e,t){const r=bd(e);let i,a=Co.A;return r.Wt({index:"documentTargetsIndex"},([d,f],{path:_,sequenceNumber:w})=>{0===d?(a!==Co.A&&t(new tt(Vl(i)),a),a=w,i=_):a=Co.A}).next(()=>{a!==Co.A&&t(new tt(Vl(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function UT(n,e){return bd(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ss(e.path),sequenceNumber:r}));var r}class BF{constructor(){this.changes=new _d(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ve.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class YH{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return bf(e).put(r)}removeEntry(e,t,r){return bf(e).delete(function(i,a){const d=i.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],PT(a),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=nr.newInvalidDocument(t);return bf(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(zv(t))},(i,a)=>{r=this.$n(t,a)}).next(()=>r)}Bn(e,t){let r={size:0,document:nr.newInvalidDocument(t)};return bf(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(zv(t))},(i,a)=>{r={document:this.$n(t,a),size:VT(a)}}).next(()=>r)}getEntries(e,t){let r=da();return this.Ln(e,t,(i,a)=>{const d=this.$n(i,a);r=r.insert(i,d)}).next(()=>r)}Un(e,t){let r=da(),i=new Or(tt.comparator);return this.Ln(e,t,(a,d)=>{const f=this.$n(a,d);r=r.insert(a,f),i=i.insert(a,VT(d))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return ve.resolve();let i=new zn(jF);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(zv(i.first()),zv(i.last())),d=i.getIterator();let f=d.getNext();return bf(e).Wt({index:"documentKeyIndex",range:a},(_,w,I)=>{const A=tt.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;f&&jF(f,A)<0;)r(f,null),f=d.getNext();f&&f.isEqual(A)&&(r(f,w),f=d.hasNext()?d.getNext():null),f?I.Ut(zv(f)):I.done()}).next(()=>{for(;f;)r(f,null),f=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),PT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return bf(e).qt(IDBKeyRange.bound(i,a,!0)).next(d=>{let f=da();for(const _ of d){const w=this.$n(tt.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);f=f.insert(w.key,w)}return f})}getAllFromCollectionGroup(e,t,r,i){let a=da();const d=UF(t,r),f=UF(t,Xa.max());return bf(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,f,!0)},(_,w,I)=>{const A=this.$n(tt.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(A.key,A),a.size===i&&I.done()}).next(()=>a)}newChangeBuffer(e){return new JH(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return VF(e).get("remoteDocumentGlobalKey").next(t=>(Ft(!!t),t))}Fn(e,t){return VF(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function FH(n,e){let t;if(e.document)t=lF(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=tt.fromSegments(e.noDocument.path),i=pf(e.noDocument.readTime);t=nr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return gt();{const r=tt.fromSegments(e.unknownDocument.path),i=pf(e.unknownDocument.version);t=nr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Rr(r[0],r[1]);return Nt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Nt.min()))return r}return nr.newInvalidDocument(e)}}class JH extends BF{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new _d(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new zn((a,d)=>Yt(a.canonicalString(),d.canonicalString()));return this.changes.forEach((a,d)=>{const f=this.Gn.get(a);if(t.push(this.Kn.removeEntry(e,a,f.readTime)),d.isValidDocument()){const _=EF(this.Kn.M,d);i=i.add(a.path.popLast()),r+=VT(_)-f.size,t.push(this.Kn.addEntry(e,a,_))}else if(r-=f.size,this.trackRemovals){const _=EF(this.Kn.M,d.convertToNoDocument(Nt.min()));t.push(this.Kn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Kn.updateMetadata(e,r)),ve.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((a,d)=>{this.Gn.set(a,{size:d,readTime:r.get(a).readTime})}),r))}}function VF(n){return Ti(n,"remoteDocumentGlobal")}function bf(n){return Ti(n,"remoteDocumentsV14")}function zv(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function UF(n,e){const t=e.documentKey.path.toArray();return[n,PT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function jF(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Yt(t[a],r[a]),i)return i;return i=Yt(t.length,r.length),i||(i=Yt(t[t.length-2],r[r.length-2]),i||Yt(t[t.length-1],r[r.length-1]))}class QH{constructor(e){this.M=e}kt(e,t,r,i){const a=new kT("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gF,{unique:!0}),f.createObjectStore("documentMutations"),HF(e),function(f){f.createObjectStore("remoteDocuments")}(e));let d=ve.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),HF(e)),d=d.next(()=>function(f){const _=f.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Nt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(d=d.next(()=>function(f,_){return _.store("mutations").qt().next(w=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gF,{unique:!0});const I=_.store("mutations"),A=w.map(P=>I.put(P));return ve.waitFor(A)})}(e,a))),d=d.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(d=d.next(()=>this.Qn(a))),r<6&&i>=6&&(d=d.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.jn(a)))),r<7&&i>=7&&(d=d.next(()=>this.Wn(a))),r<8&&i>=8&&(d=d.next(()=>this.zn(e,a))),r<9&&i>=9&&(d=d.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(d=d.next(()=>this.Hn(a))),r<11&&i>=11&&(d=d.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(d=d.next(()=>{!function(f){const _=f.createObjectStore("documentOverlays",{keyPath:NH});_.createIndex("collectionPathOverlayIndex",MH,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",xH,{unique:!1})}(e)})),r<13&&i>=13&&(d=d.next(()=>function(f){const _=f.createObjectStore("remoteDocumentsV14",{keyPath:yH});_.createIndex("documentKeyIndex",vH),_.createIndex("collectionGroupIndex",bH)}(e)).next(()=>this.Jn(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(d=d.next(()=>{!function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:CH}).createIndex("sequenceNumberIndex",IH,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:SH}).createIndex("documentKeyIndex",AH,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=VT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>ve.forEach(i,a=>{const d=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(f=>ve.forEach(f,_=>{Ft(_.userId===a.userId);const w=tm(this.M,_);return OF(e,a.userId,w).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((d,f)=>{const _=new fn(d),w=[0,Ss(_)];a.push(t.get(w).next(I=>I?ve.resolve():t.put({targetId:0,path:Ss(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ve.waitFor(a))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:EH});const r=t.store("collectionParents"),i=new zA,a=d=>{if(i.add(d)){const f=d.lastSegment(),_=d.popLast();return r.put({collectionId:f,parent:Ss(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,f)=>{const _=new fn(d);return a(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,f,_],w)=>{const I=Vl(f);return a(I.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const a=$v(i),d=CF(this.M,a);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((a,d)=>{const f=t.store("remoteDocumentsV14"),_=(w=d,w.document?new tt(fn.fromString(w.document.name).popFirst(5)):w.noDocument?tt.fromSegments(w.noDocument.path):w.unknownDocument?tt.fromSegments(w.unknownDocument.path):gt()).path.toArray();var w;const I={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};i.push(f.put(I))}).next(()=>ve.waitFor(i))}}function HF(n){n.createObjectStore("targetDocuments",{keyPath:TH}).createIndex("documentTargetsIndex",DH,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wH,{unique:!0}),n.createObjectStore("targetGlobal")}const JA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class QA{constructor(e,t,r,i,a,d,f,_,w,I,A=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=a,this.window=d,this.document=f,this.Xn=w,this.Zn=I,this.ts=A,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=P=>Promise.resolve(),!QA.vt())throw new Fe(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new KH(this,i),this.hs=t+"main",this.M=new DF(_),this.ls=new el(this.hs,this.ts,new QH(this.M)),this.fs=new qH(this.referenceDelegate,this.M),this.ds=new YH(this.M),this._s=new LH,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===I&&$r("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Fe(ge.FAILED_PRECONDITION,JA);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Co(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,Y.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Y.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Y.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(df(e))return qe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return qe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Kv(e).get("owner").next(t=>ve.resolve(this.Ps(t)))}Vs(e){return jT(e).delete(this.clientId)}vs(){var e=this;return(0,Y.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ti(r,"clientMetadata");return i.qt().next(a=>{const d=e.Ds(a,18e5),f=a.filter(_=>-1===d.indexOf(_));return ve.forEach(f,_=>i.delete(_.clientId)).next(()=>f)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?ve.resolve(!0):Kv(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Fe(ge.FAILED_PRECONDITION,JA);return!1}}return!(!this.networkEnabled||!this.inForeground)||jT(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const d=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||d&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&qe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Y.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new TF(t,Co.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>jT(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return KA.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new $H(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return ZA.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){qe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=14===(d=this.ts)?OH:13===d?yF:12===d?RH:11===d?_F:void gt();var d;let f;return this.ls.runTransaction(e,i,a,_=>(f=new TF(_,this.es?this.es.next():Co.A),"readwrite-primary"===t?this.Es(f).next(w=>!!w||this.As(f)).next(w=>{if(!w)throw $r(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Fe(ge.FAILED_PRECONDITION,vF);return r(f)}).next(w=>this.bs(f).next(()=>w)):this.$s(f).next(()=>r(f)))).then(_=>(f.raiseOnCommittedEvent(),_))}$s(e){return Kv(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Fe(ge.FAILED_PRECONDITION,JA)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Kv(e).put("owner",t)}static vt(){return el.vt()}Rs(e){const t=Kv(e);return t.get("owner").next(r=>this.Ps(r)?(qe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ve.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&($r(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Ot.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return qe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return $r("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){$r("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Kv(n){return Ti(n,"owner")}function jT(n){return Ti(n,"clientMetadata")}function XA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class XH{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return tt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):RA(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new tt(t)).next(r=>{let i=LA();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let a=LA();return this.indexManager.getCollectionParents(e,i).next(d=>ve.forEach(d,f=>{const _=(w=t,I=f.child(i),new Pu(I,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,I;return this.zs(e,_,r).next(w=>{w.forEach((I,A)=>{a=a.insert(I,A)})})}).next(()=>a))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const d of a)for(const f of d.mutations){const _=f.key;let w=i.get(_);null==w&&(w=nr.newInvalidDocument(_),i=i.insert(_,w)),PA(f,w,d.localWriteTime),w.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((a,d)=>{kA(t,d)||(i=i.remove(a))}),i))}}class eN{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=In(),i=In();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new eN(e,t.fromCache,r,i)}}class GF{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(a=>a||this.ei(e,t,i,r)).next(a=>a||this.ni(e,t))}ti(e,t){return ve.resolve(null)}ei(e,t,r,i){return function Hj(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(Nt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(a=>{const d=this.si(t,a);return this.ii(t,d,r,i)?this.ni(e,t):(EA()<=aa.in.DEBUG&&qe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),OA(t)),this.ri(e,d,t,DP(i,-1)))})}si(e,t){let r=new zn(FP(e));return t.forEach((i,a)=>{kA(e,a)&&(r=r.add(a))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ni(e,t){return EA()<=aa.in.DEBUG&&qe("QueryEngine","Using full collection scan to execute query:",OA(t)),this.Zs.Qs(e,t,Xa.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(a=>(t.forEach(d=>{a=a.insert(d.key,d)}),a))}}class eG{constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new Or(Yt),this.ai=new _d(a=>af(a),xv),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new XH(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function $F(n,e,t,r){return new eG(n,e,t,r)}function qF(n,e){return tN.apply(this,arguments)}function tN(){return tN=(0,Y.Z)(function*(n,e){const t=st(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(a=>(i=a,t.li(e),t.Bs.getAllMutationBatches(r))).next(a=>{const d=[],f=[];let _=In();for(const w of i){d.push(w.batchId);for(const I of w.mutations)_=_.add(I.key)}for(const w of a){f.push(w.batchId);for(const I of w.mutations)_=_.add(I.key)}return t.fi.Ks(r,_).next(w=>({di:w,removedBatchIds:d,addedBatchIds:f}))})})}),tN.apply(this,arguments)}function tG(n,e){const t=st(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.hi.newChangeBuffer({trackRemovals:!0});return function(d,f,_,w){const I=_.batch,A=I.keys();let P=ve.resolve();return A.forEach(L=>{P=P.next(()=>w.getEntry(f,L)).next(Z=>{const se=_.docVersions.get(L);Ft(null!==se),Z.version.compareTo(se)<0&&(I.applyToRemoteDocument(Z,_),Z.isValidDocument()&&(Z.setReadTime(_.commitVersion),w.addEntry(Z)))})}),P.next(()=>d.Bs.removeMutationBatch(f,I))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function WF(n){const e=st(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function nG(n,e){const t=st(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const d=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const f=[];e.targetChanges.forEach((w,I)=>{const A=i.get(I);if(!A)return;f.push(t.fs.removeMatchingKeys(a,w.removedDocuments,I).next(()=>t.fs.addMatchingKeys(a,w.addedDocuments,I)));let P=A.withSequenceNumber(a.currentSequenceNumber);var L,Z,se;e.targetMismatches.has(I)?P=P.withResumeToken(ri.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):w.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(w.resumeToken,r)),i=i.insert(I,P),Z=P,se=w,(0===(L=A).resumeToken.approximateByteSize()||Z.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=3e8||se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0)&&f.push(t.fs.updateTargetData(a,P))});let _=da();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,w))}),f.push(ZF(a,d,e.documentUpdates).next(w=>{_=w})),!r.isEqual(Nt.min())){const w=t.fs.getLastRemoteSnapshotVersion(a).next(I=>t.fs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(w)}return ve.waitFor(f).next(()=>d.apply(a)).next(()=>t.fi.Gs(a,_)).next(()=>_)}).then(a=>(t.ui=i,a))}function ZF(n,e,t){let r=In();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=da();return t.forEach((d,f)=>{const _=i.get(d);f.isNoDocument()&&f.version.isEqual(Nt.min())?(e.removeEntry(d,f.readTime),a=a.insert(d,f)):!_.isValidDocument()||f.version.compareTo(_.version)>0||0===f.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(f),a=a.insert(d,f)):qe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",f.version)}),a})}function rG(n,e){const t=st(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function im(n,e){const t=st(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(a=>a?(i=a,ve.resolve(i)):t.fs.allocateTargetId(r).next(d=>(i=new yd(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function sm(n,e,t){return nN.apply(this,arguments)}function nN(){return nN=(0,Y.Z)(function*(n,e,t){const r=st(n),i=r.ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,d=>r.persistence.referenceDelegate.removeTarget(d,i)))}catch(d){if(!df(d))throw d;qe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),nN.apply(this,arguments)}function HT(n,e,t){const r=st(n);let i=Nt.min(),a=In();return r.persistence.runTransaction("Execute query","readonly",d=>function(f,_,w){const I=st(f),A=I.ai.get(w);return void 0!==A?ve.resolve(I.ui.get(A)):I.fs.getTargetData(_,w)}(r,d,ca(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,f.targetId).next(_=>{a=_})}).next(()=>r.oi.Qs(d,e,t?i:Nt.min(),t?a:In())).next(f=>(YF(r,PP(e),f),{documents:f,_i:a})))}function zF(n,e){const t=st(n),r=st(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(d=>d?d.target:null))}function KF(n,e){const t=st(n),r=t.ci.get(e)||Nt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,DP(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(YF(t,e,i),i))}function YF(n,e,t){let r=Nt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.ci.set(e,r)}function rN(){return rN=(0,Y.Z)(function*(n,e,t,r){const i=st(n);let a=In(),d=da();for(const w of t){const I=e.wi(w.metadata.name);w.document&&(a=a.add(I));const A=e.mi(w);A.setReadTime(e.gi(w.metadata.readTime)),d=d.insert(I,A)}const f=i.hi.newChangeBuffer({trackRemovals:!0}),_=yield im(i,(w=r,ca(Kg(fn.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>ZF(w,f,d).next(I=>(f.apply(w),I)).next(I=>i.fs.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.fs.addMatchingKeys(w,a,_.targetId)).next(()=>i.fi.Gs(w,I)).next(()=>I)))}),rN.apply(this,arguments)}function sG(n,e){return iN.apply(this,arguments)}function iN(){return iN=(0,Y.Z)(function*(n,e,t=In()){const r=yield im(n,ca(qA(e.bundledQuery))),i=st(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const d=wi(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return i._s.saveNamedQuery(a,e);const f=r.withResumeToken(ri.EMPTY_BYTE_STRING,d);return i.ui=i.ui.insert(f.targetId,f),i.fs.updateTargetData(a,f).next(()=>i.fs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.fs.addMatchingKeys(a,t,r.targetId)).next(()=>i._s.saveNamedQuery(a,e))})}),iN.apply(this,arguments)}class oG{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return ve.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:wi(r.createTime)}),ve.resolve()}getNamedQuery(e,t){return ve.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:qA(r.bundledQuery),readTime:wi(r.readTime)}),ve.resolve();var r}}class aG{constructor(){this.overlays=new Or(tt.comparator),this.Ii=new Map}getOverlay(e,t){return ve.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.Xt(e,t,a)}),ve.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ii.delete(r)),ve.resolve()}getOverlaysForCollection(e,t,r){const i=Fv(),a=t.length+1,d=new tt(t.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const _=f.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ve.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Or((w,I)=>w-I);const d=this.overlays.getIterator();for(;d.hasNext();){const w=d.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let I=a.get(w.largestBatchId);null===I&&(I=Fv(),a=a.insert(w.largestBatchId,I)),I.set(w.getKey(),w)}}const f=Fv(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,I)=>f.set(w,I)),!(f.size()>=i)););return ve.resolve(f)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const d=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new $A(t,r));let a=this.Ii.get(t);void 0===a&&(a=In(),this.Ii.set(t,a)),this.Ii.set(t,a.add(r.key))}}class sN{constructor(){this.Ti=new zn(Di.Ei),this.Ai=new zn(Di.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Di(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Di(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new tt(new fn([])),r=new Di(t,e),i=new Di(t,e+1),a=[];return this.Ai.forEachInRange([r,i],d=>{this.Pi(d),a.push(d.key)}),a}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new tt(new fn([])),r=new Di(t,e),i=new Di(t,e+1);let a=In();return this.Ai.forEachInRange([r,i],d=>{a=a.add(d.key)}),a}containsKey(e){const t=new Di(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Di{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return tt.comparator(e.key,t.key)||Yt(e.Ci,t.Ci)}static Ri(e,t){return Yt(e.Ci,t.Ci)||tt.comparator(e.key,t.key)}}class lG{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new zn(Di.Ei)}checkEmpty(e){return ve.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const a=this.xi;this.xi++;const d=new HA(a,t,r,i);this.Bs.push(d);for(const f of i)this.Ni=this.Ni.add(new Di(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ve.resolve(d)}lookupMutationBatch(e,t){return ve.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),a=i<0?0:i;return ve.resolve(this.Bs.length>a?this.Bs[a]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return ve.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Di(t,0),i=new Di(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],d=>{const f=this.ki(d.Ci);a.push(f)}),ve.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new zn(Yt);return t.forEach(i=>{const a=new Di(i,0),d=new Di(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([a,d],f=>{r=r.add(f.Ci)})}),ve.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;tt.isDocumentKey(a)||(a=a.child(""));const d=new Di(new tt(a),0);let f=new zn(Yt);return this.Ni.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(f=f.add(_.Ci)),!0)},d),ve.resolve(this.Oi(f))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ft(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return ve.forEach(t.mutations,i=>{const a=new Di(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Di(t,0),i=this.Ni.firstAfterOrEqual(r);return ve.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ve.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class uG{constructor(e){this.$i=e,this.docs=new Or(tt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,d=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ve.resolve(r?r.document.mutableCopy():nr.newInvalidDocument(t))}getEntries(e,t){let r=da();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():nr.newInvalidDocument(i))}),ve.resolve(r)}getAllFromCollection(e,t,r){let i=da();const a=new tt(t.child("")),d=this.docs.getIteratorFrom(a);for(;d.hasNext();){const{key:f,value:{document:_}}=d.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||EP(xj(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return ve.resolve(i)}getAllFromCollectionGroup(e,t,r,i){gt()}Bi(e,t){return ve.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new cG(this)}getSize(e){return ve.resolve(this.size)}}class cG extends BF{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),ve.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class dG{constructor(e){this.persistence=e,this.Li=new _d(t=>af(t),xv),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new sN,this.targetCount=0,this.Ki=yf.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),ve.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new yf(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,ve.resolve()}updateTargetData(e,t){return this.Tn(t),ve.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Li.forEach((d,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Li.delete(d),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ve.waitFor(a).next(()=>i)}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return ve.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),ve.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(d=>{a.push(i.markPotentiallyOrphaned(e,d))}),ve.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),ve.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return ve.resolve(r)}containsKey(e,t){return ve.resolve(this.qi.containsKey(t))}}class hG{constructor(e,t){this.Gi={},this.overlays={},this.es=new Co(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new dG(this),this.indexManager=new GH,this.ds=new uG(r=>this.referenceDelegate.Qi(r)),this.M=new DF(t),this._s=new oG(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aG,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new lG(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){qe("MemoryPersistence","Starting transaction:",e);const i=new fG(this.es.next());return this.referenceDelegate.ji(),r(i).next(a=>this.referenceDelegate.Wi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}zi(e,t){return ve.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class fG extends bF{constructor(e){super(),this.currentSequenceNumber=e}}class oN{constructor(e){this.persistence=e,this.Hi=new sN,this.Ji=null}static Yi(e){return new oN(e)}get Xi(){if(this.Ji)return this.Ji;throw gt()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),ve.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),ve.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),ve.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Xi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.Xi,r=>{const i=tt.fromPath(r);return this.Zi(e,i).next(a=>{a||t.removeEntry(i,Nt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return ve.or([()=>ve.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function JF(n,e){return`firestore_clients_${n}_${e}`}function QF(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function aN(n,e){return`firestore_targets_${n}_${e}`}class GT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static tr(e,t,r){const i=JSON.parse(r);let a,d="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return d&&i.error&&(d="string"==typeof i.error.message&&"string"==typeof i.error.code,d&&(a=new Fe(i.error.code,i.error.message))),d?new GT(e,t,i.state,a):($r("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yv{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Fe(r.error.code,r.error.message))),a?new Yv(e,r.state,i):($r("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $T{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=xT();for(let d=0;i&&d<r.activeTargetIds.length;++d)i=gP(r.activeTargetIds[d]),a=a.add(r.activeTargetIds[d]);return i?new $T(e,a):($r("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class lN{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new lN(t.clientId,t.onlineState):($r("SharedClientState",`Failed to parse online state: ${e}`),null)}}class uN{constructor(){this.activeTargetIds=xT()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cN{constructor(e,t,r,i,a){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Or(Yt),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=JF(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new uN),this.dr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Y.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const a=e.getItem(JF(e.persistenceKey,i));if(a){const d=$T.tr(i,a);d&&(e.ar=e.ar.insert(d.clientId,d))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const i=e.pr(r);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(aN(this.persistenceKey,e));if(r){const i=Yv.tr(e,r);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(aN(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return qe("SharedClientState","READ",e,t),t}setItem(e,t){qe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){qe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(qe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void $r("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Y.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Sr(i,null)}{const i=t.Dr(r.key,r.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.kr(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.mr){if(null!==r.newValue){const i=t.pr(r.newValue);if(i)return t.Ir(i)}}else if(r.key===t.lr){const i=function(a){let d=Co.A;if(null!=a)try{const f=JSON.parse(a);Ft("number"==typeof f),d=f}catch(f){$r("SharedClientState","Failed to read sequence number from WebStorage",f)}return d}(r.newValue);i!==Co.A&&t.sequenceNumberHandler(i)}else if(r.key===t.gr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Fr(a)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const i=new GT(this.currentUser,e,t,r),a=QF(this.persistenceKey,this.currentUser,e);this.setItem(a,i.er())}Ar(e){const t=QF(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const i=aN(this.persistenceKey,e),a=new Yv(e,t,r);this.setItem(i,a.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return $T.tr(r,t)}Cr(e,t){const r=this._r.exec(e),i=Number(r[1]);return GT.tr(new Fi(void 0!==r[2]?r[2]:null),i,t)}kr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return Yv.tr(i,t)}pr(e){return lN.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,Y.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);qe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),d=[],f=[];return a.forEach(_=>{i.has(_)||d.push(_)}),i.forEach(_=>{a.has(_)||f.push(_)}),this.syncEngine.Lr(d,f).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=xT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class XF{constructor(){this.Ur=new uN,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new uN,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pG{Kr(e){}shutdown(){}}class eL{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){qe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){qe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const gG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class mG{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class _G extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,a){const d=this.ho(e,t);qe("RestConnection","Sending: ",d,r);const f={};return this.lo(f,i,a),this.fo(e,d,f,r).then(_=>(qe("RestConnection","Received: ",_),_),_=>{throw Tv("RestConnection",`${e} failed with error: `,_,"url: ",d,"request:",r),_})}_o(e,t,r,i,a){return this.co(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Gg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.uo}/v1/${t}:${gG[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,d)=>{const f=new gj;f.listenOnce(hj.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case DA.NO_ERROR:const w=f.getResponseJson();qe("Connection","XHR received:",JSON.stringify(w)),a(w);break;case DA.TIMEOUT:qe("Connection",'RPC "'+e+'" timed out'),d(new Fe(ge.DEADLINE_EXCEEDED,"Request time out"));break;case DA.HTTP_ERROR:const I=f.getStatus();if(qe("Connection",'RPC "'+e+'" failed with status:',I,"response text:",f.getResponseText()),I>0){const A=f.getResponseJson().error;if(A&&A.status&&A.message){const P=function(L){const Z=L.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(Z)>=0?Z:ge.UNKNOWN}(A.status);d(new Fe(P,A.message))}else d(new Fe(ge.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Fe(ge.UNAVAILABLE,"Connection failed."));break;default:gt()}}finally{qe("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);f.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=cj(),d=dj(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new pj({})),this.lo(f.initMessageHeaders,t,r),(0,Ot.uI)()||(0,Ot.b$)()||(0,Ot.d)()||(0,Ot.w1)()||(0,Ot.Mn)()||(0,Ot.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");qe("Connection","Creating WebChannel: "+_,f);const w=a.createWebChannel(_,f);let I=!1,A=!1;const P=new mG({Jr:Z=>{A?qe("Connection","Not sending because WebChannel is closed:",Z):(I||(qe("Connection","Opening WebChannel transport."),w.open(),I=!0),qe("Connection","WebChannel sending:",Z),w.send(Z))},Yr:()=>w.close()}),L=(Z,se,Ie)=>{Z.listen(se,Ue=>{try{Ie(Ue)}catch(We){setTimeout(()=>{throw We},0)}})};return L(w,bT.EventType.OPEN,()=>{A||qe("Connection","WebChannel transport opened.")}),L(w,bT.EventType.CLOSE,()=>{A||(A=!0,qe("Connection","WebChannel transport closed"),P.ro())}),L(w,bT.EventType.ERROR,Z=>{A||(A=!0,Tv("Connection","WebChannel transport errored:",Z),P.ro(new Fe(ge.UNAVAILABLE,"The operation could not be completed")))}),L(w,bT.EventType.MESSAGE,Z=>{var se;if(!A){const Ie=Z.data[0];Ft(!!Ie);const Ue=Ie,We=Ue.error||(null===(se=Ue[0])||void 0===se?void 0:se.error);if(We){qe("Connection","WebChannel received error:",We);const Qe=We.status;let je=function(ut){const Mt=Wr[ut];if(void 0!==Mt)return JP(Mt)}(Qe),rt=We.message;void 0===je&&(je=ge.INTERNAL,rt="Unknown error status: "+Qe+" with message "+We.message),A=!0,P.ro(new Fe(je,rt)),w.close()}else qe("Connection","WebChannel received:",Ie),P.oo(Ie)}}),L(d,fj.STAT_EVENT,Z=>{Z.stat===oP.PROXY?qe("Connection","Detected buffering proxy"):Z.stat===oP.NOPROXY&&qe("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.io()},0),P}}function tL(){return"undefined"!=typeof window?window:null}function qT(){return"undefined"!=typeof document?document:null}function Jv(n){return new sH(n,!0)}class dN{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&qe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class nL{constructor(e,t,r,i,a,d,f,_){this.Yn=e,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=_,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new dN(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Y.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Y.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,Y.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?($r(t.toString()),$r("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Fe(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,Y.Z)(function*(){e.state=0,e.start()}))}jo(e){return qe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(qe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yG extends nL{constructor(e,t,r,i,a,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,d),this.M=a}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function lH(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:gt(),i=e.targetChange.targetIds||[],a=function(_,w){return _.N?(Ft(void 0===w||"string"==typeof w),ri.fromBase64String(w||"")):(Ft(void 0===w||w instanceof Uint8Array),ri.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,f=d&&function(_){const w=void 0===_.code?ge.UNKNOWN:JP(_.code);return new Fe(w,_.message||"")}(d);t=new XP(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Bl(n,r.document.name),a=wi(r.document.updateTime),d=new rs({mapValue:{fields:r.document.fields}}),f=nr.newFoundDocument(i,a,d);t=new RT(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=Bl(n,r.document),a=r.readTime?wi(r.readTime):Nt.min(),d=nr.newNoDocument(i,a);t=new RT([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,i=Bl(n,r.document);t=new RT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return gt();{const r=e.filter,a=new Yj(r.count||0);t=new QP(r.targetId,a)}}var _;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return Nt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Nt.min():a.readTime?wi(a.readTime):Nt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=jv(this.M),t.addTarget=function(i,a){let d;const f=a.target;return d=IT(f)?{documents:uF(i,f)}:{query:cF(i,f)},d.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?d.resumeToken=rF(i,a.resumeToken):a.snapshotVersion.compareTo(Nt.min())>0&&(d.readTime=Vv(i,a.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function cH(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return gt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=jv(this.M),t.removeTarget=e,this.Lo(t)}}class vG extends nL{constructor(e,t,r,i,a,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,d),this.M=a,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Ft(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function uH(n,e){return n&&n.length>0?(Ft(void 0!==e),n.map(t=>function(r,i){let a=wi(r.updateTime?r.updateTime:i);return a.isEqual(Nt.min())&&(a=wi(i)),new Zj(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=wi(e.commitTime);return this.listener.tu(r,t)}return Ft(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=jv(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Hv(this.M,r))};this.Lo(t)}}class bG extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new Fe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.So.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Fe(ge.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.So._o(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Fe(ge.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class wG{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?($r(t),this.uu=!1):qe("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class TG{constructor(e,t,r,i,a){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr(f=>{r.enqueueAndForget((0,Y.Z)(function*(){var _;wd(d)&&(qe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,Y.Z)(function*(w){const I=st(w);I.wu.add(4),yield om(I),I.yu.set("Unknown"),I.wu.delete(4),yield Qv(I)}),function(w){return _.apply(this,arguments)})(d))}))}),this.yu=new wG(r,i)}}function Qv(n){return hN.apply(this,arguments)}function hN(){return hN=(0,Y.Z)(function*(n){if(wd(n))for(const e of n.mu)yield e(!0)}),hN.apply(this,arguments)}function om(n){return fN.apply(this,arguments)}function fN(){return fN=(0,Y.Z)(function*(n){for(const e of n.mu)yield e(!1)}),fN.apply(this,arguments)}function WT(n,e){const t=st(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),mN(t)?gN(t):lm(t).Mo()&&pN(t,e))}function Xv(n,e){const t=st(n),r=lm(t);t._u.delete(e),r.Mo()&&rL(t,e),0===t._u.size&&(r.Mo()?r.$o():wd(t)&&t.yu.set("Unknown"))}function pN(n,e){n.pu.Z(e.targetId),lm(n).Ho(e)}function rL(n,e){n.pu.Z(e),lm(n).Jo(e)}function gN(n){n.pu=new nH({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),lm(n).start(),n.yu.au()}function mN(n){return wd(n)&&!lm(n).ko()&&n._u.size>0}function wd(n){return 0===st(n).wu.size}function iL(n){n.pu=void 0}function DG(n){return _N.apply(this,arguments)}function _N(){return _N=(0,Y.Z)(function*(n){n._u.forEach((e,t)=>{pN(n,e)})}),_N.apply(this,arguments)}function EG(n,e){return yN.apply(this,arguments)}function yN(){return yN=(0,Y.Z)(function*(n,e){iL(n),mN(n)?(n.yu.lu(e),gN(n)):n.yu.set("Unknown")}),yN.apply(this,arguments)}function CG(n,e,t){return vN.apply(this,arguments)}function vN(){return vN=(0,Y.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof XP&&2===e.state&&e.cause)try{yield(r=(0,Y.Z)(function*(i,a){const d=a.cause;for(const f of a.targetIds)i._u.has(f)&&(yield i.remoteSyncer.rejectListen(f,d),i._u.delete(f),i.pu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){qe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ZT(n,r)}else if(e instanceof RT?n.pu.ut(e):e instanceof QP?n.pu._t(e):n.pu.ht(e),!t.isEqual(Nt.min()))try{const r=yield WF(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const d=i.pu.yt(a);return d.targetChanges.forEach((f,_)=>{if(f.resumeToken.approximateByteSize()>0){const w=i._u.get(_);w&&i._u.set(_,w.withResumeToken(f.resumeToken,a))}}),d.targetMismatches.forEach(f=>{const _=i._u.get(f);if(!_)return;i._u.set(f,_.withResumeToken(ri.EMPTY_BYTE_STRING,_.snapshotVersion)),rL(i,f);const w=new yd(_.target,f,1,_.sequenceNumber);pN(i,w)}),i.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){qe("RemoteStore","Failed to raise snapshot:",r),yield ZT(n,r)}var r}),vN.apply(this,arguments)}function ZT(n,e,t){return bN.apply(this,arguments)}function bN(){return bN=(0,Y.Z)(function*(n,e,t){if(!df(e))throw e;n.wu.add(1),yield om(n),n.yu.set("Offline"),t||(t=()=>WF(n.localStore)),n.asyncQueue.enqueueRetryable((0,Y.Z)(function*(){qe("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Qv(n)}))}),bN.apply(this,arguments)}function sL(n,e){return e().catch(t=>ZT(n,t,e))}function am(n){return wN.apply(this,arguments)}function wN(){return wN=(0,Y.Z)(function*(n){const e=st(n),t=Td(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;IG(e);)try{const i=yield rG(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,SG(e,i)}catch(i){yield ZT(e,i)}oL(e)&&aL(e)}),wN.apply(this,arguments)}function IG(n){return wd(n)&&n.du.length<10}function SG(n,e){n.du.push(e);const t=Td(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function oL(n){return wd(n)&&!Td(n).ko()&&n.du.length>0}function aL(n){Td(n).start()}function AG(n){return TN.apply(this,arguments)}function TN(){return TN=(0,Y.Z)(function*(n){Td(n).nu()}),TN.apply(this,arguments)}function NG(n){return DN.apply(this,arguments)}function DN(){return DN=(0,Y.Z)(function*(n){const e=Td(n);for(const t of n.du)e.Zo(t.mutations)}),DN.apply(this,arguments)}function MG(n,e,t){return EN.apply(this,arguments)}function EN(){return EN=(0,Y.Z)(function*(n,e,t){const r=n.du.shift(),i=GA.from(r,e,t);yield sL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield am(n)}),EN.apply(this,arguments)}function xG(n,e){return CN.apply(this,arguments)}function CN(){return CN=(0,Y.Z)(function*(n,e){var t;e&&Td(n).Xo&&(yield(t=(0,Y.Z)(function*(r,i){if(YP(a=i.code)&&a!==ge.ABORTED){const d=r.du.shift();Td(r).Fo(),yield sL(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,i)),yield am(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),oL(n)&&aL(n)}),CN.apply(this,arguments)}function lL(n,e){return IN.apply(this,arguments)}function IN(){return IN=(0,Y.Z)(function*(n,e){const t=st(n);t.asyncQueue.verifyOperationInProgress(),qe("RemoteStore","RemoteStore received new credentials");const r=wd(t);t.wu.add(3),yield om(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Qv(t)}),IN.apply(this,arguments)}function SN(n,e){return AN.apply(this,arguments)}function AN(){return AN=(0,Y.Z)(function*(n,e){const t=st(n);e?(t.wu.delete(2),yield Qv(t)):e||(t.wu.add(2),yield om(t),t.yu.set("Unknown"))}),AN.apply(this,arguments)}function lm(n){return n.Iu||(n.Iu=function(e,t,r){const i=st(e);return i.iu(),new yG(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:DG.bind(null,n),eo:EG.bind(null,n),zo:CG.bind(null,n)}),n.mu.push(function(){var e=(0,Y.Z)(function*(t){t?(n.Iu.Fo(),mN(n)?gN(n):n.yu.set("Unknown")):(yield n.Iu.stop(),iL(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Td(n){return n.Tu||(n.Tu=function(e,t,r){const i=st(e);return i.iu(),new vG(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:AG.bind(null,n),eo:xG.bind(null,n),eu:NG.bind(null,n),tu:MG.bind(null,n)}),n.mu.push(function(){var e=(0,Y.Z)(function*(t){t?(n.Tu.Fo(),yield am(n)):(yield n.Tu.stop(),n.du.length>0&&(qe("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class NN{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,i,a){const d=Date.now()+r,f=new NN(e,t,d,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fe(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function um(n,e){if($r("AsyncQueue",`${e}: ${n}`),df(n))return new Fe(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class cm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||tt.comparator(t.key,r.key):(t,r)=>tt.comparator(t.key,r.key),this.keyedMap=LA(),this.sortedSet=new Or(this.comparator)}static emptySet(e){return new cm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof cm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new cm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class uL{constructor(){this.Eu=new Or(tt.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):gt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class dm{constructor(e,t,r,i,a,d,f,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(d=>{a.push({type:0,doc:d})}),new dm(e,t,cm.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class RG{constructor(){this.Ru=void 0,this.listeners=[]}}class OG{constructor(){this.queries=new _d(e=>kP(e),Rv),this.onlineState="Unknown",this.bu=new Set}}function MN(n,e){return xN.apply(this,arguments)}function xN(){return xN=(0,Y.Z)(function*(n,e){const t=st(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new RG),i)try{a.Ru=yield t.onListen(r)}catch(d){const f=um(d,`Initialization of query '${OA(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Pu(t.onlineState),a.Ru&&e.Vu(a.Ru)&&kN(t)}),xN.apply(this,arguments)}function RN(n,e){return ON.apply(this,arguments)}function ON(){return ON=(0,Y.Z)(function*(n,e){const t=st(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const d=a.listeners.indexOf(e);d>=0&&(a.listeners.splice(d,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),ON.apply(this,arguments)}function kG(n,e){const t=st(n);let r=!1;for(const i of e){const d=t.queries.get(i.query);if(d){for(const f of d.listeners)f.Vu(i)&&(r=!0);d.Ru=i}}r&&kN(t)}function PG(n,e,t){const r=st(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function kN(n){n.bu.forEach(e=>{e.next()})}class PN{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new dm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=dm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class FG{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class cL{constructor(e){this.M=e}wi(e){return Bl(this.M,e)}mi(e){return e.metadata.exists?lF(this.M,e.document,!1):nr.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return wi(e)}}class LG{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=dL(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=fn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new cL(this.M);for(const i of e)if(i.metadata.queries){const a=r.wi(i.metadata.name);for(const d of i.metadata.queries){const f=(t.get(d)||In()).add(a);t.set(d,f)}}return t}complete(){var e=this;return(0,Y.Z)(function*(){const t=yield function iG(n,e,t,r){return rN.apply(this,arguments)}(e.localStore,new cL(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const i of e.queries)yield sG(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function dL(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class hL{constructor(e){this.key=e}}class fL{constructor(e){this.key=e}}class pL{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=In(),this.mutatedKeys=In(),this.Gu=FP(e),this.Qu=new cm(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new uL,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,d=i,f=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,A)=>{const P=i.get(I),L=kA(this.query,A)?A:null,Z=!!P&&this.mutatedKeys.has(P.key),se=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let Ie=!1;P&&L?P.data.isEqual(L.data)?Z!==se&&(r.track({type:3,doc:L}),Ie=!0):this.Hu(P,L)||(r.track({type:2,doc:L}),Ie=!0,(_&&this.Gu(L,_)>0||w&&this.Gu(L,w)<0)&&(f=!0)):!P&&L?(r.track({type:0,doc:L}),Ie=!0):P&&!L&&(r.track({type:1,doc:P}),Ie=!0,(_||w)&&(f=!0)),Ie&&(L?(d=d.add(L),a=se?a.add(I):a.delete(I)):(d=d.delete(I),a=a.delete(I)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const I="F"===this.query.limitType?d.last():d.first();d=d.delete(I.key),a=a.delete(I.key),r.track({type:1,doc:I})}return{Qu:d,zu:r,ii:f,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Au();a.sort((w,I)=>function(A,P){const L=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt()}};return L(A)-L(P)}(w.type,I.type)||this.Gu(w.doc,I.doc)),this.Ju(r);const d=t?this.Yu():[],f=0===this.Ku.size&&this.current?1:0,_=f!==this.qu;return this.qu=f,0!==a.length||_?{snapshot:new dm(this.query,e.Qu,i,a,e.mutatedKeys,0===f,_,!1),Xu:d}:{Xu:d}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new uL,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=In(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new fL(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new hL(r))}),t}ta(e){this.Uu=e._i,this.Ku=In();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return dm.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class BG{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class VG{constructor(e){this.key=e,this.na=!1}}class UG{constructor(e,t,r,i,a,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=d,this.sa={},this.ia=new _d(f=>kP(f),Rv),this.ra=new Map,this.oa=new Set,this.ua=new Or(tt.comparator),this.aa=new Map,this.ca=new sN,this.ha={},this.la=new Map,this.fa=yf.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function jG(n,e){return FN.apply(this,arguments)}function FN(){return FN=(0,Y.Z)(function*(n,e){const t=sM(n);let r,i;const a=t.ia.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ea();else{const d=yield im(t.localStore,ca(e));t.isPrimaryClient&&WT(t.remoteStore,d);const f=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,i=yield LN(t,e,r,"current"===f)}return i}),FN.apply(this,arguments)}function LN(n,e,t,r){return BN.apply(this,arguments)}function BN(){return BN=(0,Y.Z)(function*(n,e,t,r){n._a=(I,A,P)=>{return(L=(0,Y.Z)(function*(Z,se,Ie,Ue){let We=se.view.Wu(Ie);We.ii&&(We=yield HT(Z.localStore,se.query,!1).then(({documents:rt})=>se.view.Wu(rt,We)));const Qe=Ue&&Ue.targetChanges.get(se.targetId),je=se.view.applyChanges(We,Z.isPrimaryClient,Qe);return zN(Z,se.targetId,je.Xu),je.snapshot}),function(Z,se,Ie,Ue){return L.apply(this,arguments)})(n,I,A,P);var L};const i=yield HT(n.localStore,e,!0),a=new pL(e,i._i),d=a.Wu(i.documents),f=Bv.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=a.applyChanges(d,n.isPrimaryClient,f);zN(n,t,_.Xu);const w=new BG(e,t,a);return n.ia.set(e,w),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),_.snapshot}),BN.apply(this,arguments)}function HG(n,e){return VN.apply(this,arguments)}function VN(){return VN=(0,Y.Z)(function*(n,e){const t=st(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(a=>!Rv(a,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield sm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Xv(t.remoteStore,r.targetId),hm(t,r.targetId)}).catch(vf))):(hm(t,r.targetId),yield sm(t.localStore,r.targetId,!0))}),VN.apply(this,arguments)}function UN(){return UN=(0,Y.Z)(function*(n,e,t){const r=oM(n);try{const i=yield function(a,d){const f=st(a),_=Rr.now(),w=d.reduce((A,P)=>A.add(P.key),In());let I;return f.persistence.runTransaction("Locally write mutations","readwrite",A=>f.fi.Ks(A,w).next(P=>{I=P;const L=[];for(const Z of d){const se=Kj(Z,I.get(Z.key));null!=se&&L.push(new cf(Z.key,se,TP(se.value.mapValue),qr.exists(!0)))}return f.Bs.addMutationBatch(A,_,L,d)})).then(A=>(A.applyToLocalDocumentSet(I),{batchId:A.batchId,changes:I}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,d,f){let _=a.ha[a.currentUser.toKey()];_||(_=new Or(Yt)),_=_.insert(d,f),a.ha[a.currentUser.toKey()]=_}(r,i.batchId,t),yield Fu(r,i.changes),yield am(r.remoteStore)}catch(i){const a=um(i,"Failed to persist write");t.reject(a)}}),UN.apply(this,arguments)}function gL(n,e){return jN.apply(this,arguments)}function jN(){return jN=(0,Y.Z)(function*(n,e){const t=st(n);try{const r=yield nG(t.localStore,e);e.targetChanges.forEach((i,a)=>{const d=t.aa.get(a);d&&(Ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?d.na=!0:i.modifiedDocuments.size>0?Ft(d.na):i.removedDocuments.size>0&&(Ft(d.na),d.na=!1))}),yield Fu(t,r,e)}catch(r){yield vf(r)}}),jN.apply(this,arguments)}function mL(n,e,t){const r=st(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((a,d)=>{const f=d.view.Pu(e);f.snapshot&&i.push(f.snapshot)}),function(a,d){const f=st(a);f.onlineState=d;let _=!1;f.queries.forEach((w,I)=>{for(const A of I.listeners)A.Pu(d)&&(_=!0)}),_&&kN(f)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function $G(n,e,t){return HN.apply(this,arguments)}function HN(){return HN=(0,Y.Z)(function*(n,e,t){const r=st(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),a=i&&i.key;if(a){let d=new Or(tt.comparator);d=d.insert(a,nr.newNoDocument(a,Nt.min()));const f=In().add(a),_=new Lv(Nt.min(),new Map,new zn(Yt),d,f);yield gL(r,_),r.ua=r.ua.remove(a),r.aa.delete(e),KN(r)}else yield sm(r.localStore,e,!1).then(()=>hm(r,e,t)).catch(vf)}),HN.apply(this,arguments)}function qG(n,e){return GN.apply(this,arguments)}function GN(){return GN=(0,Y.Z)(function*(n,e){const t=st(n),r=e.batch.batchId;try{const i=yield tG(t.localStore,e);ZN(t,r,null),WN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Fu(t,i)}catch(i){yield vf(i)}}),GN.apply(this,arguments)}function WG(n,e,t){return $N.apply(this,arguments)}function $N(){return $N=(0,Y.Z)(function*(n,e,t){const r=st(n);try{const i=yield function(a,d){const f=st(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return f.Bs.lookupMutationBatch(_,d).next(I=>(Ft(null!==I),w=I.keys(),f.Bs.removeMutationBatch(_,I))).next(()=>f.Bs.performConsistencyCheck(_)).next(()=>f.fi.Ks(_,w))})}(r.localStore,e);ZN(r,e,t),WN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Fu(r,i)}catch(i){yield vf(i)}}),$N.apply(this,arguments)}function qN(){return qN=(0,Y.Z)(function*(n,e){const t=st(n);wd(t.remoteStore)||qe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const d=st(a);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>d.Bs.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.la.get(r)||[];i.push(e),t.la.set(r,i)}catch(r){const i=um(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),qN.apply(this,arguments)}function WN(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function ZN(n,e,t){const r=st(n);let i=r.ha[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function hm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||_L(n,r)})}function _L(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(Xv(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),KN(n))}function zN(n,e,t){for(const r of t)r instanceof hL?(n.ca.addReference(r.key,e),zG(n,r)):r instanceof fL?(qe("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||_L(n,r.key)):gt()}function zG(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(qe("SyncEngine","New document in limbo: "+t),n.oa.add(r),KN(n))}function KN(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new tt(fn.fromString(e)),r=n.fa.next();n.aa.set(r,new VG(t)),n.ua=n.ua.insert(t,r),WT(n.remoteStore,new yd(ca(Kg(t.path)),r,2,Co.A))}}function Fu(n,e,t){return YN.apply(this,arguments)}function YN(){return YN=(0,Y.Z)(function*(n,e,t){const r=st(n),i=[],a=[],d=[];var f;r.ia.isEmpty()||(r.ia.forEach((f,_)=>{d.push(r._a(_,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w.fromCache?"not-current":"current"),i.push(w);const I=eN.Ys(_.targetId,w);a.push(I)}}))}),yield Promise.all(d),r.sa.zo(i),yield(f=(0,Y.Z)(function*(_,w){const I=st(_);try{yield I.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>ve.forEach(w,P=>ve.forEach(P.Hs,L=>I.persistence.referenceDelegate.addReference(A,P.targetId,L)).next(()=>ve.forEach(P.Js,L=>I.persistence.referenceDelegate.removeReference(A,P.targetId,L)))))}catch(A){if(!df(A))throw A;qe("LocalStore","Failed to update sequence numbers: "+A)}for(const A of w){const P=A.targetId;if(!A.fromCache){const L=I.ui.get(P),se=L.withLastLimboFreeSnapshotVersion(L.snapshotVersion);I.ui=I.ui.insert(P,se)}}}),function(_,w){return f.apply(this,arguments)})(r.localStore,a))}),YN.apply(this,arguments)}function KG(n,e){return JN.apply(this,arguments)}function JN(){return JN=(0,Y.Z)(function*(n,e){const t=st(n);if(!t.currentUser.isEqual(e)){qe("SyncEngine","User change. New user:",e.toKey());const r=yield qF(t.localStore,e);t.currentUser=e,(i=t).la.forEach(d=>{d.forEach(f=>{f.reject(new Fe(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Fu(t,r.di)}var i}),JN.apply(this,arguments)}function YG(n,e){const t=st(n),r=t.aa.get(e);if(r&&r.na)return In().add(r.key);{let i=In();const a=t.ra.get(e);if(!a)return i;for(const d of a){const f=t.ia.get(d);i=i.unionWith(f.view.ju)}return i}}function JG(n,e){return QN.apply(this,arguments)}function QN(){return QN=(0,Y.Z)(function*(n,e){const t=st(n),r=yield HT(t.localStore,e.query,!0),i=e.view.ta(r);return t.isPrimaryClient&&zN(t,e.targetId,i.Xu),i}),QN.apply(this,arguments)}function QG(n,e){return XN.apply(this,arguments)}function XN(){return XN=(0,Y.Z)(function*(n,e){const t=st(n);return KF(t.localStore,e).then(r=>Fu(t,r))}),XN.apply(this,arguments)}function XG(n,e,t,r){return eM.apply(this,arguments)}function eM(){return eM=(0,Y.Z)(function*(n,e,t,r){const i=st(n),a=yield function(d,f){const _=st(d),w=st(_.Bs);return _.persistence.runTransaction("Lookup mutation documents","readonly",I=>w.fn(I,f).next(A=>A?_.fi.Ks(I,A):ve.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield am(i.remoteStore):"acknowledged"===t||"rejected"===t?(ZN(i,e,r||null),WN(i,e),f=e,st(st(i.localStore).Bs)._n(f)):gt(),yield Fu(i,a)):qe("SyncEngine","Cannot apply mutation batch with id: "+e)}),eM.apply(this,arguments)}function tM(){return tM=(0,Y.Z)(function*(n,e){const t=st(n);if(sM(t),oM(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield yL(t,r.toArray());t.da=!0,yield SN(t.remoteStore,!0);for(const a of i)WT(t.remoteStore,a)}else if(!1===e&&!1!==t.da){const r=[];let i=Promise.resolve();t.ra.forEach((a,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):i=i.then(()=>(hm(t,d),sm(t.localStore,d,!0))),Xv(t.remoteStore,d)}),yield i,yield yL(t,r),function(a){const d=st(a);d.aa.forEach((f,_)=>{Xv(d.remoteStore,_)}),d.ca.Si(),d.aa=new Map,d.ua=new Or(tt.comparator)}(t),t.da=!1,yield SN(t.remoteStore,!1)}}),tM.apply(this,arguments)}function yL(n,e,t){return nM.apply(this,arguments)}function nM(){return nM=(0,Y.Z)(function*(n,e,t){const r=st(n),i=[],a=[];for(const d of e){let f;const _=r.ra.get(d);if(_&&0!==_.length){f=yield im(r.localStore,ca(_[0]));for(const w of _){const I=r.ia.get(w),A=yield JG(r,I);A.snapshot&&a.push(A.snapshot)}}else{const w=yield zF(r.localStore,d);f=yield im(r.localStore,w),yield LN(r,vL(w),d,!1)}i.push(f)}return r.sa.zo(a),i}),nM.apply(this,arguments)}function vL(n){return RP(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function t3(n){const e=st(n);return st(st(e.localStore).persistence).Fs()}function n3(n,e,t,r){return rM.apply(this,arguments)}function rM(){return rM=(0,Y.Z)(function*(n,e,t,r){const i=st(n);if(i.da)return void qe("SyncEngine","Ignoring unexpected query state notification.");const a=i.ra.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const d=yield KF(i.localStore,PP(a[0])),f=Lv.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Fu(i,d,f);break}case"rejected":yield sm(i.localStore,e,!0),hm(i,e,r);break;default:gt()}}),rM.apply(this,arguments)}function r3(n,e,t){return iM.apply(this,arguments)}function iM(){return iM=(0,Y.Z)(function*(n,e,t){const r=sM(n);if(r.da){for(const i of e){if(r.ra.has(i)){qe("SyncEngine","Adding an already active target "+i);continue}const a=yield zF(r.localStore,i),d=yield im(r.localStore,a);yield LN(r,vL(a),d.targetId,!1),WT(r.remoteStore,d)}for(const i of t)r.ra.has(i)&&(yield sm(r.localStore,i,!1).then(()=>{Xv(r.remoteStore,i),hm(r,i)}).catch(vf))}}),iM.apply(this,arguments)}function sM(n){const e=st(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=gL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$G.bind(null,e),e.sa.zo=kG.bind(null,e.eventManager),e.sa.wa=PG.bind(null,e.eventManager),e}function oM(n){const e=st(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WG.bind(null,e),e}class bL{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Y.Z)(function*(){t.M=Jv(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return $F(this.persistence,new GF,e.initialUser,this.M)}ya(e){return new hG(oN.Yi,this.M)}ga(e){return new XF}terminate(){var e=this;return(0,Y.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class wL extends bL{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Y.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield oM(r.Ta.syncEngine),yield am(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return $F(this.persistence,new GF,e.initialUser,this.M)}pa(e){return new ZH(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=XA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ks.withCacheSize(this.cacheSizeBytes):Ks.DEFAULT;return new QA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,tL(),qT(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new XF}}class o3 extends wL{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Y.Z)(function*(){yield t().call(r,e);const i=r.Ta.syncEngine;r.sharedClientState instanceof cN&&(r.sharedClientState.syncEngine={$r:XG.bind(null,i),Br:n3.bind(null,i),Lr:r3.bind(null,i),Fs:t3.bind(null,i),Fr:QG.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var a=(0,Y.Z)(function*(d){yield function e3(n,e){return tM.apply(this,arguments)}(r.Ta.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return a.apply(this,arguments)}}())})()}ga(e){const t=tL();if(!cN.vt(t))throw new Fe(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=XA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new cN(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class aM{initialize(e,t){var r=this;return(0,Y.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>mL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=KG.bind(null,r.syncEngine),yield SN(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new OG}createDatastore(e){const t=Jv(e.databaseInfo.databaseId),r=new _G(e.databaseInfo);return new bG(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>mL(this.syncEngine,f,0),d=eL.vt()?new eL:new pG,new TG(t,r,i,a,d);var t,r,i,a,d}createSyncEngine(e,t){return function(r,i,a,d,f,_,w){const I=new UG(r,i,a,d,f,_);return w&&(I.da=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Y.Z)(function*(t){const r=st(t);qe("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield om(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function TL(n,e=10240){let t=0;return{read:()=>(0,Y.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Y.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class zT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class a3{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new bi,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,Y.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,Y.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,Y.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),i=Number(r);isNaN(i)&&e.va(`length string (${r}) is not valid number`);const a=yield e.Sa(i);return new FG(JSON.parse(a),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,Y.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,Y.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,Y.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class l3{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Y.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Fe(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Y.Z)(function*(a,d){const f=st(a),_=jv(f.M)+"/documents",w={documents:d.map(L=>Uv(f.M,L))},I=yield f._o("BatchGetDocuments",_,w),A=new Map;I.forEach(L=>{const Z=function aH(n,e){return"found"in e?function(t,r){Ft(!!r.found);const i=Bl(t,r.found.name),a=wi(r.found.updateTime),d=new rs({mapValue:{fields:r.found.fields}});return nr.newFoundDocument(i,a,d)}(n,e):"missing"in e?function(t,r){Ft(!!r.missing),Ft(!!r.readTime);const i=Bl(t,r.missing),a=wi(r.readTime);return nr.newNoDocument(i,a)}(n,e):gt()}(f.M,L);A.set(Z.key.toString(),Z)});const P=[];return d.forEach(L=>{const Z=A.get(L.toString());Ft(!!Z),P.push(Z)}),P}),function(a,d){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Pv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Y.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=tt.fromPath(i);e.mutations.push(new FA(a,e.precondition(a)))}),yield(r=(0,Y.Z)(function*(i,a){const d=st(i),f=jv(d.M)+"/documents",_={writes:a.map(w=>Hv(d.M,w))};yield d.co("Commit",f,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw gt();t=Nt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Fe(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?qr.updateTime(t):qr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Nt.min()))throw new Fe(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qr.updateTime(t)}return qr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class u3{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new dN(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,Y.Z)(function*(){const t=new l3(e.datastore),r=e.ka(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Ma(a)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!Cv(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!YP(t)}return!1}}class c3{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Fi.UNAUTHENTICATED,this.clientId=cP.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,Y.Z)(function*(f){qe("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(qe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,Y.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Y.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=um(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function DL(n,e){return lM.apply(this,arguments)}function lM(){return lM=(0,Y.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),qe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Y.Z)(function*(a){r.isEqual(a)||(yield qF(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),lM.apply(this,arguments)}function EL(n,e){return uM.apply(this,arguments)}function uM(){return uM=(0,Y.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield cM(n);qe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>lL(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>lL(e.remoteStore,a)),n.onlineComponents=e}),uM.apply(this,arguments)}function cM(n){return dM.apply(this,arguments)}function dM(){return dM=(0,Y.Z)(function*(n){return n.offlineComponents||(qe("FirestoreClient","Using default OfflineComponentProvider"),yield DL(n,new bL)),n.offlineComponents}),dM.apply(this,arguments)}function KT(n){return hM.apply(this,arguments)}function hM(){return hM=(0,Y.Z)(function*(n){return n.onlineComponents||(qe("FirestoreClient","Using default OnlineComponentProvider"),yield EL(n,new aM)),n.onlineComponents}),hM.apply(this,arguments)}function CL(n){return cM(n).then(e=>e.persistence)}function fM(n){return cM(n).then(e=>e.localStore)}function IL(n){return KT(n).then(e=>e.remoteStore)}function pM(n){return KT(n).then(e=>e.syncEngine)}function fm(n){return gM.apply(this,arguments)}function gM(){return gM=(0,Y.Z)(function*(n){const e=yield KT(n),t=e.eventManager;return t.onListen=jG.bind(null,e.syncEngine),t.onUnlisten=HG.bind(null,e.syncEngine),t}),gM.apply(this,arguments)}function SL(n,e,t={}){const r=new bi;return n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return function(i,a,d,f,_){const w=new zT({next:A=>{a.enqueueAndForget(()=>RN(i,I));const P=A.docs.has(d);!P&&A.fromCache?_.reject(new Fe(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&A.fromCache&&f&&"server"===f.source?_.reject(new Fe(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(A)},error:A=>_.reject(A)}),I=new PN(Kg(d.path),w,{includeMetadataChanges:!0,ku:!0});return MN(i,I)}(yield fm(n),n.asyncQueue,e,t,r)})),r.promise}function AL(n,e,t={}){const r=new bi;return n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return function(i,a,d,f,_){const w=new zT({next:A=>{a.enqueueAndForget(()=>RN(i,I)),A.fromCache&&"server"===f.source?_.reject(new Fe(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(A)},error:A=>_.reject(A)}),I=new PN(d,w,{includeMetadataChanges:!0,ku:!0});return MN(i,I)}(yield fm(n),n.asyncQueue,e,t,r)})),r.promise}const NL=new Map;function mM(n,e,t){if(!t)throw new Fe(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ML(n,e,t,r){if(!0===e&&!0===r)throw new Fe(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function xL(n){if(!tt.isDocumentKey(n))throw new Fe(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function RL(n){if(tt.isDocumentKey(n))throw new Fe(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function YT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":gt()}function ln(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Fe(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=YT(n);throw new Fe(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function OL(n,e){if(e<=0)throw new Fe(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class kL{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Fe(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Fe(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,ML("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class e0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kL({}),this._settingsFrozen=!1,e instanceof ku?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Fe(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ku(i.options.projectId)}(e))}get app(){if(!this._app)throw new Fe(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Fe(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kL(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new yj;switch(t.type){case"gapi":const r=t.client;return Ft(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Tj(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Fe(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=NL.get(e);t&&(qe("ComponentProvider","Removing Datastore"),NL.delete(e),t.terminate())}(this),Promise.resolve()}}class rr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ul(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rr(this.firestore,e,this._key)}}class is{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new is(this.firestore,e,this._query)}}class Ul extends is{constructor(e,t,r){super(e,t,Kg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rr(this.firestore,null,new tt(e))}withConverter(e){return new Ul(this.firestore,e,this._path)}}function PL(n,e,...t){if(n=(0,Ot.m9)(n),mM("collection","path",e),n instanceof e0){const r=fn.fromString(e,...t);return RL(r),new Ul(n,null,r)}{if(!(n instanceof rr||n instanceof Ul))throw new Fe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return RL(r),new Ul(n.firestore,null,r)}}function JT(n,e,...t){if(n=(0,Ot.m9)(n),1===arguments.length&&(e=cP.R()),mM("doc","path",e),n instanceof e0){const r=fn.fromString(e,...t);return xL(r),new rr(n,null,new tt(r))}{if(!(n instanceof rr||n instanceof Ul))throw new Fe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return xL(r),new rr(n.firestore,n instanceof Ul?n.converter:null,new tt(r))}}function FL(n,e){return n=(0,Ot.m9)(n),e=(0,Ot.m9)(e),(n instanceof rr||n instanceof Ul)&&(e instanceof rr||e instanceof Ul)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function LL(n,e){return n=(0,Ot.m9)(n),e=(0,Ot.m9)(e),n instanceof is&&e instanceof is&&n.firestore===e.firestore&&Rv(n._query,e._query)&&n.converter===e.converter}class w3{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new dN(this,"async_queue_retry"),this.Qa=()=>{const t=qT();t&&qe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=qT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=qT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new bi;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,Y.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!df(t))throw t;qe("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,$r("INTERNAL UNHANDLED ERROR: ",function(a){let d=a.message||"";return a.stack&&(d=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),d}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=NN.createAndSchedule(this,e,t,r,a=>this.Ha(a));return this.La.push(i),i}ja(){this.Ua&&gt()}verifyOperationInProgress(){}Ja(){var e=this;return(0,Y.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function _M(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class T3{constructor(){this._progressObserver={},this._taskCompletionResolver=new bi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class lr extends e0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new w3,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||BL(this),this._firestoreClient.terminate()}}function Zr(n){return n._firestoreClient||BL(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function BL(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Aj(n._databaseId,a,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var a,f;n._firestoreClient=new c3(n._authCredentials,n._appCheckCredentials,n._queue,r)}function VL(n,e,t){const r=new bi;return n.asyncQueue.enqueue((0,Y.Z)(function*(){try{yield DL(n,t),yield EL(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===ge.FAILED_PRECONDITION||a.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function UL(n){if(n._initialized||n._terminated)throw new Fe(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Lu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Fe(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ni(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class jl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jl(ri.fromBase64String(e))}catch(t){throw new Fe(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new jl(ri.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class wf{constructor(e){this._methodName=e}}class QT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Yt(this._lat,e._lat)||Yt(this._long,e._long)}}const R3=/^__.*__$/;class O3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new cf(e,this.data,this.fieldMask,t,this.fieldTransforms):new kv(e,this.data,t,this.fieldTransforms)}}class jL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new cf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function HL(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt()}}class XT{constructor(e,t,r,i,a,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=d||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new XT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return nD(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(HL(this.ec)&&R3.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class k3{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Jv(e)}lc(e,t,r,i=!1){return new XT({ec:e,methodName:t,hc:r,path:ni.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Tf(n){const e=n._freezeSettings(),t=Jv(n._databaseId);return new k3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function eD(n,e,t,r,i,a={}){const d=n.lc(a.merge||a.mergeFields?2:0,e,t,i);wM("Data must be an object, but it was:",d,r);const f=qL(r,d);let _,w;if(a.merge)_=new qg(d.fieldMask),w=d.fieldTransforms;else if(a.mergeFields){const I=[];for(const A of a.mergeFields){const P=TM(e,A,t);if(!d.contains(P))throw new Fe(ge.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);ZL(I,P)||I.push(P)}_=new qg(I),w=d.fieldTransforms.filter(A=>_.covers(A.field))}else _=null,w=d.fieldTransforms;return new O3(new rs(f),_,w)}class t0 extends wf{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t0}}function GL(n,e,t){return new XT({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class yM extends wf{_toFieldTransform(e){return new Ov(e.path,new Jg)}isEqual(e){return e instanceof yM}}class P3 extends wf{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=GL(this,e,!0),r=this.fc.map(a=>Df(a,t)),i=new lf(r);return new Ov(e.path,i)}isEqual(e){return this===e}}class F3 extends wf{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=GL(this,e,!0),r=this.fc.map(a=>Df(a,t)),i=new uf(r);return new Ov(e.path,i)}isEqual(e){return this===e}}class L3 extends wf{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Qg(e.M,VP(e.M,this.dc));return new Ov(e.path,t)}isEqual(e){return this===e}}function vM(n,e,t,r){const i=n.lc(1,e,t);wM("Data must be an object, but it was:",i,r);const a=[],d=rs.empty();ef(r,(_,w)=>{const I=tD(e,_,t);w=(0,Ot.m9)(w);const A=i.oc(I);if(w instanceof t0)a.push(I);else{const P=Df(w,A);null!=P&&(a.push(I),d.set(I,P))}});const f=new qg(a);return new jL(d,f,i.fieldTransforms)}function bM(n,e,t,r,i,a){const d=n.lc(1,e,t),f=[TM(e,r,t)],_=[i];if(a.length%2!=0)throw new Fe(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)f.push(TM(e,a[P])),_.push(a[P+1]);const w=[],I=rs.empty();for(let P=f.length-1;P>=0;--P)if(!ZL(w,f[P])){const L=f[P];let Z=_[P];Z=(0,Ot.m9)(Z);const se=d.oc(L);if(Z instanceof t0)w.push(L);else{const Ie=Df(Z,se);null!=Ie&&(w.push(L),I.set(L,Ie))}}const A=new qg(w);return new jL(I,A,d.fieldTransforms)}function $L(n,e,t,r=!1){return Df(t,n.lc(r?4:3,e))}function Df(n,e){if(WL(n=(0,Ot.m9)(n)))return wM("Unsupported field value:",e,n),qL(n,e);if(n instanceof wf)return function(t,r){if(!HL(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const d of t){let f=Df(d,r.uc(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Ot.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return VP(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Rr.fromDate(t);return{timestampValue:Vv(r.M,i)}}if(t instanceof Rr){const i=new Rr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Vv(r.M,i)}}if(t instanceof QT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof jl)return{bytesValue:rF(r.M,t._byteString)};if(t instanceof rr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ac(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:BA(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${YT(t)}`)}(n,e)}function qL(n,e){const t={};return fP(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ef(n,(r,i)=>{const a=Df(i,e.sc(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function WL(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Rr||n instanceof QT||n instanceof jl||n instanceof rr||n instanceof wf)}function wM(n,e,t){if(!WL(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=YT(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function TM(n,e,t){if((e=(0,Ot.m9)(e))instanceof Lu)return e._internalPath;if("string"==typeof e)return tD(n,e);throw nD("Field path arguments must be of type string or ",n,!1,void 0,t)}const B3=new RegExp("[~\\*/\\[\\]]");function tD(n,e,t){if(e.search(B3)>=0)throw nD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lu(...e.split("."))._internalPath}catch(r){throw nD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function nD(n,e,t,r,i){const a=r&&!r.isEmpty(),d=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let _="";return(a||d)&&(_+=" (found",a&&(_+=` in field ${r}`),d&&(_+=` in document ${i}`),_+=")"),new Fe(ge.INVALID_ARGUMENT,f+n+_)}function ZL(n,e){return n.some(t=>t.isEqual(e))}class n0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new rr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new V3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class V3 extends n0{data(){return super.data()}}function rD(n,e){return"string"==typeof e?tD(n,e):e instanceof Lu?e._internalPath:e._delegate._internalPath}class Ef{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bu extends n0{constructor(e,t,r,i,a,d){super(e,t,r,i,d),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new r0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(rD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class r0 extends Bu{data(e={}){return super.data(e)}}class Dd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ef(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new r0(this._firestore,this._userDataWriter,r.key,r,new Ef(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new r0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ef(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>i||3!==d.type).map(d=>{const f=new r0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ef(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==d.type&&(_=a.indexOf(d.doc.key),a=a.delete(d.doc.key)),1!==d.type&&(a=a.add(d.doc),w=a.indexOf(d.doc.key)),{type:U3(d.type),doc:f,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function U3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt()}}function zL(n,e){return n instanceof Bu&&e instanceof Bu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Dd&&e instanceof Dd&&n._firestore===e._firestore&&LL(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function KL(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Fe(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class s0{}function Ed(n,...e){for(const t of e)n=t._apply(n);return n}class j3 extends s0{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=Tf(e.firestore),r=function(i,a,d,f,_,w,I){let A;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Fe(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){t2(I,w);const L=[];for(const Z of I)L.push(e2(f,i,Z));A={arrayValue:{values:L}}}else A=e2(f,i,I)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||t2(I,w),A=$L(d,"where",I,"in"===w||"not-in"===w);const P=Bi.create(_,w,A);return function(L,Z){if(Z.S()){const Ie=xA(L);if(null!==Ie&&!Ie.isEqual(Z.field))throw new Fe(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ie.toString()}' and '${Z.field.toString()}'`);const Ue=MA(L);null!==Ue&&n2(0,Z.field,Ue)}const se=function(Ie,Ue){for(const We of Ie.filters)if(Ue.indexOf(We.op)>=0)return We.op;return null}(L,function(Ie){switch(Ie){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Z.op));if(null!==se)throw new Fe(ge.INVALID_ARGUMENT,se===Z.op?`Invalid query. You cannot use more than one '${Z.op.toString()}' filter.`:`Invalid query. You cannot use '${Z.op.toString()}' filters with '${se.toString()}' filters.`)}(i,P),P}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new is(e.firestore,e.converter,function(i,a){const d=i.filters.concat([a]);return new Pu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),d,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class G3 extends s0{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Fe(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Fe(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new zg(i,a);return function(f,_){if(null===MA(f)){const w=xA(f);null!==w&&n2(0,w,_.field)}}(r,d),d}(e._query,this._c,this.gc);return new is(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Pu(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class YL extends s0{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new is(e.firestore,e.converter,OP(e._query,this.yc,this.Ic))}}class JL extends s0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=XL(e,this.type,this.Tc,this.Ec);return new is(e.firestore,e.converter,(i=t,new Pu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class QL extends s0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=XL(e,this.type,this.Tc,this.Ec);return new is(e.firestore,e.converter,(i=t,new Pu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function XL(n,e,t,r){if(t[0]=(0,Ot.m9)(t[0]),t[0]instanceof n0)return function(i,a,d,f,_){if(!f)throw new Fe(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const w=[];for(const I of Yg(i))if(I.field.isKeyField())w.push(rf(a,f.key));else{const A=f.data.field(I.field);if(IA(A))throw new Fe(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+I.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const P=I.field.canonicalString();throw new Fe(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}w.push(A)}return new md(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Tf(n.firestore);return function(a,d,f,_,w,I){const A=a.explicitOrderBy;if(w.length>A.length)throw new Fe(ge.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let L=0;L<w.length;L++){const Z=w[L];if(A[L].field.isKeyField()){if("string"!=typeof Z)throw new Fe(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof Z}`);if(!RA(a)&&-1!==Z.indexOf("/"))throw new Fe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${Z}' contains a slash.`);const se=a.path.child(fn.fromString(Z));if(!tt.isDocumentKey(se))throw new Fe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${se}' is not because it contains an odd number of segments.`);const Ie=new tt(se);P.push(rf(d,Ie))}else{const se=$L(f,_,Z);P.push(se)}}return new md(P,I)}(n._query,n.firestore._databaseId,i,e,t,r)}}function e2(n,e,t){if("string"==typeof(t=(0,Ot.m9)(t))){if(""===t)throw new Fe(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RA(e)&&-1!==t.indexOf("/"))throw new Fe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(fn.fromString(t));if(!tt.isDocumentKey(r))throw new Fe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return rf(n,new tt(r))}if(t instanceof rr)return rf(n,t._key);throw new Fe(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${YT(t)}.`)}function t2(n,e){if(!Array.isArray(n)||0===n.length)throw new Fe(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Fe(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function n2(n,e,t){if(!t.isEqual(e))throw new Fe(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const J3={maxAttempts:5};class DM{convertValue(e,t="none"){switch(nf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(tf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw gt()}}convertObject(e,t){const r={};return ef(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new QT(Er(e.latitude),Er(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=pP(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ev(e));default:return null}}convertTimestamp(e){const t=fd(e);return new Rr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=fn.fromString(e);Ft(fF(r));const i=new ku(r.get(1),r.get(3)),a=new tt(r.popFirst(5));return i.isEqual(t)||$r(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function iD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Q3 extends DM{constructor(e){super(),this.firestore=e}convertBytes(e){return new jl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rr(this.firestore,null,t)}}class r2{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Tf(e)}set(e,t,r){this._verifyNotCommitted();const i=Cd(e,this._firestore),a=iD(i.converter,t,r),d=eD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(d.toMutation(i._key,qr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Cd(e,this._firestore);let d;return d="string"==typeof(t=(0,Ot.m9)(t))||t instanceof Lu?bM(this._dataReader,"WriteBatch.update",a._key,t,r,i):vM(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(d.toMutation(a._key,qr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Cd(e,this._firestore);return this._mutations=this._mutations.concat(new Pv(t._key,qr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cd(n,e){if((n=(0,Ot.m9)(n)).firestore!==e)throw new Fe(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Cf extends DM{constructor(e){super(),this.firestore=e}convertBytes(e){return new jl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rr(this.firestore,null,t)}}function s2(n,e,t){n=ln(n,rr);const r=ln(n.firestore,lr),i=iD(n.converter,e,t);return pm(r,[eD(Tf(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,qr.none())])}function o2(n,e,t,...r){n=ln(n,rr);const i=ln(n.firestore,lr),a=Tf(i);let d;return d="string"==typeof(e=(0,Ot.m9)(e))||e instanceof Lu?bM(a,"updateDoc",n._key,e,t,r):vM(a,"updateDoc",n._key,e),pm(i,[d.toMutation(n._key,qr.exists(!0))])}function a2(n,...e){var t,r,i;n=(0,Ot.m9)(n);let a={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||_M(e[d])||(a=e[d],d++);const f={includeMetadataChanges:a.includeMetadataChanges};if(_M(e[d])){const A=e[d];e[d]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[d+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[d+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let _,w,I;if(n instanceof rr)w=ln(n.firestore,lr),I=Kg(n._key.path),_={next:A=>{e[d]&&e[d](EM(w,n,A))},error:e[d+1],complete:e[d+2]};else{const A=ln(n,is);w=ln(A.firestore,lr),I=A._query;const P=new Cf(w);_={next:L=>{e[d]&&e[d](new Dd(w,P,A,L))},error:e[d+1],complete:e[d+2]},KL(n._query)}return function(A,P,L,Z){const se=new zT(Z),Ie=new PN(P,se,L);return A.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return MN(yield fm(A),Ie)})),()=>{se.Aa(),A.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return RN(yield fm(A),Ie)}))}}(Zr(w),I,f,_)}function pm(n,e){return function(t,r){const i=new bi;return t.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return function GG(n,e,t){return UN.apply(this,arguments)}(yield pM(t),r,i)})),i.promise}(Zr(n),e)}function EM(n,e,t){const r=t.docs.get(e._key),i=new Cf(n);return new Bu(n,i,e._key,r,new Ef(t.hasPendingWrites,t.fromCache),e.converter)}class l$ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Tf(e)}get(e){const t=Cd(e,this._firestore),r=new Q3(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return gt();const a=i[0];if(a.isFoundDocument())return new n0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new n0(this._firestore,r,t._key,null,t.converter);throw gt()})}set(e,t,r){const i=Cd(e,this._firestore),a=iD(i.converter,t,r),d=eD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,d),this}update(e,t,r,...i){const a=Cd(e,this._firestore);let d;return d="string"==typeof(t=(0,Ot.m9)(t))||t instanceof Lu?bM(this._dataReader,"Transaction.update",a._key,t,r,i):vM(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,d),this}delete(e){const t=Cd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Cd(e,this._firestore),r=new Cf(this._firestore);return super.get(e).then(i=>new Bu(this._firestore,r,t._key,i._document,new Ef(!1,!1),t.converter))}}function CM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Fe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function u2(){if("undefined"==typeof Uint8Array)throw new Fe("unimplemented","Uint8Arrays are not available in this environment.")}function c2(){if(!function Ij(){return"undefined"!=typeof atob}())throw new Fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Gg=ws.SDK_VERSION,(0,ws._registerComponent)(new Au.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new lr(i,new bj(t.getProvider("auth-internal")),new Dj(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,ws.registerVersion)(aP,"3.4.9",n),(0,ws.registerVersion)(aP,"3.4.9","esm2017")}();class o0{constructor(e){this._delegate=e}static fromBase64String(e){return c2(),new o0(jl.fromBase64String(e))}static fromUint8Array(e){return u2(),new o0(jl.fromUint8Array(e))}toBase64(){return c2(),this._delegate.toBase64()}toUint8Array(){return u2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function IM(n){return function _$(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class y${enableIndexedDbPersistence(e,t){return function E3(n,e){UL(n=ln(n,lr));const t=Zr(n),r=n._freezeSettings(),i=new aM;return VL(t,i,new wL(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function C3(n){UL(n=ln(n,lr));const e=Zr(n),t=n._freezeSettings(),r=new aM;return VL(e,r,new o3(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function I3(n){if(n._initialized&&!n._terminated)throw new Fe(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new bi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Y.Z)(function*(){try{yield(t=(0,Y.Z)(function*(r){if(!el.vt())return Promise.resolve();const i=r+"main";yield el.delete(i)}),function(r){return t.apply(this,arguments)})(XA(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class d2{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ku||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Tv("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function v3(n,e,t,r={}){var i;const a=(n=ln(n,e0))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Tv("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,f;if("string"==typeof r.mockUserToken)d=r.mockUserToken,f=Fi.MOCK_USER;else{d=(0,Ot.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Fe(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Fi(_)}n._authCredentials=new vj(new lP(d,f))}}(this._delegate,e,t,r)}enableNetwork(){return function A3(n){return function d3(n){return n.asyncQueue.enqueue((0,Y.Z)(function*(){const e=yield CL(n),t=yield IL(n);return e.setNetworkEnabled(!0),function(r){const i=st(r);return i.wu.delete(0),Qv(i)}(t)}))}(Zr(n=ln(n,lr)))}(this._delegate)}disableNetwork(){return function N3(n){return function h3(n){return n.asyncQueue.enqueue((0,Y.Z)(function*(){const e=yield CL(n),t=yield IL(n);return e.setNetworkEnabled(!1),(r=(0,Y.Z)(function*(i){const a=st(i);a.wu.add(0),yield om(a),a.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Zr(n=ln(n,lr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,ML("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function S3(n){return function(e){const t=new bi;return e.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return function ZG(n,e){return qN.apply(this,arguments)}(yield pM(e),t)})),t.promise}(Zr(n=ln(n,lr)))}(this._delegate)}onSnapshotsInSync(e){return function a$(n,e){return function g3(n,e){const t=new zT(e);return n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return r=yield fm(n),i=t,st(r).bu.add(i),void i.next();var r,i})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return r=yield fm(n),i=t,void st(r).bu.delete(i);var r,i}))}}(Zr(n=ln(n,lr)),_M(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new gm(this,PL(this._delegate,e))}catch(t){throw As(t,"collection()","Firestore.collection()")}}doc(e){try{return new ha(this,JT(this._delegate,e))}catch(t){throw As(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ns(this,function b3(n,e){if(n=ln(n,e0),mM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fe(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new is(n,null,(t=e,new Pu(fn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw As(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function u$(n,e,t){n=ln(n,lr);const r=Object.assign(Object.assign({},J3),t);return function(i){if(i.maxAttempts<1)throw new Fe(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function m3(n,e,t){const r=new bi;return n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){const i=yield(a=n,KT(a).then(d=>d.datastore));var a;new u3(n.asyncQueue,i,t,e,r).run()})),r.promise}(Zr(n),i=>e(new l$(n,i)),r)}(this._delegate,t=>e(new h2(this,t)))}batch(){return Zr(this._delegate),new f2(new r2(this._delegate,e=>pm(this._delegate,e)))}loadBundle(e){return function M3(n,e){const t=Zr(n=ln(n,lr)),r=new T3;return function _3(n,e,t,r){const i=function(a,d){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return TL(_,w);if(_ instanceof ArrayBuffer)return TL(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new a3(_,d);var _}(t,Jv(e));n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){!function s3(n,e,t){const r=st(n);var i;(i=(0,Y.Z)(function*(a,d,f){try{const _=yield d.getMetadata();if(yield function(P,L){const Z=st(P),se=wi(L.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",Ie=>Z._s.getBundleMetadata(Ie,L.id)).then(Ie=>!!Ie&&Ie.createTime.compareTo(se)>=0)}(a.localStore,_))return yield d.close(),f._completeWith({taskState:"Success",documentsLoaded:(P=_).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);f._updateProgress(dL(_));const w=new LG(_,a.localStore,d.M);let I=yield d.ma();for(;I;){const P=yield w.Fu(I);P&&f._updateProgress(P),I=yield d.ma()}const A=yield w.complete();return yield Fu(a,A.Lu,void 0),yield function(P,L){const Z=st(P);return Z.persistence.runTransaction("Save bundle","readwrite",se=>Z._s.saveBundleMetadata(se,L))}(a.localStore,_),f._completeWith(A.progress),Promise.resolve(A.Bu)}catch(_){return Tv("SyncEngine",`Loading bundle failed with ${_}`),f._failWith(_),Promise.resolve(new Set)}var P}),function(a,d,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield pM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function x3(n,e){return function y3(n,e){return n.asyncQueue.enqueue((0,Y.Z)(function*(){return function(t,r){const i=st(t);return i.persistence.runTransaction("Get named query","readonly",a=>i._s.getNamedQuery(a,r))}(yield fM(n),e)}))}(Zr(n=ln(n,lr)),e).then(t=>t?new is(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ns(this,t):null)}}class sD extends DM{constructor(e){super(),this.firestore=e}convertBytes(e){return new o0(new jl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ha.forKey(t,this.firestore,null)}}class h2{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new sD(e)}get(e){const t=Sf(e);return this._delegate.get(t).then(r=>new a0(this._firestore,new Bu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Sf(e);return r?(CM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Sf(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Sf(e);return this._delegate.delete(t),this}}class f2{constructor(e){this._delegate=e}set(e,t,r){const i=Sf(e);return r?(CM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Sf(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Sf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class If{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new r0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new l0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=If.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new If(e,new sD(e),t),i.set(t,a)),a}}If.INSTANCES=new WeakMap;class ha{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ha(t,new rr(t._delegate,r,new tt(e)))}static forKey(e,t,r){return new ha(t,new rr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new gm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new gm(this.firestore,PL(this._delegate,e))}catch(t){throw As(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ot.m9)(e))instanceof rr&&FL(this._delegate,e)}set(e,t){t=CM("DocumentReference.set",t);try{return t?s2(this._delegate,e,t):s2(this._delegate,e)}catch(r){throw As(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?o2(this._delegate,e):o2(this._delegate,e,t,...r)}catch(i){throw As(i,"updateDoc()","DocumentReference.update()")}}delete(){return function s$(n){return pm(ln(n.firestore,lr),[new Pv(n._key,qr.none())])}(this._delegate)}onSnapshot(...e){const t=p2(e),r=g2(e,i=>new a0(this.firestore,new Bu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return a2(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function e$(n){n=ln(n,rr);const e=ln(n.firestore,lr),t=Zr(e),r=new Cf(e);return function f3(n,e){const t=new bi;return n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return(r=(0,Y.Z)(function*(i,a,d){try{const f=yield function(_,w){const I=st(_);return I.persistence.runTransaction("read document","readonly",A=>I.fi.Ls(A,w))}(i,a);f.isFoundDocument()?d.resolve(f):f.isNoDocument()?d.resolve(null):d.reject(new Fe(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const _=um(f,`Failed to get document '${a} from cache`);d.reject(_)}}),function(i,a,d){return r.apply(this,arguments)})(yield fM(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Bu(e,r,n._key,i,new Ef(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function t$(n){n=ln(n,rr);const e=ln(n.firestore,lr);return SL(Zr(e),n._key,{source:"server"}).then(t=>EM(e,n,t))}(this._delegate):function X3(n){n=ln(n,rr);const e=ln(n.firestore,lr);return SL(Zr(e),n._key).then(t=>EM(e,n,t))}(this._delegate),t.then(r=>new a0(this.firestore,new Bu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ha(this.firestore,this._delegate.withConverter(e?If.getInstance(this.firestore,e):null))}}function As(n,e,t){return n.message=n.message.replace(e,t),n}function p2(n){for(const e of n)if("object"==typeof e&&!IM(e))return e;return{}}function g2(n,e){var t,r;let i;return i=IM(n[0])?n[0]:IM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class a0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ha(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return zL(this._delegate,e._delegate)}}class l0 extends a0{data(e){const t=this._delegate.data(e);return function _j(n,e){n||gt()}(void 0!==t),t}}class Ns{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sD(e)}where(e,t,r){try{return new Ns(this.firestore,Ed(this._delegate,function H3(n,e,t){const r=e,i=rD("where",n);return new j3(i,r,t)}(e,t,r)))}catch(i){throw As(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ns(this.firestore,Ed(this._delegate,function $3(n,e="asc"){const t=e,r=rD("orderBy",n);return new G3(r,t)}(e,t)))}catch(r){throw As(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ns(this.firestore,Ed(this._delegate,function q3(n){return OL("limit",n),new YL("limit",n,"F")}(e)))}catch(t){throw As(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ns(this.firestore,Ed(this._delegate,function W3(n){return OL("limitToLast",n),new YL("limitToLast",n,"L")}(e)))}catch(t){throw As(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ns(this.firestore,Ed(this._delegate,function Z3(...n){return new JL("startAt",n,!0)}(...e)))}catch(t){throw As(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ns(this.firestore,Ed(this._delegate,function z3(...n){return new JL("startAfter",n,!1)}(...e)))}catch(t){throw As(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ns(this.firestore,Ed(this._delegate,function K3(...n){return new QL("endBefore",n,!1)}(...e)))}catch(t){throw As(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ns(this.firestore,Ed(this._delegate,function Y3(...n){return new QL("endAt",n,!0)}(...e)))}catch(t){throw As(t,"endAt()","Query.endAt()")}}isEqual(e){return LL(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function r$(n){n=ln(n,is);const e=ln(n.firestore,lr),t=Zr(e),r=new Cf(e);return function p3(n,e){const t=new bi;return n.asyncQueue.enqueueAndForget((0,Y.Z)(function*(){return(r=(0,Y.Z)(function*(i,a,d){try{const f=yield HT(i,a,!0),_=new pL(a,f._i),w=_.Wu(f.documents),I=_.applyChanges(w,!1);d.resolve(I.snapshot)}catch(f){const _=um(f,`Failed to execute query '${a} against cache`);d.reject(_)}}),function(i,a,d){return r.apply(this,arguments)})(yield fM(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Dd(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function i$(n){n=ln(n,is);const e=ln(n.firestore,lr),t=Zr(e),r=new Cf(e);return AL(t,n._query,{source:"server"}).then(i=>new Dd(e,r,n,i))}(this._delegate):function n$(n){n=ln(n,is);const e=ln(n.firestore,lr),t=Zr(e),r=new Cf(e);return KL(n._query),AL(t,n._query).then(i=>new Dd(e,r,n,i))}(this._delegate),t.then(r=>new SM(this.firestore,new Dd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=p2(e),r=g2(e,i=>new SM(this.firestore,new Dd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return a2(this._delegate,t,r)}withConverter(e){return new Ns(this.firestore,this._delegate.withConverter(e?If.getInstance(this.firestore,e):null))}}class b${constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new l0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class SM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ns(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new l0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new b$(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new l0(this._firestore,r))})}isEqual(e){return zL(this._delegate,e._delegate)}}class gm extends Ns{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ha(this.firestore,e):null}doc(e){try{return new ha(this.firestore,void 0===e?JT(this._delegate):JT(this._delegate,e))}catch(t){throw As(t,"doc()","CollectionReference.doc()")}}add(e){return function o$(n,e){const t=ln(n.firestore,lr),r=JT(n),i=iD(n.converter,e);return pm(t,[eD(Tf(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,qr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ha(this.firestore,t))}isEqual(e){return FL(this._delegate,e._delegate)}withConverter(e){return new gm(this.firestore,this._delegate.withConverter(e?If.getInstance(this.firestore,e):null))}}function Sf(n){return ln(n,rr)}class AM{constructor(...e){this._delegate=new Lu(...e)}static documentId(){return new AM(ni.keyField().canonicalString())}isEqual(e){return(e=(0,Ot.m9)(e))instanceof Lu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Af{constructor(e){this._delegate=e}static serverTimestamp(){const e=function d$(){return new yM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Af(e)}static delete(){const e=function c$(){return new t0("deleteField")}();return e._methodName="FieldValue.delete",new Af(e)}static arrayUnion(...e){const t=function h$(...n){return new P3("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Af(t)}static arrayRemove(...e){const t=function f$(...n){return new F3("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Af(t)}static increment(e){const t=function p$(n){return new L3("increment",n)}(e);return t._methodName="FieldValue.increment",new Af(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const w$={Firestore:d2,GeoPoint:QT,Timestamp:Rr,Blob:o0,Transaction:h2,WriteBatch:f2,DocumentReference:ha,DocumentSnapshot:a0,Query:Ns,QueryDocumentSnapshot:l0,QuerySnapshot:SM,CollectionReference:gm,FieldPath:AM,FieldValue:Af,setLogLevel:function v$(n){!function mj(n){hd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function m2(n,e){return function E$(n,e=_l.z){return new sr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function NM(n,e){return m2(n,e).pipe((0,wt.U)(t=>({payload:t,type:"query"})))}function oD(n,e){return NM(n,e).pipe(er(void 0),RS(),(0,wt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,f)=>{const _=i.find(I=>I.doc.ref.isEqual(d.ref)),w=null==t?void 0:t.payload.docs.find(I=>I.ref.isEqual(d.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(d.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(d.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:d}})}),a}))}function _2(n,e,t){return oD(n,t).pipe(Yc((r,i)=>function I$(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function S$(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return MM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return MM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return MM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),function Qi(n,e=C.y){return n=null!=n?n:po,(0,Bn.e)((t,r)=>{let i,a=!0;t.subscribe((0,Vn.x)(r,d=>{const f=e(d);(a||!n(i,f))&&(a=!1,i=f,r.next(d))}))})}(),(0,wt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function MM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function y2(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function D$(n){(function T$(n,e){n.INTERNAL.registerComponent(new Au.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},w$)))})(n,(e,t)=>new d2(e,t,new y$)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(lU.Z);class v2{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=oD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,wt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(er(void 0),RS(),Rt(([r,i])=>i.length>0||!r),(0,wt.U)(([r,i])=>i),_i.iC)}auditTrail(e){return this.stateChanges(e).pipe(Yc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=y2(e);return _2(this.query,t,this.afs.schedulers.outsideAngular).pipe(_i.iC)}valueChanges(e={}){return NM(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),_i.iC)}get(e){return(0,qn.D)(this.query.get(e)).pipe(_i.iC)}add(e){return this.ref.add(e)}doc(e){return new b2(this.ref.doc(e),this.afs)}}class b2{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=w2(r,t);return new v2(i,a,this.afs)}snapshotChanges(){return function C$(n,e){return m2(n,e).pipe(er(void 0),RS(),(0,wt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(_i.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,wt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,qn.D)(this.ref.get(e)).pipe(_i.iC)}}class A${constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?oD(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Rt(t=>t.length>0),_i.iC):oD(this.query,this.afs.schedulers.outsideAngular).pipe(_i.iC)}auditTrail(e){return this.stateChanges(e).pipe(Yc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=y2(e);return _2(this.query,t,this.afs.schedulers.outsideAngular).pipe(_i.iC)}valueChanges(e={}){return NM(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),_i.iC)}get(e){return(0,qn.D)(this.query.get(e)).pipe(_i.iC)}}const N$=new u.OlP("angularfire2.enableFirestorePersistence"),M$=new u.OlP("angularfire2.firestore.persistenceSettings"),x$=new u.OlP("angularfire2.firestore.settings"),R$=new u.OlP("angularfire2.firestore.use-emulator");function w2(n,e=(t=>t)){return{query:e(n),ref:n}}let O$=(()=>{class n{constructor(t,r,i,a,d,f,_,w,I,A,P,L,Z,se,Ie,Ue,We){this.schedulers=_;const Qe=(0,Do.on)(t,f,r),je=I;A&&fO(Qe,f,P,Z,se,Ie,L,Ue),[this.firestore,this.persistenceEnabled$]=(0,Do.cc)(`${Qe.name}.firestore`,"AngularFirestore",Qe.name,()=>{const rt=f.runOutsideAngular(()=>Qe.firestore());if(a&&rt.settings(a),je&&rt.useEmulator(...je),i&&!Nr(d)){const ut=()=>{try{return(0,qn.D)(rt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Mt){return"undefined"!=typeof console&&console.warn(Mt),dt(!1)}};return[rt,f.runOutsideAngular(ut)]}return[rt,dt(!1)]},[a,je,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:d}=w2(i,r),f=this.schedulers.ngZone.run(()=>a);return new v2(f,d,this)}collectionGroup(t,r){const i=r||(d=>d),a=this.firestore.collectionGroup(t);return new A$(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new b2(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Do.Dh),u.LFG(Do.xv,8),u.LFG(N$,8),u.LFG(x$,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(_i.HU),u.LFG(M$,8),u.LFG(R$,8),u.LFG(_S,8),u.LFG(aO,8),u.LFG(lO,8),u.LFG(uO,8),u.LFG(cO,8),u.LFG(dO,8),u.LFG(hO,8),u.LFG(gS,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),mm=(()=>{class n{constructor(t,r){this.firestore=t,this.router=r}get uid(){let t=localStorage.getItem("uid");return t||this.router.navigate(["login"]),t}get newId(){return this.firestore.createId()}getUserProjectsObs(){return this.firestore.collection(this.uid).valueChanges().pipe((0,wt.U)(this.parseToProjectsArr),Ka(t=>this.handeError(t)))}addProject(t){var r=this;return(0,Y.Z)(function*(){return yield r.firestore.collection(r.uid).doc(t.name).set(t)})()}updateProject(t){var r=this;return(0,Y.Z)(function*(){return yield r.firestore.collection(r.uid).doc(t.name).update(t)})()}removeUserProject(t){var r=this;return(0,Y.Z)(function*(){const i=r.firestore.firestore.collection(r.uid).doc(t).collection("translations");return yield r.clearCollection(i),yield r.firestore.collection(r.uid).doc(t).delete()})()}addTranslationDocs(t,r,i){var a=this;return(0,Y.Z)(function*(){let d=a.firestore.firestore.batch();i.forEach(f=>{let _=a.firestore.collection(a.uid).doc(t).collection("translations").doc(f.identifier).ref;d.set(_,f)}),yield d.commit()})()}updateTranslationDocs(t,r){var i=this;return(0,Y.Z)(function*(){let a=i.firestore.firestore.batch();r.forEach(d=>{let f=i.firestore.collection(i.uid).doc(t).collection("translations").doc(d.identifier).ref;a.update(f,d)}),yield a.commit()})()}getProjectTranslationDocs(t){var r=this;return(0,Y.Z)(function*(){let i=[];return(yield r.firestore.collection(r.uid).doc(t).collection("translations").ref.get()).forEach(d=>i.push(d.data())),i})()}deleteTranslationDoc(t,r){var i=this;return(0,Y.Z)(function*(){return yield i.firestore.collection(i.uid).doc(t).collection("translations").doc(r).delete()})()}deleteTranslationDocuments(t,r){var i=this;return(0,Y.Z)(function*(){let a=i.firestore.firestore.batch();return r.forEach(d=>{let f=i.firestore.collection(i.uid).doc(t).collection("translations").doc(d).ref;a.delete(f)}),yield a.commit()})()}updateTranslationDoc(t,r,i,a){var d=this;return(0,Y.Z)(function*(){return yield d.firestore.collection(d.uid).doc(t).collection("translations").doc(r).update({[i]:a})})()}uploadFile(t){var r=this;return(0,Y.Z)(function*(){(function rU(n,e,t){return LO(n=(0,Ot.m9)(n),e,t)})(MS(xS(),`${r.uid}/${t.name}`),t).then(()=>{}).catch(d=>r.handeError(d))})()}deleteFile(t){var r=this;return(0,Y.Z)(function*(){(function iU(n){return function QV(n){n._throwIfRoot("deleteObject");const e=function RV(n,e){const r=Nu(e.fullServerUrl(),n.host,n._protocol),f=new Pl(r,"DELETE",function d(_,w){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=rv(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Qa)}(n=(0,Ot.m9)(n))})(MS(xS(),`${r.uid}/${t}`)).then(()=>{}).catch(d=>r.handeError(d))})()}downloadFile(t){var r=this;return(0,Y.Z)(function*(){try{const a=MS(xS(),`${r.uid}/${t}`);let d=yield sU(a);return new File([d],t)}catch(i){return r.handeError(i),null}})()}clearCollection(t){return(0,Y.Z)(function*(){return yield t.onSnapshot(r=>{r.docs.forEach(i=>{t.doc(i.id).delete()})})})()}parseToProjectsArr(t){let r=[];if(t)for(let i in t)r.push(t[i]);return r}handeError(t){return(0,Y.Z)(function*(){console.log(t.message)})()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(O$),u.LFG(Zn))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Vu=(()=>{class n{constructor(t){this.language=t,this.purpose="",this.dialog={open:!1,header:"initial",txt:[]},this.dialogObs=new An(this.dialog),this.languages=this.language.list}get active(){return this.dialog.open}set active(t){this.dialog.open=t}getObs(){return this.dialogObs.asObservable()}open(){this.dialog.open=!0,this.dialogObs.next(this.dialog)}close(){this.dialog.open=!1,this.dialogObs.next(null)}set header(t){this.dialog.header=t}set txt(t){""===t?this.dialog.txt=[]:this.dialog.txt.push(t)}clearDialog(){this.purpose="",this.dialog.header="",this.dialog.txt=[],this.dialog.confirmFunction=null}confirmDialog(t,r){return this.promise=new Promise(i=>{this.setDialogWithConfirmButton(t,r||"",i)}),this.promise}setDialogWithConfirmButton(t,r,i){this.clearDialog(),this.dialog.header=t,r&&this.dialog.txt.push(r),this.dialog.confirmFunction=i,this.open()}setDialogOnlyHeader(t){this.clearDialog(),this.dialog.header=t,this.open()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ua))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const u0="\x3c!-- separator --\x3e";let xM=(()=>{class n{constructor(){this.templateConentObs=new An(""),this.css="",this.download=t=>{const r=document.createElement("a");r.href=URL.createObjectURL(t),r.download=t.name,document.body.append(r),r.click(),r.remove()}}getTemplateConentObs(){return this.templateConentObs.asObservable()}triggerInitTemplate(){console.log("triggerInitTemplate"),this.templateConentObs.next(this.getTemplateConent())}setCss(t){var r=this;return(0,Y.Z)(function*(){r.css=yield t.text()})()}initFile(t){var r=this;return(0,Y.Z)(function*(){console.log("init file"),r.file=t,r.fileAsString=t?yield t.text():"",r.sliceFile(),r.triggerInitTemplate()})()}sliceFile(){this.top=this.fileAsString.split("<head").shift(),this.head=this.fileAsString.match(/<head[^>]*>[\s\S]*<\/head>/gi).pop(),this.body=this.fileAsString.match(/<body[^>]*>[\s\S]*<\/body>/gi).pop()}getTemplateConent(){return this.head+"\n"+u0+"\n"+this.body}refresh(t){return this.generateFileAsString(t),this.file=new File([this.fileAsString],this.file.name,{type:"text/html"}),this.file}generateFileAsString(t){const r=this.fileAsString.match(/<body[^>]*>/gi).pop();this.head=t.innerHTML.split(u0).shift(),this.body=t.innerHTML.split(u0).pop(),this.fileAsString=`${this.top}\n<head>\n${this.head}\n</head>\n${r}\n${this.body}\n</body>`}generateTemplate(t,r){const i=this.translatedTop(r),a=this.fileAsString.match(/<body[^>]*>/gi).pop();let _=`${i}\n<head>\n${t.innerHTML.split(u0).shift()}\n</head>\n${a}\n${t.innerHTML.split(u0).pop()}\n</body>`;const w=this.file.name.split(".")[0]+"_"+r.code+".html";let I=new File([_],w,{type:"text/html"});this.download(I)}translatedTop(t){const r=this.top.indexOf('lang="');if(!r)throw new Error("lang attribute changing error");const i=this.top.slice(r,r+9);return this.top.replace(i,`lang="${t.code}"`)}clear(){this.file=null,this.css="",this.fileAsString="",this.top="",this.head="",this.body=""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),c0=(()=>{class n{constructor(t,r,i,a,d){this.db=t,this.dialog=r,this.language=i,this.fileService=a,this.auth=d,this.saved=!1,this.openReportObs=new Kt.x,this.db.getUserProjectsObs().subscribe(f=>this.userProjects=f)}get name(){return this.project.name}get filename(){return this.project.filename}setProject(t){var r=this;return(0,Y.Z)(function*(){if(r.project=t,r.language.setOriginLanguage(t.originLanguage),t.cssName){const a=yield r.db.downloadFile(t.cssName);yield r.fileService.setCss(a)}let i=yield r.db.downloadFile(t.filename);r.fileService.initFile(i)})()}clear(){this.project=null,this.fileForNewProject=null,this.cssFileForNewProject=null,this.fileService.clear()}addProject(t){var r=this;return(0,Y.Z)(function*(){if(yield r.db.uploadFile(r.fileForNewProject),r.cssFileForNewProject){const i=r.renameCssFile();t.cssName=i.name,yield r.db.uploadFile(i)}return yield r.db.uploadFile(r.renameOrigin()),yield r.db.addProject(t),r.fileForNewProject=null,r.cssFileForNewProject=null,!0})()}deleteProject(t,r){var i=this;return(0,Y.Z)(function*(){r||(yield i.dialog.confirmDialog("Warning!","Are you sure you want to delete this project?"));const a=i.userProjects.find(f=>f.name===t);yield i.db.deleteFile(a.filename),a.cssName&&(yield i.db.deleteFile(a.cssName));let d=a.filename.split(".")[0]+"_origin.html";yield i.db.deleteFile(d),yield i.db.removeUserProject(t)})()}saveTemplate(t,r){var i=this;return(0,Y.Z)(function*(){i.project.modified=i.currentTime();try{yield i.db.updateProject(i.project),yield i.db.uploadFile(t),yield i.db.addTranslationDocs(i.project.name,i.language.origin,r)}catch(a){console.log(a)}})()}downloadOriginFile(t){var r=this;return(0,Y.Z)(function*(){try{let i=r.userProjects.find(d=>d.name===t).filename.split(".")[0]+"_origin.html",a=yield r.db.downloadFile(i);r.fileService.download(a)}catch(i){console.log(i)}})()}addCssFile(t,r){var i=this;return(0,Y.Z)(function*(){let a=i.userProjects.find(f=>f.name===t);const d=i.renameCssFile(a.filename,r);yield i.db.uploadFile(d),a.modified=i.currentTime(),a.cssName=d.name,yield i.db.updateProject(a)})()}deleteCssFile(t){var r=this;return(0,Y.Z)(function*(){let i=r.userProjects.find(a=>a.name===t);i.modified=r.currentTime(),yield r.db.deleteFile(i.cssName),i.cssName="",yield r.db.updateProject(i)})()}deleteAccount(){var t=this;return(0,Y.Z)(function*(){console.log(t.userProjects),yield Promise.all(t.userProjects.map(function(){var r=(0,Y.Z)(function*(i){return yield t.deleteProject(i.name,!0)});return function(i){return r.apply(this,arguments)}}())),yield t.auth.deleteAccount()})()}logout(){this.auth.logout()}filenameTaken(t){return!!this.userProjects.find(i=>i.filename===t.name)}projectNameTaken(t){return!!this.userProjects.find(r=>r.name===t)}hasBodySlicers(t){return(0,Y.Z)(function*(){return 3===(yield t.text()).split("\x3c!-- bodyslicer --\x3e").length})()}renameOrigin(){return new File([this.fileForNewProject],this.fileForNewProject.name.split(".")[0]+"_origin.html",{type:"text/html"})}renameCssFile(t,r){return new File([r||this.cssFileForNewProject],(t||this.fileForNewProject.name).split(".")[0]+".css",{type:"text/css"})}currentTime(){return(new Date).toLocaleDateString()+" "+(new Date).toLocaleTimeString()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(mm),u.LFG(Vu),u.LFG(ua),u.LFG(xM),u.LFG(Zh))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),T2=(()=>{class n{constructor(){this.elements=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),D2=(()=>{class n{constructor(t,r,i,a){this.language=t,this.report=r,this.router=i,this.dialog=a}set(t){this.translationElements=t}setReference(t){this.reference=t}clearElements(){this.translationElements=[]}translateTemplate(t){var r=this;return(0,Y.Z)(function*(){return r.checkElements(),t?r.setLanguagesOposite():r.setLanguages(),r.getElementsWithoutTranslations(),r.notTranslated&&r.notTranslated.length&&(yield r.dialog.confirmDialog("Not all elements are translated","Are you sure you want to translate anyway? If not go to untranslated")),r.filterElementsOnlyWithTranslations(),r.translationLoop(),t||(console.log(r.textsToTranslate),console.log(r.textsTranslated)),!t})()}translationLoop(){this.textsToTranslate=[],this.textsTranslated=[],this.translationElements.forEach(t=>{this.textsToTranslate.push(t[this.from]);const r=this.reference.querySelector(`[identifier="${t.identifier}"]`);r&&(this.isImg(r)?this.translateImgElement(r,t):this.isMeta(r)?this.translateMetaElement(r,t):this.translateTexts(r,t))})}isImg(t){return"img"===t.tagName.toLocaleLowerCase()||"amp-img"===t.tagName.toLocaleLowerCase()}isMeta(t){return"meta"===t.tagName.toLocaleLowerCase()}translateImgElement(t,r){let i=r[this.to][0];t.setAttribute("alt",i),this.textsTranslated.push(i)}translateMetaElement(t,r){let i=r[this.to][0];t.setAttribute("content",i),this.textsTranslated.push(i)}translateTexts(t,r){t.childNodes.forEach((a,d)=>{if(a.nodeType===Node.TEXT_NODE&&a.data.replace(/\s/g,"").replace(/\n/g,"")){let w=r[this.to][d];a.nodeValue=w,this.textsTranslated.push(w)}})}headElements(){if(this.setLanguages(),!(this.translationElements&&this.translationElements.length>0))throw new Error("no elements loaded");{let t=[];this.translationElements.forEach(r=>{let i=document.querySelector(`[identifier="${r.identifier}"]`);i&&"meta"===i.tagName.toLocaleLowerCase()&&(t.push(r),this.report.elements=t,this.report.purpose="headElements",this.router.navigate(["report"]))})}}imagesElements(){this.setLanguages();let t=[];this.translationElements.forEach(r=>{let i=document.querySelector(`[identifier="${r.identifier}"]`);i&&i.hasAttribute("alt")&&(!r.hasOwnProperty(this.language.translateTo)||""===r[this.language.translateTo])&&t.push(r)}),t.length>0?(this.report.elements=t,this.report.purpose="imgElements",this.router.navigate(["report"])):this.dialog.setDialogOnlyHeader("No more img alts to translate")}untranslated(){this.setLanguages();let t=this.getElementsWithoutTranslations();t&&t.length>0?(this.report.elements=t,this.report.purpose="untranslated",this.router.navigate(["report"])):this.dialog.setDialogOnlyHeader("All elements are translated")}filterElementsOnlyWithTranslations(){this.translationElements=this.translationElements.filter(t=>t.hasOwnProperty(this.to))}getElementsWithoutTranslations(){return this.notTranslated=this.translationElements.filter(t=>!t.hasOwnProperty(this.to)),this.notTranslated}checkElements(){if(this.translationElements&&this.translationElements.length>0)return!0;throw new Error("no elements loaded")}setLanguages(){if(!this.language.translateTo)throw new Error("language not selected");this.from=this.language.origin,this.to=this.language.translateTo}setLanguagesOposite(){if(!this.language.translateTo)throw new Error("language not selected");this.from=this.language.translateTo,this.to=this.language.origin}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ua),u.LFG(T2),u.LFG(Zn),u.LFG(Vu))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const k$=["description","author","keywords","application-name","generator"],P$=["SCRIPT","LINK","NOSCRIPT","STYLE"];let F$=(()=>{class n{constructor(t,r,i){this.language=t,this.db=r,this.dialog=i,this.blue="#41a4a6",this.green="#63aa55",this.orange="#db863b",this.identifiersToRemove=[],console.log("identificator init")}identify(t,r){return this.translationElements=r,this.identifyHead(t),this.identifyImages(),this.identifyLoop(t),this.translationElements}identifyLoop(t){let r=t.childNodes;r.length>0&&r.forEach(i=>{i.nodeType===Node.TEXT_NODE?this.identifyTextNode(i):i instanceof HTMLInputElement||i instanceof HTMLTextAreaElement?this.identifyInputElement(i):this.identifyLoop(i)})}identifyTextNode(t){let r=t;if(r.textContent.replace(/\s/g,"").replace(/\n/g,"")){let a=r.data.replace(/\n/g,""),d=t.parentElement,f=d.getAttribute("identifier");if(f){let _=this.translationElements.find(w=>w.identifier===f);_[this.language.origin].includes(a)||_[this.language.origin].push(a)}else if(!P$.includes(d.tagName.toUpperCase())){let _=this.db.newId;d.setAttribute("identifier",_),this.translationElements.push({identifier:_,[this.language.origin]:[a]})}}}identifyInputElement(t){if(!t.hasAttribute("identifier")){let r=t.getAttribute("placeholder");r||(r=t.getAttribute("value"));let i=t.getAttribute("type");if(r&&"checkbox"!==i){let a=this.db.newId;t.setAttribute("identifier",a),this.translationElements.push({identifier:a,[this.language.origin]:[r]})}}}identifyImages(){this.translationElements=[],this.templateReference.querySelectorAll("amp-img").forEach(t=>this.identifyImgElement(t)),this.templateReference.querySelectorAll("img").forEach(t=>this.identifyImgElement(t))}identifyImgElement(t){if(!t.hasAttribute("identifier")){let r=t.getAttribute("alt");if(r){let i=this.db.newId;t.setAttribute("identifier",i),this.translationElements.push({identifier:i,[this.language.origin]:[r]})}}}removeElementIdentifier(t,r){var i=this;return(0,Y.Z)(function*(){try{let a=t.getAttribute("identifier");a&&(yield i.db.deleteTranslationDoc(r,a),t.removeAttribute("identifier"),t.style.border="")}catch(a){i.dialog.setDialogOnlyHeader(a.message)}})()}removeIdentifiersToRemove(t){var r=this;return(0,Y.Z)(function*(){r.identifiersToRemove&&r.identifiersToRemove.length&&(console.log("removeIdentifiersToRemove"),console.log(r.identifiersToRemove),r.identifiersToRemove.forEach(i=>{let a=document.querySelector(`[identifier="${i}"]`);a&&a.removeAttribute("identifier")}),yield r.db.deleteTranslationDocuments(t,r.identifiersToRemove),r.dialog.clearDialog(),r.dialog.header="Now you have to save the template! Identifiers removed:",r.identifiersToRemove.forEach(i=>r.dialog.txt=i),r.dialog.open(),r.identifiersToRemove=[])})()}removeAll(t){var r=this;return(0,Y.Z)(function*(){try{document.querySelectorAll("[identifier]").forEach(a=>{a.hasAttribute("identifier")&&(r.identifiersToRemove.push(a.getAttribute("identifier")),a.removeAttribute("identifier"))}),yield r.db.deleteTranslationDocuments(t,r.identifiersToRemove),r.identifiersToRemove=[]}catch(i){console.log(i.message)}})()}identifyHead(t){t.querySelectorAll("meta").forEach(i=>{const a=i.getAttribute("name");if(a&&k$.includes(a)){const d=i.getAttribute("content");if(d){const f=this.db.newId;i.setAttribute("identifier",f),this.translationElements.push({identifier:f,[this.language.origin]:[d]})}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ua),u.LFG(mm),u.LFG(Vu))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),E2=(()=>{class n{constructor(t){this.language=t,this.blue="#41a4a6",this.green="#63aa55",this.orange="#db863b",this.flag=!1}init(t){t.forEach(r=>{let i=document.querySelector(`[identifier="${r.identifier}"]`);i&&(r.hasOwnProperty(this.language.translateTo)&&r[this.language.translateTo].length>0?this.setBorderToTranslatedElement(i):this.setBorderToElementWithIdentifier(i))}),this.flag=!0}setBorderToElementWithIdentifier(t){t&&t.hasAttribute("identifier")&&(t.style.border="2px solid "+this.blue)}setBorderToTranslatedElement(t){t&&t.hasAttribute("identifier")&&(t.style.border="2px solid "+this.orange)}removeBorder(t){t&&t.style.border&&(t.style.border=null)}removeAll(){document.querySelectorAll("[identifier]").forEach(this.removeBorder),this.flag=!1}setAsTranslated(t){let r=document.querySelector(`[identifier="${t}"]`);r&&this.setBorderToTranslatedElement(r)}setAsNotTranslated(t){let r=document.querySelector(`[identifier="${t}"]`);r&&this.setBorderToElementWithIdentifier(r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ua))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),RM=(()=>{class n{constructor(t,r,i,a,d,f,_){this.db=t,this.dialog=r,this.project=i,this.language=a,this.translator=d,this.identificator=f,this.borders=_,this.translationElements=[]}get reference(){return this._reference}set reference(t){this._reference=t,this.identificator.templateReference=t}initTranslationElements(){var t=this;return(0,Y.Z)(function*(){t.translationElements=[];let r=[];(yield t.db.getProjectTranslationDocs(t.project.name)).forEach(a=>{document.querySelector(`[identifier="${a.identifier}"]`)?t.translationElements.push(a):r.push(a.identifier)}),r.length>0&&t.db.deleteTranslationDocuments(t.project.name,r)})()}setActiveTranslationElement(t){this.activeTranslationElement=this.translationElements.find(r=>r.identifier===t)}setTranslation(t,r){var i=this;return(0,Y.Z)(function*(){let a=r||i.activeTranslationElement.identifier;i.activeTranslationElement&&(i.activeTranslationElement[i.language.translateTo]=t);try{yield i.db.updateTranslationDoc(i.project.name,a,i.language.translateTo,t)}catch(d){i.dialog.setDialogOnlyHeader("db: update doc error")}})()}removeTranslation(){var t=this;return(0,Y.Z)(function*(){t.activeTranslationElement[t.language.translateTo]=[];try{yield t.db.updateTranslationDoc(t.project.name,t.activeTranslationElement.identifier,t.language.translateTo,[])}catch(r){t.dialog.setDialogOnlyHeader("db: update doc error")}})()}translateImages(){this.translator.set(this.translationElements),this.translator.imagesElements()}translateHead(){this.translator.set(this.translationElements),this.translator.headElements()}translateTemplate(t){var r=this;return(0,Y.Z)(function*(){return r.translator.setReference(r._reference),r.translator.set(r.translationElements),yield r.translator.translateTemplate(t)})()}untranslated(){this.translator.set(this.translationElements),this.translator.untranslated()}identify(t){let r=this.identificator.identify(t,this.translationElements);this.translationElements.push(...r),this.borders.init(this.translationElements)}setIdentifiersToRemove(t){this.identificator.identifiersToRemove=t}removeElementIdentifier(t){var r=this;return(0,Y.Z)(function*(){r.identificator.removeElementIdentifier(t,r.project.name)})()}removeIdentifiersToRemove(){this.identificator.removeIdentifiersToRemove(this.project.name)}removeAll(){var t=this;return(0,Y.Z)(function*(){t.identificator.removeAll(t.project.name)})()}initBorders(){this.borders.init(this.translationElements)}setAsTranslated(t){this.borders.setAsTranslated(t)}setAsNotTranslated(t){this.borders.setAsNotTranslated(t)}saveTemplate(t){var r=this;return(0,Y.Z)(function*(){yield r.project.saveTemplate(t,r.translationElements),r.dialog.setDialogOnlyHeader("Project saved successfully!")})()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(mm),u.LFG(Vu),u.LFG(c0),u.LFG(ua),u.LFG(D2),u.LFG(F$),u.LFG(E2))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),L$=(()=>{class n{transform(t){return t.substr(0,1).toUpperCase()+t.substr(1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=u.Yjl({name:"tittlecase",type:n,pure:!0}),n})();const B$=["translationAreaRef"];function V$(n,e){if(1&n&&(u.ynx(0),u.TgZ(1,"div",25)(2,"p",26),u._uU(3),u.qZA()(),u.TgZ(4,"div",25)(5,"span",27,28),u.NdJ("keydown",function(r){return"Enter"===r.key?r.preventDefault():""}),u._uU(7),u.qZA()(),u.BQk()),2&n){const t=e.$implicit,r=e.index,i=u.oxw(2);u.xp6(3),u.Oqu(t),u.xp6(4),u.Oqu(i.translateToTexts[r])}}function U$(n,e){if(1&n&&(u.TgZ(0,"div",23),u.YNc(1,V$,8,2,"ng-container",24),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngForOf",t.originTexts)}}let j$=(()=>{class n{constructor(t,r,i,a,d,f,_){this.language=t,this.template=r,this.dialog=i,this.auth=a,this.project=d,this.router=f,this.borders=_,this.identifier="",this.originTexts=[],this.translateToTexts=[],this.removeIdentifierEvent=new u.vpe,this.unselectEvent=new u.vpe,this.autoIdentifyEvent=new u.vpe,this.saveTemplateEvent=new u.vpe,this.generateEvent=new u.vpe,this.removeAllIdentifiersEvent=new u.vpe,this.openManualEvent=new u.vpe,this.classes="",this.generated=!1,this.translated=!1,this.originLanguageObs=this.language.getOriginObs().pipe((0,wt.U)(w=>w.name)),this.language.getTranslateToObs().subscribe(w=>this.translateTo=w.name)}ngOnInit(){this.fileName=this.project.filename,this.projectName=this.project.project.name}ngOnChanges(t){!t.originTexts.firstChange&&t.originTexts.currentValue.length>0&&setTimeout(()=>this.translationAreaRefs.first.nativeElement.focus(),100)}removeIdentifier(){this.removeIdentifierEvent.emit()}onAddTranslation(){var t=this;return(0,Y.Z)(function*(){if(t.identifier){let r=t.translationAreaRefs.map(i=>i.nativeElement.innerText.replace(/\n/g,""));r=t.fillSpacesIfNeeds(r),console.log(r);try{let i=r.every(a=>!!a.trim());if(console.log(i),!i)throw new Error("Fill in all translation fields");yield t.template.setTranslation(r),t.dialog.setDialogOnlyHeader("Succesfull"),t.template.setAsTranslated(t.identifier),t.onUnselect()}catch(i){t.dialog.setDialogOnlyHeader(i.message)}}})()}onUnselect(){this.unselectEvent.emit()}removeTranslation(){var t=this;return(0,Y.Z)(function*(){try{yield t.template.removeTranslation(),t.dialog.setDialogOnlyHeader("Removed!"),t.template.setAsNotTranslated(t.identifier),t.onUnselect()}catch(r){t.dialog.setDialogOnlyHeader(r.message)}})()}onChooseLanguage(){this.dialog.clearDialog(),this.dialog.purpose="language",this.dialog.open()}autoIdentify(){this.autoIdentifyEvent.emit()}onBorders(){this.borders.flag?this.borders.removeAll():this.template.initBorders()}translateImages(){this.template.translateImages()}untranslated(){this.template.untranslated()}saveTemplate(){this.saveTemplateEvent.emit()}translateTemplate(){var t=this;return(0,Y.Z)(function*(){t.translated=yield t.template.translateTemplate(t.translated)})()}generateTemplate(){this.generateEvent.emit(),this.generated=!0}translateHead(){this.template.translateHead()}onLeave(){var t=this;return(0,Y.Z)(function*(){yield t.dialog.confirmDialog("Warning!","Are you sure you want to remove all identifiers and translations?!"),t.project.clear(),t.router.navigate(["projects"])})()}removeAllIdentifiers(){var t=this;return(0,Y.Z)(function*(){yield t.dialog.confirmDialog("Warning!","Are you sure you want to remove all identifiers and translations?!"),t.borders.removeAll(),yield t.template.removeAll(),t.template.translationElements=[],t.saveTemplateEvent.emit(),t.dialog.setDialogOnlyHeader("All identifiers removed!")})()}onOriginDownload(){this.project.downloadOriginFile(this.project.name)}onLogout(){this.auth.logout()}keyEvent(t){"Enter"===t&&!this.dialog.active&&this.translateTo&&this.identifier&&this.onAddTranslation()}fillSpacesIfNeeds(t){let r=t.map(a=>a);return this.template.activeTranslationElement[this.language.origin].forEach((a,d)=>{a.startsWith(" ")&&(r[d]=` ${r[d]}`),a.endsWith(" ")&&(r[d]=`${r[d]} `)}),r}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ua),u.Y36(RM),u.Y36(Vu),u.Y36(Zh),u.Y36(c0),u.Y36(Zn),u.Y36(E2))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-tool"]],viewQuery:function(t,r){if(1&t&&u.Gf(B$,5),2&t){let i;u.iGM(i=u.CRH())&&(r.translationAreaRefs=i)}},hostVars:2,hostBindings:function(t,r){1&t&&u.NdJ("keyup",function(a){return r.keyEvent(a.key)},!1,u.Jf7),2&t&&u.Tol(r.classes)},inputs:{originTexts:"originTexts",translateToTexts:"translateToTexts"},outputs:{removeIdentifierEvent:"removeIdentifierEvent",unselectEvent:"unselectEvent",autoIdentifyEvent:"autoIdentifyEvent",saveTemplateEvent:"saveTemplateEvent",generateEvent:"generateEvent",removeAllIdentifiersEvent:"removeAllIdentifiersEvent",openManualEvent:"openManualEvent"},features:[u.TTD],decls:89,vars:23,consts:[[1,"htt-left","htt-tool-bg"],["class","htt-areas",4,"ngIf"],[1,"htt-identifier","htt-cont"],[1,"htt-title"],[1,"htt-text-field"],[1,"htt-mybtn","full","red"],[3,"disabled","click"],[1,"htt-mybtn","full"],[1,"htt-mybtn","red","full"],[1,"htt-bottom","htt-tool-bg",3,"mouseenter","mouseleave"],[1,"htt-myrow"],[1,"htt-filename","htt-text-field"],[1,"htt-langs"],[1,"htt-mybtn","min","blue"],["disabled",""],[3,"click"],[1,"htt-right"],[1,"htt-mybtn","green"],[1,"htt-mybtn","blue"],[1,"htt-hidden-row"],[1,"htt-mybtn"],[3,"disabled","innerHTML","click"],[1,"htt-mybtn","red"],[1,"htt-areas"],[4,"ngFor","ngForOf"],[1,"htt-textarea-wrapper"],[1,"htt-origin","htt-textarea"],["contenteditable","","role","textbox",1,"htt-textarea",3,"keydown"],["translationAreaRef",""]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.YNc(1,U$,2,1,"div",1),u.TgZ(2,"div",2)(3,"p",3),u._uU(4,"IDENTIFIER:"),u.qZA(),u.TgZ(5,"p",4),u._uU(6),u.qZA(),u.TgZ(7,"div",5)(8,"button",6),u.NdJ("click",function(){return r.removeIdentifier()}),u._uU(9,"remove"),u.qZA()(),u.TgZ(10,"div",7)(11,"button",6),u.NdJ("click",function(){return r.onAddTranslation()}),u._uU(12,"ADD TRANSLATION"),u.qZA()(),u.TgZ(13,"div",8)(14,"button",6),u.NdJ("click",function(){return r.onUnselect()}),u._uU(15,"unselect"),u.qZA()(),u.TgZ(16,"div",8)(17,"button",6),u.NdJ("click",function(){return r.removeTranslation()}),u._uU(18,"remove translation"),u.qZA()()()(),u.TgZ(19,"div",9),u.NdJ("mouseenter",function(){return r.classes="htt-hover"})("mouseleave",function(){return r.classes=""}),u.TgZ(20,"div",10)(21,"div")(22,"p",3),u._uU(23,"project:"),u.qZA(),u.TgZ(24,"p",11),u._uU(25),u.qZA()(),u.TgZ(26,"div")(27,"p",3),u._uU(28,"filename:"),u.qZA(),u.TgZ(29,"p",11),u._uU(30),u.qZA()(),u.TgZ(31,"div",12)(32,"div",3),u._uU(33,"LANGUAGES"),u.qZA(),u.TgZ(34,"div",13)(35,"button",14),u._uU(36,"from:"),u.qZA()(),u.TgZ(37,"p",4),u._uU(38),u.ALo(39,"tittlecase"),u.ALo(40,"async"),u.qZA(),u.TgZ(41,"div",13)(42,"button",15),u.NdJ("click",function(){return r.onChooseLanguage()}),u._uU(43,"to: "),u.qZA()(),u.TgZ(44,"p",4),u._uU(45),u.ALo(46,"tittlecase"),u.qZA()(),u.TgZ(47,"div",16)(48,"div",17)(49,"button",15),u.NdJ("click",function(){return r.openManualEvent.emit()}),u._uU(50,"!?! MANUAL !?!"),u.qZA()(),u.TgZ(51,"div",18)(52,"button",15),u.NdJ("click",function(){return r.onBorders()}),u._uU(53,"borders"),u.qZA()(),u.TgZ(54,"div",18)(55,"button",15),u.NdJ("click",function(){return r.autoIdentify()}),u._uU(56,"AUTO IDENTIFY"),u.qZA()()()(),u.TgZ(57,"div",19)(58,"div")(59,"div",18)(60,"button",6),u.NdJ("click",function(){return r.saveTemplate()}),u._uU(61,"SAVE TEMPLATE"),u.qZA()(),u.TgZ(62,"div",18)(63,"button",6),u.NdJ("click",function(){return r.translateImages()}),u._uU(64,"add img translations"),u.qZA()(),u.TgZ(65,"div",18)(66,"button",6),u.NdJ("click",function(){return r.translateHead()}),u._uU(67,"add head translations"),u.qZA()(),u.TgZ(68,"div",17)(69,"button",6),u.NdJ("click",function(){return r.untranslated()}),u._uU(70,"untranslated"),u.qZA()(),u.TgZ(71,"div",20)(72,"button",21),u.NdJ("click",function(){return r.translateTemplate()}),u.qZA()(),u.TgZ(73,"div",18)(74,"button",6),u.NdJ("click",function(){return r.generateTemplate()}),u._uU(75,"GENERATE TEMPLATE"),u.qZA()()(),u.TgZ(76,"div")(77,"div",22)(78,"button",15),u.NdJ("click",function(){return r.removeAllIdentifiers()}),u._uU(79,"remove all identifiers"),u.qZA()(),u.TgZ(80,"div",18)(81,"button",15),u.NdJ("click",function(){return r.onOriginDownload()}),u._uU(82,"download origin file"),u.qZA()(),u.TgZ(83,"div",22)(84,"button",15),u.NdJ("click",function(){return r.onLeave()}),u._uU(85,"PROJECTS"),u.qZA()(),u.TgZ(86,"div",22)(87,"button",15),u.NdJ("click",function(){return r.onLogout()}),u._uU(88,"LOGOUT"),u.qZA()()()()()),2&t&&(u.xp6(1),u.Q6J("ngIf",r.originTexts&&r.originTexts.length),u.xp6(5),u.Oqu(r.identifier||"none..."),u.xp6(2),u.Q6J("disabled",!r.identifier),u.xp6(3),u.Q6J("disabled",!r.translateTo),u.xp6(3),u.Q6J("disabled",!r.identifier),u.xp6(3),u.Q6J("disabled",!r.identifier||!r.translateTo),u.xp6(8),u.Oqu(r.projectName||"No project..."),u.xp6(5),u.Oqu(r.fileName||"No file..."),u.xp6(8),u.Oqu(u.lcZ(39,17,u.lcZ(40,19,r.originLanguageObs))||"none..."),u.xp6(7),u.Oqu(u.lcZ(46,21,r.translateTo)||"none..."),u.xp6(15),u.Q6J("disabled",r.generated),u.xp6(3),u.Q6J("disabled",!r.translateTo),u.xp6(3),u.Q6J("disabled",!r.translateTo),u.xp6(3),u.Q6J("disabled",!r.translateTo),u.xp6(3),u.Q6J("disabled",!r.translateTo)("innerHTML",r.translated?"BACK TO ORIGIN":"TRANSLATE TEMPLATE",u.oJD),u.xp6(2),u.Q6J("disabled",!r.translateTo))},directives:[En,vn],pipes:[L$,sl],styles:["[_nghost-%COMP%]{height:99vh}.htt-tool-bg[_ngcontent-%COMP%]{background-color:var(--dark);border-radius:0;box-shadow:0 1px 2px #3c40434d,0 1px 3px 1px #3c404326}.htt-bottom[_ngcontent-%COMP%]{height:115px;width:100%;z-index:100;position:fixed;bottom:0;left:0;transition:.1s ease-in-out;transform:translateY(65px)}.htt-hover[_nghost-%COMP%]   .htt-bottom[_ngcontent-%COMP%]{transform:translateY(0)}.htt-bottom[_ngcontent-%COMP%]   .htt-hidden-row[_ngcontent-%COMP%]{padding:0 .5em;width:100%;height:50%;background-color:var(--darker);display:flex;align-items:center;justify-content:space-between;gap:1em}.htt-bottom[_ngcontent-%COMP%]   .htt-hidden-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1em}.htt-bottom[_ngcontent-%COMP%]   .htt-myrow[_ngcontent-%COMP%]{display:grid;grid-template-columns:3fr 3fr 6fr 5fr;grid-column-gap:1em;column-gap:1em;height:50px}.htt-myrow[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:var(--darker);border-radius:5px;display:flex;align-items:center;padding:0 .5em}.htt-title[_ngcontent-%COMP%]{color:#ffffff9e;letter-spacing:.5px;padding-right:5px}.htt-filename[_ngcontent-%COMP%], .htt-mybtn[_ngcontent-%COMP%]{height:35px;line-height:30px}.htt-mybtn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--green);border-color:var(--green)}.htt-mybtn.blue[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--bluegreen);border-color:var(--bluegreen)}.htt-mybtn.red[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--orange);border-color:var(--orange)}.htt-text-field[_ngcontent-%COMP%]{height:35px;line-height:35px;width:100%;background-color:var(--lighter);border-radius:.3em;letter-spacing:.5px;text-align:center;padding:0 .5em;min-width:5em;color:var(--blue)}.htt-langs[_ngcontent-%COMP%]{display:flex;gap:.2em}.htt-right[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.3em}.htt-left[_ngcontent-%COMP%]{width:30vw;height:100%;padding:0 .3em;color:#000;display:flex;flex-direction:column;justify-content:center;gap:1vw;padding-bottom:6vh}.htt-left[_ngcontent-%COMP%]   .htt-identifier[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 3fr;grid-column-gap:.5em;column-gap:.5em;grid-row-gap:.3em;row-gap:.3em}.htt-areas[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:70vh;overflow:auto;margin-top:8vh}.htt-areas[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;border-radius:4px}.htt-areas[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.htt-areas[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:var(--morelighter);border-radius:5px;border:1px solid transparent}.htt-areas[_ngcontent-%COMP%]   .htt-origin[_ngcontent-%COMP%]{margin-top:15px;background-color:var(--lighter)}.htt-textarea-wrapper[_ngcontent-%COMP%]{display:inline-table}.htt-textarea[_ngcontent-%COMP%]{-webkit-user-select:auto;user-select:auto;margin-top:3px;min-height:5vh;max-width:30vw;width:100%;background-color:var(--morelighter);border:0;outline:none;font-size:1em;border-radius:.2em;color:#fff;padding:.3em .4em;letter-spacing:.3px;overflow:hidden;resize:both;display:block}.htt-textarea[disabled][_ngcontent-%COMP%]{background-color:var(--lighter)}.htt-cont[_ngcontent-%COMP%]{background-color:var(--darker);border-radius:.3em;padding:.4em .5em}.htt-mybtn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#fff}"]}),n})();const H$=["contentRef"];let G$=(()=>{class n{constructor(t,r,i){this.template=t,this.language=r,this.file=i,this.identifier=new u.vpe,this.originTexts=new u.vpe,this.translateToTexts=new u.vpe,this.innerBefore=""}get ref(){var t;return null===(t=this.contentRef)||void 0===t?void 0:t.nativeElement}ngAfterViewInit(){this.file.getTemplateConentObs().subscribe(t=>this.initTemplate(t)),this.language.getTranslateToObs().subscribe(t=>t.name&&this.template.initBorders()),this.template.reference=this.ref}initTemplate(t){var r=this;return(0,Y.Z)(function*(){t&&(console.log("init template"),r.ref.innerHTML=t,yield r.template.initTranslationElements(),r.template.removeIdentifiersToRemove(),r.file.css&&r.initStylesheet(),r.template.initBorders())})()}initStylesheet(){let t=document.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=this.file.css,this.ref.appendChild(t)}onMousemove(t){let r=t;r.innerHTML!==this.innerBefore&&r.getAttribute("identifier")&&(this.innerBefore=r.innerHTML,this.checkElement(r))}checkElement(t){let r=t.childNodes;if(r.length>0)for(let i=0;i<r.length;i++){if(r[i].nodeType===Node.TEXT_NODE){this.selectElement(r[i].parentElement);break}if(r[i]instanceof HTMLInputElement||r[i]instanceof HTMLTextAreaElement){this.selectElement(r[i]);break}this.checkElement(r[i])}}selectElement(t){this.activeElement||(this.removeStyles(this.selectedElement),this.removeListeners(this.selectedElement),this.selectedElement=t,this.setSelectStyles(t),t.onmouseleave=()=>this.onElementLeave(t),t.onclick=r=>{r.preventDefault(),this.clickElement(t)})}onElementLeave(t){this.selectedElement&&(this.selectedElement=null,this.innerBefore="",this.removeStyles(t),this.removeListeners(t))}clickElement(t){this.activeElement?this.deactivate():this.selectedElement&&this.activate(t)}activate(t){if(t){this.activeElement=t,this.selectedElement=null,this.setActiveStyles(t);let r=t.getAttribute("identifier");r&&(this.identifier.emit(r),this.template.setActiveTranslationElement(r),this.template.activeTranslationElement.hasOwnProperty(this.language.origin)&&this.originTexts.emit(this.template.activeTranslationElement[this.language.origin]),this.template.activeTranslationElement.hasOwnProperty(this.language.translateTo)&&this.translateToTexts.emit(this.template.activeTranslationElement[this.language.translateTo]))}}deactivate(t){let r=t||this.activeElement;this.removeStyles(r),this.removeListeners(r),this.activeElement=null,this.selectedElement=null,this.identifier.emit(""),this.originTexts.emit([]),this.translateToTexts.emit([]),this.innerBefore="",this.template.activeTranslationElement=null}removeListeners(t){var r;if(t){let i=t.cloneNode(!0);null===(r=t.parentNode)||void 0===r||r.replaceChild(i,t)}}setSelectStyles(t){this.selectedElement&&(t.style.backgroundColor="#41a4a6",t.style.cursor="pointer")}setActiveStyles(t){this.activeElement&&(t.style.backgroundColor="#db863b",t.style.cursor="pointer")}removeStyles(t){t&&(t.style.backgroundColor="",t.style.cursor="")}removeIdentifier(){this.template.removeElementIdentifier(this.activeElement)}saveTemplate(){var t=this;return(0,Y.Z)(function*(){t.ref.querySelectorAll("[style]").forEach(i=>i.removeAttribute("style"));let r=t.file.refresh(t.ref);t.template.saveTemplate(r),t.template.initBorders()})()}autoIdentify(){var t=this;return(0,Y.Z)(function*(){t.template.identify(t.ref)})()}unselect(){this.deactivate(this.activeElement)}generateTemplate(){const t=this.contentRef.nativeElement.innerHTML;this.contentRef.nativeElement.querySelectorAll("[style]").forEach(r=>r.removeAttribute("style")),this.contentRef.nativeElement.querySelectorAll("[identifier]").forEach(r=>r.removeAttribute("identifier")),this.file.generateTemplate(this.ref,this.language.translateToFull),this.contentRef.nativeElement.innerHTML=t}keyEvent(t){"Escape"===t&&this.activeElement&&this.deactivate(this.activeElement)}getTranslationElement(t){return this.template.translationElements.find(r=>r.identifier===t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(RM),u.Y36(ua),u.Y36(xM))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-template"]],viewQuery:function(t,r){if(1&t&&u.Gf(H$,5),2&t){let i;u.iGM(i=u.CRH())&&(r.contentRef=i.first)}},hostBindings:function(t,r){1&t&&u.NdJ("keyup",function(a){return r.keyEvent(a.key)},!1,u.Jf7)},outputs:{identifier:"identifier",originTexts:"originTexts",translateToTexts:"translateToTexts"},decls:3,vars:0,consts:[["contentRef",""]],template:function(t,r){1&t&&(u.TgZ(0,"div",null,0),u._uU(2,"before initialization !"),u.qZA())},encapsulation:2}),n})();function $$(n,e){1&n&&u._UZ(0,"app-manual")}let q$=(()=>{class n{constructor(){this.manualActive=!1}openManual(){this.manualActive?(console.log(this.manualRef),this.manualRef.class="manual-hide",setTimeout(()=>this.manualActive=!1,300)):this.manualActive=!0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-main"]],viewQuery:function(t,r){if(1&t&&u.Gf(pO,5),2&t){let i;u.iGM(i=u.CRH())&&(r.manualRef=i.first)}},decls:5,vars:2,consts:[[3,"originTexts","autoIdentifyEvent","saveTemplateEvent","unselectEvent","removeIdentifierEvent","generateEvent","openManualEvent"],["tool",""],[1,"htt-template-component",3,"identifier","originTexts","translateToTexts","mousemove","click"],["template",""],[4,"ngIf"]],template:function(t,r){if(1&t){const i=u.EpF();u.TgZ(0,"app-tool",0,1),u.NdJ("autoIdentifyEvent",function(){return u.CHM(i),u.MAs(3).autoIdentify()})("saveTemplateEvent",function(){return u.CHM(i),u.MAs(3).saveTemplate()})("unselectEvent",function(){return u.CHM(i),u.MAs(3).unselect()})("removeIdentifierEvent",function(){return u.CHM(i),u.MAs(3).removeIdentifier()})("generateEvent",function(){return u.CHM(i),u.MAs(3).generateTemplate()})("openManualEvent",function(){return r.openManual()}),u.qZA(),u.TgZ(2,"app-template",2,3),u.NdJ("identifier",function(d){return u.CHM(i),u.MAs(1).identifier=d})("originTexts",function(d){return r.originTexts=d})("translateToTexts",function(d){return u.CHM(i),u.MAs(1).translateToTexts=d})("mousemove",function(d){return u.CHM(i),u.MAs(3).onMousemove(d.target)})("click",function(d){return d.preventDefault()}),u.qZA(),u.YNc(4,$$,1,0,"app-manual",4)}2&t&&(u.Q6J("originTexts",r.originTexts),u.xp6(4),u.Q6J("ngIf",r.manualActive))},directives:[j$,G$,En,pO],styles:["[_nghost-%COMP%]{display:flex;height:99vh}.htt-template-component[_ngcontent-%COMP%]{width:70vw;height:100%;overflow:auto}"]}),n})(),W$=(()=>{class n{constructor(t,r,i,a,d){this.language=t,this.db=r,this.dialog=i,this.file=a,this.translator=d}generate(t){var r=this;return(0,Y.Z)(function*(){try{if(r.translateToFull=r.language.translateToFull,!r.translateToFull.name)throw new Error("No translate to language");const i=yield r.getDOC(t);yield r.initTranslationElements(t,i),yield r.translateDoc(i),r.file.generateTemplate(i,r.translateToFull),r.file.clear(),r.language.reset()}catch(i){r.dialog.setDialogOnlyHeader(i.message)}})()}getDOC(t){var r=this;return(0,Y.Z)(function*(){const i=yield r.db.downloadFile(t.filename);yield r.file.initFile(i);const a=document.createElement("div");return a.innerHTML=r.file.getTemplateConent(),a})()}initTranslationElements(t,r){var i=this;return(0,Y.Z)(function*(){i.translationElements=[],(yield i.db.getProjectTranslationDocs(t.name)).forEach(d=>{r.querySelector(`[identifier="${d.identifier}"]`)&&i.translationElements.push(d)})})()}translateDoc(t){var r=this;return(0,Y.Z)(function*(){r.translator.setReference(t),r.translator.set(r.translationElements),yield r.translator.translateTemplate(!1)})()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ua),u.LFG(mm),u.LFG(Vu),u.LFG(xM),u.LFG(D2))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Z$=["languageRef"];function z$(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",18)(1,"div",19)(2,"button",12),u.NdJ("click",function(){u.CHM(t);const i=u.oxw().$implicit;return u.oxw().onAddCss(i)}),u._uU(3),u.qZA()(),u.TgZ(4,"div",13)(5,"button",12),u.NdJ("click",function(){u.CHM(t);const i=u.oxw().$implicit;return u.oxw().onDelCss(i)}),u._uU(6,"del"),u.qZA()()()}if(2&n){const t=u.oxw().$implicit;u.xp6(3),u.Oqu(t.cssName)}}function K$(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",20)(1,"button",12),u.NdJ("click",function(){u.CHM(t);const i=u.oxw().$implicit;return u.oxw().onAddCss(i)}),u._uU(2,"add"),u.qZA()()}}function Y$(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",14)(1,"p"),u._uU(2),u.qZA(),u.TgZ(3,"p"),u._uU(4),u.qZA(),u.YNc(5,z$,7,1,"div",15),u.YNc(6,K$,3,0,"div",16),u.TgZ(7,"p"),u._uU(8),u.qZA(),u.TgZ(9,"p"),u._uU(10),u.qZA(),u.TgZ(11,"p"),u._uU(12),u.qZA(),u.TgZ(13,"div",10)(14,"button",12),u.NdJ("click",function(){const a=u.CHM(t).$implicit;return u.oxw().onSetProject(a)}),u._uU(15,"SELECT"),u.qZA()(),u.TgZ(16,"div",13)(17,"button",12),u.NdJ("click",function(){const a=u.CHM(t).$implicit;return u.oxw().onDelete(a)}),u._uU(18,"delete"),u.qZA()(),u.TgZ(19,"div",17)(20,"button",12),u.NdJ("click",function(){const a=u.CHM(t).$implicit;return u.oxw().onGenerate(a)}),u._uU(21),u.qZA()()()}if(2&n){const t=e.$implicit,r=u.oxw();u.xp6(2),u.Oqu(t.name),u.xp6(2),u.Oqu(t.filename),u.xp6(1),u.Q6J("ngIf",t.cssName),u.xp6(1),u.Q6J("ngIf",!t.cssName),u.xp6(2),u.Oqu(t.originLanguage),u.xp6(2),u.Oqu(t.modified.split(" ").shift()),u.xp6(2),u.Oqu(t.modified.split(" ").pop()),u.xp6(9),u.Oqu(r.generateButtonInner)}}function J$(n,e){1&n&&(u.TgZ(0,"div",21),u._uU(1," To start first project press ADD NEW PROJECT and select your html template file. "),u.qZA())}function Q$(n,e){if(1&n&&(u.TgZ(0,"option",32),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.s9C("value",t),u.xp6(1),u.Oqu(t)}}function X$(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",22)(1,"div",23)(2,"div")(3,"label"),u._uU(4,"file name:"),u.qZA(),u.TgZ(5,"p",24),u._uU(6),u.qZA()(),u.TgZ(7,"div")(8,"label"),u._uU(9,"css file (optional):"),u.qZA(),u.TgZ(10,"div",25)(11,"p",26),u._uU(12),u.qZA(),u.TgZ(13,"input",27),u.NdJ("change",function(i){return u.CHM(t),u.oxw().onCssFileSelected(i)}),u.qZA()()(),u.TgZ(14,"div")(15,"label"),u._uU(16,"project name:"),u.qZA(),u.TgZ(17,"input",28),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().input=i}),u.qZA()(),u.TgZ(18,"div")(19,"label"),u._uU(20,"origin language:"),u.qZA(),u.TgZ(21,"select",26,29)(23,"option",30),u._uU(24,"Select Language"),u.qZA(),u.YNc(25,Q$,2,2,"option",31),u.qZA()()(),u.TgZ(26,"ul")(27,"li"),u._uU(28,"Select CSS file if your template "),u._UZ(29,"br"),u._uU(30,"does not contain inline them"),u.qZA(),u.TgZ(31,"li"),u._uU(32,"Enter a project name"),u.qZA(),u.TgZ(33,"li"),u._uU(34,"Select the original language "),u._UZ(35,"br"),u._uU(36,"of the template"),u.qZA(),u.TgZ(37,"li"),u._uU(38,"Add a project to the list"),u.qZA()()()}if(2&n){const t=u.oxw();u.xp6(6),u.Oqu(t.filenameAdding||"Choose file ..."),u.xp6(6),u.Oqu(t.cssFilenameAdding||"Choose file ..."),u.xp6(5),u.Q6J("ngModel",t.input),u.xp6(8),u.Q6J("ngForOf",t.languages)}}function e6(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",10)(1,"button",33),u.NdJ("click",function(){return u.CHM(t),u.oxw().onAddNewProject()}),u._uU(2,"ADD PROJECT"),u.qZA()()}if(2&n){const t=u.oxw();u.xp6(1),u.Q6J("disabled",!t.input)}}let t6=(()=>{class n{constructor(t,r,i,a,d,f){this.service=t,this.db=r,this.dialog=i,this.router=a,this.language=d,this.generator=f,this.filenameAdding="",this.cssFilenameAdding="",this.inputOpen=!1,this.input="",this.generateButtonInner="generate",this.wait=_=>new Promise(w=>setTimeout(w,_)),this.languages=this.language.list,this.userProjectsObs=this.db.getUserProjectsObs()}onFileSelected(t){var r=this;return(0,Y.Z)(function*(){let i=t.target.files[0];try{if(r.service.filenameTaken(i))throw new Error("file name is taken!");if(!r.htmlFile(i))throw new Error("file has to be HTML!");r.filenameAdding=i.name,r.inputOpen=!0,r.service.fileForNewProject=i}catch(a){r.dialog.setDialogOnlyHeader(a.message)}})()}onAddCss(t){const r=document.createElement("input");r.type="file",r.onchange=()=>this.addCssFile(t.name,r.files[0]),r.click()}onDelCss(t){var r=this;return(0,Y.Z)(function*(){try{yield r.service.deleteCssFile(t.name),r.dialog.setDialogOnlyHeader("CSS file removed!")}catch(i){r.dialog.setDialogOnlyHeader(i.message)}})()}addCssFile(t,r){var i=this;return(0,Y.Z)(function*(){try{if(!i.cssFile(r))throw new Error("file has to be CSS!");yield i.service.addCssFile(t,r),i.dialog.setDialogOnlyHeader("CSS file added")}catch(a){i.dialog.setDialogOnlyHeader(a.message)}})()}onCssFileSelected(t){var r=this;return(0,Y.Z)(function*(){let i=t.target.files[0];try{if(!r.cssFile(i))throw new Error("file has to be CSS!");r.cssFilenameAdding=i.name,r.service.cssFileForNewProject=i}catch(a){r.dialog.setDialogOnlyHeader(a.message)}})()}rejectAddingProject(){this.filenameAdding="",this.service.fileForNewProject=null,this.inputOpen=!1}onAddNewProject(){var t=this;return(0,Y.Z)(function*(){try{if(t.service.projectNameTaken(t.input))throw new Error("project name is taken!");let r={name:t.input,filename:t.filenameAdding,cssName:"",modified:(new Date).toLocaleDateString()+" "+(new Date).toLocaleTimeString(),originLanguage:t.languageRef.nativeElement.value};if(!(yield t.service.addProject(r)))throw new Error("add project error");t.rejectAddingProject()}catch(r){t.dialog.setDialogOnlyHeader(r.message)}})()}onDelete(t){this.service.deleteProject(t.name)}onGenerate(t){this.language.translateTo?(console.log("generate"),this.generator.generate(t)):(this.dialog.clearDialog(),this.dialog.purpose="language",this.dialog.open())}onSetProject(t){var r=this;return(0,Y.Z)(function*(){r.service.setProject(t),r.router.navigate(["main"])})()}logout(){this.service.logout()}deleteAccount(){var t=this;return(0,Y.Z)(function*(){yield t.dialog.confirmDialog("Are you sure?!","Account and all data will be deleted."),t.service.deleteAccount()})()}htmlFile(t){return"html"===t.name.split(".").pop()}cssFile(t){return"css"===t.name.split(".").pop()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(c0),u.Y36(mm),u.Y36(Vu),u.Y36(Zn),u.Y36(ua),u.Y36(W$))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-projects"]],viewQuery:function(t,r){if(1&t&&u.Gf(Z$,5),2&t){let i;u.iGM(i=u.CRH())&&(r.languageRef=i.first)}},decls:34,vars:9,consts:[[1,"htt-mycontainer"],[1,"htt-projects"],[1,"htt-myrow","head"],["class","htt-myrow",4,"ngFor","ngForOf"],["class","htt-no-projects",4,"ngIf"],["class","htt-add-project-container",4,"ngIf"],["class","htt-mybtn center",4,"ngIf"],["type","file",1,"htt-file-input",3,"change"],["fileUpload",""],[1,"htt-buttons"],[1,"htt-mybtn","center"],[3,"innerHTML","click"],[3,"click"],[1,"htt-mybtn","center","red"],[1,"htt-myrow"],["class","htt-cssButtons",4,"ngIf"],["class","htt-mybtn center w50",4,"ngIf"],[1,"htt-mybtn","center","green"],[1,"htt-cssButtons"],[1,"htt-mybtn","center","trans"],[1,"htt-mybtn","center","w50"],[1,"htt-no-projects"],[1,"htt-add-project-container"],[1,"htt-add-project"],["disabled","",1,"htt-myinput"],[1,"htt-file-input-container"],[1,"htt-myinput"],["type","file",1,"htt-myinput",3,"change"],["type","text","placeholder","set project name...",1,"htt-myinput",3,"ngModel","ngModelChange"],["languageRef",""],["disabled",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"disabled","click"]],template:function(t,r){if(1&t){const i=u.EpF();u.TgZ(0,"div",0)(1,"h3"),u._uU(2,"SELECT PROJECT:"),u.qZA(),u.TgZ(3,"div",1)(4,"div",2)(5,"p"),u._uU(6,"PROJECT:"),u.qZA(),u.TgZ(7,"p"),u._uU(8,"FILENAME:"),u.qZA(),u.TgZ(9,"p"),u._uU(10,"CSS:"),u.qZA(),u.TgZ(11,"p"),u._uU(12,"ORIGIN LANGUAGE:"),u.qZA(),u.TgZ(13,"p"),u._uU(14,"MODIFIED:"),u.qZA(),u.TgZ(15,"p"),u._uU(16,"TIME:"),u.qZA()(),u.YNc(17,Y$,22,8,"div",3),u.ALo(18,"async"),u.qZA(),u.YNc(19,J$,2,0,"div",4),u.ALo(20,"async"),u.YNc(21,X$,39,4,"div",5),u.YNc(22,e6,3,1,"div",6),u.TgZ(23,"input",7,8),u.NdJ("change",function(d){return r.onFileSelected(d)}),u.qZA(),u.TgZ(25,"div",9)(26,"div",10)(27,"button",11),u.NdJ("click",function(){u.CHM(i);const d=u.MAs(24);return r.inputOpen?r.rejectAddingProject():d.click()}),u.qZA()(),u.TgZ(28,"div",10)(29,"button",12),u.NdJ("click",function(){return r.logout()}),u._uU(30,"LOGOUT"),u.qZA()(),u.TgZ(31,"div",13)(32,"button",12),u.NdJ("click",function(){return r.deleteAccount()}),u._uU(33,"delete account"),u.qZA()()()()}if(2&t){let i;u.xp6(17),u.Q6J("ngForOf",u.lcZ(18,5,r.userProjectsObs)),u.xp6(2),u.Q6J("ngIf",0===(null==(i=u.lcZ(20,7,r.userProjectsObs))?null:i.length)&&!r.inputOpen),u.xp6(2),u.Q6J("ngIf",r.inputOpen),u.xp6(1),u.Q6J("ngIf",r.inputOpen),u.xp6(5),u.Q6J("innerHTML",r.inputOpen?"REJECT":"ADD NEW PROJECT",u.oJD)}},directives:[vn,En,js,_t,ms,R0,e_],pipes:[sl],styles:[".htt-mycontainer[_ngcontent-%COMP%]{margin:10vh auto 0;max-width:80vw}h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-weight:700;color:#1a73e8}.htt-projects[_ngcontent-%COMP%]{border:1px solid #0000001f;border-radius:6px;box-shadow:0 -1px #0000001f inset}.htt-projects[_ngcontent-%COMP%]   .htt-myrow[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr 1fr 1fr 1fr .5fr .5fr;min-height:45px;align-items:center}.htt-projects[_ngcontent-%COMP%]   .htt-myrow.head[_ngcontent-%COMP%]{font-weight:700}.htt-projects[_ngcontent-%COMP%]   .htt-myrow[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin:0 10px}.htt-projects[_ngcontent-%COMP%]   .htt-myrow[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{text-align:center}.htt-projects[_ngcontent-%COMP%]   .htt-myrow[_ngcontent-%COMP%]:nth-child(even){background-color:#e8e8e8}.htt-mycontainer[_ngcontent-%COMP%] > .htt-mybtn[_ngcontent-%COMP%]{margin-top:20px}.htt-mycontainer[_ngcontent-%COMP%] > .htt-mybtn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:200px}.htt-add-project-container[_ngcontent-%COMP%]{margin:50px auto 20px;display:flex;align-items:center;justify-content:center;gap:30px}.htt-add-project[_ngcontent-%COMP%]{max-width:300px}.htt-add-project[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:grid;margin-top:20px}.htt-add-project[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{padding-left:10px}.htt-add-project[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:300px}.htt-file-input-container[_ngcontent-%COMP%]{position:relative;cursor:pointer}.htt-file-input-container[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{position:absolute;top:0;left:0;opacity:0;cursor:pointer}.htt-file-input[_ngcontent-%COMP%]{opacity:0;height:0;width:0;padding:0;min-height:0}.htt-myinput[_ngcontent-%COMP%]{line-height:40px}.w50[_ngcontent-%COMP%]{padding:0 20%}.htt-add-project-container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{font-size:1.1em;list-style:disc}.htt-add-project-container[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{list-style:disc;margin-top:20px}.htt-buttons[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:20px;display:flex;justify-content:center;gap:30px}.htt-cssButtons[_ngcontent-%COMP%]{display:grid;grid-template-columns:6fr 1fr}.htt-cssButtons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 2px!important}.htt-no-projects[_ngcontent-%COMP%]{text-align:center;margin:0 auto;max-width:60%;font-size:1.3em;padding-top:30px}"]}),n})();function n6(n,e){if(1&n&&(u.TgZ(0,"p",10),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Oqu(t.errorMsg)}}function r6(n,e){if(1&n&&(u.TgZ(0,"p",11),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Oqu(t.message)}}const i6=function(){return["/login"]};let s6=(()=>{class n{constructor(t,r){this.auth=t,this.router=r,this.registerForm=new zd({email:new Ba("",[ei.required,ei.email]),confirmEmail:new Ba("",[ei.required]),password:new Ba("",[ei.required,ei.minLength(3),ei.maxLength(60)]),confirmPassword:new Ba("",[ei.required])}),this.submitted=!1,this.errorMsg="",this.message=""}get f(){return this.registerForm.controls}ngOnInit(){}onSubmit(){var t=this;return(0,Y.Z)(function*(){try{if(t.registerForm.invalid)throw new Error("form invalid");if(t.registerForm.value.password!==t.registerForm.value.confirmPassword)throw new Error("Password doesnt match");if(t.registerForm.value.email!==t.registerForm.value.confirmEmail)throw new Error("Email doesnt match");if(!0!==(yield t.auth.register(t.registerForm.value.email,t.registerForm.value.password)))throw new Error;t.registerForm.value.email="",t.registerForm.value.password="",t.message="Register successful"}catch(r){t.errorMsg="Registration failed",setTimeout(()=>t.errorMsg="",1e4)}})()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Zh),u.Y36(Zn))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-register-form"]],decls:27,vars:6,consts:[[1,"htt","one","htt-mycontainer",3,"formGroup","ngSubmit","keyup.escape"],["type","email","formControlName","email","autocomplete","off",1,"htt-myinput"],["type","email","formControlName","confirmEmail","autocomplete","off",1,"htt-myinput"],["type","password","formControlName","password","autocomplete","off",1,"htt-myinput"],["type","password","formControlName","confirmPassword","autocomplete","off",1,"htt-myinput"],[1,"htt-mybtn","full"],[3,"disabled"],["type","button",3,"routerLink"],["class","htt-message red",4,"ngIf"],["class","htt-message",4,"ngIf"],[1,"htt-message","red"],[1,"htt-message"]],template:function(t,r){1&t&&(u.TgZ(0,"form",0),u.NdJ("ngSubmit",function(){return r.onSubmit()})("keyup.escape",function(){return r.registerForm.reset()}),u.TgZ(1,"h1"),u._uU(2,"Register form"),u.qZA(),u.TgZ(3,"div")(4,"label"),u._uU(5,"Email"),u.qZA(),u._UZ(6,"input",1),u.qZA(),u.TgZ(7,"div")(8,"label"),u._uU(9,"Email repeat"),u.qZA(),u._UZ(10,"input",2),u.qZA(),u.TgZ(11,"div")(12,"label"),u._uU(13,"Password"),u.qZA(),u._UZ(14,"input",3),u.qZA(),u.TgZ(15,"div")(16,"label"),u._uU(17,"Password repeat"),u.qZA(),u._UZ(18,"input",4),u.qZA(),u.TgZ(19,"div",5)(20,"button",6),u._uU(21,"Register"),u.qZA()(),u.TgZ(22,"div",5)(23,"button",7),u._uU(24,"back"),u.qZA()(),u.YNc(25,n6,2,1,"p",8),u.YNc(26,r6,2,1,"p",9),u.qZA()),2&t&&(u.Q6J("formGroup",r.registerForm),u.xp6(20),u.Q6J("disabled",r.registerForm.invalid),u.xp6(3),u.Q6J("routerLink",u.DdM(5,i6)),u.xp6(2),u.Q6J("ngIf",r.errorMsg),u.xp6(1),u.Q6J("ngIf",r.message))},directives:[Jd,Bt,Qd,js,_t,mp,Cu,En],styles:[""]}),n})();function o6(n,e){1&n&&(u.ynx(0),u.TgZ(1,"h3",8),u._uU(2,"IMAGES ALT's"),u.qZA(),u.TgZ(3,"p",9),u._uU(4," These elements have been identified as images that need to be translated. For each of them, you must enter a translation or remove the Identifier. This list should be empty before you translate the template. "),u.qZA(),u.TgZ(5,"h4",8),u._uU(6,"Identified elements without translations:"),u.qZA(),u.BQk())}function a6(n,e){1&n&&(u.ynx(0),u.TgZ(1,"h3",8),u._uU(2,"HEAD META"),u.qZA(),u.TgZ(3,"p",9),u._uU(4," These elements have been identified as metadatas that need to be translated. For each of them, you must enter a translation or remove the Identifier. This list should be empty before you translate the template "),u.qZA(),u.TgZ(5,"h4",8),u._uU(6,"Identified elements without translations:"),u.qZA(),u.BQk())}function l6(n,e){1&n&&(u.ynx(0),u.TgZ(1,"h3",8),u._uU(2,"REPORT"),u.qZA(),u.TgZ(3,"p",9),u._uU(4," These elements have been identified but have not been translated yet. For each of them, you must enter a translation or remove the Identifier. This list should be empty before you translate the template "),u.qZA(),u.TgZ(5,"h4",8),u._uU(6,"Identified elements without translations:"),u.qZA(),u.BQk())}function u6(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",16)(1,"button",17),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2).$implicit;return u.oxw().addTranslation(i)}),u._uU(2,"translate"),u.qZA()()}if(2&n){const t=u.oxw(2).$implicit,r=u.oxw();u.xp6(1),u.Q6J("disabled",r.isDisabled(t[r.translateTo]))}}function c6(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",18)(1,"button",19),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2).$implicit;return u.oxw().removeIdentifier(i.identifier)}),u._uU(2,"remove"),u.qZA()()}}function d6(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",12)(1,"p"),u._uU(2),u.qZA(),u.TgZ(3,"p"),u._uU(4),u.qZA(),u.TgZ(5,"textarea",13),u.NdJ("keyup",function(){return 0})("ngModelChange",function(i){const d=u.CHM(t).index;return u.oxw().$implicit[u.oxw().translateTo][d]=i}),u.qZA(),u.YNc(6,u6,3,1,"div",14),u.YNc(7,c6,3,0,"div",15),u.qZA()}if(2&n){const t=e.$implicit,r=e.index,i=u.oxw().$implicit,a=u.oxw();u.xp6(2),u.Oqu(0===r?i.identifier:"..."),u.xp6(2),u.Oqu(t),u.xp6(1),u.Q6J("ngModel",i[a.translateTo][r]),u.xp6(1),u.Q6J("ngIf",0===r),u.xp6(1),u.Q6J("ngIf",0===r)}}function h6(n,e){if(1&n&&(u.TgZ(0,"div",10),u.YNc(1,d6,8,5,"div",11),u.qZA()),2&n){const t=e.$implicit,r=u.oxw();u.xp6(1),u.Q6J("ngForOf",t[r.originLanguage])}}let f6=(()=>{class n{constructor(t,r,i,a,d,f,_){this.project=t,this.language=r,this.template=i,this.service=a,this.router=d,this.dialog=f,this.db=_,this.identifiersToRemove=[],this.purpose=this.service.purpose,this.originLanguage=this.language.origin,this.translateTo=this.language.translateTo,this.elements=this.service.elements.map(w=>(w[this.translateTo]=w[this.originLanguage].map(I=>""),w))}ngOnDestroy(){this.service.purpose="",this.service.elements=[]}removeIdentifier(t){this.identifiersToRemove.push(t),this.elements=this.elements.filter(r=>r.identifier!==t)}addTranslation(t){var r=this;return(0,Y.Z)(function*(){let i=t.identifier,a=t[r.translateTo];console.log(a);try{yield r.db.updateTranslationDoc(r.project.name,i,r.translateTo,a),r.elements=r.elements.filter(d=>d.identifier!==i),r.dialog.setDialogOnlyHeader("Succesfull!")}catch(d){r.dialog.setDialogOnlyHeader("db: update doc error")}})()}isDisabled(t){return!t.every(r=>""!==r)}goBack(){this.identifiersToRemove&&this.identifiersToRemove.length&&this.template.setIdentifiersToRemove(this.identifiersToRemove),this.router.navigate(["main"])}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(c0),u.Y36(ua),u.Y36(RM),u.Y36(T2),u.Y36(Zn),u.Y36(Vu),u.Y36(mm))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-report"]],decls:26,vars:6,consts:[[1,"htt-mycontainer"],[4,"ngIf"],[1,"htt-elements"],[1,"htt-myrow","head"],["class","htt-group",4,"ngFor","ngForOf"],[1,"htt-languages"],[1,"htt-mybtn","center"],[3,"click"],[1,"htt"],[1,"htt-explanation"],[1,"htt-group"],["class","htt-myrow",4,"ngFor","ngForOf"],[1,"htt-myrow"],["type","text","placeholder","translation...",1,"htt-myinput",3,"ngModel","keyup","ngModelChange"],["class","htt-mybtn",4,"ngIf"],["class","htt-mybtn red",4,"ngIf"],[1,"htt-mybtn"],[3,"disabled","click"],[1,"htt-mybtn","red"],["type","button",3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.YNc(1,o6,7,0,"ng-container",1),u.YNc(2,a6,7,0,"ng-container",1),u.YNc(3,l6,7,0,"ng-container",1),u.TgZ(4,"div",2)(5,"div",3)(6,"p"),u._uU(7,"IDENTIFIER:"),u.qZA(),u.TgZ(8,"p"),u._uU(9,"TEXTS:"),u.qZA()(),u.YNc(10,h6,2,1,"div",4),u.qZA(),u.TgZ(11,"div",5)(12,"div")(13,"p"),u._uU(14,"origin language:"),u.qZA(),u.TgZ(15,"p"),u._uU(16),u.qZA()(),u.TgZ(17,"div")(18,"p"),u._uU(19,"translate to language:"),u.qZA(),u.TgZ(20,"p"),u._uU(21),u.qZA(),u._UZ(22,"p"),u.qZA(),u.TgZ(23,"div",6)(24,"button",7),u.NdJ("click",function(){return r.goBack()}),u._uU(25,"GO BACK"),u.qZA()()()()),2&t&&(u.xp6(1),u.Q6J("ngIf","imgElements"===r.purpose),u.xp6(1),u.Q6J("ngIf","headElements"===r.purpose),u.xp6(1),u.Q6J("ngIf","untranslated"===r.purpose),u.xp6(7),u.Q6J("ngForOf",r.elements),u.xp6(6),u.Oqu(r.originLanguage),u.xp6(5),u.Oqu(r.translateTo))},directives:[En,vn,js,_t,ms],styles:[".htt-mycontainer[_ngcontent-%COMP%]{margin:10vh auto;max-width:95vw}.htt-explanation[_ngcontent-%COMP%]{font-size:1.3em;max-width:80%;margin:0 auto;text-align:center}h3.htt[_ngcontent-%COMP%]{text-align:center;margin-bottom:15px;font-weight:700;color:#1a73e8}h4.htt[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;margin-top:20px;font-weight:700;letter-spacing:1px}.htt-elements[_ngcontent-%COMP%]{margin-top:20px;border:1px solid #0000001f;border-radius:6px;box-shadow:0 -1px #0000001f inset;margin-bottom:20px}.htt-elements[_ngcontent-%COMP%]   .htt-myrow[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 5fr 5fr 1fr 1fr;align-items:center;min-height:45px;padding:.3em 0}.htt-elements[_ngcontent-%COMP%]   .htt-myrow[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{margin:3px 0;text-align:left;height:100%}.htt-elements[_ngcontent-%COMP%]   .htt-myrow.head[_ngcontent-%COMP%]{font-weight:700}.htt-elements[_ngcontent-%COMP%]   .htt-myrow[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin:0 10px}.htt-elements[_ngcontent-%COMP%]   .htt-myrow[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{text-align:center}.htt-elements[_ngcontent-%COMP%]   .htt-group[_ngcontent-%COMP%]:nth-child(even){background-color:#e8e8e8}.htt-mycontainer[_ngcontent-%COMP%] > .htt-mybtn[_ngcontent-%COMP%]{margin-top:20px}.htt-mycontainer[_ngcontent-%COMP%] > .htt-mybtn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:200px}.htt-languages[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.htt-languages[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:not(:first-child){font-weight:700}"]}),n})(),OM=(()=>{class n{constructor(t,r){this.authentication=t,this.router=r}canActivate(t,r){return localStorage.getItem("uid")||this.router.navigate(["login"]),!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Zh),u.LFG(Zn))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),C2=(()=>{class n{constructor(t,r){this.auth=t,this.router=r}canActivate(t,r){return localStorage.getItem("uid")&&this.router.navigate(["projects"]),!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Zh),u.LFG(Zn))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const p6=[{path:"",pathMatch:"full",redirectTo:"login"},{path:"login",component:LB,canActivate:[C2]},{path:"projects",component:t6,canActivate:[OM]},{path:"main",component:q$,canActivate:[OM]},{path:"register",component:s6},{path:"go-to-desktop",component:Su},{path:"report",component:f6}];let g6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Hy.forRoot(p6)],Hy]}),n})();function m6(n,e){if(1&n&&(u.TgZ(0,"h1",8),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Oqu(t.d.header)}}function _6(n,e){if(1&n&&(u.TgZ(0,"p"),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.Oqu(t)}}function y6(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",9),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return i.d.confirmFunction(),i.close()}),u._uU(1,"CONFIRM"),u.qZA()}}function v6(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",3)(1,"button",9),u.NdJ("click",function(){const a=u.CHM(t).$implicit,d=u.oxw(2);return d.setLanguage(a),d.close()}),u._uU(2),u.qZA()()}if(2&n){const t=e.$implicit;u.xp6(2),u.Oqu(t)}}function b6(n,e){if(1&n&&(u.ynx(0),u.YNc(1,v6,3,1,"div",10),u.BQk()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngForOf",t.languages)}}let w6=(()=>{class n{constructor(t,r){this.service=t,this.language=r,this.classes="",this.dialog={open:!1,header:"initial",txt:[]},this.languages=this.language.list,this.service.getObs().subscribe(i=>{i.open?(this.dialog=i,this.open()):(this.close(),setTimeout(()=>this.dialog=i,200))})}get d(){return this.dialog}get purpose(){return this.service.purpose}set header(t){this.dialog.header=t}set text(t){""===t?this.dialog.txt=[]:this.dialog.txt.push(t)}close(){"htt-open"===this.classes&&(this.classes+=" htt-close",this.service.active=!1,setTimeout(()=>this.classes="",200))}open(){""===this.classes&&(this.classes="htt-open")}setLanguage(t){this.language.translateTo=t,this.service.purpose=""}ngOnDestroy(){this.service.active=!1}keyEvent(t){("Escape"===t||"Enter"===t)&&this.service.active&&this.close()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Vu),u.Y36(ua))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-dialog"]],hostVars:2,hostBindings:function(t,r){1&t&&u.NdJ("keyup",function(a){return r.keyEvent(a.key)},!1,u.Jf7),2&t&&u.Tol(r.classes)},decls:9,vars:4,consts:[[1,"htt-dialog","htt-mycontainer"],["class","htt",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"htt-mybtn","full"],[3,"click",4,"ngIf"],[4,"ngIf"],[1,"htt-mybtn","red","full"],[1,"htt-close",3,"click"],[1,"htt"],[3,"click"],["class","htt-mybtn full",4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.YNc(1,m6,2,1,"h1",1),u.YNc(2,_6,2,1,"p",2),u.TgZ(3,"div",3),u.YNc(4,y6,2,0,"button",4),u.qZA(),u.YNc(5,b6,2,1,"ng-container",5),u.TgZ(6,"div",6)(7,"button",7),u.NdJ("click",function(){return r.close()}),u._uU(8,"CLOSE"),u.qZA()()()),2&t&&(u.xp6(1),u.Q6J("ngIf",r.d.header),u.xp6(1),u.Q6J("ngForOf",r.d.txt),u.xp6(2),u.Q6J("ngIf",r.d.confirmFunction),u.xp6(1),u.Q6J("ngIf","language"===r.purpose))},directives:[En,vn],styles:["[_nghost-%COMP%]{position:fixed;width:100%;height:100%;left:0;top:0;background-color:#00000086;transform:scale(0);display:flex;align-items:center;justify-content:center}.htt-dialog[_ngcontent-%COMP%]{z-index:110;padding-left:20px;padding-right:20px;display:flex;flex-direction:column;text-align:center;min-width:300px;margin-bottom:200px;border-radius:4px}h1.htt[_ngcontent-%COMP%]{margin-bottom:20px;max-width:300px;margin-left:auto;margin-right:auto}.htt-mybtn[_ngcontent-%COMP%]{margin-top:20px}.htt-open[_nghost-%COMP%]{animation:open-animation .12s ease-in-out forwards}.htt-open.htt-close[_nghost-%COMP%]{animation:close-animation .12s ease-in-out forwards}@keyframes open-animation{0%{transform:scale(0)}to{transform:scale(1)}}@keyframes close-animation{0%{transform:scale(1)}to{transform:scale(0)}}"]}),n})(),T6=(()=>{class n{constructor(t,r){this.router=t,this.project=r,this.title="html-translator",this.reportActive=!1,this.isMobile=()=>{let i=!1;return a=navigator.userAgent||navigator.vendor,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(i=!0),i;var a},this.project.openReportObs.subscribe(()=>{console.log("open report observer"),this.reportActive=!0}),this.isMobile()?this.router.navigate(["go-to-desktop"]):this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Zn),u.Y36(c0))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")(1,"app-dialog")},directives:[Ay,w6],styles:["[_nghost-%COMP%]{display:inline-table;height:99.5%;width:100%}"]}),n})();const I2_firebase={apiKey:"AIzaSyDanSj6aRfupZ_j2L-E2u0PobhsMCWCHk8",authDomain:"html-template-translation-tool.firebaseapp.com",projectId:"html-template-translation-tool",storageBucket:"html-template-translation-tool.appspot.com",messagingSenderId:"974240118515",appId:"1:974240118515:web:b7a918ca8ca804e3f06986"};let D6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[T6]}),n.\u0275inj=u.cJS({providers:[Zh,OM,C2],imports:[[Wl,g6,nu,H0,G0,eI,Do.hO.initializeApp(I2_firebase)]]}),n})();(0,u.G48)(),ec().bootstrapModule(D6).catch(n=>console.error(n))},5867:(it,we,k)=>{k.d(we,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=k(9681);(0,u.registerVersion)("firebase","9.8.1","app")},127:(it,we,k)=>{k.d(we,{Z:()=>u.Z});var u=k(3942);u.Z.registerVersion("firebase","9.8.1","app-compat")},5881:(it,we,k)=>{k.r(we);var u=k(5861),V=k(3942),R=k(198),ae=k(2090),pe=(k(9681),k(1877),k(4859));function ce(){return window}function j(){return(j=(0,u.Z)(function*(de,K,W){var Ae;const{BuildInfo:Xe}=ce();(0,R.aq)(K.sessionId,"AuthEvent did not contain a session ID");const pt=yield Se(K.sessionId),xt={};return(0,R.ar)()?xt.ibi=Xe.packageName:(0,R.as)()?xt.apn=Xe.packageName:(0,R.at)(de,"operation-not-supported-in-this-environment"),Xe.displayName&&(xt.appDisplayName=Xe.displayName),xt.sessionId=pt,(0,R.au)(de,W,K.type,void 0,null!==(Ae=K.eventId)&&void 0!==Ae?Ae:void 0,xt)})).apply(this,arguments)}function Ke(){return(Ke=(0,u.Z)(function*(de){const{BuildInfo:K}=ce(),W={};(0,R.ar)()?W.iosBundleId=K.packageName:(0,R.as)()?W.androidPackageName=K.packageName:(0,R.at)(de,"operation-not-supported-in-this-environment"),yield(0,R.av)(de,W)})).apply(this,arguments)}function $e(){return($e=(0,u.Z)(function*(de,K,W){const{cordova:Ae}=ce();let Xe=()=>{};try{yield new Promise((pt,xt)=>{let zt=null;function Ut(){var jt;pt();const Ar=null===(jt=Ae.plugins.browsertab)||void 0===jt?void 0:jt.close;"function"==typeof Ar&&Ar(),"function"==typeof(null==W?void 0:W.close)&&W.close()}function Gn(){zt||(zt=window.setTimeout(()=>{xt((0,R.aw)(de,"redirect-cancelled-by-user"))},2e3))}function zr(){"visible"===(null==document?void 0:document.visibilityState)&&Gn()}K.addPassiveListener(Ut),document.addEventListener("resume",Gn,!1),(0,R.as)()&&document.addEventListener("visibilitychange",zr,!1),Xe=()=>{K.removePassiveListener(Ut),document.removeEventListener("resume",Gn,!1),document.removeEventListener("visibilitychange",zr,!1),zt&&window.clearTimeout(zt)}})}finally{Xe()}})).apply(this,arguments)}function Se(de){return ze.apply(this,arguments)}function ze(){return(ze=(0,u.Z)(function*(de){const K=Ze(de),W=yield crypto.subtle.digest("SHA-256",K);return Array.from(new Uint8Array(W)).map(Xe=>Xe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ze(de){if((0,R.aq)(/[0-9a-zA-Z]+/.test(de),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(de);const K=new ArrayBuffer(de.length),W=new Uint8Array(K);for(let Ae=0;Ae<de.length;Ae++)W[Ae]=de.charCodeAt(Ae);return W}class xe extends R.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(K=>{this.resolveInialized=K})}addPassiveListener(K){this.passiveListeners.add(K)}removePassiveListener(K){this.passiveListeners.delete(K)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(K){return this.resolveInialized(),this.passiveListeners.forEach(W=>W(K)),super.onEvent(K)}initialized(){var K=this;return(0,u.Z)(function*(){yield K.initPromise})()}}function ne(de){return fe.apply(this,arguments)}function fe(){return(fe=(0,u.Z)(function*(de){const K=yield re()._get(oe(de));return K&&(yield re()._remove(oe(de))),K})).apply(this,arguments)}function J(){const de=[],K="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let W=0;W<20;W++){const Ae=Math.floor(Math.random()*K.length);de.push(K.charAt(Ae))}return de.join("")}function re(){return(0,R.ay)(R.b)}function oe(de){return(0,R.az)("authEvent",de.config.apiKey,de.name)}function Ve(de){if(!(null==de?void 0:de.includes("?")))return{};const[K,...W]=de.split("?");return(0,ae.zd)(W.join("?"))}function Je(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,R.aw)("no-auth-event")}}function Gt(){var de;return(null===(de=null==self?void 0:self.location)||void 0===de?void 0:de.protocol)||null}function Tn(de=(0,ae.z$)()){return!("file:"!==Gt()&&"ionic:"!==Gt()||!de.toLowerCase().match(/iphone|ipad|ipod|android/))}function ii(){try{const de=self.localStorage,K=R.aI();if(de)return de.setItem(K,"1"),de.removeItem(K),!function ji(de=(0,ae.z$)()){return function Ir(){return(0,ae.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Sn(de=(0,ae.z$)()){return/Edge\/\d+/.test(de)}(de)}()||(0,ae.hl)()}catch(de){return Ei()&&(0,ae.hl)()}return!1}function Ei(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Kn(){return(function tn(){return"http:"===Gt()||"https:"===Gt()}()||(0,ae.ru)()||Tn())&&!function Ui(){return(0,ae.b$)()||(0,ae.UG)()}()&&ii()&&!Ei()}function Hi(){return Tn()&&"undefined"!=typeof document}function Pr(){return(Pr=(0,u.Z)(function*(){return!!Hi()&&new Promise(de=>{const K=setTimeout(()=>{de(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(K),de(!0)})})})).apply(this,arguments)}const nn={LOCAL:"local",NONE:"none",SESSION:"session"},Sr=R.ax,ur="persistence";function Dn(de){return cr.apply(this,arguments)}function cr(){return(cr=(0,u.Z)(function*(de){yield de._initializationPromise;const K=Zt(),W=R.az(ur,de.config.apiKey,de.name);K&&K.setItem(W,de._getPersistence())})).apply(this,arguments)}function Zt(){var de;try{return(null===(de=function bn(){return"undefined"!=typeof window?window:null}())||void 0===de?void 0:de.sessionStorage)||null}catch(K){return null}}const mt=R.ax;class lt{constructor(){this.browserResolver=R.ay(R.k),this.cordovaResolver=R.ay(class en{constructor(){this._redirectPersistence=R.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=R.aB,this._overrideRedirectResult=R.aC}_initialize(K){var W=this;return(0,u.Z)(function*(){const Ae=K._key();let Xe=W.eventManagers.get(Ae);return Xe||(Xe=new xe(K),W.eventManagers.set(Ae,Xe),W.attachCallbackListeners(K,Xe)),Xe})()}_openPopup(K){(0,R.at)(K,"operation-not-supported-in-this-environment")}_openRedirect(K,W,Ae,Xe){var pt=this;return(0,u.Z)(function*(){!function me(de){var K,W,Ae,Xe,pt,xt,zt,Ut,Gn,zr;const jt=ce();(0,R.ax)("function"==typeof(null===(K=null==jt?void 0:jt.universalLinks)||void 0===K?void 0:K.subscribe),de,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,R.ax)(void 0!==(null===(W=null==jt?void 0:jt.BuildInfo)||void 0===W?void 0:W.packageName),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,R.ax)("function"==typeof(null===(pt=null===(Xe=null===(Ae=null==jt?void 0:jt.cordova)||void 0===Ae?void 0:Ae.plugins)||void 0===Xe?void 0:Xe.browsertab)||void 0===pt?void 0:pt.openUrl),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.ax)("function"==typeof(null===(Ut=null===(zt=null===(xt=null==jt?void 0:jt.cordova)||void 0===xt?void 0:xt.plugins)||void 0===zt?void 0:zt.browsertab)||void 0===Ut?void 0:Ut.isAvailable),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.ax)("function"==typeof(null===(zr=null===(Gn=null==jt?void 0:jt.cordova)||void 0===Gn?void 0:Gn.InAppBrowser)||void 0===zr?void 0:zr.open),de,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(K);const xt=yield pt._initialize(K);yield xt.initialized(),xt.resetRedirect(),(0,R.aD)(),yield pt._originValidation(K);const zt=function Ee(de,K,W=null){return{type:K,eventId:W,urlResponse:null,sessionId:J(),postBody:null,tenantId:de.tenantId,error:(0,R.aw)(de,"no-auth-event")}}(K,Ae,Xe);yield function Ye(de,K){return re()._set(oe(de),K)}(K,zt);const Ut=yield function $(de,K,W){return j.apply(this,arguments)}(K,zt,W),Gn=yield function Ne(de){const{cordova:K}=ce();return new Promise(W=>{K.plugins.browsertab.isAvailable(Ae=>{let Xe=null;Ae?K.plugins.browsertab.openUrl(de):Xe=K.InAppBrowser.open(de,(0,R.ap)()?"_blank":"_system","location=yes"),W(Xe)})})}(Ut);return function Le(de,K,W){return $e.apply(this,arguments)}(K,xt,Gn)})()}_isIframeWebStorageSupported(K,W){throw new Error("Method not implemented.")}_originValidation(K){const W=K._key();return this.originValidationPromises[W]||(this.originValidationPromises[W]=function ie(de){return Ke.apply(this,arguments)}(K)),this.originValidationPromises[W]}attachCallbackListeners(K,W){const{universalLinks:Ae,handleOpenURL:Xe,BuildInfo:pt}=ce(),xt=setTimeout((0,u.Z)(function*(){yield ne(K),W.onEvent(Je())}),500),zt=function(){var zr=(0,u.Z)(function*(jt){clearTimeout(xt);const Ar=yield ne(K);let $i=null;Ar&&(null==jt?void 0:jt.url)&&($i=function Ce(de,K){var W,Ae;const Xe=function he(de){const K=Ve(de),W=K.link?decodeURIComponent(K.link):void 0,Ae=Ve(W).link,Xe=K.deep_link_id?decodeURIComponent(K.deep_link_id):void 0;return Ve(Xe).link||Xe||Ae||W||de}(K);if(Xe.includes("/__/auth/callback")){const pt=Ve(Xe),xt=pt.firebaseError?function be(de){try{return JSON.parse(de)}catch(K){return null}}(decodeURIComponent(pt.firebaseError)):null,zt=null===(Ae=null===(W=null==xt?void 0:xt.code)||void 0===W?void 0:W.split("auth/"))||void 0===Ae?void 0:Ae[1],Ut=zt?(0,R.aw)(zt):null;return Ut?{type:de.type,eventId:de.eventId,tenantId:de.tenantId,error:Ut,urlResponse:null,sessionId:null,postBody:null}:{type:de.type,eventId:de.eventId,tenantId:de.tenantId,sessionId:de.sessionId,urlResponse:Xe,postBody:null}}return null}(Ar,jt.url)),W.onEvent($i||Je())});return function(Ar){return zr.apply(this,arguments)}}();void 0!==Ae&&"function"==typeof Ae.subscribe&&Ae.subscribe(null,zt);const Ut=Xe,Gn=`${pt.packageName.toLowerCase()}://`;ce().handleOpenURL=function(){var zr=(0,u.Z)(function*(jt){if(jt.toLowerCase().startsWith(Gn)&&zt({url:jt}),"function"==typeof Ut)try{Ut(jt)}catch(Ar){console.error(Ar)}});return function(jt){return zr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=R.a,this._completeRedirectFn=R.aB,this._overrideRedirectResult=R.aC}_initialize(K){var W=this;return(0,u.Z)(function*(){return yield W.selectUnderlyingResolver(),W.assertedUnderlyingResolver._initialize(K)})()}_openPopup(K,W,Ae,Xe){var pt=this;return(0,u.Z)(function*(){return yield pt.selectUnderlyingResolver(),pt.assertedUnderlyingResolver._openPopup(K,W,Ae,Xe)})()}_openRedirect(K,W,Ae,Xe){var pt=this;return(0,u.Z)(function*(){return yield pt.selectUnderlyingResolver(),pt.assertedUnderlyingResolver._openRedirect(K,W,Ae,Xe)})()}_isIframeWebStorageSupported(K,W){this.assertedUnderlyingResolver._isIframeWebStorageSupported(K,W)}_originValidation(K){return this.assertedUnderlyingResolver._originValidation(K)}get _shouldInitProactively(){return Hi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return mt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var K=this;return(0,u.Z)(function*(){if(K.underlyingResolver)return;const W=yield function bt(){return Pr.apply(this,arguments)}();K.underlyingResolver=W?K.cordovaResolver:K.browserResolver})()}}function si(de){return de.unwrap()}function $t(de){return kn(de)}function kn(de){const{_tokenResponse:K}=de instanceof ae.ZR?de.customData:de;if(!K)return null;if(!(de instanceof ae.ZR)&&"temporaryProof"in K&&"phoneNumber"in K)return R.P.credentialFromResult(de);const W=K.providerId;if(!W||W===R.o.PASSWORD)return null;let Ae;switch(W){case R.o.GOOGLE:Ae=R.Q;break;case R.o.FACEBOOK:Ae=R.N;break;case R.o.GITHUB:Ae=R.T;break;case R.o.TWITTER:Ae=R.W;break;default:const{oauthIdToken:Xe,oauthAccessToken:pt,oauthTokenSecret:xt,pendingToken:zt,nonce:Ut}=K;return pt||xt||Xe||zt?zt?W.startsWith("saml.")?R.aL._create(W,zt):R.J._fromParams({providerId:W,signInMethod:W,pendingToken:zt,idToken:Xe,accessToken:pt}):new R.U(W).credential({idToken:Xe,accessToken:pt,rawNonce:Ut}):null}return de instanceof ae.ZR?Ae.credentialFromError(de):Ae.credentialFromResult(de)}function cn(de,K){return K.catch(W=>{throw W instanceof ae.ZR&&function Gi(de,K){var W;const Ae=null===(W=K.customData)||void 0===W?void 0:W._tokenResponse;if("auth/multi-factor-auth-required"===K.code)K.resolver=new z(de,R.an(de,K));else if(Ae){const Xe=kn(K),pt=K;Xe&&(pt.credential=Xe,pt.tenantId=Ae.tenantId||void 0,pt.email=Ae.email||void 0,pt.phoneNumber=Ae.phoneNumber||void 0)}}(de,W),W}).then(W=>{const Xe=W.user;return{operationType:W.operationType,credential:$t(W),additionalUserInfo:R.al(W),user:Te.getOrCreate(Xe)}})}function U(de,K){return q.apply(this,arguments)}function q(){return(q=(0,u.Z)(function*(de,K){const W=yield K;return{verificationId:W.verificationId,confirm:Ae=>cn(de,W.confirm(Ae))}})).apply(this,arguments)}class z{constructor(K,W){this.resolver=W,this.auth=function oi(de){return de.wrapped()}(K)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(K){return cn(si(this.auth),this.resolver.resolveSignIn(K))}}class Te{constructor(K){this._delegate=K,this.multiFactor=R.ao(K)}static getOrCreate(K){return Te.USER_MAP.has(K)||Te.USER_MAP.set(K,new Te(K)),Te.USER_MAP.get(K)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(K){return this._delegate.getIdTokenResult(K)}getIdToken(K){return this._delegate.getIdToken(K)}linkAndRetrieveDataWithCredential(K){return this.linkWithCredential(K)}linkWithCredential(K){var W=this;return(0,u.Z)(function*(){return cn(W.auth,R.Z(W._delegate,K))})()}linkWithPhoneNumber(K,W){var Ae=this;return(0,u.Z)(function*(){return U(Ae.auth,R.l(Ae._delegate,K,W))})()}linkWithPopup(K){var W=this;return(0,u.Z)(function*(){return cn(W.auth,R.d(W._delegate,K,lt))})()}linkWithRedirect(K){var W=this;return(0,u.Z)(function*(){return yield Dn(R.aE(W.auth)),R.g(W._delegate,K,lt)})()}reauthenticateAndRetrieveDataWithCredential(K){return this.reauthenticateWithCredential(K)}reauthenticateWithCredential(K){var W=this;return(0,u.Z)(function*(){return cn(W.auth,R._(W._delegate,K))})()}reauthenticateWithPhoneNumber(K,W){return U(this.auth,R.r(this._delegate,K,W))}reauthenticateWithPopup(K){return cn(this.auth,R.e(this._delegate,K,lt))}reauthenticateWithRedirect(K){var W=this;return(0,u.Z)(function*(){return yield Dn(R.aE(W.auth)),R.h(W._delegate,K,lt)})()}sendEmailVerification(K){return R.ab(this._delegate,K)}unlink(K){var W=this;return(0,u.Z)(function*(){return yield R.ak(W._delegate,K),W})()}updateEmail(K){return R.ag(this._delegate,K)}updatePassword(K){return R.ah(this._delegate,K)}updatePhoneNumber(K){return R.u(this._delegate,K)}updateProfile(K){return R.af(this._delegate,K)}verifyBeforeUpdateEmail(K,W){return R.ac(this._delegate,K,W)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Te.USER_MAP=new WeakMap;const G=R.ax;let ee=(()=>{class de{constructor(W,Ae){if(this.app=W,Ae.isInitialized())return this._delegate=Ae.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Xe}=W.options;G(Xe,"invalid-api-key",{appName:W.name}),G(Xe,"invalid-api-key",{appName:W.name});const pt="undefined"!=typeof window?lt:void 0;this._delegate=Ae.initialize({options:{persistence:nt(Xe,W.name),popupRedirectResolver:pt}}),this._delegate._updateErrorMap(R.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Te.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(W){this._delegate.languageCode=W}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(W){this._delegate.tenantId=W}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(W,Ae){R.G(this._delegate,W,Ae)}applyActionCode(W){return R.a2(this._delegate,W)}checkActionCode(W){return R.a3(this._delegate,W)}confirmPasswordReset(W,Ae){return R.a1(this._delegate,W,Ae)}createUserWithEmailAndPassword(W,Ae){var Xe=this;return(0,u.Z)(function*(){return cn(Xe._delegate,R.a5(Xe._delegate,W,Ae))})()}fetchProvidersForEmail(W){return this.fetchSignInMethodsForEmail(W)}fetchSignInMethodsForEmail(W){return R.aa(this._delegate,W)}isSignInWithEmailLink(W){return R.a8(this._delegate,W)}getRedirectResult(){var W=this;return(0,u.Z)(function*(){G(Kn(),W._delegate,"operation-not-supported-in-this-environment");const Ae=yield R.j(W._delegate,lt);return Ae?cn(W._delegate,Promise.resolve(Ae)):{credential:null,user:null}})()}addFrameworkForLogging(W){!function un(de,K){(0,R.aE)(de)._logFramework(K)}(this._delegate,W)}onAuthStateChanged(W,Ae,Xe){const{next:pt,error:xt,complete:zt}=ke(W,Ae,Xe);return this._delegate.onAuthStateChanged(pt,xt,zt)}onIdTokenChanged(W,Ae,Xe){const{next:pt,error:xt,complete:zt}=ke(W,Ae,Xe);return this._delegate.onIdTokenChanged(pt,xt,zt)}sendSignInLinkToEmail(W,Ae){return R.a7(this._delegate,W,Ae)}sendPasswordResetEmail(W,Ae){return R.a0(this._delegate,W,Ae||void 0)}setPersistence(W){var Ae=this;return(0,u.Z)(function*(){let Xe;switch(function Fr(de,K){Sr(Object.values(nn).includes(K),de,"invalid-persistence-type"),(0,ae.b$)()?Sr(K!==nn.SESSION,de,"unsupported-persistence-type"):(0,ae.UG)()?Sr(K===nn.NONE,de,"unsupported-persistence-type"):Ei()?Sr(K===nn.NONE||K===nn.LOCAL&&(0,ae.hl)(),de,"unsupported-persistence-type"):Sr(K===nn.NONE||ii(),de,"unsupported-persistence-type")}(Ae._delegate,W),W){case nn.SESSION:Xe=R.a;break;case nn.LOCAL:Xe=(yield R.ay(R.i)._isAvailable())?R.i:R.b;break;case nn.NONE:Xe=R.L;break;default:return R.at("argument-error",{appName:Ae._delegate.name})}return Ae._delegate.setPersistence(Xe)})()}signInAndRetrieveDataWithCredential(W){return this.signInWithCredential(W)}signInAnonymously(){return cn(this._delegate,R.X(this._delegate))}signInWithCredential(W){return cn(this._delegate,R.Y(this._delegate,W))}signInWithCustomToken(W){return cn(this._delegate,R.$(this._delegate,W))}signInWithEmailAndPassword(W,Ae){return cn(this._delegate,R.a6(this._delegate,W,Ae))}signInWithEmailLink(W,Ae){return cn(this._delegate,R.a9(this._delegate,W,Ae))}signInWithPhoneNumber(W,Ae){return U(this._delegate,R.s(this._delegate,W,Ae))}signInWithPopup(W){var Ae=this;return(0,u.Z)(function*(){return G(Kn(),Ae._delegate,"operation-not-supported-in-this-environment"),cn(Ae._delegate,R.c(Ae._delegate,W,lt))})()}signInWithRedirect(W){var Ae=this;return(0,u.Z)(function*(){return G(Kn(),Ae._delegate,"operation-not-supported-in-this-environment"),yield Dn(Ae._delegate),R.f(Ae._delegate,W,lt)})()}updateCurrentUser(W){return this._delegate.updateCurrentUser(W)}verifyPasswordResetCode(W){return R.a4(this._delegate,W)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return de.Persistence=nn,de})();function ke(de,K,W){let Ae=de;"function"!=typeof de&&({next:Ae,error:K,complete:W}=de);const Xe=Ae;return{next:xt=>Xe(xt&&Te.getOrCreate(xt)),error:K,complete:W}}function nt(de,K){const W=function Ms(de,K){const W=Zt();if(!W)return[];const Ae=R.az(ur,de,K);switch(W.getItem(Ae)){case nn.NONE:return[R.L];case nn.LOCAL:return[R.i,R.a];case nn.SESSION:return[R.a];default:return[]}}(de,K);if("undefined"!=typeof self&&!W.includes(R.i)&&W.push(R.i),"undefined"!=typeof window)for(const Ae of[R.b,R.a])W.includes(Ae)||W.push(Ae);return W.includes(R.L)||W.push(R.L),W}class vt{constructor(){this.providerId="phone",this._delegate=new R.P(si(V.Z.auth()))}static credential(K,W){return R.P.credential(K,W)}verifyPhoneNumber(K,W){return this._delegate.verifyPhoneNumber(K,W)}unwrap(){return this._delegate}}vt.PHONE_SIGN_IN_METHOD=R.P.PHONE_SIGN_IN_METHOD,vt.PROVIDER_ID=R.P.PROVIDER_ID;const kt=R.ax;class on{constructor(K,W,Ae=V.Z.app()){var Xe;kt(null===(Xe=Ae.options)||void 0===Xe?void 0:Xe.apiKey,"invalid-api-key",{appName:Ae.name}),this._delegate=new R.R(K,W,Ae.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Yn(de){de.INTERNAL.registerComponent(new pe.wA("auth-compat",K=>{const W=K.getProvider("app-compat").getImmediate(),Ae=K.getProvider("auth");return new ee(W,Ae)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:R.A.EMAIL_SIGNIN,PASSWORD_RESET:R.A.PASSWORD_RESET,RECOVER_EMAIL:R.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:R.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:R.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:R.A.VERIFY_EMAIL}},EmailAuthProvider:R.M,FacebookAuthProvider:R.N,GithubAuthProvider:R.T,GoogleAuthProvider:R.Q,OAuthProvider:R.U,SAMLAuthProvider:R.V,PhoneAuthProvider:vt,PhoneMultiFactorGenerator:R.m,RecaptchaVerifier:on,TwitterAuthProvider:R.W,Auth:ee,AuthCredential:R.H,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),de.registerVersion("@firebase/auth-compat","0.2.14")}(V.Z)},8306:(it,we,k)=>{k.d(we,{y:()=>$});var u=k(930),V=k(727),R=k(8822),ae=k(4671);var pe=k(2416),ce=k(576),ye=k(2806);let $=(()=>{class Ne{constructor($e){$e&&(this._subscribe=$e)}lift($e){const me=new Ne;return me.source=this,me.operator=$e,me}subscribe($e,me,Se){const ze=function Ke(Ne){return Ne&&Ne instanceof u.Lv||function ie(Ne){return Ne&&(0,ce.m)(Ne.next)&&(0,ce.m)(Ne.error)&&(0,ce.m)(Ne.complete)}(Ne)&&(0,V.Nn)(Ne)}($e)?$e:new u.Hp($e,me,Se);return(0,ye.x)(()=>{const{operator:Ze,source:Me}=this;ze.add(Ze?Ze.call(ze,Me):Me?this._subscribe(ze):this._trySubscribe(ze))}),ze}_trySubscribe($e){try{return this._subscribe($e)}catch(me){$e.error(me)}}forEach($e,me){return new(me=j(me))((Se,ze)=>{const Ze=new u.Hp({next:Me=>{try{$e(Me)}catch(xe){ze(xe),Ze.unsubscribe()}},error:ze,complete:Se});this.subscribe(Ze)})}_subscribe($e){var me;return null===(me=this.source)||void 0===me?void 0:me.subscribe($e)}[R.L](){return this}pipe(...$e){return function _e(Ne){return 0===Ne.length?ae.y:1===Ne.length?Ne[0]:function($e){return Ne.reduce((me,Se)=>Se(me),$e)}}($e)(this)}toPromise($e){return new($e=j($e))((me,Se)=>{let ze;this.subscribe(Ze=>ze=Ze,Ze=>Se(Ze),()=>me(ze))})}}return Ne.create=Le=>new Ne(Le),Ne})();function j(Ne){var Le;return null!==(Le=null!=Ne?Ne:pe.v.Promise)&&void 0!==Le?Le:Promise}},7579:(it,we,k)=>{k.d(we,{x:()=>pe});var u=k(8306),V=k(727);const ae=(0,k(3888).d)(ye=>function(){ye(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=k(8737),_e=k(2806);let pe=(()=>{class ye extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const ie=new ce(this,this);return ie.operator=j,ie}_throwIfClosed(){if(this.closed)throw new ae}next(j){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ie of this.currentObservers)ie.next(j)}})}error(j){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:ie}=this;for(;ie.length;)ie.shift().error(j)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:ie,isStopped:Ke,observers:Ne}=this;return ie||Ke?V.Lc:(this.currentObservers=null,Ne.push(j),new V.w0(()=>{this.currentObservers=null,(0,ue.P)(Ne,j)}))}_checkFinalizedStatuses(j){const{hasError:ie,thrownError:Ke,isStopped:Ne}=this;ie?j.error(Ke):Ne&&j.complete()}asObservable(){const j=new u.y;return j.source=this,j}}return ye.create=($,j)=>new ce($,j),ye})();class ce extends pe{constructor($,j){super(),this.destination=$,this.source=j}next($){var j,ie;null===(ie=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===ie||ie.call(j,$)}error($){var j,ie;null===(ie=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===ie||ie.call(j,$)}complete(){var $,j;null===(j=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===j||j.call($)}_subscribe($){var j,ie;return null!==(ie=null===(j=this.source)||void 0===j?void 0:j.subscribe($))&&void 0!==ie?ie:V.Lc}}},930:(it,we,k)=>{k.d(we,{Hp:()=>$e,Lv:()=>ie});var u=k(576),V=k(727),R=k(2416),ae=k(7849),ue=k(5032);const _e=ye("C",void 0,void 0);function ye(Me,xe,Ee){return{kind:Me,value:xe,error:Ee}}var $=k(3410),j=k(2806);class ie extends V.w0{constructor(xe){super(),this.isStopped=!1,xe?(this.destination=xe,(0,V.Nn)(xe)&&xe.add(this)):this.destination=Ze}static create(xe,Ee,Ye){return new $e(xe,Ee,Ye)}next(xe){this.isStopped?ze(function ce(Me){return ye("N",Me,void 0)}(xe),this):this._next(xe)}error(xe){this.isStopped?ze(function pe(Me){return ye("E",void 0,Me)}(xe),this):(this.isStopped=!0,this._error(xe))}complete(){this.isStopped?ze(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(xe){this.destination.next(xe)}_error(xe){try{this.destination.error(xe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ke=Function.prototype.bind;function Ne(Me,xe){return Ke.call(Me,xe)}class Le{constructor(xe){this.partialObserver=xe}next(xe){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(xe)}catch(Ye){me(Ye)}}error(xe){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(xe)}catch(Ye){me(Ye)}else me(xe)}complete(){const{partialObserver:xe}=this;if(xe.complete)try{xe.complete()}catch(Ee){me(Ee)}}}class $e extends ie{constructor(xe,Ee,Ye){let ne;if(super(),(0,u.m)(xe)||!xe)ne={next:null!=xe?xe:void 0,error:null!=Ee?Ee:void 0,complete:null!=Ye?Ye:void 0};else{let fe;this&&R.v.useDeprecatedNextContext?(fe=Object.create(xe),fe.unsubscribe=()=>this.unsubscribe(),ne={next:xe.next&&Ne(xe.next,fe),error:xe.error&&Ne(xe.error,fe),complete:xe.complete&&Ne(xe.complete,fe)}):ne=xe}this.destination=new Le(ne)}}function me(Me){R.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Me):(0,ae.h)(Me)}function ze(Me,xe){const{onStoppedNotification:Ee}=R.v;Ee&&$.z.setTimeout(()=>Ee(Me,xe))}const Ze={closed:!0,next:ue.Z,error:function Se(Me){throw Me},complete:ue.Z}},727:(it,we,k)=>{k.d(we,{Lc:()=>_e,w0:()=>ue,Nn:()=>pe});var u=k(576);const R=(0,k(3888).d)(ye=>function(j){ye(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((ie,Ke)=>`${Ke+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ae=k(8737);class ue{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Ne of j)Ne.remove(this);else j.remove(this);const{initialTeardown:ie}=this;if((0,u.m)(ie))try{ie()}catch(Ne){$=Ne instanceof R?Ne.errors:[Ne]}const{_finalizers:Ke}=this;if(Ke){this._finalizers=null;for(const Ne of Ke)try{ce(Ne)}catch(Le){$=null!=$?$:[],Le instanceof R?$=[...$,...Le.errors]:$.push(Le)}}if($)throw new R($)}}add($){var j;if($&&$!==this)if(this.closed)ce($);else{if($ instanceof ue){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push($)}}_hasParent($){const{_parentage:j}=this;return j===$||Array.isArray(j)&&j.includes($)}_addParent($){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push($),j):j?[j,$]:$}_removeParent($){const{_parentage:j}=this;j===$?this._parentage=null:Array.isArray(j)&&(0,ae.P)(j,$)}remove($){const{_finalizers:j}=this;j&&(0,ae.P)(j,$),$ instanceof ue&&$._removeParent(this)}}ue.EMPTY=(()=>{const ye=new ue;return ye.closed=!0,ye})();const _e=ue.EMPTY;function pe(ye){return ye instanceof ue||ye&&"closed"in ye&&(0,u.m)(ye.remove)&&(0,u.m)(ye.add)&&(0,u.m)(ye.unsubscribe)}function ce(ye){(0,u.m)(ye)?ye():ye.unsubscribe()}},2416:(it,we,k)=>{k.d(we,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(it,we,k)=>{k.d(we,{E:()=>V});const V=new(k(8306).y)(ue=>ue.complete())},8996:(it,we,k)=>{k.d(we,{D:()=>xe});var u=k(8421),V=k(5363),R=k(9468),_e=k(8306),ce=k(2202),ye=k(576),$=k(9672);function ie(Ee,Ye){if(!Ee)throw new Error("Iterable cannot be null");return new _e.y(ne=>{(0,$.f)(ne,Ye,()=>{const fe=Ee[Symbol.asyncIterator]();(0,$.f)(ne,Ye,()=>{fe.next().then(Ce=>{Ce.done?ne.complete():ne.next(Ce.value)})},0,!0)})})}var Ke=k(3670),Ne=k(8239),Le=k(1144),$e=k(6495),me=k(2206),Se=k(4532),ze=k(3260);function xe(Ee,Ye){return Ye?function Me(Ee,Ye){if(null!=Ee){if((0,Ke.c)(Ee))return function ae(Ee,Ye){return(0,u.Xf)(Ee).pipe((0,R.R)(Ye),(0,V.Q)(Ye))}(Ee,Ye);if((0,Le.z)(Ee))return function pe(Ee,Ye){return new _e.y(ne=>{let fe=0;return Ye.schedule(function(){fe===Ee.length?ne.complete():(ne.next(Ee[fe++]),ne.closed||this.schedule())})})}(Ee,Ye);if((0,Ne.t)(Ee))return function ue(Ee,Ye){return(0,u.Xf)(Ee).pipe((0,R.R)(Ye),(0,V.Q)(Ye))}(Ee,Ye);if((0,me.D)(Ee))return ie(Ee,Ye);if((0,$e.T)(Ee))return function j(Ee,Ye){return new _e.y(ne=>{let fe;return(0,$.f)(ne,Ye,()=>{fe=Ee[ce.h](),(0,$.f)(ne,Ye,()=>{let Ce,J;try{({value:Ce,done:J}=fe.next())}catch(re){return void ne.error(re)}J?ne.complete():ne.next(Ce)},0,!0)}),()=>(0,ye.m)(null==fe?void 0:fe.return)&&fe.return()})}(Ee,Ye);if((0,ze.L)(Ee))return function Ze(Ee,Ye){return ie((0,ze.Q)(Ee),Ye)}(Ee,Ye)}throw(0,Se.z)(Ee)}(Ee,Ye):(0,u.Xf)(Ee)}},8421:(it,we,k)=>{k.d(we,{Xf:()=>Ke});var u=k(655),V=k(1144),R=k(8239),ae=k(8306),ue=k(3670),_e=k(2206),pe=k(4532),ce=k(6495),ye=k(3260),$=k(576),j=k(7849),ie=k(8822);function Ke(Me){if(Me instanceof ae.y)return Me;if(null!=Me){if((0,ue.c)(Me))return function Ne(Me){return new ae.y(xe=>{const Ee=Me[ie.L]();if((0,$.m)(Ee.subscribe))return Ee.subscribe(xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Me);if((0,V.z)(Me))return function Le(Me){return new ae.y(xe=>{for(let Ee=0;Ee<Me.length&&!xe.closed;Ee++)xe.next(Me[Ee]);xe.complete()})}(Me);if((0,R.t)(Me))return function $e(Me){return new ae.y(xe=>{Me.then(Ee=>{xe.closed||(xe.next(Ee),xe.complete())},Ee=>xe.error(Ee)).then(null,j.h)})}(Me);if((0,_e.D)(Me))return Se(Me);if((0,ce.T)(Me))return function me(Me){return new ae.y(xe=>{for(const Ee of Me)if(xe.next(Ee),xe.closed)return;xe.complete()})}(Me);if((0,ye.L)(Me))return function ze(Me){return Se((0,ye.Q)(Me))}(Me)}throw(0,pe.z)(Me)}function Se(Me){return new ae.y(xe=>{(function Ze(Me,xe){var Ee,Ye,ne,fe;return(0,u.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,u.KL)(Me);!(Ye=yield Ee.next()).done;)if(xe.next(Ye.value),xe.closed)return}catch(Ce){ne={error:Ce}}finally{try{Ye&&!Ye.done&&(fe=Ee.return)&&(yield fe.call(Ee))}finally{if(ne)throw ne.error}}xe.complete()})})(Me,xe).catch(Ee=>xe.error(Ee))})}},6451:(it,we,k)=>{k.d(we,{T:()=>_e});var u=k(8189),V=k(8421),R=k(515),ae=k(3269),ue=k(8996);function _e(...pe){const ce=(0,ae.yG)(pe),ye=(0,ae._6)(pe,1/0),$=pe;return $.length?1===$.length?(0,V.Xf)($[0]):(0,u.J)(ye)((0,ue.D)($,ce)):R.E}},5403:(it,we,k)=>{k.d(we,{x:()=>V});var u=k(930);function V(ae,ue,_e,pe,ce){return new R(ae,ue,_e,pe,ce)}class R extends u.Lv{constructor(ue,_e,pe,ce,ye,$){super(ue),this.onFinalize=ye,this.shouldUnsubscribe=$,this._next=_e?function(j){try{_e(j)}catch(ie){ue.error(ie)}}:super._next,this._error=ce?function(j){try{ce(j)}catch(ie){ue.error(ie)}finally{this.unsubscribe()}}:super._error,this._complete=pe?function(){try{pe()}catch(j){ue.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},4004:(it,we,k)=>{k.d(we,{U:()=>R});var u=k(4482),V=k(5403);function R(ae,ue){return(0,u.e)((_e,pe)=>{let ce=0;_e.subscribe((0,V.x)(pe,ye=>{pe.next(ae.call(ue,ye,ce++))}))})}},8189:(it,we,k)=>{k.d(we,{J:()=>R});var u=k(5577),V=k(4671);function R(ae=1/0){return(0,u.z)(V.y,ae)}},5577:(it,we,k)=>{k.d(we,{z:()=>ce});var u=k(4004),V=k(8421),R=k(4482),ae=k(9672),ue=k(5403),pe=k(576);function ce(ye,$,j=1/0){return(0,pe.m)($)?ce((ie,Ke)=>(0,u.U)((Ne,Le)=>$(ie,Ne,Ke,Le))((0,V.Xf)(ye(ie,Ke))),j):("number"==typeof $&&(j=$),(0,R.e)((ie,Ke)=>function _e(ye,$,j,ie,Ke,Ne,Le,$e){const me=[];let Se=0,ze=0,Ze=!1;const Me=()=>{Ze&&!me.length&&!Se&&$.complete()},xe=Ye=>Se<ie?Ee(Ye):me.push(Ye),Ee=Ye=>{Ne&&$.next(Ye),Se++;let ne=!1;(0,V.Xf)(j(Ye,ze++)).subscribe((0,ue.x)($,fe=>{null==Ke||Ke(fe),Ne?xe(fe):$.next(fe)},()=>{ne=!0},void 0,()=>{if(ne)try{for(Se--;me.length&&Se<ie;){const fe=me.shift();Le?(0,ae.f)($,Le,()=>Ee(fe)):Ee(fe)}Me()}catch(fe){$.error(fe)}}))};return ye.subscribe((0,ue.x)($,xe,()=>{Ze=!0,Me()})),()=>{null==$e||$e()}}(ie,Ke,ye,j)))}},5363:(it,we,k)=>{k.d(we,{Q:()=>ae});var u=k(9672),V=k(4482),R=k(5403);function ae(ue,_e=0){return(0,V.e)((pe,ce)=>{pe.subscribe((0,R.x)(ce,ye=>(0,u.f)(ce,ue,()=>ce.next(ye),_e),()=>(0,u.f)(ce,ue,()=>ce.complete(),_e),ye=>(0,u.f)(ce,ue,()=>ce.error(ye),_e)))})}},3099:(it,we,k)=>{k.d(we,{B:()=>_e});var u=k(8996),V=k(5698),R=k(7579),ae=k(930),ue=k(4482);function _e(ce={}){const{connector:ye=(()=>new R.x),resetOnError:$=!0,resetOnComplete:j=!0,resetOnRefCountZero:ie=!0}=ce;return Ke=>{let Ne=null,Le=null,$e=null,me=0,Se=!1,ze=!1;const Ze=()=>{null==Le||Le.unsubscribe(),Le=null},Me=()=>{Ze(),Ne=$e=null,Se=ze=!1},xe=()=>{const Ee=Ne;Me(),null==Ee||Ee.unsubscribe()};return(0,ue.e)((Ee,Ye)=>{me++,!ze&&!Se&&Ze();const ne=$e=null!=$e?$e:ye();Ye.add(()=>{me--,0===me&&!ze&&!Se&&(Le=pe(xe,ie))}),ne.subscribe(Ye),Ne||(Ne=new ae.Hp({next:fe=>ne.next(fe),error:fe=>{ze=!0,Ze(),Le=pe(Me,$,fe),ne.error(fe)},complete:()=>{Se=!0,Ze(),Le=pe(Me,j),ne.complete()}}),(0,u.D)(Ee).subscribe(Ne))})(Ke)}}function pe(ce,ye,...$){return!0===ye?(ce(),null):!1===ye?null:ye(...$).pipe((0,V.q)(1)).subscribe(()=>ce())}},9468:(it,we,k)=>{k.d(we,{R:()=>V});var u=k(4482);function V(R,ae=0){return(0,u.e)((ue,_e)=>{_e.add(R.schedule(()=>ue.subscribe(_e),ae))})}},5698:(it,we,k)=>{k.d(we,{q:()=>ae});var u=k(515),V=k(4482),R=k(5403);function ae(ue){return ue<=0?()=>u.E:(0,V.e)((_e,pe)=>{let ce=0;_e.subscribe((0,R.x)(pe,ye=>{++ce<=ue&&(pe.next(ye),ue<=ce&&pe.complete())}))})}},8505:(it,we,k)=>{k.d(we,{b:()=>ue});var u=k(576),V=k(4482),R=k(5403),ae=k(4671);function ue(_e,pe,ce){const ye=(0,u.m)(_e)||pe||ce?{next:_e,error:pe,complete:ce}:_e;return ye?(0,V.e)(($,j)=>{var ie;null===(ie=ye.subscribe)||void 0===ie||ie.call(ye);let Ke=!0;$.subscribe((0,R.x)(j,Ne=>{var Le;null===(Le=ye.next)||void 0===Le||Le.call(ye,Ne),j.next(Ne)},()=>{var Ne;Ke=!1,null===(Ne=ye.complete)||void 0===Ne||Ne.call(ye),j.complete()},Ne=>{var Le;Ke=!1,null===(Le=ye.error)||void 0===Le||Le.call(ye,Ne),j.error(Ne)},()=>{var Ne,Le;Ke&&(null===(Ne=ye.unsubscribe)||void 0===Ne||Ne.call(ye)),null===(Le=ye.finalize)||void 0===Le||Le.call(ye)}))}):ae.y}},4408:(it,we,k)=>{k.d(we,{o:()=>ue});var u=k(727);class V extends u.w0{constructor(pe,ce){super()}schedule(pe,ce=0){return this}}const R={setInterval(_e,pe,...ce){const{delegate:ye}=R;return(null==ye?void 0:ye.setInterval)?ye.setInterval(_e,pe,...ce):setInterval(_e,pe,...ce)},clearInterval(_e){const{delegate:pe}=R;return((null==pe?void 0:pe.clearInterval)||clearInterval)(_e)},delegate:void 0};var ae=k(8737);class ue extends V{constructor(pe,ce){super(pe,ce),this.scheduler=pe,this.work=ce,this.pending=!1}schedule(pe,ce=0){if(this.closed)return this;this.state=pe;const ye=this.id,$=this.scheduler;return null!=ye&&(this.id=this.recycleAsyncId($,ye,ce)),this.pending=!0,this.delay=ce,this.id=this.id||this.requestAsyncId($,this.id,ce),this}requestAsyncId(pe,ce,ye=0){return R.setInterval(pe.flush.bind(pe,this),ye)}recycleAsyncId(pe,ce,ye=0){if(null!=ye&&this.delay===ye&&!1===this.pending)return ce;R.clearInterval(ce)}execute(pe,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ye=this._execute(pe,ce);if(ye)return ye;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,ce){let $,ye=!1;try{this.work(pe)}catch(j){ye=!0,$=j||new Error("Scheduled action threw falsy error")}if(ye)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:pe,scheduler:ce}=this,{actions:ye}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(ye,this),null!=pe&&(this.id=this.recycleAsyncId(ce,pe,null)),this.delay=null,super.unsubscribe()}}}},7565:(it,we,k)=>{k.d(we,{v:()=>R});var u=k(6063);class V{constructor(ue,_e=V.now){this.schedulerActionCtor=ue,this.now=_e}schedule(ue,_e=0,pe){return new this.schedulerActionCtor(this,ue).schedule(pe,_e)}}V.now=u.l.now;class R extends V{constructor(ue,_e=V.now){super(ue,_e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ue){const{actions:_e}=this;if(this._active)return void _e.push(ue);let pe;this._active=!0;do{if(pe=ue.execute(ue.state,ue.delay))break}while(ue=_e.shift());if(this._active=!1,pe){for(;ue=_e.shift();)ue.unsubscribe();throw pe}}}},4986:(it,we,k)=>{k.d(we,{P:()=>ae,z:()=>R});var u=k(4408);const R=new(k(7565).v)(u.o),ae=R},6063:(it,we,k)=>{k.d(we,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},3410:(it,we,k)=>{k.d(we,{z:()=>u});const u={setTimeout(V,R,...ae){const{delegate:ue}=u;return(null==ue?void 0:ue.setTimeout)?ue.setTimeout(V,R,...ae):setTimeout(V,R,...ae)},clearTimeout(V){const{delegate:R}=u;return((null==R?void 0:R.clearTimeout)||clearTimeout)(V)},delegate:void 0}},2202:(it,we,k)=>{k.d(we,{h:()=>V});const V=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(it,we,k)=>{k.d(we,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(it,we,k)=>{k.d(we,{_6:()=>_e,jO:()=>ae,yG:()=>ue});var u=k(576),V=k(3532);function R(pe){return pe[pe.length-1]}function ae(pe){return(0,u.m)(R(pe))?pe.pop():void 0}function ue(pe){return(0,V.K)(R(pe))?pe.pop():void 0}function _e(pe,ce){return"number"==typeof R(pe)?pe.pop():ce}},8737:(it,we,k)=>{function u(V,R){if(V){const ae=V.indexOf(R);0<=ae&&V.splice(ae,1)}}k.d(we,{P:()=>u})},3888:(it,we,k)=>{function u(V){const ae=V(ue=>{Error.call(ue),ue.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}k.d(we,{d:()=>u})},2806:(it,we,k)=>{k.d(we,{O:()=>ae,x:()=>R});var u=k(2416);let V=null;function R(ue){if(u.v.useDeprecatedSynchronousErrorHandling){const _e=!V;if(_e&&(V={errorThrown:!1,error:null}),ue(),_e){const{errorThrown:pe,error:ce}=V;if(V=null,pe)throw ce}}else ue()}function ae(ue){u.v.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=ue)}},9672:(it,we,k)=>{function u(V,R,ae,ue=0,_e=!1){const pe=R.schedule(function(){ae(),_e?V.add(this.schedule(null,ue)):this.unsubscribe()},ue);if(V.add(pe),!_e)return pe}k.d(we,{f:()=>u})},4671:(it,we,k)=>{function u(V){return V}k.d(we,{y:()=>u})},1144:(it,we,k)=>{k.d(we,{z:()=>u});const u=V=>V&&"number"==typeof V.length&&"function"!=typeof V},2206:(it,we,k)=>{k.d(we,{D:()=>V});var u=k(576);function V(R){return Symbol.asyncIterator&&(0,u.m)(null==R?void 0:R[Symbol.asyncIterator])}},576:(it,we,k)=>{function u(V){return"function"==typeof V}k.d(we,{m:()=>u})},3670:(it,we,k)=>{k.d(we,{c:()=>R});var u=k(8822),V=k(576);function R(ae){return(0,V.m)(ae[u.L])}},6495:(it,we,k)=>{k.d(we,{T:()=>R});var u=k(2202),V=k(576);function R(ae){return(0,V.m)(null==ae?void 0:ae[u.h])}},8239:(it,we,k)=>{k.d(we,{t:()=>V});var u=k(576);function V(R){return(0,u.m)(null==R?void 0:R.then)}},3260:(it,we,k)=>{k.d(we,{L:()=>ae,Q:()=>R});var u=k(655),V=k(576);function R(ue){return(0,u.FC)(this,arguments,function*(){const pe=ue.getReader();try{for(;;){const{value:ce,done:ye}=yield(0,u.qq)(pe.read());if(ye)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(ce)}}finally{pe.releaseLock()}})}function ae(ue){return(0,V.m)(null==ue?void 0:ue.getReader)}},3532:(it,we,k)=>{k.d(we,{K:()=>V});var u=k(576);function V(R){return R&&(0,u.m)(R.schedule)}},4482:(it,we,k)=>{k.d(we,{A:()=>V,e:()=>R});var u=k(576);function V(ae){return(0,u.m)(null==ae?void 0:ae.lift)}function R(ae){return ue=>{if(V(ue))return ue.lift(function(_e){try{return ae(_e,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(it,we,k)=>{function u(){}k.d(we,{Z:()=>u})},7849:(it,we,k)=>{k.d(we,{h:()=>R});var u=k(2416),V=k(3410);function R(ae){V.z.setTimeout(()=>{const{onUnhandledError:ue}=u.v;if(!ue)throw ae;ue(ae)})}},4532:(it,we,k)=>{function u(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(we,{z:()=>u})},655:(it,we,k)=>{function ae(J,re){var oe={};for(var be in J)Object.prototype.hasOwnProperty.call(J,be)&&re.indexOf(be)<0&&(oe[be]=J[be]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var he=0;for(be=Object.getOwnPropertySymbols(J);he<be.length;he++)re.indexOf(be[he])<0&&Object.prototype.propertyIsEnumerable.call(J,be[he])&&(oe[be[he]]=J[be[he]])}return oe}function ce(J,re,oe,be){return new(oe||(oe=Promise))(function(Ve,yt){function en(un){try{Je(be.next(un))}catch(On){yt(On)}}function Ht(un){try{Je(be.throw(un))}catch(On){yt(On)}}function Je(un){un.done?Ve(un.value):function he(Ve){return Ve instanceof oe?Ve:new oe(function(yt){yt(Ve)})}(un.value).then(en,Ht)}Je((be=be.apply(J,re||[])).next())})}function me(J){return this instanceof me?(this.v=J,this):new me(J)}function Se(J,re,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,be=oe.apply(J,re||[]),Ve=[];return he={},yt("next"),yt("throw"),yt("return"),he[Symbol.asyncIterator]=function(){return this},he;function yt(gn){be[gn]&&(he[gn]=function(sn){return new Promise(function(Gt,tn){Ve.push([gn,sn,Gt,tn])>1||en(gn,sn)})})}function en(gn,sn){try{!function Ht(gn){gn.value instanceof me?Promise.resolve(gn.value.v).then(Je,un):On(Ve[0][2],gn)}(be[gn](sn))}catch(Gt){On(Ve[0][3],Gt)}}function Je(gn){en("next",gn)}function un(gn){en("throw",gn)}function On(gn,sn){gn(sn),Ve.shift(),Ve.length&&en(Ve[0][0],Ve[0][1])}}function Ze(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,re=J[Symbol.asyncIterator];return re?re.call(J):(J=function ie(J){var re="function"==typeof Symbol&&Symbol.iterator,oe=re&&J[re],be=0;if(oe)return oe.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&be>=J.length&&(J=void 0),{value:J&&J[be++],done:!J}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),oe={},be("next"),be("throw"),be("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function be(Ve){oe[Ve]=J[Ve]&&function(yt){return new Promise(function(en,Ht){!function he(Ve,yt,en,Ht){Promise.resolve(Ht).then(function(Je){Ve({value:Je,done:en})},yt)}(en,Ht,(yt=J[Ve](yt)).done,yt.value)})}}}k.d(we,{FC:()=>Se,KL:()=>Ze,_T:()=>ae,mG:()=>ce,qq:()=>me})},5e3:(it,we,k)=>{k.d(we,{$8M:()=>Xl,$Z:()=>WE,AFp:()=>b1,ALo:()=>Oh,AaK:()=>ce,BQk:()=>U_,CHM:()=>hl,CRH:()=>pg,CZH:()=>sd,CqO:()=>JE,DdM:()=>uy,EJc:()=>PI,EpF:()=>KE,F$t:()=>tC,F4k:()=>YE,FYo:()=>$w,FiY:()=>er,G48:()=>O1,Gf:()=>Vh,GfV:()=>qw,Gpc:()=>j,Hsn:()=>nC,Ikx:()=>zp,JOm:()=>ms,Jf7:()=>qm,LFG:()=>ct,LSH:()=>Sc,Lbi:()=>RI,MAs:()=>R_,MGl:()=>yh,NdJ:()=>Xb,OlP:()=>Un,Oqu:()=>bh,PXZ:()=>N1,Q6J:()=>Kb,QGY:()=>Qb,Qsj:()=>oI,QtT:()=>ry,R0b:()=>Zs,RDi:()=>Hl,Rgc:()=>Ph,SBq:()=>vu,SDv:()=>QC,Sil:()=>BI,Suo:()=>nd,TTD:()=>ma,TgZ:()=>L_,Tol:()=>hC,Udp:()=>hw,VKq:()=>Yw,VLi:()=>GI,W1O:()=>l1,WLB:()=>cy,X6Q:()=>Iu,XFs:()=>bt,Xpm:()=>vt,Y36:()=>jp,YKP:()=>wo,YNc:()=>Vp,Yjl:()=>Xe,Yz7:()=>sn,ZZ4:()=>B1,_Bn:()=>Yc,_UZ:()=>Yb,_Vd:()=>ra,_c5:()=>HR,_uU:()=>q_,aQg:()=>Zy,c2e:()=>OI,cJS:()=>tn,cg1:()=>Yp,dDg:()=>S1,deG:()=>Ld,dqk:()=>$t,eFA:()=>M1,ekj:()=>fw,g9A:()=>ad,h0i:()=>Jc,hGG:()=>GR,hij:()=>$p,iGM:()=>i1,ifc:()=>Zt,ip1:()=>v1,kEZ:()=>Jw,kL8:()=>NC,lG2:()=>Ae,lcZ:()=>fy,n5z:()=>Ql,oAB:()=>de,oJD:()=>Ic,oxw:()=>eC,pQV:()=>Vw,q4F:()=>oy,qLn:()=>Nc,qOj:()=>Rb,qZA:()=>B_,s9C:()=>$c,sBO:()=>JI,sIi:()=>lh,s_b:()=>Fh,soG:()=>Py,tBr:()=>Cn,tb:()=>w1,tp0:()=>po,uIk:()=>Bp,vHH:()=>Le,vpe:()=>ia,wAp:()=>It,xp6:()=>fu,ynx:()=>V_,z2F:()=>Sg,zSh:()=>E_,zs3:()=>ea});var u=k(7579),V=k(727),R=k(8306),ae=k(6451),ue=k(3099);function _e(s){for(let o in s)if(s[o]===_e)return o;throw Error("Could not find renamed property on target object.")}function pe(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function ce(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ce).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function ye(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const $=_e({__forward_ref__:_e});function j(s){return s.__forward_ref__=j,s.toString=function(){return ce(this())},s}function ie(s){return Ke(s)?s():s}function Ke(s){return"function"==typeof s&&s.hasOwnProperty($)&&s.__forward_ref__===j}class Le extends Error{constructor(o,l){super(function $e(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,l)),this.code=o}}function me(s){return"string"==typeof s?s:null==s?"":String(s)}function Se(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():me(s)}function xe(s,o){const l=o?` in ${o}`:"";throw new Le(-201,`No provider for ${Se(s)} found${l}`)}function Je(s,o,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${o} <=Actual]`))}function sn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function tn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Tn(s){return Ui(s,ii)||Ui(s,Kn)}function Ui(s,o){return s.hasOwnProperty(o)?s[o]:null}function ji(s){return s&&(s.hasOwnProperty(Ei)||s.hasOwnProperty(Hi))?s[Ei]:null}const ii=_e({\u0275prov:_e}),Ei=_e({\u0275inj:_e}),Kn=_e({ngInjectableDef:_e}),Hi=_e({ngInjectorDef:_e});var bt=(()=>((bt=bt||{})[bt.Default=0]="Default",bt[bt.Host=1]="Host",bt[bt.Self=2]="Self",bt[bt.SkipSelf=4]="SkipSelf",bt[bt.Optional=8]="Optional",bt))();let Pr;function nn(s){const o=Pr;return Pr=s,o}function Sr(s,o,l){const c=Tn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&bt.Optional?null:void 0!==o?o:void xe(ce(s),"Injector")}function Fr(s){return{toString:s}.toString()}var Dn=(()=>((Dn=Dn||{})[Dn.OnPush=0]="OnPush",Dn[Dn.Default=1]="Default",Dn))(),Zt=(()=>{return(s=Zt||(Zt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Zt;var s})();const mt="undefined"!=typeof globalThis&&globalThis,lt="undefined"!=typeof window&&window,si="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,$t=mt||"undefined"!=typeof global&&global||lt||si,cn={},U=[],q=_e({\u0275cmp:_e}),z=_e({\u0275dir:_e}),Te=_e({\u0275pipe:_e}),G=_e({\u0275mod:_e}),ee=_e({\u0275fac:_e}),ke=_e({__NG_ELEMENT_ID__:_e});let nt=0;function vt(s){return Fr(()=>{const l={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Dn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||U,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Zt.Emulated,id:"c",styles:s.styles||U,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,p=s.features,y=s.pipes;return c.id+=nt++,c.inputs=W(s.inputs,l),c.outputs=W(s.outputs),p&&p.forEach(b=>b(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(on):null,c.pipeDefs=y?()=>("function"==typeof y?y():y).map(Ct):null,c})}function on(s){return pt(s)||function xt(s){return s[z]||null}(s)}function Ct(s){return function zt(s){return s[Te]||null}(s)}const Yn={};function de(s){return Fr(()=>{const o={type:s.type,bootstrap:s.bootstrap||U,declarations:s.declarations||U,imports:s.imports||U,exports:s.exports||U,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Yn[s.id]=s.type),o})}function W(s,o){if(null==s)return cn;const l={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),l[h]=c,o&&(o[h]=p)}return l}const Ae=vt;function Xe(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function pt(s){return s[q]||null}function Ut(s,o){const l=s[G]||null;if(!l&&!0===o)throw new Error(`Type ${ce(s)} does not have '\u0275mod' property.`);return l}function Ci(s){return Array.isArray(s)&&"object"==typeof s[1]}function ai(s){return Array.isArray(s)&&!0===s[1]}function ju(s){return 0!=(8&s.flags)}function rl(s){return 2==(2&s.flags)}function Rs(s){return 1==(1&s.flags)}function li(s){return null!==s.template}function Sd(s){return 0!=(512&s[2])}function ui(s,o){return s.hasOwnProperty(ee)?s[ee]:null}class ko{constructor(o,l,c){this.previousValue=o,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function ma(){return _a}function _a(s){return s.type.prototype.ngOnChanges&&(s.setInput=Bf),Nd}function Nd(){const s=qu(this),o=null==s?void 0:s.current;if(o){const l=s.previous;if(l===cn)s.previous=o;else for(let c in o)l[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Bf(s,o,l,c){const h=qu(s)||function us(s,o){return s[Qn]=o}(s,{previous:cn,current:null}),p=h.current||(h.current={}),y=h.previous,b=this.declaredInputs[l],D=y[b];p[b]=new ko(D&&D.currentValue,o,y===cn),s[c]=o}ma.ngInherit=!0;const Qn="__ngSimpleChanges__";function qu(s){return s[Qn]||null}let ll;function Hl(s){ll=s}function cs(){return void 0!==ll?ll:"undefined"!=typeof document?document:void 0}function mn(s){return!!s.listen}const ya={createRenderer:(s,o)=>cs()};function hn(s){for(;Array.isArray(s);)s=s[0];return s}function eo(s,o){return hn(o[s])}function hr(s,o){return hn(o[s.index])}function Fn(s,o){return s.data[o]}function ds(s,o){return s[o]}function fr(s,o){const l=o[s];return Ci(l)?l:l[0]}function Po(s){return 4==(4&s[2])}function qi(s){return 128==(128&s[2])}function Yr(s,o){return null==o?null:s[o]}function Ps(s){s[18]=0}function Fs(s,o){s[5]+=o;let l=s,c=s[3];for(;null!==c&&(1===o&&1===l[5]||-1===o&&0===l[5]);)c[5]+=o,l=c,c=c[3]}const Tt={lFrame:rc(null),bindingsEnabled:!0};function Fo(){return Tt.bindingsEnabled}function Oe(){return Tt.lFrame.lView}function qt(){return Tt.lFrame.tView}function hl(s){return Tt.lFrame.contextLView=s,s[8]}function wn(){let s=Ju();for(;null!==s&&64===s.type;)s=s.parent;return s}function Ju(){return Tt.lFrame.currentTNode}function hs(){const s=Tt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}function Wi(s,o){const l=Tt.lFrame;l.currentTNode=s,l.isParent=o}function ql(){return Tt.lFrame.isParent}function wa(){Tt.lFrame.isParent=!1}function pr(){const s=Tt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Bo(){return Tt.lFrame.bindingIndex++}function Jr(s){const o=Tt.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}function Vo(s){Tt.lFrame.inI18n=s}function ec(s,o){const l=Tt.lFrame;l.bindingIndex=l.bindingRootIndex=s,Wl(o)}function Wl(s){Tt.lFrame.currentDirectiveIndex=s}function tc(){return Tt.lFrame.currentQueryIndex}function nc(s){Tt.lFrame.currentQueryIndex=s}function Zl(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Da(s,o,l){if(l&bt.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||l&bt.Host||(h=Zl(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const c=Tt.lFrame=ro();return c.currentTNode=o,c.lView=s,!0}function Ea(s){const o=ro(),l=s[1];Tt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function ro(){const s=Tt.lFrame,o=null===s?null:s.child;return null===o?rc(s):o}function rc(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Od(){const s=Tt.lFrame;return Tt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const fl=Od;function Qr(){const s=Od();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function _r(){return Tt.lFrame.selectedIndex}function io(s){Tt.lFrame.selectedIndex=s}function Xn(){const s=Tt.lFrame;return Fn(s.tView,s.selectedIndex)}function fs(s,o){for(let l=o.directiveStart,c=o.directiveEnd;l<c;l++){const p=s.data[l].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:b,ngAfterViewInit:D,ngAfterViewChecked:S,ngOnDestroy:M}=p;y&&(s.contentHooks||(s.contentHooks=[])).push(-l,y),b&&((s.contentHooks||(s.contentHooks=[])).push(l,b),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,b)),D&&(s.viewHooks||(s.viewHooks=[])).push(-l,D),S&&((s.viewHooks||(s.viewHooks=[])).push(l,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,S)),null!=M&&(s.destroyHooks||(s.destroyHooks=[])).push(l,M)}}function Ca(s,o,l){oc(s,o,3,l)}function Ia(s,o,l,c){(3&s[2])===l&&oc(s,o,l,c)}function ir(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function oc(s,o,l,c){const p=null!=c?c:-1,y=o.length-1;let b=0;for(let D=void 0!==c?65535&s[18]:0;D<y;D++)if("number"==typeof o[D+1]){if(b=o[D],null!=c&&b>=c)break}else o[D]<0&&(s[18]+=65536),(b<p||-1==p)&&(Uf(s,l,o,D),s[18]=(4294901760&s[18])+D+2),D++}function Uf(s,o,l,c){const h=l[c]<0,p=l[c+1],b=s[h?-l[c]:l[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(b)}finally{}}}else try{p.call(b)}finally{}}class jo{constructor(o,l,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function sr(s,o,l){const c=mn(s);let h=0;for(;h<l.length;){const p=l[h];if("number"==typeof p){if(0!==p)break;h++;const y=l[h++],b=l[h++],D=l[h++];c?s.setAttribute(o,b,D,y):o.setAttributeNS(y,b,D)}else{const y=p,b=l[++h];ci(y)?c&&s.setProperty(o,y,b):c?s.setAttribute(o,y,b):o.setAttribute(y,b),h++}}return h}function Ln(s){return 3===s||4===s||6===s}function ci(s){return 64===s.charCodeAt(0)}function zi(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?l=h:0===l||Bn(s,l,h,null,-1===l||2===l?o[++c]:null)}}return s}function Bn(s,o,l,c,h){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const b=s[p++];if("number"==typeof b){if(b===o){y=-1;break}if(b>o){y=p-1;break}}}for(;p<s.length;){const b=s[p];if("number"==typeof b)break;if(b===l){if(null===c)return void(null!==h&&(s[p+1]=h));if(c===s[p+1])return void(s[p+2]=h)}p++,null!==c&&p++,null!==h&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,l),null!==c&&s.splice(p++,0,c),null!==h&&s.splice(p++,0,h)}function Vn(s){return-1!==s}function Rt(s){return 32767&s}function Si(s,o){let l=function wt(s){return s>>16}(s),c=o;for(;l>0;)c=c[15],l--;return c}let Sa=!0;function yr(s){const o=Sa;return Sa=s,o}let Fd=0;function ao(s,o){const l=Aa(s,o);if(-1!==l)return l;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,vr(c.data,s),vr(o,null),vr(c.blueprint,null));const h=di(s,o),p=s.injectorIndex;if(Vn(h)){const y=Rt(h),b=Si(h,o),D=b[1].data;for(let S=0;S<8;S++)o[p+S]=b[y+S]|D[y+S]}return o[p+8]=h,p}function vr(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Aa(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function di(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,h=o;for(;null!==h;){const p=h[1],y=p.type;if(c=2===y?p.declTNode:1===y?h[6]:null,null===c)return-1;if(l++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function lo(s,o,l){!function oo(s,o,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(ke)&&(c=l[ke]),null==c&&(c=l[ke]=Fd++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function Vs(s,o,l){if(l&bt.Optional)return s;xe(o,"NodeInjector")}function gl(s,o,l,c){if(l&bt.Optional&&void 0===c&&(c=null),0==(l&(bt.Self|bt.Host))){const h=s[9],p=nn(void 0);try{return h?h.get(o,c,l&bt.Optional):Sr(o,c,l&bt.Optional)}finally{nn(p)}}return Vs(c,o,l)}function Na(s,o,l,c=bt.Default,h){if(null!==s){const p=function cc(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(ke)?s[ke]:void 0;return"number"==typeof o?o>=0?255&o:Rn:o}(l);if("function"==typeof p){if(!Da(o,s,c))return c&bt.Host?Vs(h,l,c):gl(o,l,c,h);try{const y=p(c);if(null!=y||c&bt.Optional)return y;xe(l)}finally{fl()}}else if("number"==typeof p){let y=null,b=Aa(s,o),D=-1,S=c&bt.Host?o[16][6]:null;for((-1===b||c&bt.SkipSelf)&&(D=-1===b?di(s,o):o[b+8],-1!==D&&dc(c,!1)?(y=o[1],b=Rt(D),o=Si(D,o)):b=-1);-1!==b;){const M=o[1];if(Ho(p,b,M.data)){const F=uc(b,o,l,y,c,S);if(F!==Ai)return F}D=o[b+8],-1!==D&&dc(c,o[1].data[b+8]===S)&&Ho(p,b,o)?(y=M,b=Rt(D),o=Si(D,o)):b=-1}}}return gl(o,l,c,h)}const Ai={};function Rn(){return new Ni(wn(),Oe())}function uc(s,o,l,c,h,p){const y=o[1],b=y.data[s+8],M=Ma(b,y,l,null==c?rl(b)&&Sa:c!=y&&0!=(3&b.type),h&bt.Host&&p===b);return null!==M?gs(o,y,M,b):Ai}function Ma(s,o,l,c,h){const p=s.providerIndexes,y=o.data,b=1048575&p,D=s.directiveStart,M=p>>20,H=h?b+M:s.directiveEnd;for(let X=c?b:b+M;X<H;X++){const De=y[X];if(X<D&&l===De||X>=D&&De.type===l)return X}if(h){const X=y[D];if(X&&li(X)&&X.type===l)return D}return null}function gs(s,o,l,c){let h=s[l];const p=o.data;if(function ac(s){return s instanceof jo}(h)){const y=h;y.resolving&&function ze(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Le(-200,`Circular dependency in DI detected for ${s}${l}`)}(Se(p[l]));const b=yr(y.canSeeViewProviders);y.resolving=!0;const D=y.injectImpl?nn(y.injectImpl):null;Da(s,c,bt.Default);try{h=s[l]=y.factory(void 0,p,s,c),o.firstCreatePass&&l>=c.directiveStart&&function sc(s,o,l){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(c){const y=_a(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,y),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,y)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),p&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,p),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,p))}(l,p[l],o)}finally{null!==D&&nn(D),yr(b),y.resolving=!1,fl()}}return h}function Ho(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function dc(s,o){return!(s&bt.Self||s&bt.Host&&o)}class Ni{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,c){return Na(this._tNode,this._lView,o,c,l)}}function Ql(s){return Fr(()=>{const o=s.prototype.constructor,l=o[ee]||Go(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const p=h[ee]||Go(h);if(p&&p!==l)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function Go(s){return Ke(s)?()=>{const o=Go(ie(s));return o&&o()}:ui(s)}function Xl(s){return function pl(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const c=l.length;let h=0;for(;h<c;){const p=l[h];if(Ln(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<c&&"string"==typeof l[h];)h++;else{if(p===o)return l[h+1];h+=2}}}return null}(wn(),s)}const xa="__parameters__";function Ra(s,o,l){return Fr(()=>{const c=function hc(s){return function(...l){if(s){const c=s(...l);for(const h in c)this[h]=c[h]}}}(o);function h(...p){if(this instanceof h)return c.apply(this,p),this;const y=new h(...p);return b.annotation=y,b;function b(D,S,M){const F=D.hasOwnProperty(xa)?D[xa]:Object.defineProperty(D,xa,{value:[]})[xa];for(;F.length<=M;)F.push(null);return(F[M]=F[M]||[]).push(y),D}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Un{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=sn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ld=new Un("AnalyzeForEntryComponents");function Kt(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let c=s[l];Array.isArray(c)?(o===s&&(o=s.slice(0,l)),Kt(c,o)):o!==s&&o.push(c)}return o}function Hn(s,o){s.forEach(l=>Array.isArray(l)?Hn(l,o):o(l))}function gc(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function Us(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function co(s,o){const l=[];for(let c=0;c<s;c++)l.push(o);return l}function Xr(s,o,l){let c=qo(s,o);return c>=0?s[1|c]=l:(c=~c,function ru(s,o,l,c){let h=s.length;if(h==o)s.push(l,c);else if(1===h)s.push(c,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=c}}(s,c,o,l)),c}function _c(s,o){const l=qo(s,o);if(l>=0)return s[1|l]}function qo(s,o){return function ho(s,o,l){let c=0,h=s.length>>l;for(;h!==c;){const p=c+(h-c>>1),y=s[p<<l];if(o===y)return p<<l;y>o?h=p:c=p+1}return~(h<<l)}(s,o,1)}const fo={},Pa="__NG_DI_FLAG__",vl="ngTempTokenPath",C=/\n/gm,B="__source",Q=_e({provide:String,useValue:_e});let le;function Be(s){const o=le;return le=s,o}function ot(s,o=bt.Default){if(void 0===le)throw new Le(203,"");return null===le?Sr(s,void 0,o):le.get(s,o&bt.Optional?null:void 0,o)}function ct(s,o=bt.Default){return(function bn(){return Pr}()||ot)(ie(s),o)}const Qt=ct;function Et(s){const o=[];for(let l=0;l<s.length;l++){const c=ie(s[l]);if(Array.isArray(c)){if(0===c.length)throw new Le(900,"");let h,p=bt.Default;for(let y=0;y<c.length;y++){const b=c[y],D=Nn(b);"number"==typeof D?-1===D?h=b.token:p|=D:h=b}o.push(ct(h,p))}else o.push(ct(c))}return o}function wr(s,o){return s[Pa]=o,s.prototype[Pa]=o,s}function Nn(s){return s[Pa]}const Cn=wr(Ra("Inject",s=>({token:s})),-1),er=wr(Ra("Optional"),8),po=wr(Ra("SkipSelf"),4);let js,ei;function La(s){var o;return(null===(o=function Hs(){if(void 0===js&&(js=null,$t.trustedTypes))try{js=$t.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return js}())||void 0===o?void 0:o.createHTML(s))||s}function Ud(s){var o;return(null===(o=function wc(){if(void 0===ei&&(ei=null,$t.trustedTypes))try{ei=$t.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return ei}())||void 0===o?void 0:o.createHTML(s))||s}class Tc{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function go(s){return s instanceof Tc?s.changingThisBreaksApplicationSecurity:s}function zo(s,o){const l=function Qf(s){return s instanceof Tc&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}function cu(s){const o=new np(s);return function rp(){try{return!!(new window.DOMParser).parseFromString(La(""),"text/html")}catch(s){return!1}}()?new tp(o):o}class tp{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const l=(new window.DOMParser).parseFromString(La(o),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(o):(l.removeChild(l.firstChild),l)}catch(l){return null}}}class np{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const c=this.inertDocument.createElement("body");l.appendChild(c)}}getInertBodyElement(o){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=La(o),l;const c=this.inertDocument.createElement("body");return c.innerHTML=La(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const l=o.attributes;for(let h=l.length-1;0<h;h--){const y=l.item(h).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&o.removeAttribute(y)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const ip=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,g=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function m(s){return(s=String(s)).match(ip)||s.match(g)?s:"unsafe:"+s}function T(s){return(s=String(s)).split(",").map(o=>m(o.trim())).join(", ")}function N(s){const o={};for(const l of s.split(","))o[l]=!0;return o}function O(...s){const o={};for(const l of s)for(const c in l)l.hasOwnProperty(c)&&(o[c]=!0);return o}const te=N("area,br,col,hr,img,wbr"),Pe=N("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),at=N("rp,rt"),ti=O(te,O(Pe,N("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),O(at,N("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),O(at,Pe)),Gs=N("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ko=N("srcset"),sp=O(Gs,Ko,N("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),N("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),xm=N("script,style,template");class op{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let l=o.firstChild,c=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?c=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,c&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let h=this.checkClobberedElement(l,l.nextSibling);if(h){l=h;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(o){const l=o.nodeName.toLowerCase();if(!ti.hasOwnProperty(l))return this.sanitizedSomething=!0,!xm.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const c=o.attributes;for(let h=0;h<c.length;h++){const p=c.item(h),y=p.name,b=y.toLowerCase();if(!sp.hasOwnProperty(b)){this.sanitizedSomething=!0;continue}let D=p.value;Gs[b]&&(D=m(D)),Ko[b]&&(D=T(D)),this.buf.push(" ",y,'="',Cc(D),'"')}return this.buf.push(">"),!0}endElement(o){const l=o.nodeName.toLowerCase();ti.hasOwnProperty(l)&&!te.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(o){this.buf.push(Cc(o))}checkClobberedElement(o,l){if(l&&(o.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return l}}const Rm=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Om=/([^\#-~ |!])/g;function Cc(s){return s.replace(/&/g,"&amp;").replace(Rm,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Om,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Tl;function du(s){return"content"in s&&function Pm(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var tr=(()=>((tr=tr||{})[tr.NONE=0]="NONE",tr[tr.HTML=1]="HTML",tr[tr.STYLE=2]="STYLE",tr[tr.SCRIPT=3]="SCRIPT",tr[tr.URL=4]="URL",tr[tr.RESOURCE_URL=5]="RESOURCE_URL",tr))();function Ic(s){const o=$d();return o?Ud(o.sanitize(tr.HTML,s)||""):zo(s,"HTML")?Ud(go(s)):function km(s,o){let l=null;try{Tl=Tl||cu(s);let c=o?String(o):"";l=Tl.getInertBodyElement(c);let h=5,p=c;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,c=p,p=l.innerHTML,l=Tl.getInertBodyElement(c)}while(c!==p);return La((new op).sanitizeChildren(du(l)||l))}finally{if(l){const c=du(l)||l;for(;c.firstChild;)c.removeChild(c.firstChild)}}}(cs(),me(s))}function Sc(s){const o=$d();return o?o.sanitize(tr.URL,s)||"":zo(s,"URL")?go(s):m(me(s))}function $d(){const s=Oe();return s&&s[12]}const gD="__ngContext__";function Vr(s,o){s[gD]=o}function up(s){const o=function qd(s){return s[gD]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function dp(s){return s.ngOriginalError}function v0(s,...o){s.error(...o)}class Nc{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o),c=function hp(s){return s&&s.ngErrorLogger||v0}(o);c(this._console,"ERROR",o),l&&c(this._console,"ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&dp(o);for(;l&&dp(l);)l=dp(l);return l||null}}const w0=/^>|^->|<!--|-->|--!>|<!-$/g,T0=/(<|>)/;const $m=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind($t))();function qm(s){return s.ownerDocument.defaultView}function Va(s){return s instanceof Function?s():s}var ms=(()=>((ms=ms||{})[ms.Important=1]="Important",ms[ms.DashCase=2]="DashCase",ms))();let Jd;function Wm(s,o){return Jd(s,o)}function fp(s){const o=s[3];return ai(o)?o[3]:o}function pp(s){return Km(s[13])}function zm(s){return Km(s[4])}function Km(s){for(;null!==s&&!ai(s);)s=s[4];return s}function Mc(s,o,l,c,h){if(null!=c){let p,y=!1;ai(c)?p=c:Ci(c)&&(y=!0,c=c[0]);const b=hn(c);0===s&&null!==l?null==h?yp(o,l,b):xc(o,l,b,h||null,!0):1===s&&null!==l?xc(o,l,b,h||null,!0):2===s?L0(o,b,y):3===s&&o.destroyNode(b),null!=p&&function U0(s,o,l,c,h){const p=l[7];p!==hn(l)&&Mc(o,s,c,p,h);for(let b=10;b<l.length;b++){const D=l[b];eh(D[1],D,s,o,c,p)}}(o,s,p,l,h)}}function gp(s,o){return mn(s)?s.createText(o):s.createTextNode(o)}function A0(s,o,l){mn(s)?s.setValue(o,l):o.textContent=l}function Qd(s,o){return s.createComment(function Ba(s){return s.replace(w0,o=>o.replace(T0,"\u200b$1\u200b"))}(o))}function Ym(s,o,l){if(mn(s))return s.createElement(o,l);{const c=null!==l?function al(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(l):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function M0(s,o){const l=s[9],c=l.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,Fs(h,-1)),l.splice(c,1)}function _p(s,o){if(s.length<=10)return;const l=10+o,c=s[l];if(c){const h=c[17];null!==h&&h!==s&&M0(h,c),o>0&&(s[l-1][4]=c[4]);const p=Us(s,10+o);!function Jm(s,o){eh(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=p[19];null!==y&&y.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function x0(s,o){if(!(256&o[2])){const l=o[11];mn(l)&&l.destroyNode&&eh(s,o,l,3,null,null),function N0(s){let o=s[13];if(!o)return Xd(s[1],s);for(;o;){let l=null;if(Ci(o))l=o[13];else{const c=o[10];c&&(l=c)}if(!l){for(;o&&!o[4]&&o!==s;)Ci(o)&&Xd(o[1],o),o=o[3];null===o&&(o=s),Ci(o)&&Xd(o[1],o),l=o&&o[4]}o=l}}(o)}}function Xd(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function CD(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const h=o[l[c]];if(!(h instanceof jo)){const p=l[c+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const b=h[p[y]],D=p[y+1];try{D.call(b)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function R0(s,o){const l=s.cleanup,c=o[7];let h=-1;if(null!==l)for(let p=0;p<l.length-1;p+=2)if("string"==typeof l[p]){const y=l[p+1],b="function"==typeof y?y(o):hn(o[y]),D=c[h=l[p+2]],S=l[p+3];"boolean"==typeof S?b.removeEventListener(l[p],D,S):S>=0?c[h=S]():c[h=-S].unsubscribe(),p+=2}else{const y=c[h=l[p+1]];l[p].call(y)}if(null!==c){for(let p=h+1;p<c.length;p++)c[p]();o[7]=null}}(s,o),1===o[1].type&&mn(o[11])&&o[11].destroy();const l=o[17];if(null!==l&&ai(o[3])){l!==o[3]&&M0(l,o);const c=o[19];null!==c&&c.detachView(s)}}}function Xm(s,o,l){return O0(s,o.parent,l)}function O0(s,o,l){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return l[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===Zt.None||h===Zt.Emulated)return null}return hr(c,l)}function xc(s,o,l,c,h){mn(s)?s.insertBefore(o,l,c,h):o.insertBefore(l,c,h)}function yp(s,o,l){mn(s)?s.appendChild(o,l):o.appendChild(l)}function e_(s,o,l,c,h){null!==c?xc(s,o,l,c,h):yp(s,o,l)}function vp(s,o){return mn(s)?s.parentNode(o):o.parentNode}function Dl(s,o,l){return t_(s,o,l)}function F0(s,o,l){return 40&s.type?hr(s,l):null}let n_,t_=F0;function r_(s,o){t_=s,n_=o}function bp(s,o,l,c){const h=Xm(s,c,o),p=o[11],b=Dl(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(l))for(let D=0;D<l.length;D++)e_(p,h,l[D],b,!1);else e_(p,h,l,b,!1);void 0!==n_&&n_(p,c,o,l,h)}function wp(s,o){if(null!==o){const l=o.type;if(3&l)return hr(o,s);if(4&l)return Dp(-1,s[o.index]);if(8&l){const c=o.child;if(null!==c)return wp(s,c);{const h=s[o.index];return ai(h)?Dp(-1,h):hn(h)}}if(32&l)return Wm(o,s)()||hn(s[o.index]);{const c=Tp(s,o);return null!==c?Array.isArray(c)?c[0]:wp(fp(s[16]),c):wp(s,o.next)}}return null}function Tp(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Dp(s,o){const l=10+s+1;if(l<o.length){const c=o[l],h=c[1].firstChild;if(null!==h)return wp(c,h)}return o[7]}function L0(s,o,l){const c=vp(s,o);c&&function k0(s,o,l,c){mn(s)?s.removeChild(o,l,c):o.removeChild(l)}(s,c,o,l)}function Ep(s,o,l,c,h,p,y){for(;null!=l;){const b=c[l.index],D=l.type;if(y&&0===o&&(b&&Vr(hn(b),c),l.flags|=4),64!=(64&l.flags))if(8&D)Ep(s,o,l.child,c,h,p,!1),Mc(o,s,h,b,p);else if(32&D){const S=Wm(l,c);let M;for(;M=S();)Mc(o,s,h,M,p);Mc(o,s,h,b,p)}else 16&D?V0(s,o,c,l,h,p):Mc(o,s,h,b,p);l=y?l.projectionNext:l.next}}function eh(s,o,l,c,h,p){Ep(l,c,s.firstChild,o,h,p,!1)}function V0(s,o,l,c,h,p){const y=l[16],D=y[6].projection[c.projection];if(Array.isArray(D))for(let S=0;S<D.length;S++)Mc(o,s,h,D[S],p);else Ep(s,o,D,y[3],h,p,!0)}function i_(s,o,l){mn(s)?s.setAttribute(o,"style",l):o.style.cssText=l}function j0(s,o,l){mn(s)?""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l):o.className=l}function SD(s,o,l){let c=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===c||s.charCodeAt(h+p)<=32)return h}l=h+1}}const s_="ng-template";function H0(s,o,l){let c=0;for(;c<s.length;){let h=s[c++];if(l&&"class"===h){if(h=s[c],-1!==SD(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function G0(s){return 4===s.type&&s.value!==s_}function HM(s,o,l){return o===(4!==s.type||l?s.value:s_)}function GM(s,o,l){let c=4;const h=s.attrs||[],p=function ND(s){for(let o=0;o<s.length;o++)if(Ln(s[o]))return o;return s.length}(h);let y=!1;for(let b=0;b<o.length;b++){const D=o[b];if("number"!=typeof D){if(!y)if(4&c){if(c=2|1&c,""!==D&&!HM(s,D,l)||""===D&&1===o.length){if(Yo(c))return!1;y=!0}}else{const S=8&c?D:o[++b];if(8&c&&null!==s.attrs){if(!H0(s.attrs,S,l)){if(Yo(c))return!1;y=!0}continue}const F=AD(8&c?"class":D,h,G0(s),l);if(-1===F){if(Yo(c))return!1;y=!0;continue}if(""!==S){let H;H=F>p?"":h[F+1].toLowerCase();const X=8&c?H:null;if(X&&-1!==SD(X,S,0)||2&c&&S!==H){if(Yo(c))return!1;y=!0}}}}else{if(!y&&!Yo(c)&&!Yo(D))return!1;if(y&&Yo(D))continue;y=!1,c=D|1&c}}return Yo(c)||y}function Yo(s){return 0==(1&s)}function AD(s,o,l,c){if(null===o)return-1;let h=0;if(c||!l){let p=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)p=!0;else{if(1===y||2===y){let b=o[++h];for(;"string"==typeof b;)b=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=p?1:2}return-1}return function $0(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===o)return l;l++}return-1}(o,s)}function th(s,o,l=!1){for(let c=0;c<o.length;c++)if(GM(s,o[c],l))return!0;return!1}function _s(s,o){e:for(let l=0;l<o.length;l++){const c=o[l];if(s.length===c.length){for(let h=0;h<s.length;h++)if(s[h]!==c[h])continue e;return!0}}return!1}function $s(s,o){return s?":not("+o.trim()+")":o}function mo(s){let o=s[0],l=1,c=2,h="",p=!1;for(;l<s.length;){let y=s[l];if("string"==typeof y)if(2&c){const b=s[++l];h+="["+y+(b.length>0?'="'+b+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!Yo(y)&&(o+=$s(p,h),h=""),c=y,p=p||!Yo(c);l++}return""!==h&&(o+=$s(p,h)),o}const At={};function fu(s){Rc(qt(),Oe(),_r()+s,!1)}function Rc(s,o,l,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Ca(o,p,l)}else{const p=s.preOrderHooks;null!==p&&Ia(o,p,0,l)}io(l)}function nh(s,o){return s<<17|o<<2}function Mi(s){return s>>17&32767}function Cp(s){return 2|s}function Ua(s){return(131068&s)>>2}function a_(s,o){return-131069&s|o<<2}function l_(s){return 1|s}function nb(s,o){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const h=l[c],p=l[c+1];if(-1!==p){const y=s.data[p];nc(h),y.contentQueries(2,o[p],p)}}}function Ha(s,o,l,c,h,p,y,b,D,S){const M=o.blueprint.slice();return M[0]=h,M[2]=140|c,Ps(M),M[3]=M[15]=s,M[8]=l,M[10]=y||s&&s[10],M[11]=b||s&&s[11],M[12]=D||s&&s[12]||null,M[9]=S||s&&s[9]||null,M[6]=p,M[16]=2==o.type?s[16]:M,M}function Oc(s,o,l,c,h){let p=s.data[o];if(null===p)p=ih(s,o,l,c,h),function Rd(){return Tt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=l,p.value=c,p.attrs=h;const y=hs();p.injectorIndex=null===y?-1:y.injectorIndex}return Wi(p,!0),p}function ih(s,o,l,c,h){const p=Ju(),y=ql(),D=s.data[o]=function KM(s,o,l,c,h,p){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,l,o,c,h);return null===s.firstChild&&(s.firstChild=D),null!==p&&(y?null==p.child&&null!==D.parent&&(p.child=D):null===p.next&&(p.next=D)),D}function kc(s,o,l,c){if(0===l)return-1;const h=o.length;for(let p=0;p<l;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function sh(s,o,l){Ea(o);try{const c=s.viewQuery;null!==c&&T_(1,c,l);const h=s.template;null!==h&&rb(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&nb(s,o),s.staticViewQueries&&T_(2,s.viewQuery,l);const p=s.components;null!==p&&function LD(s,o){for(let l=0;l<o.length;l++)iE(s,o[l])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Qr()}}function Pc(s,o,l,c){const h=o[2];if(256!=(256&h)){Ea(o);try{Ps(o),function Lo(s){return Tt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&rb(s,o,l,2,c);const y=3==(3&h);if(y){const S=s.preOrderCheckHooks;null!==S&&Ca(o,S,null)}else{const S=s.preOrderHooks;null!==S&&Ia(o,S,0,null),ir(o,0)}if(function nE(s){for(let o=pp(s);null!==o;o=zm(o)){if(!o[2])continue;const l=o[9];for(let c=0;c<l.length;c++){const h=l[c],p=h[3];0==(1024&h[2])&&Fs(p,1),h[2]|=1024}}}(o),function tE(s){for(let o=pp(s);null!==o;o=zm(o))for(let l=10;l<o.length;l++){const c=o[l],h=c[1];qi(c)&&Pc(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&nb(s,o),y){const S=s.contentCheckHooks;null!==S&&Ca(o,S)}else{const S=s.contentHooks;null!==S&&Ia(o,S,1),ir(o,1)}!function PD(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const h=l[c];if(h<0)io(~h);else{const p=h,y=l[++c],b=l[++c];ec(y,p),b(2,o[p])}}}finally{io(-1)}}(s,o);const b=s.components;null!==b&&function FD(s,o){for(let l=0;l<o.length;l++)rE(s,o[l])}(o,b);const D=s.viewQuery;if(null!==D&&T_(2,D,c),y){const S=s.viewCheckHooks;null!==S&&Ca(o,S)}else{const S=s.viewHooks;null!==S&&Ia(o,S,2),ir(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-73,1024&o[2]&&(o[2]&=-1025,Fs(o[3],-1))}finally{Qr()}}}function BD(s,o,l,c){const h=o[10],y=Po(o);try{!y&&h.begin&&h.begin(),y&&sh(s,o,c),Pc(s,o,l,c)}finally{!y&&h.end&&h.end()}}function rb(s,o,l,c,h){const p=_r(),y=2&c;try{io(-1),y&&o.length>20&&Rc(s,o,20,!1),l(c,h)}finally{io(p)}}function ib(s,o,l){if(ju(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const y=s.data[p];y.contentQueries&&y.contentQueries(1,l[p],p)}}}function m_(s,o,l){!Fo()||(function qD(s,o,l,c){const h=l.directiveStart,p=l.directiveEnd;s.firstCreatePass||ao(l,o),Vr(c,o);const y=l.initialInputs;for(let b=h;b<p;b++){const D=s.data[b],S=li(D);S&&JD(o,l,D);const M=gs(o,s,b,l);Vr(M,o),null!==y&&QD(0,b-h,M,D,0,y),S&&(fr(l.index,o)[8]=M)}}(s,o,l,hr(l,o)),128==(128&l.flags)&&function WD(s,o,l){const c=l.directiveStart,h=l.directiveEnd,y=l.index,b=function Ta(){return Tt.lFrame.currentDirectiveIndex}();try{io(y);for(let D=c;D<h;D++){const S=s.data[D],M=o[D];Wl(D),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&ZD(S,M)}}finally{io(-1),Wl(b)}}(s,o,l))}function __(s,o,l=hr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let p=0;p<c.length;p+=2){const y=c[p+1],b=-1===y?l(o,s):s[y];s[h++]=b}}}function sb(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=kp(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function kp(s,o,l,c,h,p,y,b,D,S){const M=20+c,F=M+h,H=function VD(s,o){const l=[];for(let c=0;c<o;c++)l.push(c<s?null:At);return l}(M,F),X="function"==typeof S?S():S;return H[1]={type:s,blueprint:H,template:l,queries:null,viewQuery:b,declTNode:o,data:H.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:D,consts:X,incompleteFirstPass:!1}}function UD(s,o,l,c){const h=aE(o);null===l?h.push(c):(h.push(l),s.firstCreatePass&&lE(s).push(c,h.length-1))}function y_(s,o,l){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(o,h):l[c]=[o,h]}return l}function Ws(s,o,l,c,h,p,y,b){const D=hr(o,l);let M,S=o.inputs;!b&&null!=S&&(M=S[c])?(uE(s,l,M,c,h),rl(o)&&function Pp(s,o){const l=fr(o,s);16&l[2]||(l[2]|=64)}(l,o.index)):3&o.type&&(c=function jD(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=y?y(h,o.value||"",c):h,mn(p)?p.setProperty(D,c,h):ci(c)||(D.setProperty?D.setProperty(c,h):D[c]=h))}function Fp(s,o,l,c){let h=!1;if(Fo()){const p=function zD(s,o,l){const c=s.directiveRegistry;let h=null;if(c)for(let p=0;p<c.length;p++){const y=c[p];th(l,y.selectors,!1)&&(h||(h=[]),lo(ao(l,o),s,y.type),li(y)?(db(s,l),h.unshift(y)):h.push(y))}return h}(s,o,l),y=null===c?null:{"":-1};if(null!==p){h=!0,hb(l,s.data.length,p.length);for(let M=0;M<p.length;M++){const F=p[M];F.providersResolver&&F.providersResolver(F)}let b=!1,D=!1,S=kc(s,o,p.length,null);for(let M=0;M<p.length;M++){const F=p[M];l.mergedAttrs=zi(l.mergedAttrs,F.hostAttrs),fb(s,l,o,S,F),YD(S,F,y),null!==F.contentQueries&&(l.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(l.flags|=128);const H=F.type.prototype;!b&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),b=!0),!D&&(H.ngOnChanges||H.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),D=!0),S++}!function lb(s,o){const c=o.directiveEnd,h=s.data,p=o.attrs,y=[];let b=null,D=null;for(let S=o.directiveStart;S<c;S++){const M=h[S],F=M.inputs,H=null===p||G0(o)?null:XD(F,p);y.push(H),b=y_(F,S,b),D=y_(M.outputs,S,D)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=16),b.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=b,o.outputs=D}(s,l)}y&&function KD(s,o,l){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=l[o[h+1]];if(null==p)throw new Le(-301,!1);c.push(o[h],p)}}}(l,c,y)}return l.mergedAttrs=zi(l.mergedAttrs,l.attrs),h}function cb(s,o,l,c,h,p){const y=p.hostBindings;if(y){let b=s.hostBindingOpCodes;null===b&&(b=s.hostBindingOpCodes=[]);const D=~o.index;(function $D(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(b)!=D&&b.push(D),b.push(c,h,y)}}function ZD(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function db(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function YD(s,o,l){if(l){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)l[o.exportAs[c]]=s;li(o)&&(l[""]=s)}}function hb(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function fb(s,o,l,c,h){s.data[c]=h;const p=h.factory||(h.factory=ui(h.type)),y=new jo(p,li(h),null);s.blueprint[c]=y,l[c]=y,cb(s,o,0,c,kc(s,l,h.hostVars,At),h)}function JD(s,o,l){const c=hr(o,s),h=sb(l),p=s[10],y=w_(s,Ha(s,h,null,l.onPush?64:16,c,o,p,p.createRenderer(c,l),null,null));s[o.index]=y}function v_(s,o,l,c,h,p,y){if(null==p)mn(s)?s.removeAttribute(o,h,l):o.removeAttribute(h);else{const b=null==y?me(p):y(p,c||"",h);mn(s)?s.setAttribute(o,h,b,l):l?o.setAttributeNS(l,h,b):o.setAttribute(h,b)}}function QD(s,o,l,c,h,p){const y=p[o];if(null!==y){const b=c.setInput;for(let D=0;D<y.length;){const S=y[D++],M=y[D++],F=y[D++];null!==b?c.setInput(l,F,S,M):l[M]=F}}}function XD(s,o){let l=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return l}function eE(s,o,l,c){return new Array(s,!0,!1,o,null,0,c,l,null,null)}function rE(s,o){const l=fr(o,s);if(qi(l)){const c=l[1];80&l[2]?Pc(c,l,c.template,l[8]):l[5]>0&&b_(l)}}function b_(s){for(let c=pp(s);null!==c;c=zm(c))for(let h=10;h<c.length;h++){const p=c[h];if(1024&p[2]){const y=p[1];Pc(y,p,y.template,p[8])}else p[5]>0&&b_(p)}const l=s[1].components;if(null!==l)for(let c=0;c<l.length;c++){const h=fr(l[c],s);qi(h)&&h[5]>0&&b_(h)}}function iE(s,o){const l=fr(o,s),c=l[1];(function sE(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(c,l),sh(c,l,l[8])}function w_(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function pb(s){for(;s;){s[2]|=64;const o=fp(s);if(Sd(s)&&!o)return s;s=o}return null}function oE(s){!function gb(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],c=up(l),h=c[1];BD(h,c,h.template,l)}}(s[8])}function T_(s,o,l){nc(0),o(s,l)}const rx=(()=>Promise.resolve(null))();function aE(s){return s[7]||(s[7]=[])}function lE(s){return s.cleanup||(s.cleanup=[])}function yb(s,o){const l=s[9],c=l?l.get(Nc,null):null;c&&c.handleError(o)}function uE(s,o,l,c,h){for(let p=0;p<l.length;){const y=l[p++],b=l[p++],D=o[y],S=s.data[y];null!==S.setInput?S.setInput(D,h,c,b):D[b]=h}}function D_(s,o,l){let c=l?s.styles:null,h=l?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const b=o[y];"number"==typeof b?p=b:1==p?h=ye(h,b):2==p&&(c=ye(c,b+": "+o[++y]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=h:s.classesWithoutHost=h}const vb=new Un("INJECTOR",-1);class bb{get(o,l=fo){if(l===fo){const c=new Error(`NullInjectorError: No provider for ${ce(o)}!`);throw c.name="NullInjectorError",c}return l}}const E_=new Un("Set Injector scope."),oh={},dE={};let C_;function hE(){return void 0===C_&&(C_=new bb),C_}function wb(s,o=null,l=null,c){const h=Tb(s,o,l,c);return h._resolveInjectorDefTypes(),h}function Tb(s,o=null,l=null,c){return new fE(s,l,o||hE(),c)}class fE{constructor(o,l,c,h=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];l&&Hn(l,b=>this.processProvider(b,o,l)),Hn([o],b=>this.processInjectorType(b,[],p)),this.records.set(vb,Fc(void 0,this));const y=this.records.get(E_);this.scope=null!=y?y.value:null,this.source=h||("object"==typeof o?null:ce(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,l=fo,c=bt.Default){this.assertNotDestroyed();const h=Be(this),p=nn(void 0);try{if(!(c&bt.SkipSelf)){let b=this.records.get(o);if(void 0===b){const D=function wE(s){return"function"==typeof s||"object"==typeof s&&s instanceof Un}(o)&&Tn(o);b=D&&this.injectableDefInScope(D)?Fc(I_(o),oh):null,this.records.set(o,b)}if(null!=b)return this.hydrate(o,b)}return(c&bt.Self?hE():this.parent).get(o,l=c&bt.Optional&&l===fo?null:l)}catch(y){if("NullInjectorError"===y.name){if((y[vl]=y[vl]||[]).unshift(ce(o)),h)throw y;return function Wo(s,o,l,c){const h=s[vl];throw o[B]&&h.unshift(o[B]),s.message=function Mn(s,o,l,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=ce(o);if(Array.isArray(o))h=o.map(ce).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let b=o[y];p.push(y+":"+("string"==typeof b?JSON.stringify(b):ce(b)))}h=`{${p.join(", ")}}`}return`${l}${c?"("+c+")":""}[${h}]: ${s.replace(C,"\n  ")}`}("\n"+s.message,h,l,c),s.ngTokenPath=h,s[vl]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{nn(p),Be(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,h)=>o.push(ce(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Le(205,!1)}processInjectorType(o,l,c){if(!(o=ie(o)))return!1;let h=ji(o);const p=null==h&&o.ngModule||void 0,y=void 0===p?o:p,b=-1!==c.indexOf(y);if(void 0!==p&&(h=ji(p)),null==h)return!1;if(null!=h.imports&&!b){let M;c.push(y);try{Hn(h.imports,F=>{this.processInjectorType(F,l,c)&&(void 0===M&&(M=[]),M.push(F))})}finally{}if(void 0!==M)for(let F=0;F<M.length;F++){const{ngModule:H,providers:X}=M[F];Hn(X,De=>this.processProvider(De,H,X||U))}}this.injectorDefTypes.add(y);const D=ui(y)||(()=>new y);this.records.set(y,Fc(D,oh));const S=h.providers;if(null!=S&&!b){const M=o;Hn(S,F=>this.processProvider(F,M,S))}return void 0!==p&&void 0!==o.providers}processProvider(o,l,c){let h=Lc(o=ie(o))?o:ie(o&&o.provide);const p=function gE(s,o,l){return Eb(s)?Fc(void 0,s.useValue):Fc(Db(s),oh)}(o);if(Lc(o)||!0!==o.multi)this.records.get(h);else{let y=this.records.get(h);y||(y=Fc(void 0,oh,!0),y.factory=()=>Et(y.multi),this.records.set(h,y)),h=o,y.multi.push(o)}this.records.set(h,p)}hydrate(o,l){return l.value===oh&&(l.value=dE,l.value=l.factory()),"object"==typeof l.value&&l.value&&function bE(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=ie(o.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function I_(s){const o=Tn(s),l=null!==o?o.factory:ui(s);if(null!==l)return l;if(s instanceof Un)throw new Le(204,!1);if(s instanceof Function)return function pE(s){const o=s.length;if(o>0)throw co(o,"?"),new Le(204,!1);const l=function Ir(s){const o=s&&(s[ii]||s[Kn]);if(o){const l=function Sn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Le(204,!1)}function Db(s,o,l){let c;if(Lc(s)){const h=ie(s);return ui(h)||I_(h)}if(Eb(s))c=()=>ie(s.useValue);else if(function _E(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Et(s.deps||[]));else if(function mE(s){return!(!s||!s.useExisting)}(s))c=()=>ct(ie(s.useExisting));else{const h=ie(s&&(s.useClass||s.provide));if(!function vE(s){return!!s.deps}(s))return ui(h)||I_(h);c=()=>new h(...Et(s.deps))}return c}function Fc(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function Eb(s){return null!==s&&"object"==typeof s&&Q in s}function Lc(s){return"function"==typeof s}let ea=(()=>{class s{static create(l,c){var h;if(Array.isArray(l))return wb({name:""},c,l,"");{const p=null!==(h=l.name)&&void 0!==h?h:"";return wb({name:p},l.parent,l.providers,p)}}}return s.THROW_IF_NOT_FOUND=fo,s.NULL=new bb,s.\u0275prov=sn({token:s,providedIn:"any",factory:()=>ct(vb)}),s.__NG_ELEMENT_ID__=-1,s})();function ux(s,o){fs(up(s)[1],wn())}function Rb(s){let o=function xb(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const c=[s];for(;o;){let h;if(li(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Le(903,"");h=o.\u0275dir}if(h){if(l){c.push(h);const y=s;y.inputs=M_(s.inputs),y.declaredInputs=M_(s.declaredInputs),y.outputs=M_(s.outputs);const b=h.hostBindings;b&&fx(s,b);const D=h.viewQuery,S=h.contentQueries;if(D&&OE(s,D),S&&hx(s,S),pe(s.inputs,h.inputs),pe(s.declaredInputs,h.declaredInputs),pe(s.outputs,h.outputs),li(h)&&h.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let y=0;y<p.length;y++){const b=p[y];b&&b.ngInherit&&b(s),b===Rb&&(l=!1)}}o=Object.getPrototypeOf(o)}!function dx(s){let o=0,l=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=zi(h.hostAttrs,l=zi(l,h.hostAttrs))}}(c)}function M_(s){return s===cn?{}:s===U?[]:s}function OE(s,o){const l=s.viewQuery;s.viewQuery=l?(c,h)=>{o(c,h),l(c,h)}:o}function hx(s,o){const l=s.contentQueries;s.contentQueries=l?(c,h,p)=>{o(c,h,p),l(c,h,p)}:o}function fx(s,o){const l=s.hostBindings;s.hostBindings=l?(c,h)=>{o(c,h),l(c,h)}:o}let Lp=null;function ah(){if(!Lp){const s=$t.Symbol;if(s&&s.iterator)Lp=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const c=o[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Lp=c)}}}return Lp}function lh(s){return!!Bc(s)&&(Array.isArray(s)||!(s instanceof Map)&&ah()in s)}function Bc(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ga(s,o,l){return s[o]=l}function Ur(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function xi(s,o,l,c){const h=Ur(s,o,l);return Ur(s,o+1,c)||h}function Bp(s,o,l,c){const h=Oe();return Ur(h,Bo(),o)&&(qt(),function Xo(s,o,l,c,h,p){const y=hr(s,o);v_(o[11],y,p,s.value,l,c,h)}(Xn(),h,s,o,l,c)),Bp}function dh(s,o,l,c){return Ur(s,Bo(),l)?o+me(l)+c:At}function Vp(s,o,l,c,h,p,y,b){const D=Oe(),S=qt(),M=s+20,F=S.firstCreatePass?function LE(s,o,l,c,h,p,y,b,D){const S=o.consts,M=Oc(o,s,4,y||null,Yr(S,b));Fp(o,l,M,Yr(S,D)),fs(o,M);const F=M.tViews=kp(2,M,c,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,M),F.queries=o.queries.embeddedTView(M)),M}(M,S,D,o,l,c,h,p,y):S.data[M];Wi(F,!1);const H=D[11].createComment("");bp(S,D,H,F),Vr(H,D),w_(D,D[M]=eE(H,D,H,F)),Rs(F)&&m_(S,D,F),null!=y&&__(D,F,b)}function R_(s){return ds(function Qu(){return Tt.lFrame.contextLView}(),20+s)}function jp(s,o=bt.Default){const l=Oe();return null===l?ct(s,o):Na(wn(),l,ie(s),o)}function WE(){throw new Error("invalid")}function Kb(s,o,l){const c=Oe();return Ur(c,Bo(),o)&&Ws(qt(),Xn(),c,s,o,c[11],l,!1),Kb}function F_(s,o,l,c,h){const y=h?"class":"style";uE(s,l,o.inputs[y],y,c)}function L_(s,o,l,c){const h=Oe(),p=qt(),y=20+s,b=h[11],D=h[y]=Ym(b,o,function Vf(){return Tt.lFrame.currentNamespace}()),S=p.firstCreatePass?function ZE(s,o,l,c,h,p,y){const b=o.consts,S=Oc(o,s,2,h,Yr(b,p));return Fp(o,l,S,Yr(b,y)),null!==S.attrs&&D_(S,S.attrs,!1),null!==S.mergedAttrs&&D_(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(y,p,h,0,o,l,c):p.data[y];Wi(S,!0);const M=S.mergedAttrs;null!==M&&sr(b,D,M);const F=S.classes;null!==F&&j0(b,D,F);const H=S.styles;return null!==H&&i_(b,D,H),64!=(64&S.flags)&&bp(p,h,D,S),0===function Ku(){return Tt.lFrame.elementDepthCount}()&&Vr(D,h),function ba(){Tt.lFrame.elementDepthCount++}(),Rs(S)&&(m_(p,h,S),ib(p,S,h)),null!==c&&__(h,S),L_}function B_(){let s=wn();ql()?wa():(s=s.parent,Wi(s,!1));const o=s;!function Yu(){Tt.lFrame.elementDepthCount--}();const l=qt();return l.firstCreatePass&&(fs(l,s),ju(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function jf(s){return 0!=(16&s.flags)}(o)&&F_(l,o,Oe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Bs(s){return 0!=(32&s.flags)}(o)&&F_(l,o,Oe(),o.stylesWithoutHost,!1),B_}function Yb(s,o,l,c){return L_(s,o,l,c),B_(),Yb}function V_(s,o,l){const c=Oe(),h=qt(),p=s+20,y=h.firstCreatePass?function zE(s,o,l,c,h){const p=o.consts,y=Yr(p,c),b=Oc(o,s,8,"ng-container",y);return null!==y&&D_(b,y,!0),Fp(o,l,b,Yr(p,h)),null!==o.queries&&o.queries.elementStart(o,b),b}(p,h,c,o,l):h.data[p];Wi(y,!0);const b=c[p]=c[11].createComment("");return bp(h,c,b,y),Vr(b,c),Rs(y)&&(m_(h,c,y),ib(h,y,c)),null!=l&&__(c,y),V_}function U_(){let s=wn();const o=qt();return ql()?wa():(s=s.parent,Wi(s,!1)),o.firstCreatePass&&(fs(o,s),ju(s)&&o.queries.elementEnd(s)),U_}function KE(){return Oe()}function Qb(s){return!!s&&"function"==typeof s.then}function YE(s){return!!s&&"function"==typeof s.subscribe}const JE=YE;function Xb(s,o,l,c){const h=Oe(),p=qt(),y=wn();return function QE(s,o,l,c,h,p,y,b){const D=Rs(c),M=s.firstCreatePass&&lE(s),F=o[8],H=aE(o);let X=!0;if(3&c.type||b){const et=hr(c,o),ht=b?b(et):et,Re=H.length,Dt=b?Wt=>b(hn(Wt[c.index])):c.index;if(mn(l)){let Wt=null;if(!b&&D&&(Wt=function Cx(s,o,l,c){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const y=h[p];if(y===l&&h[p+1]===c){const b=o[7],D=h[p+2];return b.length>D?b[D]:null}"string"==typeof y&&(p+=2)}return null}(s,o,h,c.index)),null!==Wt)(Wt.__ngLastListenerFn__||Wt).__ngNextListenerFn__=p,Wt.__ngLastListenerFn__=p,X=!1;else{p=gr(c,o,F,p,!1);const _n=l.listen(ht,h,p);H.push(p,_n),M&&M.push(h,Dt,Re,Re+1)}}else p=gr(c,o,F,p,!0),ht.addEventListener(h,p,y),H.push(p),M&&M.push(h,Dt,Re,y)}else p=gr(c,o,F,p,!1);const De=c.outputs;let Ge;if(X&&null!==De&&(Ge=De[h])){const et=Ge.length;if(et)for(let ht=0;ht<et;ht+=2){const yi=o[Ge[ht]][Ge[ht+1]].subscribe(p),kl=H.length;H.push(p,yi),M&&M.push(h,c.index,kl,-(kl+1))}}}(p,h,h[11],y,s,o,!!l,c),Xb}function XE(s,o,l,c){try{return!1!==l(c)}catch(h){return yb(s,h),!1}}function gr(s,o,l,c,h){return function p(y){if(y===Function)return c;const b=2&s.flags?fr(s.index,o):o;0==(32&o[2])&&pb(b);let D=XE(o,0,c,y),S=p.__ngNextListenerFn__;for(;S;)D=XE(o,0,S,y)&&D,S=S.__ngNextListenerFn__;return h&&!1===D&&(y.preventDefault(),y.returnValue=!1),D}}function eC(s=1){return function kd(s){return(Tt.lFrame.contextLView=function zl(s,o){for(;s>0;)o=o[15],s--;return o}(s,Tt.lFrame.contextLView))[8]}(s)}function Ix(s,o){let l=null;const c=function Jo(s){const o=s.attrs;if(null!=o){const l=o.indexOf(5);if(0==(1&l))return o[l+1]}return null}(s);for(let h=0;h<o.length;h++){const p=o[h];if("*"!==p){if(null===c?th(s,p,!0):_s(c,p))return h}else l=h}return l}function tC(s){const o=Oe()[16][6];if(!o.projection){const c=o.projection=co(s?s.length:1,null),h=c.slice();let p=o.child;for(;null!==p;){const y=s?Ix(p,s):0;null!==y&&(h[y]?h[y].projectionNext=p:c[y]=p,h[y]=p),p=p.next}}}function nC(s,o=0,l){const c=Oe(),h=qt(),p=Oc(h,20+s,16,null,l||null);null===p.projection&&(p.projection=o),wa(),64!=(64&p.flags)&&function B0(s,o,l){V0(o[11],0,o,l,Xm(s,l,o),Dl(l.parent||o[6],l,o))}(h,c,p)}function $c(s,o,l){return yh(s,"",o,"",l),$c}function yh(s,o,l,c,h){const p=Oe(),y=dh(p,o,l,c);return y!==At&&Ws(qt(),Xn(),p,s,y,p[11],h,!1),yh}function aw(s,o,l,c,h){const p=s[l+1],y=null===o;let b=c?Mi(p):Ua(p),D=!1;for(;0!==b&&(!1===D||y);){const M=s[b+1];sC(s[b],o)&&(D=!0,s[b+1]=c?l_(M):Cp(M)),b=c?Mi(M):Ua(M)}D&&(s[l+1]=c?Cp(p):l_(p))}function sC(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&qo(s,o)>=0}const xr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function lw(s){return s.substring(xr.key,xr.keyEnd)}function uw(s,o){const l=xr.textEnd;return l===o?-1:(o=xr.keyEnd=function lC(s,o,l){for(;o<l&&s.charCodeAt(o)>32;)o++;return o}(s,xr.key=o,l),vh(s,o,l))}function vh(s,o,l){for(;o<l&&s.charCodeAt(o)<=32;)o++;return o}function hw(s,o,l){return ta(s,o,l,!1),hw}function fw(s,o){return ta(s,o,null,!0),fw}function hC(s){!function na(s,o,l,c){const h=qt(),p=Jr(2);h.firstUpdatePass&&pC(h,null,p,c);const y=Oe();if(l!==At&&Ur(y,p,l)){const b=h.data[_r()];if(Gp(b,c)&&!fC(h,p)){let D=c?b.classesWithoutHost:b.stylesWithoutHost;null!==D&&(l=ye(D,l||"")),F_(h,b,y,l,c)}else!function kx(s,o,l,c,h,p,y,b){h===At&&(h=U);let D=0,S=0,M=0<h.length?h[0]:null,F=0<p.length?p[0]:null;for(;null!==M||null!==F;){const H=D<h.length?h[D+1]:void 0,X=S<p.length?p[S+1]:void 0;let Ge,De=null;M===F?(D+=2,S+=2,H!==X&&(De=F,Ge=X)):null===F||null!==M&&M<F?(D+=2,De=M):(S+=2,De=F,Ge=X),null!==De&&$_(s,o,l,c,De,Ge,y,b),M=D<h.length?h[D]:null,F=S<p.length?p[S]:null}}(h,b,y,y[11],y[p+1],y[p+1]=function Ox(s,o,l){if(null==l||""===l)return U;const c=[],h=go(l);if(Array.isArray(h))for(let p=0;p<h.length;p++)s(c,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&s(c,p,h[p]);else"string"==typeof h&&o(c,h);return c}(s,o,l),c,p)}}(Xr,Za,s,!0)}function Za(s,o){for(let l=function aC(s){return function dw(s){xr.key=0,xr.keyEnd=0,xr.value=0,xr.valueEnd=0,xr.textEnd=s.length}(s),uw(s,vh(s,0,xr.textEnd))}(o);l>=0;l=uw(o,l))Xr(s,lw(o),!0)}function ta(s,o,l,c){const h=Oe(),p=qt(),y=Jr(2);p.firstUpdatePass&&pC(p,s,y,c),o!==At&&Ur(h,y,o)&&$_(p,p.data[_r()],h,h[11],s,h[y+1]=function Wn(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ce(go(s)))),s}(o,l),c,y)}function fC(s,o){return o>=s.expandoStartIndex}function pC(s,o,l,c){const h=s.data;if(null===h[l+1]){const p=h[_r()],y=fC(s,l);Gp(p,c)&&null===o&&!y&&(o=!1),o=function Mx(s,o,l,c){const h=function Uo(s){const o=Tt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(l=Hp(l=pw(null,s,o,l,c),o.attrs,c),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(l=pw(h,s,o,l,c),null===p){let D=function xx(s,o,l){const c=l?o.classBindings:o.styleBindings;if(0!==Ua(c))return s[Mi(c)]}(s,o,c);void 0!==D&&Array.isArray(D)&&(D=pw(null,s,o,D[1],c),D=Hp(D,o.attrs,c),function gC(s,o,l,c){s[Mi(l?o.classBindings:o.styleBindings)]=c}(s,o,c,D))}else p=function Rx(s,o,l){let c;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)c=Hp(c,s[p].hostAttrs,l);return Hp(c,o.attrs,l)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),l}(h,p,o,c),function rC(s,o,l,c,h,p){let y=p?o.classBindings:o.styleBindings,b=Mi(y),D=Ua(y);s[c]=l;let M,S=!1;if(Array.isArray(l)){const F=l;M=F[1],(null===M||qo(F,M)>0)&&(S=!0)}else M=l;if(h)if(0!==D){const H=Mi(s[b+1]);s[c+1]=nh(H,b),0!==H&&(s[H+1]=a_(s[H+1],c)),s[b+1]=function Z0(s,o){return 131071&s|o<<17}(s[b+1],c)}else s[c+1]=nh(b,0),0!==b&&(s[b+1]=a_(s[b+1],c)),b=c;else s[c+1]=nh(D,0),0===b?b=c:s[D+1]=a_(s[D+1],c),D=c;S&&(s[c+1]=Cp(s[c+1])),aw(s,M,c,!0),aw(s,M,c,!1),function iC(s,o,l,c,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&qo(p,o)>=0&&(l[c+1]=l_(l[c+1]))}(o,M,s,c,p),y=nh(b,D),p?o.classBindings=y:o.styleBindings=y}(h,p,o,l,y,c)}}function pw(s,o,l,c,h){let p=null;const y=l.directiveEnd;let b=l.directiveStylingLast;for(-1===b?b=l.directiveStart:b++;b<y&&(p=o[b],c=Hp(c,p.hostAttrs,h),p!==s);)b++;return null!==s&&(l.directiveStylingLast=b),c}function Hp(s,o,l){const c=l?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?h=y:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Xr(s,y,!!l||o[++p]))}return void 0===s?null:s}function $_(s,o,l,c,h,p,y,b){if(!(3&o.type))return;const D=s.data,S=D[b+1];es(function z0(s){return 1==(1&s)}(S)?_C(D,o,l,h,Ua(S),y):void 0)||(es(p)||function W0(s){return 2==(2&s)}(S)&&(p=_C(D,null,l,h,b,y)),function ID(s,o,l,c,h){const p=mn(s);if(o)h?p?s.addClass(l,c):l.classList.add(c):p?s.removeClass(l,c):l.classList.remove(c);else{let y=-1===c.indexOf("-")?void 0:ms.DashCase;if(null==h)p?s.removeStyle(l,c,y):l.style.removeProperty(c);else{const b="string"==typeof h&&h.endsWith("!important");b&&(h=h.slice(0,-10),y|=ms.Important),p?s.setStyle(l,c,h,y):l.style.setProperty(c,h,b?"important":"")}}}(c,y,eo(_r(),l),h,p))}function _C(s,o,l,c,h,p){const y=null===o;let b;for(;h>0;){const D=s[h],S=Array.isArray(D),M=S?D[1]:D,F=null===M;let H=l[h+1];H===At&&(H=F?U:void 0);let X=F?_c(H,c):M===c?H:void 0;if(S&&!es(X)&&(X=_c(D,c)),es(X)&&(b=X,y))return b;const De=s[h+1];h=y?Mi(De):Ua(De)}if(null!==o){let D=p?o.residualClasses:o.residualStyles;null!=D&&(b=_c(D,c))}return b}function es(s){return void 0!==s}function Gp(s,o){return 0!=(s.flags&(o?16:32))}function q_(s,o=""){const l=Oe(),c=qt(),h=s+20,p=c.firstCreatePass?Oc(c,h,1,o,null):c.data[h],y=l[h]=gp(l[11],o);bp(c,l,y,p),Wi(p,!1)}function bh(s){return $p("",s,""),bh}function $p(s,o,l){const c=Oe(),h=dh(c,s,o,l);return h!==At&&function Al(s,o,l){const c=eo(o,s);A0(s[11],c,l)}(c,_r(),h),$p}function zp(s,o,l){const c=Oe();return Ur(c,Bo(),o)&&Ws(qt(),Xn(),c,s,o,c[11],l,!0),zp}const Ml=void 0;var AC=["en",[["a","p"],["AM","PM"],Ml],[["AM","PM"],Ml,Ml],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ml,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ml,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ml,"{1} 'at' {0}",Ml],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Kp(s){const l=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let za={};function Yp(s){const o=function Dh(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=ww(o);if(l)return l;const c=o.split("-")[0];if(l=ww(c),l)return l;if("en"===c)return AC;throw new Error(`Missing locale data for the locale "${s}".`)}function NC(s){return Yp(s)[It.PluralCase]}function ww(s){return s in za||(za[s]=$t.ng&&$t.ng.common&&$t.ng.common.locales&&$t.ng.common.locales[s]),za[s]}var It=(()=>((It=It||{})[It.LocaleId=0]="LocaleId",It[It.DayPeriodsFormat=1]="DayPeriodsFormat",It[It.DayPeriodsStandalone=2]="DayPeriodsStandalone",It[It.DaysFormat=3]="DaysFormat",It[It.DaysStandalone=4]="DaysStandalone",It[It.MonthsFormat=5]="MonthsFormat",It[It.MonthsStandalone=6]="MonthsStandalone",It[It.Eras=7]="Eras",It[It.FirstDayOfWeek=8]="FirstDayOfWeek",It[It.WeekendRange=9]="WeekendRange",It[It.DateFormat=10]="DateFormat",It[It.TimeFormat=11]="TimeFormat",It[It.DateTimeFormat=12]="DateTimeFormat",It[It.NumberSymbols=13]="NumberSymbols",It[It.NumberFormats=14]="NumberFormats",It[It.CurrencyCode=15]="CurrencyCode",It[It.CurrencySymbol=16]="CurrencySymbol",It[It.CurrencyName=17]="CurrencyName",It[It.Currencies=18]="Currencies",It[It.Directionality=19]="Directionality",It[It.PluralCase=20]="PluralCase",It[It.ExtraData=21]="ExtraData",It))();const xC=["zero","one","two","few","many"],Jp="en-US",Qp={marker:"element"},Eh={marker:"ICU"};var or=(()=>((or=or||{})[or.SHIFT=2]="SHIFT",or[or.APPEND_EAGERLY=1]="APPEND_EAGERLY",or[or.COMMENT=2]="COMMENT",or))();let Tw=Jp;function Xp(s,o,l){const c=o.insertBeforeIndex,h=Array.isArray(c)?c[0]:c;return null===h?F0(s,0,l):hn(l[h])}function Y_(s,o,l,c,h){const p=o.insertBeforeIndex;if(Array.isArray(p)){let y=c,b=null;if(3&o.type||(b=y,y=h),null!==y&&0==(2&o.flags))for(let D=1;D<p.length;D++)xc(s,y,l[p[D]],b,!1)}}function Ew(s,o){if(s.push(o),s.length>1)for(let l=s.length-2;l>=0;l--){const c=s[l];Cw(c)||J_(c,o)&&null===Gx(c)&&$x(c,o.index)}}function Cw(s){return!(64&s.type)}function J_(s,o){return Cw(o)||s.index>o.index}function Gx(s){const o=s.insertBeforeIndex;return Array.isArray(o)?o[0]:o}function $x(s,o){const l=s.insertBeforeIndex;Array.isArray(l)?l[0]=o:(r_(Xp,Y_),s.insertBeforeIndex=o)}function zc(s,o){const l=s.data[o];return null===l||"string"==typeof l?null:l.hasOwnProperty("currentCaseLViewIndex")?l:l.value}function Sw(s,o,l){const c=ih(s,l,64,null,null);return Ew(o,c),c}function Ch(s,o){const l=o[s.currentCaseLViewIndex];return null===l?l:l<0?~l:l}function Q_(s){return s>>>17}function X_(s){return(131070&s)>>>1}let eg=0,tg=0;function Mw(s,o,l,c){const h=l[11];let y,p=null;for(let b=0;b<o.length;b++){const D=o[b];if("string"==typeof D){const S=o[++b];null===l[S]&&(l[S]=gp(h,D))}else if("number"==typeof D)switch(1&D){case 0:const S=Q_(D);let M,F;if(null===p&&(p=S,y=vp(h,c)),S===p?(M=c,F=y):(M=null,F=hn(l[S])),null!==F){const Ge=X_(D);xc(h,F,l[Ge],M,!1);const ht=zc(s,Ge);if(null!==ht&&"object"==typeof ht){const Re=Ch(ht,l);null!==Re&&Mw(s,ht.create[Re],l,l[ht.anchorIdx])}}break;case 1:const X=o[++b],De=o[++b];v_(h,eo(D>>>1,l),null,null,X,De,null)}else switch(D){case Eh:const S=o[++b],M=o[++b];null===l[M]&&Vr(l[M]=Qd(h,S),l);break;case Qp:const F=o[++b],H=o[++b];null===l[H]&&Vr(l[H]=Ym(h,F,null),l)}}}function xw(s,o,l,c,h){for(let p=0;p<l.length;p++){const y=l[p],b=l[++p];if(y&h){let D="";for(let S=p+1;S<=p+b;S++){const M=l[S];if("string"==typeof M)D+=M;else if("number"==typeof M)if(M<0)D+=me(o[c-M]);else{const F=M>>>2;switch(3&M){case 1:const H=l[++S],X=l[++S],De=s.data[F];"string"==typeof De?v_(o[11],o[F],null,De,H,D,X):Ws(s,De,o,H,D,o[11],X,!1);break;case 0:const Ge=o[F];null!==Ge&&A0(o[11],Ge,D);break;case 2:BC(s,zc(s,F),o,D);break;case 3:ty(s,zc(s,F),c,o)}}}}else{const D=l[p+1];if(D>0&&3==(3&D)){const M=zc(s,D>>>2);o[M.currentCaseLViewIndex]<0&&ty(s,M,c,o)}}p+=b}}function ty(s,o,l,c){let h=c[o.currentCaseLViewIndex];if(null!==h){let p=eg;h<0&&(h=c[o.currentCaseLViewIndex]=~h,p=-1),xw(s,c,o.update[h],l,p)}}function BC(s,o,l,c){const h=function qx(s,o){let l=s.cases.indexOf(o);if(-1===l)switch(s.type){case 1:{const c=function RC(s,o){const l=NC(o)(parseInt(s,10)),c=xC[l];return void 0!==c?c:"other"}(o,function K_(){return Tw}());l=s.cases.indexOf(c),-1===l&&"other"!==c&&(l=s.cases.indexOf("other"));break}case 0:l=s.cases.indexOf("other")}return-1===l?null:l}(o,c);if(Ch(o,l)!==h&&(VC(s,o,l),l[o.currentCaseLViewIndex]=null===h?null:~h,null!==h)){const y=l[o.anchorIdx];y&&Mw(s,o.create[h],l,y)}}function VC(s,o,l){let c=Ch(o,l);if(null!==c){const h=o.remove[c];for(let p=0;p<h.length;p++){const y=h[p];if(y>0){const b=eo(y,l);null!==b&&L0(l[11],b)}else VC(s,zc(s,~y),l)}}}function Wx(){const s=[];let l,c,o=-1;function p(b,D){o=0;const S=Ch(b,D);c=null!==S?b.remove[S]:U}function y(){if(o<c.length){const b=c[o++];return b>0?l[b]:(s.push(o,c),p(l[1].data[~b],l),y())}return 0===s.length?null:(c=s.pop(),o=s.pop(),y())}return function h(b,D){for(l=D;s.length;)s.pop();return p(b.value,D),y}}const Ih=/\ufffd(\d+):?\d*\ufffd/gi,zx=/\ufffd(\d+)\ufffd/,ny=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Kx=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,Yx=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Jx=/\uE500/g;function GC(s,o,l,c,h,p,y){const b=kc(s,c,1,null);let D=b<<or.SHIFT,S=hs();o===S&&(S=null),null===S&&(D|=or.APPEND_EAGERLY),y&&(D|=or.COMMENT,function E0(s){void 0===Jd&&(Jd=s())}(Wx)),h.push(D,null===p?"":p);const M=ih(s,b,y?32:1,null===p?"":p,null);Ew(l,M);const F=M.index;return Wi(M,!1),null!==S&&o!==S&&function Iw(s,o){let l=s.insertBeforeIndex;null===l?(r_(Xp,Y_),l=s.insertBeforeIndex=[null,o]):(function Ce(s,o,l){s!=o&&Je(l,s,o,"==")}(Array.isArray(l),!0,"Expecting array here"),l.push(o))}(S,F),M}function $C(s,o,l,c,h,p,y){const b=y.match(Ih),D=GC(s,o,l,p,c,b?null:y,!1);b&&Sh(h,y,D.index,null,0,null)}function Sh(s,o,l,c,h,p){const y=s.length,b=y+1;s.push(null,null);const D=y+2,S=o.split(Ih);let M=0;for(let F=0;F<S.length;F++){const H=S[F];if(1&F){const X=h+parseInt(H,10);s.push(-1-X),M|=qC(X)}else""!==H&&s.push(H)}return s.push(l<<2|(c?1:0)),c&&s.push(c,p),s[y]=M,s[b]=s.length-D,M}function qC(s){return 1<<Math.min(s,31)}function WC(s){let o,p,l="",c=0,h=!1;for(;null!==(o=Kx.exec(s));)h?o[0]===`\ufffd/*${p}\ufffd`&&(c=o.index,h=!1):(l+=s.substring(c,o.index+o[0].length),p=o[1],h=!0);return l+=s.substr(c),l}function ZC(s,o,l,c,h,p){let y=0;const b={type:h.type,currentCaseLViewIndex:kc(s,o,1,null),anchorIdx:p,cases:[],create:[],remove:[],update:[]};(function rR(s,o,l){s.push(qC(o.mainBinding),2,-1-o.mainBinding,l<<2|2)})(l,h,p),function PC(s,o,l){const c=s.data[o];null===c?s.data[o]=l:c.value=l}(s,p,b);const D=h.values;for(let S=0;S<D.length;S++){const M=D[S],F=[];for(let H=0;H<M.length;H++){const X=M[H];if("string"!=typeof X){const De=F.push(X)-1;M[H]=`\x3c!--\ufffd${De}\ufffd--\x3e`}}y=nR(s,b,o,l,c,h.cases[S],M.join(""),F)|y}y&&function iR(s,o,l){s.push(o,1,l<<2|3)}(l,y,p)}function Ow(s){const o=[],l=[];let c=1,h=0;const p=kw(s=s.replace(ny,function(y,b,D){return c="select"===D?0:1,h=parseInt(b.substr(1),10),""}));for(let y=0;y<p.length;){let b=p[y++].trim();1===c&&(b=b.replace(/\s*(?:=)?(\w+)\s*/,"$1")),b.length&&o.push(b);const D=kw(p[y++]);o.length>l.length&&l.push(D)}return{type:c,mainBinding:h,cases:o,values:l}}function kw(s){if(!s)return[];let o=0;const l=[],c=[],h=/[{}]/g;let p;for(h.lastIndex=0;p=h.exec(s);){const b=p.index;if("}"==p[0]){if(l.pop(),0==l.length){const D=s.substring(o,b);ny.test(D)?c.push(Ow(D)):c.push(D),o=b+1}}else{if(0==l.length){const D=s.substring(o,b);c.push(D),o=b+1}l.push("{")}}const y=s.substring(o);return c.push(y),c}function nR(s,o,l,c,h,p,y,b){const D=[],S=[],M=[];o.cases.push(p),o.create.push(D),o.remove.push(S),o.update.push(M);const H=cu(cs()).getInertBodyElement(y),X=du(H)||H;return X?zC(s,o,l,c,D,S,M,X,h,b,0):0}function zC(s,o,l,c,h,p,y,b,D,S,M){let F=0,H=b.firstChild;for(;H;){const X=kc(s,l,1,null);switch(H.nodeType){case Node.ELEMENT_NODE:const De=H,Ge=De.tagName.toLowerCase();if(ti.hasOwnProperty(Ge)){Fw(h,Qp,Ge,D,X),s.data[X]=Ge;const Dt=De.attributes;for(let Wt=0;Wt<Dt.length;Wt++){const _n=Dt.item(Wt),yi=_n.name.toLowerCase();_n.value.match(Ih)?sp.hasOwnProperty(yi)&&Sh(y,_n.value,X,_n.name,0,Gs[yi]?m:Ko[yi]?T:null):sR(h,X,_n)}F=zC(s,o,l,c,h,p,y,H,X,S,M+1)|F,KC(p,X,M)}break;case Node.TEXT_NODE:const et=H.textContent||"",ht=et.match(Ih);Fw(h,null,ht?"":et,D,X),KC(p,X,M),ht&&(F=Sh(y,et,X,null,0,null)|F);break;case Node.COMMENT_NODE:const Re=zx.exec(H.textContent||"");if(Re){const Wt=S[parseInt(Re[1],10)];Fw(h,Eh,"",D,X),ZC(s,l,c,D,Wt,X),Pw(p,X,M)}}H=H.nextSibling}return F}function KC(s,o,l){0===l&&s.push(o)}function Pw(s,o,l){0===l&&(s.push(~o),s.push(o))}function Fw(s,o,l,c,h){null!==o&&s.push(o),s.push(l,h,function Aw(s,o,l){return s|o<<17|l<<1}(0,c,h))}function sR(s,o,l){s.push(o<<1|1,l.name,l.value)}function YC(s,o,l=-1){const c=qt(),h=Oe(),p=20+s,y=Yr(c.consts,o),b=hs();c.firstCreatePass&&function Qx(s,o,l,c,h,p){const y=hs(),b=[],D=[],S=[[]];h=function tR(s,o){if(function eR(s){return-1===s}(o))return WC(s);{const l=s.indexOf(`:${o}\ufffd`)+2+o.toString().length,c=s.search(new RegExp(`\ufffd\\/\\*\\d+:${o}\ufffd`));return WC(s.substring(l,c))}}(h,p);const M=function HC(s){return s.replace(Jx," ")}(h).split(Yx);for(let F=0;F<M.length;F++){let H=M[F];if(0==(1&F)){const X=kw(H);for(let De=0;De<X.length;De++){let Ge=X[De];if(0==(1&De)){const et=Ge;""!==et&&$C(s,y,S[0],b,D,l,et)}else{const et=Ge;if("object"!=typeof et)throw new Error(`Unable to parse ICU expression in "${h}" message.`);ZC(s,l,D,o,et,GC(s,y,S[0],l,b,"",!0).index)}}}else{const X=47===H.charCodeAt(0),Ge=(H.charCodeAt(X?1:0),20+Number.parseInt(H.substring(X?2:1)));if(X)S.shift(),Wi(hs(),!1);else{const et=Sw(s,S[0],Ge);S.unshift([]),Wi(et,!0)}}}s.data[c]={create:b,update:D}}(c,null===b?0:b.index,h,p,y,l);const D=c.data[p],M=O0(c,b===h[6]?null:b,h);(function LC(s,o,l,c){const h=s[11];for(let p=0;p<o.length;p++){const y=o[p++],b=o[p],D=(y&or.COMMENT)===or.COMMENT,S=(y&or.APPEND_EAGERLY)===or.APPEND_EAGERLY,M=y>>>or.SHIFT;let F=s[M];null===F&&(F=s[M]=D?h.createComment(b):gp(h,b)),S&&null!==l&&xc(h,l,F,c,!1)}})(h,D.create,M,b&&8&b.type?h[b.index]:null),Vo(!0)}function QC(s,o,l){YC(s,o,l),function JC(){Vo(!1)}()}function Vw(s){return function Nw(s){s&&(eg|=1<<Math.min(tg,31)),tg++}(Ur(Oe(),Bo(),s)),Vw}function ry(s){!function FC(s,o,l){if(tg>0){const c=s.data[l];xw(s,o,Array.isArray(c)?c:c.update,function Zi(){return Tt.lFrame.bindingIndex}()-tg-1,eg)}eg=0,tg=0}(qt(),Oe(),s+20)}function Kc(s,o,l,c,h){if(s=ie(s),Array.isArray(s))for(let p=0;p<s.length;p++)Kc(s[p],o,l,c,h);else{const p=qt(),y=Oe();let b=Lc(s)?s:ie(s.provide),D=Db(s);const S=wn(),M=1048575&S.providerIndexes,F=S.directiveStart,H=S.providerIndexes>>20;if(Lc(s)||!s.multi){const X=new jo(D,h,jp),De=rg(b,o,h?M:M+H,F);-1===De?(lo(ao(S,y),p,b),iy(p,s,o.length),o.push(b),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),l.push(X),y.push(X)):(l[De]=X,y[De]=X)}else{const X=rg(b,o,M+H,F),De=rg(b,o,M,M+H),Ge=X>=0&&l[X],et=De>=0&&l[De];if(h&&!et||!h&&!Ge){lo(ao(S,y),p,b);const ht=function tI(s,o,l,c,h){const p=new jo(s,l,jp);return p.multi=[],p.index=o,p.componentProviders=0,Ah(p,h,c&&!l),p}(h?jw:Uw,l.length,h,c,D);!h&&et&&(l[De].providerFactory=ht),iy(p,s,o.length,0),o.push(b),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),l.push(ht),y.push(ht)}else iy(p,s,X>-1?X:De,Ah(l[h?De:X],D,!h&&c));!h&&c&&et&&l[De].componentProviders++}}}function iy(s,o,l,c){const h=Lc(o),p=function yE(s){return!!s.useClass}(o);if(h||p){const D=(p?ie(o.useClass):o).prototype.ngOnDestroy;if(D){const S=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const M=S.indexOf(l);-1===M?S.push(l,[c,D]):S[M+1].push(c,D)}else S.push(l,D)}}}function Ah(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function rg(s,o,l,c){for(let h=l;h<c;h++)if(o[h]===s)return h;return-1}function Uw(s,o,l,c){return sy(this.multi,[])}function jw(s,o,l,c){const h=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,b=gs(l,l[1],this.providerFactory.index,c);p=b.slice(0,y),sy(h,p);for(let D=y;D<b.length;D++)p.push(b[D])}else p=[],sy(h,p);return p}function sy(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function Yc(s,o=[]){return l=>{l.providersResolver=(c,h)=>function eI(s,o,l){const c=qt();if(c.firstCreatePass){const h=li(s);Kc(l,c.data,c.blueprint,h,!0),Kc(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class ig{}class rI{resolveComponentFactory(o){throw function Hw(s){const o=Error(`No component factory found for ${ce(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let ra=(()=>{class s{}return s.NULL=new rI,s})();function iI(){return ts(wn(),Oe())}function ts(s,o){return new vu(hr(s,o))}let vu=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=iI,s})();function Nh(s){return s instanceof vu?s.nativeElement:s}class $w{}let oI=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function lI(){const s=Oe(),l=fr(wn().index,s);return function aI(s){return s[11]}(Ci(l)?l:s)}(),s})(),uI=(()=>{class s{}return s.\u0275prov=sn({token:s,providedIn:"root",factory:()=>null}),s})();class qw{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const oy=new qw("13.3.8"),sg={};function og(s,o,l,c,h=!1){for(;null!==l;){const p=o[l.index];if(null!==p&&c.push(hn(p)),ai(p))for(let b=10;b<p.length;b++){const D=p[b],S=D[1].firstChild;null!==S&&og(D[1],D,S,c)}const y=l.type;if(8&y)og(s,o,l.child,c);else if(32&y){const b=Wm(l,o);let D;for(;D=b();)c.push(D)}else if(16&y){const b=Tp(o,l);if(Array.isArray(b))c.push(...b);else{const D=fp(o[16]);og(D[1],D,b,c,!0)}}l=h?l.projectionNext:l.next}return c}class Mh{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return og(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ai(o)){const l=o[8],c=l?l.indexOf(this):-1;c>-1&&(_p(o,c),Us(l,c))}this._attachedToViewContainer=!1}x0(this._lView[1],this._lView)}onDestroy(o){UD(this._lView[1],this._lView,null,o)}markForCheck(){pb(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function mb(s,o,l){const c=o[10];c.begin&&c.begin();try{Pc(s,o,s.template,l)}catch(h){throw yb(o,h),h}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Le(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Qm(s,o){eh(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Le(902,"");this._appRef=o}}class cI extends Mh{constructor(o){super(o),this._view=o}detectChanges(){oE(this._view)}checkNoChanges(){}get context(){return null}}class Ww extends ra{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=pt(o);return new xl(l,this.ngModule)}}function ay(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class xl extends ig{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function ys(s){return s.map(mo).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return ay(this.componentDef.inputs)}get outputs(){return ay(this.componentDef.outputs)}create(o,l,c,h){const p=(h=h||this.ngModule)?function dI(s,o){return{get:(l,c,h)=>{const p=s.get(l,sg,h);return p!==sg||c===sg?p:o.get(l,c,h)}}}(o,h.injector):o,y=p.get($w,ya),b=p.get(uI,null),D=y.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",M=c?function ab(s,o,l){if(mn(s))return s.selectRootElement(o,l===Zt.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(D,c,this.componentDef.encapsulation):Ym(y.createRenderer(null,this.componentDef),S,function Xt(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(S)),F=this.componentDef.onPush?576:528,H=function RE(s,o){return{components:[],scheduler:s||$m,clean:rx,playerHandler:o||null,flags:0}}(),X=kp(0,null,null,1,0,null,null,null,null,null),De=Ha(null,X,H,F,null,null,y,D,b,p);let Ge,et;Ea(De);try{const ht=function ME(s,o,l,c,h,p){const y=l[1];l[20]=s;const D=Oc(y,20,2,"#host",null),S=D.mergedAttrs=o.hostAttrs;null!==S&&(D_(D,S,!0),null!==s&&(sr(h,s,S),null!==D.classes&&j0(h,s,D.classes),null!==D.styles&&i_(h,s,D.styles)));const M=c.createRenderer(s,o),F=Ha(l,sb(o),null,o.onPush?64:16,l[20],D,c,M,p||null,null);return y.firstCreatePass&&(lo(ao(D,l),y,o.type),db(y,D),hb(D,l.length,1)),w_(l,F),l[20]=F}(M,this.componentDef,De,y,D);if(M)if(c)sr(D,M,["ng-version",oy.full]);else{const{attrs:Re,classes:Dt}=function o_(s){const o=[],l=[];let c=1,h=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++c]):8===h&&l.push(p);else{if(!Yo(h))break;h=p}c++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);Re&&sr(D,M,Re),Dt&&Dt.length>0&&j0(D,M,Dt.join(" "))}if(et=Fn(X,20),void 0!==l){const Re=et.projection=[];for(let Dt=0;Dt<this.ngContentSelectors.length;Dt++){const Wt=l[Dt];Re.push(null!=Wt?Array.from(Wt):null)}}Ge=function xE(s,o,l,c,h){const p=l[1],y=function GD(s,o,l){const c=wn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),fb(s,c,o,kc(s,o,1,null),l));const h=gs(o,s,c.directiveStart,c);Vr(h,o);const p=hr(c,o);return p&&Vr(p,o),h}(p,l,o);if(c.components.push(y),s[8]=y,h&&h.forEach(D=>D(y,o)),o.contentQueries){const D=wn();o.contentQueries(1,y,D.directiveStart)}const b=wn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(io(b.index),cb(l[1],b,0,b.directiveStart,b.directiveEnd,o),ZD(o,y)),y}(ht,this.componentDef,De,H,[ux]),sh(X,De,null)}finally{Qr()}return new hI(this.componentType,Ge,ts(et,De),De,et)}}class hI extends class Ka{}{constructor(o,l,c,h,p){super(),this.location=c,this._rootLView=h,this._tNode=p,this.instance=l,this.hostView=this.changeDetectorRef=new cI(h),this.componentType=o}get injector(){return new Ni(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Jc{}class wo{}const bu=new Map;class Kw extends Jc{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ww(this);const c=Ut(o);this._bootstrapComponents=Va(c.bootstrap),this._r3Injector=Tb(o,l,[{provide:Jc,useValue:this},{provide:ra,useValue:this.componentFactoryResolver}],ce(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,l=ea.THROW_IF_NOT_FOUND,c=bt.Default){return o===ea||o===Jc||o===vb?this:this._r3Injector.get(o,l,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class ag extends wo{constructor(o){super(),this.moduleType=o,null!==Ut(o)&&function pR(s){const o=new Set;!function l(c){const h=Ut(c,!0),p=h.id;null!==p&&(function ly(s,o,l){if(o&&o!==l)throw new Error(`Duplicate module registered for ${s} - ${ce(o)} vs ${ce(o.name)}`)}(p,bu.get(p),c),bu.set(p,c));const y=Va(h.imports);for(const b of y)o.has(b)||(o.add(b),l(b))}(s)}(o)}create(o){return new Kw(this.moduleType,o)}}function uy(s,o,l){const c=pr()+s,h=Oe();return h[c]===At?Ga(h,c,l?o.call(l):o()):function uh(s,o){return s[o]}(h,c)}function Yw(s,o,l,c){return Rl(Oe(),pr(),s,o,l,c)}function cy(s,o,l,c,h){return function e1(s,o,l,c,h,p,y){const b=o+l;return xi(s,b,h,p)?Ga(s,b+2,y?c.call(y,h,p):c(h,p)):Rh(s,b+2)}(Oe(),pr(),s,o,l,c,h)}function Jw(s,o,l,c,h,p){return function dy(s,o,l,c,h,p,y,b){const D=o+l;return function Vc(s,o,l,c,h){const p=xi(s,o,l,c);return Ur(s,o+2,h)||p}(s,D,h,p,y)?Ga(s,D+3,b?c.call(b,h,p,y):c(h,p,y)):Rh(s,D+3)}(Oe(),pr(),s,o,l,c,h,p)}function Rh(s,o){const l=s[o];return l===At?void 0:l}function Rl(s,o,l,c,h,p){const y=o+l;return Ur(s,y,h)?Ga(s,y+1,p?c.call(p,h):c(h)):Rh(s,y+1)}function Oh(s,o){const l=qt();let c;const h=s+20;l.firstCreatePass?(c=function kh(s,o){if(o)for(let l=o.length-1;l>=0;l--){const c=o[l];if(s===c.name)return c}}(o,l.pipeRegistry),l.data[h]=c,c.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(h,c.onDestroy)):c=l.data[h];const p=c.factory||(c.factory=ui(c.type)),y=nn(jp);try{const b=yr(!1),D=p();return yr(b),function Bb(s,o,l,c){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),o[l]=c}(l,Oe(),h,D),D}finally{nn(y)}}function fy(s,o,l){const c=s+20,h=Oe(),p=ds(h,c);return function Qc(s,o){return s[1].data[o].pure}(h,c)?Rl(h,pr(),o,p.transform,l,p):p.transform(l)}function gy(s){return o=>{setTimeout(s,void 0,o)}}const ia=class n1 extends u.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,c){var h,p,y;let b=o,D=l||(()=>null),S=c;if(o&&"object"==typeof o){const F=o;b=null===(h=F.next)||void 0===h?void 0:h.bind(F),D=null===(p=F.error)||void 0===p?void 0:p.bind(F),S=null===(y=F.complete)||void 0===y?void 0:y.bind(F)}this.__isAsync&&(D=gy(D),b&&(b=gy(b)),S&&(S=gy(S)));const M=super.subscribe({next:b,error:D,complete:S});return o instanceof V.w0&&o.add(M),M}};function mI(){return this._results[ah()]()}class Xc{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=ah(),c=Xc.prototype;c[l]||(c[l]=mI)}get changes(){return this._changes||(this._changes=new ia)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const c=this;c.dirty=!1;const h=Kt(o);(this._changesDetected=!function Yi(s,o,l){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],p=o[c];if(l&&(h=l(h),p=l(p)),p!==h)return!1}return!0}(c._results,h,l))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Ph=(()=>{class s{}return s.__NG_ELEMENT_ID__=vI,s})();const _I=Ph,yI=class extends _I{constructor(o,l,c){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(o){const l=this._declarationTContainer.tViews,c=Ha(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(c[19]=p.createEmbeddedView(l)),sh(l,c,o),new Mh(c)}};function vI(){return dg(wn(),Oe())}function dg(s,o){return 4&s.type?new yI(o,s,ts(s,o)):null}let Fh=(()=>{class s{}return s.__NG_ELEMENT_ID__=my,s})();function my(){return yy(wn(),Oe())}const _y=Fh,sa=class extends _y{constructor(o,l,c){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=c}get element(){return ts(this._hostTNode,this._hostLView)}get injector(){return new Ni(this._hostTNode,this._hostLView)}get parentInjector(){const o=di(this._hostTNode,this._hostLView);if(Vn(o)){const l=Si(o,this._hostLView),c=Rt(o);return new Ni(l[1].data[c+8],l)}return new Ni(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=Tu(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,c){const h=o.createEmbeddedView(l||{});return this.insert(h,c),h}createComponent(o,l,c,h,p){const y=o&&!function Oa(s){return"function"==typeof s}(o);let b;if(y)b=l;else{const F=l||{};b=F.index,c=F.injector,h=F.projectableNodes,p=F.ngModuleRef}const D=y?o:new xl(pt(o)),S=c||this.parentInjector;if(!p&&null==D.ngModule){const H=(y?S:this.parentInjector).get(Jc,null);H&&(p=H)}const M=D.create(S,h,void 0,p);return this.insert(M.hostView,b),M}insert(o,l){const c=o._lView,h=c[1];if(function $l(s){return ai(s[3])}(c)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const F=c[3],H=new sa(F,F[6],F[3]);H.detach(H.indexOf(o))}}const p=this._adjustIndex(l),y=this._lContainer;!function ED(s,o,l,c){const h=10+c,p=l.length;c>0&&(l[h-1][4]=o),c<p-10?(o[4]=l[h],gc(l,10+c,o)):(l.push(o),o[4]=null),o[3]=l;const y=o[17];null!==y&&l!==y&&function mp(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(y,o);const b=o[19];null!==b&&b.insertView(s),o[2]|=128}(h,c,y,p);const b=Dp(p,y),D=c[11],S=vp(D,y[7]);return null!==S&&function DD(s,o,l,c,h,p){c[0]=h,c[6]=o,eh(s,c,l,1,h,p)}(h,y[6],D,c,S,b),o.attachToViewContainerRef(),gc(hg(y),p,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=Tu(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),c=_p(this._lContainer,l);c&&(Us(hg(this._lContainer),l),x0(c[1],c))}detach(o){const l=this._adjustIndex(o,-1),c=_p(this._lContainer,l);return c&&null!=Us(hg(this._lContainer),l)?new Mh(c):null}_adjustIndex(o,l=0){return null==o?this.length+l:o}};function Tu(s){return s[8]}function hg(s){return s[8]||(s[8]=[])}function yy(s,o){let l;const c=o[s.index];if(ai(c))l=c;else{let h;if(8&s.type)h=hn(c);else{const p=o[11];h=p.createComment("");const y=hr(s,o);xc(p,vp(p,y),h,function P0(s,o){return mn(s)?s.nextSibling(o):o.nextSibling}(p,y),!1)}o[s.index]=l=eE(c,o,h,s),w_(o,l)}return new sa(l,s,o)}class vy{constructor(o){this.queryList=o,this.matches=null}clone(){return new vy(this.queryList)}setDirty(){this.queryList.setDirty()}}class td{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const c=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let p=0;p<c;p++){const y=l.getByIndex(p);h.push(this.queries[y.indexInDeclarationView].clone())}return new td(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==a1(o,l).matches&&this.queries[l].setDirty()}}class by{constructor(o,l,c=null){this.predicate=o,this.flags=l,this.read=c}}class Lh{constructor(o=[]){this.queries=o}elementStart(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let c=0;c<this.length;c++){const h=null!==l?l.length:0,p=this.getByIndex(c).embeddedTView(o,h);p&&(p.indexInDeclarationView=c,null!==l?l.push(p):l=[p])}return null!==l?new Lh(l):null}template(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class fg{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new fg(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const p=c[h];this.matchTNodeWithReadOption(o,l,wy(l,p)),this.matchTNodeWithReadOption(o,l,Ma(l,o,p,!1,!1))}else c===Ph?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,Ma(l,o,c,!1,!1))}matchTNodeWithReadOption(o,l,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===vu||h===Fh||h===Ph&&4&l.type)this.addMatch(l.index,-2);else{const p=Ma(l,o,h,!1,!1);null!==p&&this.addMatch(l.index,p)}else this.addMatch(l.index,c)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function wy(s,o){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===o)return l[c+1];return null}function TI(s,o,l,c){return-1===l?function Ty(s,o){return 11&s.type?ts(s,o):4&s.type?dg(s,o):null}(o,s):-2===l?function Bh(s,o,l){return l===vu?ts(o,s):l===Ph?dg(o,s):l===Fh?yy(o,s):void 0}(s,o,c):gs(s,s[1],l,o)}function r1(s,o,l,c){const h=o[19].queries[c];if(null===h.matches){const p=s.data,y=l.matches,b=[];for(let D=0;D<y.length;D+=2){const S=y[D];b.push(S<0?null:TI(o,p[S],y[D+1],l.metadata.read))}h.matches=b}return h.matches}function Dy(s,o,l,c){const h=s.queries.getByIndex(l),p=h.matches;if(null!==p){const y=r1(s,o,h,l);for(let b=0;b<p.length;b+=2){const D=p[b];if(D>0)c.push(y[b/2]);else{const S=p[b+1],M=o[-D];for(let F=10;F<M.length;F++){const H=M[F];H[17]===H[3]&&Dy(H[1],H,S,c)}if(null!==M[9]){const F=M[9];for(let H=0;H<F.length;H++){const X=F[H];Dy(X[1],X,S,c)}}}}}return c}function i1(s){const o=Oe(),l=qt(),c=tc();nc(c+1);const h=a1(l,c);if(s.dirty&&Po(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?Dy(l,o,c,[]):r1(l,o,h,c);s.reset(p,Nh),s.notifyOnChanges()}return!0}return!1}function Vh(s,o,l){const c=qt();c.firstCreatePass&&(o1(c,new by(s,o,l),-1),2==(2&o)&&(c.staticViewQueries=!0)),Ey(c,Oe(),o)}function nd(s,o,l,c){const h=qt();if(h.firstCreatePass){const p=wn();o1(h,new by(o,l,c),p.index),function Cy(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}Ey(h,Oe(),l)}function pg(){return function s1(s,o){return s[19].queries[o].queryList}(Oe(),tc())}function Ey(s,o,l){const c=new Xc(4==(4&l));UD(s,o,c,c.destroy),null===o[19]&&(o[19]=new td),o[19].queries.push(new vy(c))}function o1(s,o,l){null===s.queries&&(s.queries=new Lh),s.queries.track(new fg(o,l))}function a1(s,o){return s.queries.getByIndex(o)}function l1(s,o){return dg(s,o)}function Eu(...s){}const v1=new Un("Application Initializer");let sd=(()=>{class s{constructor(l){this.appInits=l,this.resolve=Eu,this.reject=Eu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(Qb(p))l.push(p);else if(JE(p)){const y=new Promise((b,D)=>{p.subscribe({complete:b,error:D})});l.push(y)}}Promise.all(l).then(()=>{c()}).catch(h=>{this.reject(h)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(ct(v1,8))},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const b1=new Un("AppId",{providedIn:"root",factory:function od(){return`${ky()}${ky()}${ky()}`}});function ky(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ad=new Un("Platform Initializer"),RI=new Un("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),w1=new Un("appBootstrapListener");let OI=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Py=new Un("LocaleId",{providedIn:"root",factory:()=>Qt(Py,bt.Optional|bt.SkipSelf)||function kI(){return"undefined"!=typeof $localize&&$localize.locale||Jp}()}),PI=new Un("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class LI{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let BI=(()=>{class s{compileModuleSync(l){return new ag(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),p=Va(Ut(l).declarations).reduce((y,b)=>{const D=pt(b);return D&&y.push(new xl(D)),y},[]);return new LI(c,p)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const UI=(()=>Promise.resolve(0))();function Eg(s){"undefined"==typeof Zone?UI.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Zs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ia(!1),this.onMicrotaskEmpty=new ia(!1),this.onStable=new ia(!1),this.onError=new ia(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&l,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function NR(){let s=$t.requestAnimationFrame,o=$t.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function jI(s){const o=()=>{!function D1(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call($t,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Fy(s),s.isCheckStableRunning=!0,Cg(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Fy(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,h,p,y,b)=>{try{return E1(s),l.invokeTask(h,p,y,b)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),C1(s)}},onInvoke:(l,c,h,p,y,b,D)=>{try{return E1(s),l.invoke(h,p,y,b,D)}finally{s.shouldCoalesceRunChangeDetection&&o(),C1(s)}},onHasTask:(l,c,h,p)=>{l.hasTask(h,p),c===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,Fy(s),Cg(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(l,c,h,p)=>(l.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Zs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Zs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,l,c){return this._inner.run(o,l,c)}runTask(o,l,c,h){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+h,o,T1,Eu,Eu);try{return p.runTask(y,l,c)}finally{p.cancelTask(y)}}runGuarded(o,l,c){return this._inner.runGuarded(o,l,c)}runOutsideAngular(o){return this._outer.run(o)}}const T1={};function Cg(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Fy(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function E1(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function C1(s){s._nesting--,Cg(s)}class I1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ia,this.onMicrotaskEmpty=new ia,this.onStable=new ia,this.onError=new ia}run(o,l,c){return o.apply(l,c)}runGuarded(o,l,c){return o.apply(l,c)}runOutsideAngular(o){return o()}runTask(o,l,c,h){return o.apply(l,c)}}let S1=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Zs.assertNotInAngularZone(),Eg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Eg(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,h){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:p,updateCb:h})}whenStable(l,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,c,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(ct(Zs))},s.\u0275prov=sn({token:s,factory:s.\u0275fac}),s})(),Ly=(()=>{class s{constructor(){this._applications=new Map,By.addToWindow(this)}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return By.findTestabilityInTree(this,l,c)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class HI{addToWindow(o){}findTestabilityInTree(o,l,c){return null}}function GI(s){By=s}let By=new HI,Ya=null;const Vy=new Un("AllowMultipleToken"),A1=new Un("PlatformOnDestroy");class N1{constructor(o,l){this.name=o,this.token=l}}function M1(s,o,l=[]){const c=`Platform: ${o}`,h=new Un(c);return(p=[])=>{let y=Cu();if(!y||y.injector.get(Vy,!1)){const b=[...l,...p,{provide:h,useValue:!0}];s?s(b):function WI(s){if(Ya&&!Ya.get(Vy,!1))throw new Le(400,"");Ya=s;const o=s.get(Ig),l=s.get(ad,null);l&&l.forEach(c=>c())}(function ZI(s=[],o){return ea.create({name:o,providers:[{provide:E_,useValue:"platform"},{provide:A1,useValue:()=>Ya=null},...s]})}(b,c))}return function Zn(s){const o=Cu();if(!o)throw new Le(401,"");return o}()}}function Cu(){var s;return null!==(s=null==Ya?void 0:Ya.get(Ig))&&void 0!==s?s:null}let Ig=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const b=function ld(s,o){let l;return l="noop"===s?new I1:("zone.js"===s?void 0:s)||new Zs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),l}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),D=[{provide:Zs,useValue:b}];return b.run(()=>{const S=ea.create({providers:D,parent:this.injector,name:l.moduleType.name}),M=l.create(S),F=M.injector.get(Nc,null);if(!F)throw new Le(402,"");return b.runOutsideAngular(()=>{const H=b.onError.subscribe({next:X=>{F.handleError(X)}});M.onDestroy(()=>{Uy(this._modules,M),H.unsubscribe()})}),function KI(s,o,l){try{const c=l();return Qb(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(F,b,()=>{const H=M.injector.get(sd);return H.runInitializers(),H.donePromise.then(()=>(function Dw(s){(function Ht(s,o){null==s&&Je(o,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(Tw=s.toLowerCase().replace(/_/g,"-"))}(M.injector.get(Py,Jp)||Jp),this._moduleDoBootstrap(M),M))})})}bootstrapModule(l,c=[]){const h=x1({},c);return function $I(s,o,l){const c=new ag(l);return Promise.resolve(c)}(0,0,l).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(l){const c=l.injector.get(Sg);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new Le(403,"");l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Le(404,"");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const l=this._injector.get(A1,null);null==l||l(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(ct(ea))},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function x1(s,o){return Array.isArray(o)?o.reduce(x1,s):Object.assign(Object.assign({},s),o)}let Sg=(()=>{class s{constructor(l,c,h,p){this._zone=l,this._injector=c,this._exceptionHandler=h,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new R.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),b=new R.y(D=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Zs.assertNotInAngularZone(),Eg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{Zs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{S.unsubscribe(),M.unsubscribe()}});this.isStable=(0,ae.T)(y,b.pipe((0,ue.B)()))}bootstrap(l,c){if(!this._initStatus.done)throw new Le(405,"");let h;h=l instanceof ig?l:this._injector.get(ra).resolveComponentFactory(l),this.componentTypes.push(h.componentType);const p=function qI(s){return s.isBoundToModule}(h)?void 0:this._injector.get(Jc),b=h.create(ea.NULL,[],c||h.selector,p),D=b.location.nativeElement,S=b.injector.get(S1,null),M=S&&b.injector.get(Ly);return S&&M&&M.registerApplication(D,S),b.onDestroy(()=>{this.detachView(b.hostView),Uy(this.components,b),M&&M.unregisterApplication(D)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new Le(101,"");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;Uy(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(w1,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(ct(Zs),ct(ea),ct(Nc),ct(sd))},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Uy(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let Ag=!0,YI=!1;function Iu(){return YI=!0,Ag}function O1(){if(YI)throw new Error("Cannot enable prod mode after platform setup.");Ag=!1}let JI=(()=>{class s{}return s.__NG_ELEMENT_ID__=QI,s})();function QI(s){return function XI(s,o,l){if(rl(s)&&!l){const c=fr(s.index,o);return new Mh(c,c)}return 47&s.type?new Mh(o[16],o):null}(wn(),Oe(),16==(16&s))}class $y{constructor(){}supports(o){return lh(o)}create(o){return new qy(o)}}const F1=(s,o)=>o;class qy{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||F1}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,c=this._removalsHead,h=0,p=null;for(;l||c;){const y=!c||l&&l.currentIndex<$h(c,h,p)?l:c,b=$h(y,h,p),D=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(l=l._next,null==y.previousIndex)h++;else{p||(p=[]);const S=b-h,M=D-h;if(S!=M){for(let H=0;H<S;H++){const X=H<p.length?p[H]:p[H]=0,De=X+H;M<=De&&De<S&&(p[H]=X+1)}p[y.previousIndex]=M-S}}b!==D&&o(y,b,D)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!lh(o))throw new Le(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,y,l=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let b=0;b<this.length;b++)p=o[b],y=this._trackByFn(b,p),null!==l&&Object.is(l.trackById,y)?(c&&(l=this._verifyReinsertion(l,p,y,b)),Object.is(l.item,p)||this._addIdentityChange(l,p)):(l=this._mismatch(l,p,y,b),c=!0),l=l._next}else h=0,function mx(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[ah()]();let c;for(;!(c=l.next()).done;)o(c.value)}}(o,b=>{y=this._trackByFn(h,b),null!==l&&Object.is(l.trackById,y)?(c&&(l=this._verifyReinsertion(l,b,y,h)),Object.is(l.item,b)||this._addIdentityChange(l,b)):(l=this._mismatch(l,b,y,h),c=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,c,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,p,h)):o=this._addAfter(new _i(l,c),p,h),o}_verifyReinsertion(o,l,c,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,l,c),this._addToMoves(o,c),o}_moveAfter(o,l,c){return this._unlink(o),this._insertAfter(o,l,c),this._addToMoves(o,c),o}_addAfter(o,l,c){return this._insertAfter(o,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,c){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new Wy),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,c=o._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Wy),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class _i{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Do{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const l=o._prevDup,c=o._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class Wy{constructor(){this.map=new Map}put(o){const l=o.trackById;let c=this.map.get(l);c||(c=new Do,this.map.set(l,c)),c.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $h(s,o,l){const c=s.previousIndex;if(null===c)return c;let h=0;return l&&c<l.length&&(h=l[c]),c+o+h}class L1{constructor(){}supports(o){return o instanceof Map||Bc(o)}create(){return new VR}}class VR{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||Bc(o)))throw new Le(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const p=this._getOrCreateRecordForKey(h,c);l=this._insertBeforeOrAppend(l,p)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const c=o._prev;return l._next=o,l._prev=c,o._prev=l,c&&(c._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const p=h._prev,y=h._next;return p&&(p._next=y),y&&(y._prev=p),h._next=null,h._prev=null,h}const c=new iS(o);return this._records.set(o,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(c=>l(o[c],c))}}class iS{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Rg(){return new B1([new $y])}let B1=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||Rg()),deps:[[s,new po,new er]]}}find(l){const c=this.factories.find(h=>h.supports(l));if(null!=c)return c;throw new Le(901,"")}}return s.\u0275prov=sn({token:s,providedIn:"root",factory:Rg}),s})();function V1(){return new Zy([new L1])}let Zy=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||V1()),deps:[[s,new po,new er]]}}find(l){const c=this.factories.find(p=>p.supports(l));if(c)return c;throw new Le(901,"")}}return s.\u0275prov=sn({token:s,providedIn:"root",factory:V1}),s})();const HR=M1(null,"core",[]);let GR=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(ct(Sg))},s.\u0275mod=de({type:s}),s.\u0275inj=tn({}),s})()},3942:(it,we,k)=>{k.d(we,{Z:()=>Le});var u=k(2090),V=k(4859),R=k(9681),ae=k(1877);class ue{constructor(me,Se){this._delegate=me,this.firebase=Se,(0,R._addComponent)(me,new V.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,R.deleteApp)(this._delegate)))}_getService(me,Se=R._DEFAULT_ENTRY_NAME){var ze;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(me);return!Ze.isInitialized()&&"EXPLICIT"===(null===(ze=Ze.getComponent())||void 0===ze?void 0:ze.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:Se})}_removeServiceInstance(me,Se=R._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(Se)}_addComponent(me){(0,R._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,R._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function ye(){const $e=function ce($e){const me={},Se={__esModule:!0,initializeApp:function Me(ne,fe={}){const Ce=R.initializeApp(ne,fe);if((0,u.r3)(me,Ce.name))return me[Ce.name];const J=new $e(Ce,Se);return me[Ce.name]=J,J},app:Ze,registerVersion:R.registerVersion,setLogLevel:R.setLogLevel,onLog:R.onLog,apps:null,SDK_VERSION:R.SDK_VERSION,INTERNAL:{registerComponent:function Ee(ne){const fe=ne.name,Ce=fe.replace("-compat","");if(R._registerComponent(ne)&&"PUBLIC"===ne.type){const J=(re=Ze())=>{if("function"!=typeof re[Ce])throw pe.create("invalid-app-argument",{appName:fe});return re[Ce]()};void 0!==ne.serviceProps&&(0,u.ZB)(J,ne.serviceProps),Se[Ce]=J,$e.prototype[Ce]=function(...re){return this._getService.bind(this,fe).apply(this,ne.multipleInstances?re:[])}}return"PUBLIC"===ne.type?Se[Ce]:null},removeApp:function ze(ne){delete me[ne]},useAsService:function Ye(ne,fe){return"serverAuth"===fe?null:fe},modularAPIs:R}};function Ze(ne){if(!(0,u.r3)(me,ne=ne||R._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:ne});return me[ne]}return Se.default=Se,Object.defineProperty(Se,"apps",{get:function xe(){return Object.keys(me).map(ne=>me[ne])}}),Ze.App=$e,Se}(ue);return $e.INTERNAL=Object.assign(Object.assign({},$e.INTERNAL),{createFirebaseNamespace:ye,extendNamespace:function me(Se){(0,u.ZB)($e,Se)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),$e}(),j=new ae.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const $e=self.firebase.SDK_VERSION;$e&&$e.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Le=$;!function Ne($e){(0,R.registerVersion)("@firebase/app-compat","0.1.25",$e)}()},9681:(it,we,k)=>{k.r(we),k.d(we,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>ii,_DEFAULT_ENTRY_NAME:()=>Ht,_addComponent:()=>gn,_addOrOverwriteComponent:()=>sn,_apps:()=>un,_clearComponents:()=>Ui,_components:()=>On,_getProvider:()=>tn,_registerComponent:()=>Gt,_removeServiceInstance:()=>Tn,deleteApp:()=>bt,getApp:()=>Kn,getApps:()=>Hi,initializeApp:()=>Ei,onLog:()=>nn,registerVersion:()=>bn,setLogLevel:()=>Sr});var u=k(5861),V=k(4859),R=k(1877),ae=k(2090),ue=k(8766);class _e{constructor(ee){this.container=ee}getPlatformInfoString(){return this.container.getProviders().map(ke=>{if(function pe(G){const ee=G.getComponent();return"VERSION"===(null==ee?void 0:ee.type)}(ke)){const nt=ke.getImmediate();return`${nt.library}/${nt.version}`}return null}).filter(ke=>ke).join(" ")}}const ce="@firebase/app",$=new R.Yd("@firebase/app"),Ht="[DEFAULT]",Je={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},un=new Map,On=new Map;function gn(G,ee){try{G.container.addComponent(ee)}catch(ke){$.debug(`Component ${ee.name} failed to register with FirebaseApp ${G.name}`,ke)}}function sn(G,ee){G.container.addOrOverwriteComponent(ee)}function Gt(G){const ee=G.name;if(On.has(ee))return $.debug(`There were multiple attempts to register component ${ee}.`),!1;On.set(ee,G);for(const ke of un.values())gn(ke,G);return!0}function tn(G,ee){const ke=G.container.getProvider("heartbeat").getImmediate({optional:!0});return ke&&ke.triggerHeartbeat(),G.container.getProvider(ee)}function Tn(G,ee,ke=Ht){tn(G,ee).clearInstance(ke)}function Ui(){On.clear()}const Sn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ji{constructor(ee,ke,nt){this._isDeleted=!1,this._options=Object.assign({},ee),this._config=Object.assign({},ke),this._name=ke.name,this._automaticDataCollectionEnabled=ke.automaticDataCollectionEnabled,this._container=nt,this.container.addComponent(new V.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ee){this._isDeleted=ee}checkDestroyed(){if(this.isDeleted)throw Sn.create("app-deleted",{appName:this._name})}}const ii="9.8.1";function Ei(G,ee={}){"object"!=typeof ee&&(ee={name:ee});const ke=Object.assign({name:Ht,automaticDataCollectionEnabled:!1},ee),nt=ke.name;if("string"!=typeof nt||!nt)throw Sn.create("bad-app-name",{appName:String(nt)});const vt=un.get(nt);if(vt){if((0,ae.vZ)(G,vt.options)&&(0,ae.vZ)(ke,vt.config))return vt;throw Sn.create("duplicate-app",{appName:nt})}const kt=new V.H0(nt);for(const Ct of On.values())kt.addComponent(Ct);const on=new ji(G,ke,kt);return un.set(nt,on),on}function Kn(G=Ht){const ee=un.get(G);if(!ee)throw Sn.create("no-app",{appName:G});return ee}function Hi(){return Array.from(un.values())}function bt(G){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,u.Z)(function*(G){const ee=G.name;un.has(ee)&&(un.delete(ee),yield Promise.all(G.container.getProviders().map(ke=>ke.delete())),G.isDeleted=!0)})).apply(this,arguments)}function bn(G,ee,ke){var nt;let vt=null!==(nt=Je[G])&&void 0!==nt?nt:G;ke&&(vt+=`-${ke}`);const kt=vt.match(/\s|\//),on=ee.match(/\s|\//);if(kt||on){const Ct=[`Unable to register library "${vt}" with version "${ee}":`];return kt&&Ct.push(`library name "${vt}" contains illegal characters (whitespace or "/")`),kt&&on&&Ct.push("and"),on&&Ct.push(`version name "${ee}" contains illegal characters (whitespace or "/")`),void $.warn(Ct.join(" "))}Gt(new V.wA(`${vt}-version`,()=>({library:vt,version:ee}),"VERSION"))}function nn(G,ee){if(null!==G&&"function"!=typeof G)throw Sn.create("invalid-log-argument");(0,R.Am)(G,ee)}function Sr(G){(0,R.Ub)(G)}const Dn="firebase-heartbeat-store";let cr=null;function Ms(){return cr||(cr=(0,ue.X3)("firebase-heartbeat-database",1,{upgrade:(G,ee)=>{0===ee&&G.createObjectStore(Dn)}}).catch(G=>{throw Sn.create("storage-open",{originalErrorMessage:G.message})})),cr}function mt(){return(mt=(0,u.Z)(function*(G){try{return(yield Ms()).transaction(Dn).objectStore(Dn).get(oi(G))}catch(ee){throw Sn.create("storage-get",{originalErrorMessage:ee.message})}})).apply(this,arguments)}function lt(G,ee){return si.apply(this,arguments)}function si(){return(si=(0,u.Z)(function*(G,ee){try{const nt=(yield Ms()).transaction(Dn,"readwrite");return yield nt.objectStore(Dn).put(ee,oi(G)),nt.done}catch(ke){throw Sn.create("storage-set",{originalErrorMessage:ke.message})}})).apply(this,arguments)}function oi(G){return`${G.name}!${G.options.appId}`}class kn{constructor(ee){this.container=ee,this._heartbeatsCache=null;const ke=this.container.getProvider("app").getImmediate();this._storage=new q(ke),this._heartbeatsCachePromise=this._storage.read().then(nt=>(this._heartbeatsCache=nt,nt))}triggerHeartbeat(){var ee=this;return(0,u.Z)(function*(){const nt=ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),vt=cn();if(null===ee._heartbeatsCache&&(ee._heartbeatsCache=yield ee._heartbeatsCachePromise),ee._heartbeatsCache.lastSentHeartbeatDate!==vt&&!ee._heartbeatsCache.heartbeats.some(kt=>kt.date===vt))return ee._heartbeatsCache.heartbeats.push({date:vt,agent:nt}),ee._heartbeatsCache.heartbeats=ee._heartbeatsCache.heartbeats.filter(kt=>{const on=new Date(kt.date).valueOf();return Date.now()-on<=2592e6}),ee._storage.overwrite(ee._heartbeatsCache)})()}getHeartbeatsHeader(){var ee=this;return(0,u.Z)(function*(){if(null===ee._heartbeatsCache&&(yield ee._heartbeatsCachePromise),null===ee._heartbeatsCache||0===ee._heartbeatsCache.heartbeats.length)return"";const ke=cn(),{heartbeatsToSend:nt,unsentEntries:vt}=function U(G,ee=1024){const ke=[];let nt=G.slice();for(const vt of G){const kt=ke.find(on=>on.agent===vt.agent);if(kt){if(kt.dates.push(vt.date),z(ke)>ee){kt.dates.pop();break}}else if(ke.push({agent:vt.agent,dates:[vt.date]}),z(ke)>ee){ke.pop();break}nt=nt.slice(1)}return{heartbeatsToSend:ke,unsentEntries:nt}}(ee._heartbeatsCache.heartbeats),kt=(0,ae.L)(JSON.stringify({version:2,heartbeats:nt}));return ee._heartbeatsCache.lastSentHeartbeatDate=ke,vt.length>0?(ee._heartbeatsCache.heartbeats=vt,yield ee._storage.overwrite(ee._heartbeatsCache)):(ee._heartbeatsCache.heartbeats=[],ee._storage.overwrite(ee._heartbeatsCache)),kt})()}}function cn(){return(new Date).toISOString().substring(0,10)}class q{constructor(ee){this.app=ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ee=this;return(0,u.Z)(function*(){return(yield ee._canUseIndexedDBPromise)&&(yield function Zt(G){return mt.apply(this,arguments)}(ee.app))||{heartbeats:[]}})()}overwrite(ee){var ke=this;return(0,u.Z)(function*(){var nt;if(yield ke._canUseIndexedDBPromise){const kt=yield ke.read();return lt(ke.app,{lastSentHeartbeatDate:null!==(nt=ee.lastSentHeartbeatDate)&&void 0!==nt?nt:kt.lastSentHeartbeatDate,heartbeats:ee.heartbeats})}})()}add(ee){var ke=this;return(0,u.Z)(function*(){var nt;if(yield ke._canUseIndexedDBPromise){const kt=yield ke.read();return lt(ke.app,{lastSentHeartbeatDate:null!==(nt=ee.lastSentHeartbeatDate)&&void 0!==nt?nt:kt.lastSentHeartbeatDate,heartbeats:[...kt.heartbeats,...ee.heartbeats]})}})()}}function z(G){return(0,ae.L)(JSON.stringify({version:2,heartbeats:G})).length}!function Te(G){Gt(new V.wA("platform-logger",ee=>new _e(ee),"PRIVATE")),Gt(new V.wA("heartbeat",ee=>new kn(ee),"PRIVATE")),bn(ce,"0.7.24",G),bn(ce,"0.7.24","esm2017"),bn("fire-js","")}("")},4859:(it,we,k)=>{k.d(we,{H0:()=>ce,wA:()=>R});var u=k(5861),V=k(2090);class R{constructor($,j,ie){this.name=$,this.instanceFactory=j,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ae="[DEFAULT]";class ue{constructor($,j){this.name=$,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const j=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(j)){const ie=new V.BH;if(this.instancesDeferred.set(j,ie),this.isInitialized(j)||this.shouldAutoInitialize())try{const Ke=this.getOrInitializeService({instanceIdentifier:j});Ke&&ie.resolve(Ke)}catch(Ke){}}return this.instancesDeferred.get(j).promise}getImmediate($){var j;const ie=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),Ke=null!==(j=null==$?void 0:$.optional)&&void 0!==j&&j;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(Ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(Ne){if(Ke)return null;throw Ne}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function pe(ye){return"EAGER"===ye.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(j){}for(const[j,ie]of this.instancesDeferred.entries()){const Ke=this.normalizeInstanceIdentifier(j);try{const Ne=this.getOrInitializeService({instanceIdentifier:Ke});ie.resolve(Ne)}catch(Ne){}}}}clearInstance($=ae){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,u.Z)(function*(){const j=Array.from($.instances.values());yield Promise.all([...j.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...j.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ae){return this.instances.has($)}getOptions($=ae){return this.instancesOptions.get($)||{}}initialize($={}){const{options:j={}}=$,ie=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ke=this.getOrInitializeService({instanceIdentifier:ie,options:j});for(const[Ne,Le]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(Ne)&&Le.resolve(Ke);return Ke}onInit($,j){var ie;const Ke=this.normalizeInstanceIdentifier(j),Ne=null!==(ie=this.onInitCallbacks.get(Ke))&&void 0!==ie?ie:new Set;Ne.add($),this.onInitCallbacks.set(Ke,Ne);const Le=this.instances.get(Ke);return Le&&$(Le,Ke),()=>{Ne.delete($)}}invokeOnInitCallbacks($,j){const ie=this.onInitCallbacks.get(j);if(ie)for(const Ke of ie)try{Ke($,j)}catch(Ne){}}getOrInitializeService({instanceIdentifier:$,options:j={}}){let ie=this.instances.get($);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(ye=$,ye===ae?void 0:ye),options:j}),this.instances.set($,ie),this.instancesOptions.set($,j),this.invokeOnInitCallbacks(ie,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,ie)}catch(Ke){}var ye;return ie||null}normalizeInstanceIdentifier($=ae){return this.component?this.component.multipleInstances?$:ae:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor($){this.name=$,this.providers=new Map}addComponent($){const j=this.getProvider($.name);if(j.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);j.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const j=new ue($,this);return this.providers.set($,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(it,we,k)=>{k.d(we,{Am:()=>ye,Ub:()=>ce,Yd:()=>pe,in:()=>V});const u=[];var V=(()=>{return($=V||(V={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",V;var $})();const R={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},ae=V.INFO,ue={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},_e=($,j,...ie)=>{if(j<$.logLevel)return;const Ke=(new Date).toISOString(),Ne=ue[j];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Ne](`[${Ke}]  ${$.name}:`,...ie)};class pe{constructor(j){this.name=j,this._logLevel=ae,this._logHandler=_e,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in V))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?R[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...j),this._logHandler(this,V.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...j),this._logHandler(this,V.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,V.INFO,...j),this._logHandler(this,V.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,V.WARN,...j),this._logHandler(this,V.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...j),this._logHandler(this,V.ERROR,...j)}}function ce($){u.forEach(j=>{j.setLogLevel($)})}function ye($,j){for(const ie of u){let Ke=null;j&&j.level&&(Ke=R[j.level]),ie.userLogHandler=null===$?null:(Ne,Le,...$e)=>{const me=$e.map(Se=>{if(null==Se)return null;if("string"==typeof Se)return Se;if("number"==typeof Se||"boolean"==typeof Se)return Se.toString();if(Se instanceof Error)return Se.message;try{return JSON.stringify(Se)}catch(ze){return null}}).filter(Se=>Se).join(" ");Le>=(null!=Ke?Ke:Ne.logLevel)&&$({level:V[Le].toLowerCase(),message:me,args:$e,type:Ne.name})}}}},8766:(it,we,k)=>{k.d(we,{Lj:()=>Me,X3:()=>Ze});var u=k(5861);let R,ae;const pe=new WeakMap,ce=new WeakMap,ye=new WeakMap,$=new WeakMap,j=new WeakMap;let Ne={get(fe,Ce,J){if(fe instanceof IDBTransaction){if("done"===Ce)return ce.get(fe);if("objectStoreNames"===Ce)return fe.objectStoreNames||ye.get(fe);if("store"===Ce)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return Se(fe[Ce])},set:(fe,Ce,J)=>(fe[Ce]=J,!0),has:(fe,Ce)=>fe instanceof IDBTransaction&&("done"===Ce||"store"===Ce)||Ce in fe};function me(fe){return"function"==typeof fe?function $e(fe){return fe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(fe)?function(...Ce){return fe.apply(ze(this),Ce),Se(pe.get(this))}:function(...Ce){return Se(fe.apply(ze(this),Ce))}:function(Ce,...J){const re=fe.call(ze(this),Ce,...J);return ye.set(re,Ce.sort?Ce.sort():[Ce]),Se(re)}}(fe):(fe instanceof IDBTransaction&&function Ke(fe){if(ce.has(fe))return;const Ce=new Promise((J,re)=>{const oe=()=>{fe.removeEventListener("complete",be),fe.removeEventListener("error",he),fe.removeEventListener("abort",he)},be=()=>{J(),oe()},he=()=>{re(fe.error||new DOMException("AbortError","AbortError")),oe()};fe.addEventListener("complete",be),fe.addEventListener("error",he),fe.addEventListener("abort",he)});ce.set(fe,Ce)}(fe),((fe,Ce)=>Ce.some(J=>fe instanceof J))(fe,function ue(){return R||(R=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(fe,Ne):fe)}function Se(fe){if(fe instanceof IDBRequest)return function ie(fe){const Ce=new Promise((J,re)=>{const oe=()=>{fe.removeEventListener("success",be),fe.removeEventListener("error",he)},be=()=>{J(Se(fe.result)),oe()},he=()=>{re(fe.error),oe()};fe.addEventListener("success",be),fe.addEventListener("error",he)});return Ce.then(J=>{J instanceof IDBCursor&&pe.set(J,fe)}).catch(()=>{}),j.set(Ce,fe),Ce}(fe);if($.has(fe))return $.get(fe);const Ce=me(fe);return Ce!==fe&&($.set(fe,Ce),j.set(Ce,fe)),Ce}const ze=fe=>j.get(fe);function Ze(fe,Ce,{blocked:J,upgrade:re,blocking:oe,terminated:be}={}){const he=indexedDB.open(fe,Ce),Ve=Se(he);return re&&he.addEventListener("upgradeneeded",yt=>{re(Se(he.result),yt.oldVersion,yt.newVersion,Se(he.transaction))}),J&&he.addEventListener("blocked",()=>J()),Ve.then(yt=>{be&&yt.addEventListener("close",()=>be()),oe&&yt.addEventListener("versionchange",()=>oe())}).catch(()=>{}),Ve}function Me(fe,{blocked:Ce}={}){const J=indexedDB.deleteDatabase(fe);return Ce&&J.addEventListener("blocked",()=>Ce()),Se(J).then(()=>{})}const xe=["get","getKey","getAll","getAllKeys","count"],Ee=["put","add","delete","clear"],Ye=new Map;function ne(fe,Ce){if(!(fe instanceof IDBDatabase)||Ce in fe||"string"!=typeof Ce)return;if(Ye.get(Ce))return Ye.get(Ce);const J=Ce.replace(/FromIndex$/,""),re=Ce!==J,oe=Ee.includes(J);if(!(J in(re?IDBIndex:IDBObjectStore).prototype)||!oe&&!xe.includes(J))return;const be=function(){var he=(0,u.Z)(function*(Ve,...yt){const en=this.transaction(Ve,oe?"readwrite":"readonly");let Ht=en.store;return re&&(Ht=Ht.index(yt.shift())),(yield Promise.all([Ht[J](...yt),oe&&en.done]))[0]});return function(yt){return he.apply(this,arguments)}}();return Ye.set(Ce,be),be}!function Le(fe){Ne=fe(Ne)}(fe=>V2(B2({},fe),{get:(Ce,J,re)=>ne(Ce,J)||fe.get(Ce,J,re),has:(Ce,J)=>!!ne(Ce,J)||fe.has(Ce,J)}))},5861:(it,we,k)=>{function u(R,ae,ue,_e,pe,ce,ye){try{var $=R[ce](ye),j=$.value}catch(ie){return void ue(ie)}$.done?ae(j):Promise.resolve(j).then(_e,pe)}function V(R){return function(){var ae=this,ue=arguments;return new Promise(function(_e,pe){var ce=R.apply(ae,ue);function ye(j){u(ce,_e,pe,ye,$,"next",j)}function $(j){u(ce,_e,pe,ye,$,"throw",j)}ye(void 0)})}}k.d(we,{Z:()=>V})}},it=>{it(it.s=8678)}]);